{"id":"6cd95fea-e94a-5c70-9d85-187a5fc54ed3","content":"# Quickstart  \nIn this tutorial, you'll learn how to upload your first data table and train your first engine. You can do it via the CLI or in the console.","document_title":"Quickstart","h1":"Quickstart","h2":"","h3":"","h4":"","file_path":"quickstart.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/quickstart.md","chunk_metadata":"{\"Header 1\": \"Quickstart\"}","created_at":"2026-01-30T13:46:43.803961","updated_at":"2026-01-30T13:46:43.803961"}
{"id":"a771ca76-cf3e-558f-b243-438c6c49a8e1","content":"### Cli","document_title":"Quickstart","h1":"Quickstart","h2":"","h3":"Cli","h4":"","file_path":"quickstart.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/quickstart.md","chunk_metadata":"{\"Header 1\": \"Quickstart\", \"Header 3\": \"Cli\"}","created_at":"2026-01-30T13:46:43.803986","updated_at":"2026-01-30T13:46:43.803986"}
{"id":"03966d8e-b8a3-59e4-8086-ca3fd7c9f9c0","content":"## Install the CLI\nThe command-line interface is the fastest way to update your config in Shaped:\n```bash\npip install shaped\n```\n> *Having trouble installing the CLI? [Common errors](guides\/errors#cannot-install-cli)*","document_title":"Quickstart","h1":"Quickstart","h2":"Install the CLI","h3":"","h4":"","file_path":"quickstart.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/quickstart.md","chunk_metadata":"{\"Header 1\": \"Quickstart\", \"Header 2\": \"Install the CLI\"}","created_at":"2026-01-30T13:46:43.803994","updated_at":"2026-01-30T13:46:43.803994"}
{"id":"8e74fd90-1a65-5258-92fe-872cda7d52c0","content":"## Initialize the client with your API key\nAdd your API key to authenticate into your account. If you don't have an API key yet, see [Get your API key](overview\/getting-an-api-key).  \n```bash\nshaped init --api-key <YOUR_API_KEY>\n```","document_title":"Quickstart","h1":"Quickstart","h2":"Initialize the client with your API key","h3":"","h4":"","file_path":"quickstart.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/quickstart.md","chunk_metadata":"{\"Header 1\": \"Quickstart\", \"Header 2\": \"Initialize the client with your API key\"}","created_at":"2026-01-30T13:46:43.804000","updated_at":"2026-01-30T13:46:43.804000"}
{"id":"b246b93f-3098-528d-8c74-0504357beb54","content":"## Download sample data and engine config\nTo start quickly, use our sample data based on movielens to build a semantic search model.  \nDownload the sample data and engine config from S3:\n```bash\ncurl -L \\\n-O \"https:\/\/shaped-onboarding-demo-datasets.s3.us-east-2.amazonaws.com\/movielens\/movielens_items.jsonl\" \\\n-O \"https:\/\/shaped-onboarding-demo-datasets.s3.us-east-2.amazonaws.com\/movielens\/movielens_semantic_search.yaml\"\n```","document_title":"Quickstart","h1":"Quickstart","h2":"Download sample data and engine config","h3":"","h4":"","file_path":"quickstart.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/quickstart.md","chunk_metadata":"{\"Header 1\": \"Quickstart\", \"Header 2\": \"Download sample data and engine config\"}","created_at":"2026-01-30T13:46:43.804005","updated_at":"2026-01-30T13:46:43.804005"}
{"id":"ff832a19-0475-5e3b-9948-87ae848c74aa","content":"## Upload your table\nUpload the table that you downloaded locally:\n```bash\nshaped create-table-from-uri --name movielens_items --path movielens_items.jsonl --type jsonl\n```","document_title":"Quickstart","h1":"Quickstart","h2":"Upload your table","h3":"","h4":"","file_path":"quickstart.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/quickstart.md","chunk_metadata":"{\"Header 1\": \"Quickstart\", \"Header 2\": \"Upload your table\"}","created_at":"2026-01-30T13:46:43.804010","updated_at":"2026-01-30T13:46:43.804010"}
{"id":"acac7acf-a654-52e0-996c-b8dc422f2db4","content":"## Create your engine\nEvery relevance engine is configured with YAML. Upload the config in `movielens_semantic_search.yaml` using the CLI to create a semantic search engine:\n```bash\nshaped create-engine --file movielens_semantic_search.yaml\n```  \n<details>\n<summary>\nFull engine config\n<\/summary>\n```yaml\nversion: v2\nname: movielens_semantic_search\ndata:\nitem_table:\nname: movielens_items\ntype: table\nindex:\nlexical_search: # enables BM25 lexical search on item fields\nitem_fields:\n- movie_title\n- description\n- cast\n- genres\n- writers\n- directors\n- interests\nembeddings:\n- name: content_embedding # enables vector search\nencoder:\ntype: hugging_face\nmodel_name: sentence-transformers\/all-MiniLM-L6-v2\nbatch_size: 256\nitem_fields:\n- movie_title\n- description\n- cast\n- genres\n- writers\n- directors\n- interests\n```\n<\/details>","document_title":"Quickstart","h1":"Quickstart","h2":"Create your engine","h3":"","h4":"","file_path":"quickstart.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/quickstart.md","chunk_metadata":"{\"Header 1\": \"Quickstart\", \"Header 2\": \"Create your engine\"}","created_at":"2026-01-30T13:46:43.804014","updated_at":"2026-01-30T13:46:43.804014"}
{"id":"b77e1ac0-66ec-5f7c-b035-ba781a94d245","content":"### Ui\nWe'll use the `movielens` table enriched with data from IMDb and build a semantic search model.","document_title":"Quickstart","h1":"Quickstart","h2":"Create your engine","h3":"Ui","h4":"","file_path":"quickstart.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/quickstart.md","chunk_metadata":"{\"Header 1\": \"Quickstart\", \"Header 2\": \"Create your engine\", \"Header 3\": \"Ui\"}","created_at":"2026-01-30T13:46:43.804022","updated_at":"2026-01-30T13:46:43.804022"}
{"id":"42aa84ce-57b9-54b3-8c2a-32fe90837c4a","content":"## Step 1: Upload the data as a new table  \n1. Download the sample table data here - <a href=\"https:\/\/shaped-onboarding-demo-datasets.s3.us-east-2.amazonaws.com\/movielens\/movielens_items.jsonl\" download>movielens_items.jsonl<\/a>\n2. Open your Shaped dashboard\n3. Click **Tables** in the leftpane\n4. Click **Add new table** in the top right\n5. Choose \"Local file upload\"\n6. Choose the JSONL file you downloaded","document_title":"Quickstart","h1":"Quickstart","h2":"Step 1: Upload the data as a new table","h3":"","h4":"","file_path":"quickstart.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/quickstart.md","chunk_metadata":"{\"Header 1\": \"Quickstart\", \"Header 2\": \"Step 1: Upload the data as a new table\"}","created_at":"2026-01-30T13:46:43.804031","updated_at":"2026-01-30T13:46:43.804031"}
{"id":"462ee7e3-f0d4-58a2-ad5d-ab8b49f7c678","content":"## Step 2: Configure a new engine  \n1. Download the sample engine config here - <a href=\"https:\/\/shaped-onboarding-demo-datasets.s3.us-east-2.amazonaws.com\/movielens\/movielens_semantic_search.yaml\" download>movielens_semantic_search<\/a>\n2. In the leftpane, go to **Engines**\n3. Click **Upload a new engine** in the top right\n4. Choose the YAML file you downloaded in step 1","document_title":"Quickstart","h1":"Quickstart","h2":"Step 2: Configure a new engine","h3":"","h4":"","file_path":"quickstart.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/quickstart.md","chunk_metadata":"{\"Header 1\": \"Quickstart\", \"Header 2\": \"Step 2: Configure a new engine\"}","created_at":"2026-01-30T13:46:43.804036","updated_at":"2026-01-30T13:46:43.804036"}
{"id":"0fe1ade6-40fd-513b-9d76-1417e777514e","content":"## Step 3: Query your engine  \n1. In the leftpane, go to the **Query** section\n2. Copy the query below into the query editor on the left\n3. Press **Run**  \n```sql\nSELECT *\nFROM text_search(\nquery='movies with Christopher Nolan',\nmode='vector',\ntext_embedding_ref='content_embedding',\nlimit=50)\nLIMIT 200\n```  \nOnce your engine is up and running, you\u2019re ready to integrate it into your application. Read the [Queries](\/docs\/v2\/concepts\/queries) guide to learn how to get search results using your engine.","document_title":"Quickstart","h1":"Quickstart","h2":"Step 3: Query your engine","h3":"","h4":"","file_path":"quickstart.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/quickstart.md","chunk_metadata":"{\"Header 1\": \"Quickstart\", \"Header 2\": \"Step 3: Query your engine\"}","created_at":"2026-01-30T13:46:43.804041","updated_at":"2026-01-30T13:46:43.804041"}
{"id":"5172dc50-1e34-5af1-af34-90b859486c61","content":"# ELSA (Autoencoder)  \n## Description  \nThe ELSA (Efficient Latent Sparse Autoencoder) policy implements a scalable shallow linear autoencoder designed for implicit feedback collaborative filtering. It learns item-item relationships by reconstructing user interaction vectors. To improve scalability over models like EASE, it uses a factorized hidden layer structure (low-rank plus sparse).  \n**Policy Type:** `elsa`\n**Supports:** `embedding_policy`, `scoring_policy`","document_title":"ELSA (Autoencoder)","h1":"ELSA (Autoencoder)","h2":"Description","h3":"","h4":"","file_path":"model_library\/elsa.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/elsa.md","chunk_metadata":"{\"Header 1\": \"ELSA (Autoencoder)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.804301","updated_at":"2026-01-30T13:46:43.804301"}
{"id":"8d81eb72-22da-5724-aee5-a3e8348d64cf","content":"## Hyperparameter tuning  \n- `event_values`: List of event value strings to filter interactions by.\n- `batch_size`: Number of samples processed before updating model weights.\n- `n_epochs`: Number of complete passes through the training data.\n- `factors`: Number of latent factors in the matrix factorization.\n- `lr`: Learning rate for gradient descent optimization.\n- `device`\n- `strategy`\n- `patience`: Number of epochs to wait without improvement before early stopping.\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=embedding_policy_elsa.yaml\npolicy_configs:\nembedding_policy: # Or scoring_policy\npolicy_type: elsa\n# Training Hyperparameters\nbatch_size: 512         # Samples per training batch\nn_epochs: 20            # Number of training epochs\nlr: 0.1                 # Learning rate\n# Model Hyperparameters\nfactors: 10             # Rank (number of latent factors) for the low-rank part\n```\n<\/details>","document_title":"ELSA (Autoencoder)","h1":"ELSA (Autoencoder)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/elsa.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/elsa.md","chunk_metadata":"{\"Header 1\": \"ELSA (Autoencoder)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.804307","updated_at":"2026-01-30T13:46:43.804307"}
{"id":"43458c26-42dc-5e6a-81ce-f492e5db6bcc","content":"## Usage  \n### Use this model when:\n- You have large-scale datasets and need scalability\n- You're working with implicit feedback data\n- You want better scalability than EASE while maintaining similar performance\n- You need efficient item-item similarity computation\n- You want a modern autoencoder approach for collaborative filtering","document_title":"ELSA (Autoencoder)","h1":"ELSA (Autoencoder)","h2":"Usage","h3":"Use this model when:","h4":"","file_path":"model_library\/elsa.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/elsa.md","chunk_metadata":"{\"Header 1\": \"ELSA (Autoencoder)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use this model when:\"}","created_at":"2026-01-30T13:46:43.804311","updated_at":"2026-01-30T13:46:43.804311"}
{"id":"4398bde3-f7e8-5296-8970-a59d054765a6","content":"### Choose a different model when:\n- You have very small datasets (EASE might be simpler)\n- You need to incorporate item content features (use Two-Tower or BeeFormer)\n- You want to model sequential patterns (use sequential models)\n- You have explicit feedback only (SVD might be more appropriate)","document_title":"ELSA (Autoencoder)","h1":"ELSA (Autoencoder)","h2":"Usage","h3":"Choose a different model when:","h4":"","file_path":"model_library\/elsa.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/elsa.md","chunk_metadata":"{\"Header 1\": \"ELSA (Autoencoder)\", \"Header 2\": \"Usage\", \"Header 3\": \"Choose a different model when:\"}","created_at":"2026-01-30T13:46:43.804315","updated_at":"2026-01-30T13:46:43.804315"}
{"id":"0e11b4a8-5d89-5e93-b981-661ac2c3695b","content":"### Use cases\n- Large e-commerce platforms with millions of products\n- Content streaming services with extensive catalogs\n- Social media feed recommendations\n- Any large-scale implicit feedback recommendation system","document_title":"ELSA (Autoencoder)","h1":"ELSA (Autoencoder)","h2":"Usage","h3":"Use cases","h4":"","file_path":"model_library\/elsa.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/elsa.md","chunk_metadata":"{\"Header 1\": \"ELSA (Autoencoder)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use cases\"}","created_at":"2026-01-30T13:46:43.804319","updated_at":"2026-01-30T13:46:43.804319"}
{"id":"29856ee7-98c2-5ab5-815e-a49b291d2858","content":"## Reference  \n*   Jesrani, V., et al. (2022). [Scalable Linear Shallow Autoencoder for Collaborative Filtering](https:\/\/dl.acm.org\/doi\/10.1145\/3523227.3551482). WSDM.","document_title":"ELSA (Autoencoder)","h1":"ELSA (Autoencoder)","h2":"Reference","h3":"","h4":"","file_path":"model_library\/elsa.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/elsa.md","chunk_metadata":"{\"Header 1\": \"ELSA (Autoencoder)\", \"Header 2\": \"Reference\"}","created_at":"2026-01-30T13:46:43.804322","updated_at":"2026-01-30T13:46:43.804322"}
{"id":"71ec51c1-7792-5128-b04f-6b010e18fc38","content":"# ALS (Matrix Factorization)  \n## Description  \nThe ALS (Alternating Least Squares) policy implements matrix factorization for collaborative filtering, particularly well-suited for implicit feedback datasets. It decomposes the user-item interaction matrix into user and item latent factor matrices (P and Q) by iteratively solving regularized least squares problems, alternating between fixing P and solving for Q, then fixing Q and solving for P. It commonly incorporates confidence weighting (like BM25 or a linear weighting scheme) to handle implicit feedback where observed interactions have higher confidence than unobserved ones.  \n**Policy Type:** `als`\n**Supports:** `embedding_policy`, `scoring_policy`","document_title":"ALS (Matrix Factorization)","h1":"ALS (Matrix Factorization)","h2":"Description","h3":"","h4":"","file_path":"model_library\/als.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/als.md","chunk_metadata":"{\"Header 1\": \"ALS (Matrix Factorization)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.804617","updated_at":"2026-01-30T13:46:43.804617"}
{"id":"6c1e5f99-42e9-5500-b450-0fd03db242bb","content":"## Hyperparameter tuning  \n- `event_values`: List of event value strings to filter interactions by.\n- `factors`: Number of latent factors in the matrix factorization.\n- `regularization`: Regularization parameter to prevent overfitting.\n- `bm25`: Whether to use BM25 weighting scheme.\n- `bm25_k1`: BM25 coefficient for item frequency factor.\n- `bm25_b`: BM25 coefficient for document length factor.\n- `use_features`: Whether to use entity features in the model.\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=embedding_policy_als.yaml\npolicy_configs:\nembedding_policy: # Can also be used under scoring_policy\npolicy_type: als\nfactors: 64           # Number of latent factors (embedding dimension)\nregularization: 0.1  # Regularization parameter (lambda)\niterations: 15        # Number of ALS iterations\n# Implicit Feedback Handling\nbm25: true            # Whether to use BM25 weighting (alternative: simple alpha weighting)\nbm25_k1: 1.2          # BM25 k1 parameter (if bm25=true)\nbm25_b: 0.75          # BM25 b parameter (if bm25=true)\n```\n<\/details>","document_title":"ALS (Matrix Factorization)","h1":"ALS (Matrix Factorization)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/als.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/als.md","chunk_metadata":"{\"Header 1\": \"ALS (Matrix Factorization)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.804622","updated_at":"2026-01-30T13:46:43.804622"}
{"id":"6569d920-5251-5fc5-a03c-2b7522863f87","content":"## Usage  \n### Use this model when:\n- You have implicit feedback data (clicks, views, purchases) rather than explicit ratings\n- You need a simple, interpretable collaborative filtering approach\n- You want to learn item-item similarity from user interaction patterns\n- You have a large amount of data and need efficient training\n- You're building a baseline model before trying more complex approaches","document_title":"ALS (Matrix Factorization)","h1":"ALS (Matrix Factorization)","h2":"Usage","h3":"Use this model when:","h4":"","file_path":"model_library\/als.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/als.md","chunk_metadata":"{\"Header 1\": \"ALS (Matrix Factorization)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use this model when:\"}","created_at":"2026-01-30T13:46:43.804626","updated_at":"2026-01-30T13:46:43.804626"}
{"id":"03ad621c-8f10-5d37-8540-c171287c3e73","content":"### Choose a different model when:\n- You have rich item metadata or text features that you want to leverage (use Two-Tower or BeeFormer instead)\n- You need to model sequential patterns or temporal dependencies (use sequential models like SASRec)\n- You have very sparse data with limited interactions per user\/item\n- You need the highest possible accuracy and can invest in more complex models","document_title":"ALS (Matrix Factorization)","h1":"ALS (Matrix Factorization)","h2":"Usage","h3":"Choose a different model when:","h4":"","file_path":"model_library\/als.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/als.md","chunk_metadata":"{\"Header 1\": \"ALS (Matrix Factorization)\", \"Header 2\": \"Usage\", \"Header 3\": \"Choose a different model when:\"}","created_at":"2026-01-30T13:46:43.804629","updated_at":"2026-01-30T13:46:43.804629"}
{"id":"0f5a2a5a-0910-583c-99c8-04ef1f0a6173","content":"### Use cases\n- E-commerce product recommendations (clothing, electronics, books)\n- Content recommendations (articles, videos, music)\n- App recommendations\n- General collaborative filtering scenarios with implicit feedback","document_title":"ALS (Matrix Factorization)","h1":"ALS (Matrix Factorization)","h2":"Usage","h3":"Use cases","h4":"","file_path":"model_library\/als.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/als.md","chunk_metadata":"{\"Header 1\": \"ALS (Matrix Factorization)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use cases\"}","created_at":"2026-01-30T13:46:43.804633","updated_at":"2026-01-30T13:46:43.804633"}
{"id":"ac4332c9-b35e-5396-84c6-c3d7817f3a4e","content":"## Reference  \n*   Hu, Y., Koren, Y., & Volinsky, C. (2008). [Collaborative Filtering for Implicit Feedback Datasets](http:\/\/yifanhu.net\/PUB\/cf.pdf). ICDM.\n*   Tak\u00e1cs, G., et al. (2011). Applications of the Stochastic Gradient Descent Method for Matrix Factorization in Recommendation Systems. RecSys. (Though ALS is distinct, SGD is another common MF solver).","document_title":"ALS (Matrix Factorization)","h1":"ALS (Matrix Factorization)","h2":"Reference","h3":"","h4":"","file_path":"model_library\/als.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/als.md","chunk_metadata":"{\"Header 1\": \"ALS (Matrix Factorization)\", \"Header 2\": \"Reference\"}","created_at":"2026-01-30T13:46:43.804642","updated_at":"2026-01-30T13:46:43.804642"}
{"id":"fbd2faf8-4ffa-5f3c-a346-82f62c8d8726","content":"# Rising Popularity (Rule-Based)  \n## Description  \nThe Rising Popularity policy ranks or scores items based on their recent increase in popularity or engagement momentum. It identifies items that are rapidly gaining traction over a defined time period, emphasizing the rate of change. Useful for surfacing viral content or breaking news.  \n**Policy Type:** `rising-popularity`\n**Supports:** `scoring_policy`","document_title":"Rising Popularity (Rule-Based)","h1":"Rising Popularity (Rule-Based)","h2":"Description","h3":"","h4":"","file_path":"model_library\/rising_popularity.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/rising_popularity.md","chunk_metadata":"{\"Header 1\": \"Rising Popularity (Rule-Based)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.805637","updated_at":"2026-01-30T13:46:43.805637"}
{"id":"cc796054-d73a-5511-90da-30b079b7345b","content":"## Hyperparameter tuning  \n- `event_values`: List of event value strings to filter interactions by.\n- `time_window`: Time window for measuring popularity change.\n- `time_frequency`: How often the score updates (30M, 1H, 1D, or 1W).\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=scoring_policy_trending_rising_popularity.yaml\npolicy_configs:\nscoring_policy:\npolicy_type: rising-popular\n# Parameters define how trend\/momentum is calculated.\n# Example parameters:\ntime_window: 7       # Time window for measuring popularity change (verify syntax\/unit)\ntime_frequency: \"1D\"    # How often the score updates (verify syntax\/unit)\n```\n<\/details>","document_title":"Rising Popularity (Rule-Based)","h1":"Rising Popularity (Rule-Based)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/rising_popularity.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/rising_popularity.md","chunk_metadata":"{\"Header 1\": \"Rising Popularity (Rule-Based)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.805647","updated_at":"2026-01-30T13:46:43.805647"}
{"id":"714a13b1-0681-56df-baad-636cedc5e31a","content":"## Reference  \n*   Algorithm depends on implementation (e.g., time-series analysis, windowed comparisons). No single standard paper.","document_title":"Rising Popularity (Rule-Based)","h1":"Rising Popularity (Rule-Based)","h2":"Reference","h3":"","h4":"","file_path":"model_library\/rising_popularity.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/rising_popularity.md","chunk_metadata":"{\"Header 1\": \"Rising Popularity (Rule-Based)\", \"Header 2\": \"Reference\"}","created_at":"2026-01-30T13:46:43.805652","updated_at":"2026-01-30T13:46:43.805652"}
{"id":"4d4536a8-5f5b-5bd1-946b-1f39f407d24d","content":"# EASE (Autoencoder)  \n## Description  \nThe EASE (Embarrassingly Shallow Autoencoder) policy implements a simple linear autoencoder for item-based collaborative filtering using a closed-form solution. It learns an item-item similarity matrix `B` by minimizing `||X - X * B||^2` subject to `diag(B)=0` and L2 regularization on `B`. The solution avoids iterative optimization, making it computationally efficient to compute the similarity matrix `B` once. Predictions for a user are made by multiplying their interaction vector by `B`.  \n**Policy Type:** `ease`\n**Supports:** `embedding_policy`, `scoring_policy`","document_title":"EASE (Autoencoder)","h1":"EASE (Autoencoder)","h2":"Description","h3":"","h4":"","file_path":"model_library\/ease.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/ease.md","chunk_metadata":"{\"Header 1\": \"EASE (Autoencoder)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.805809","updated_at":"2026-01-30T13:46:43.805809"}
{"id":"b8fa1162-43a0-589f-921c-d8ec3d9201ea","content":"## Hyperparameter tuning  \n- `batch_size`: Samples per training batch.\n- `n_epochs`: Number of training epochs.\n- `lr`: Learning rate.\n- `factors`: Rank (number of latent factors) for the low-rank part.\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=embedding_policy_ease.yaml\npolicy_configs:\nembedding_policy: # Or scoring_policy\npolicy_type: ease\n# Training Hyperparameters\nbatch_size: 512         # Samples per training batch\nn_epochs: 20            # Number of training epochs\nlr: 0.1                 # Learning rate\n# Model Hyperparameters\nfactors: 10             # Rank (number of latent factors) for the low-rank part\n```\n<\/details>","document_title":"EASE (Autoencoder)","h1":"EASE (Autoencoder)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/ease.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/ease.md","chunk_metadata":"{\"Header 1\": \"EASE (Autoencoder)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.805814","updated_at":"2026-01-30T13:46:43.805814"}
{"id":"1fc52b7f-219a-54c7-94e0-347023348d1b","content":"## Usage  \n### Use this model when:\n- You want the simplest possible autoencoder approach\n- You need fast training with a closed-form solution\n- You have implicit feedback data\n- You're working with medium-sized datasets\n- You want a quick baseline or prototype","document_title":"EASE (Autoencoder)","h1":"EASE (Autoencoder)","h2":"Usage","h3":"Use this model when:","h4":"","file_path":"model_library\/ease.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/ease.md","chunk_metadata":"{\"Header 1\": \"EASE (Autoencoder)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use this model when:\"}","created_at":"2026-01-30T13:46:43.805817","updated_at":"2026-01-30T13:46:43.805817"}
{"id":"42ccaa32-24ef-565f-a309-06adbface709","content":"### Choose a different model when:\n- You have very large-scale datasets (ELSA scales better)\n- You need to leverage item content features (use Two-Tower or BeeFormer)\n- You want to model sequential patterns (use sequential models)\n- You need the highest accuracy (more complex models may perform better)","document_title":"EASE (Autoencoder)","h1":"EASE (Autoencoder)","h2":"Usage","h3":"Choose a different model when:","h4":"","file_path":"model_library\/ease.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/ease.md","chunk_metadata":"{\"Header 1\": \"EASE (Autoencoder)\", \"Header 2\": \"Usage\", \"Header 3\": \"Choose a different model when:\"}","created_at":"2026-01-30T13:46:43.805821","updated_at":"2026-01-30T13:46:43.805821"}
{"id":"660ec820-33f2-5426-ae07-c0ccfaf6ff1b","content":"### Use cases\n- E-commerce sites\n- Content recommendation systems\n- Product similarity for \"customers who bought this also bought\"","document_title":"EASE (Autoencoder)","h1":"EASE (Autoencoder)","h2":"Usage","h3":"Use cases","h4":"","file_path":"model_library\/ease.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/ease.md","chunk_metadata":"{\"Header 1\": \"EASE (Autoencoder)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use cases\"}","created_at":"2026-01-30T13:46:43.805824","updated_at":"2026-01-30T13:46:43.805824"}
{"id":"723574b5-ab29-569e-ac02-c521fd74e95c","content":"## Reference  \n*   Steck, H. (2019). [Embarrassingly Shallow Autoencoders for Sparse Data](https:\/\/arxiv.org\/abs\/1905.03375). WWW.","document_title":"EASE (Autoencoder)","h1":"EASE (Autoencoder)","h2":"Reference","h3":"","h4":"","file_path":"model_library\/ease.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/ease.md","chunk_metadata":"{\"Header 1\": \"EASE (Autoencoder)\", \"Header 2\": \"Reference\"}","created_at":"2026-01-30T13:46:43.805828","updated_at":"2026-01-30T13:46:43.805828"}
{"id":"3d32d0f9-f2e0-5810-a2fb-8827cea7770f","content":"# BERT4Rec (Sequential)  \n## Description  \nThe BERT4Rec policy adapts the bidirectional Transformer architecture (BERT) for sequential recommendation. Unlike unidirectional models (like SASRec), it uses bidirectional self-attention and is typically trained using a masked item prediction objective (predicting masked items based on both past and future context within the sequence). This allows it to learn rich, context-aware item representations.  \n**Policy Type:** `bert4rec`\n**Supports:** `embedding_policy`, `scoring_policy`","document_title":"BERT4Rec (Sequential)","h1":"BERT4Rec (Sequential)","h2":"Description","h3":"","h4":"","file_path":"model_library\/bert4rec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/bert4rec.md","chunk_metadata":"{\"Header 1\": \"BERT4Rec (Sequential)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.806019","updated_at":"2026-01-30T13:46:43.806019"}
{"id":"5249c438-43f4-592c-a228-a685201d260b","content":"## Hyperparameter tuning  \n- `event_values`: List of event value strings to filter interactions by.\n- `batch_size`: Number of samples processed before updating model weights.\n- `eval_batch_size`: Batch size used during model evaluation.\n- `n_epochs`: Number of complete passes through the training data.\n- `negative_samples_count`: Number of negative samples per positive sample for contrastive learning.\n- `device`\n- `hidden_size`: Size of the hidden layers in the transformer.\n- `inner_size`: Size of the feed-forward network inner layer.\n- `learning_rate`: Learning rate for gradient descent optimization.\n- `attn_dropout_prob`: Dropout probability for attention layers.\n- `hidden_act`: Activation function.\n- `hidden_dropout_prob`: Dropout probability for hidden layers.\n- `n_heads`: Number of attention heads in the transformer.\n- `n_layers`: Number of transformer layers.\n- `layer_norm_eps`\n- `initializer_range`\n- `mask_rate`: Fraction of tokens to mask during training.\n- `loss_type`\n- `max_seq_length`: Maximum length of input sequences.\n- `sample_strategy`\n- `sample_seed`\n- `sample_ratio`\n- `eval_step`\n- `early_stopping_step`\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=scoring_policy_bert4rec.yaml\npolicy_configs:\nscoring_policy: # Can also be used under embedding_policy\npolicy_type: bert4rec\n# Training Hyperparameters\nbatch_size: 1000           # Samples per training batch\nn_epochs: 1                # Number of training epochs\nnegative_samples_count: 2  # Negative samples (often relevant for loss calculation)\nlearning_rate: 0.001       # Optimizer learning rate\ndropout_rate: 0.2          # General dropout rate for regularization\n# Architecture Hyperparameters\nhidden_size: 64            # Dimensionality of hidden layers\/embeddings\nn_heads: 2                 # Number of self-attention heads\nn_layers: 2                # Number of Transformer layers\nmax_seq_length: 50         # Maximum input sequence length\n```\n<\/details>","document_title":"BERT4Rec (Sequential)","h1":"BERT4Rec (Sequential)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/bert4rec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/bert4rec.md","chunk_metadata":"{\"Header 1\": \"BERT4Rec (Sequential)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.806023","updated_at":"2026-01-30T13:46:43.806023"}
{"id":"280ca89e-2a18-5944-baf8-8422cdbcf4fa","content":"## Usage  \n### Use this model when:\n- You have sequential data and want bidirectional context understanding\n- You need richer item representations than unidirectional models\n- You want to leverage both past and future context in sequences\n- You're working with sequences where context matters in both directions","document_title":"BERT4Rec (Sequential)","h1":"BERT4Rec (Sequential)","h2":"Usage","h3":"Use this model when:","h4":"","file_path":"model_library\/bert4rec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/bert4rec.md","chunk_metadata":"{\"Header 1\": \"BERT4Rec (Sequential)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use this model when:\"}","created_at":"2026-01-30T13:46:43.806027","updated_at":"2026-01-30T13:46:43.806027"}
{"id":"c9c757a9-494d-5c96-a7a5-20821310db10","content":"### Choose a different model when:\n- You need real-time next-item prediction (unidirectional is more natural)\n- You want the simplest sequential model (Item2Vec or SASRec)\n- You don't have sequential data\n- You primarily need general item similarity (use Two-Tower or ALS)","document_title":"BERT4Rec (Sequential)","h1":"BERT4Rec (Sequential)","h2":"Usage","h3":"Choose a different model when:","h4":"","file_path":"model_library\/bert4rec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/bert4rec.md","chunk_metadata":"{\"Header 1\": \"BERT4Rec (Sequential)\", \"Header 2\": \"Usage\", \"Header 3\": \"Choose a different model when:\"}","created_at":"2026-01-30T13:46:43.806030","updated_at":"2026-01-30T13:46:43.806030"}
{"id":"9322e9c0-64fe-57f4-acc7-329aad45019a","content":"### Use cases\n- Context-aware sequential recommendations\n- Playlist generation with full context\n- Reading sequences where future context matters\n- Educational content sequences\n- Any sequential recommendation where bidirectional understanding helps","document_title":"BERT4Rec (Sequential)","h1":"BERT4Rec (Sequential)","h2":"Usage","h3":"Use cases","h4":"","file_path":"model_library\/bert4rec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/bert4rec.md","chunk_metadata":"{\"Header 1\": \"BERT4Rec (Sequential)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use cases\"}","created_at":"2026-01-30T13:46:43.806033","updated_at":"2026-01-30T13:46:43.806033"}
{"id":"e2ce6ab6-418f-592b-b8c2-bbb50c13465d","content":"## Reference  \n*   Sun, F., et al. (2019). [BERT4Rec: Sequential recommendation with bidirectional encoder representations from transformer](https:\/\/arxiv.org\/abs\/1904.06690). CIKM.","document_title":"BERT4Rec (Sequential)","h1":"BERT4Rec (Sequential)","h2":"Reference","h3":"","h4":"","file_path":"model_library\/bert4rec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/bert4rec.md","chunk_metadata":"{\"Header 1\": \"BERT4Rec (Sequential)\", \"Header 2\": \"Reference\"}","created_at":"2026-01-30T13:46:43.806037","updated_at":"2026-01-30T13:46:43.806037"}
{"id":"65dc2c6f-d0fb-525f-9f18-63ac58cd77f6","content":"# GSASRec (Sequential)  \n## Description  \nThe GSASRec (Generalized Self-Attentive Sequential Recommendation) policy is an enhancement of SASRec designed to mitigate potential overconfidence issues that can arise from negative sampling during training. It incorporates modifications, often to the loss function or sampling strategy, to improve prediction calibration while retaining the core self-attention mechanism of SASRec for modeling sequences.  \n**Policy Type:** `gsasrec`\n**Supports:** `embedding_policy`, `scoring_policy`","document_title":"GSASRec (Sequential)","h1":"GSASRec (Sequential)","h2":"Description","h3":"","h4":"","file_path":"model_library\/gsasrec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/gsasrec.md","chunk_metadata":"{\"Header 1\": \"GSASRec (Sequential)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.806216","updated_at":"2026-01-30T13:46:43.806216"}
{"id":"69e7fd0c-9027-5e8e-be31-c92d99d88f5e","content":"## Hyperparameter tuning  \n- `event_values`: List of event value strings to filter interactions by.\n- `batch_size`: Number of samples processed before updating model weights.\n- `eval_batch_size`: Batch size used during model evaluation.\n- `n_epochs`: Number of complete passes through the training data.\n- `device`\n- `learning_rate`: Learning rate for gradient descent optimization.\n- `weight_decay`: L2 regularization term to prevent overfitting.\n- `patience`: Number of epochs to wait without improvement before early stopping.\n- `sequence_length`: Maximum length of input sequences.\n- `embedding_dim`: Dimensionality of item embeddings.\n- `num_heads`: Number of attention heads in the transformer.\n- `num_blocks`: Number of transformer blocks.\n- `dropout_rate`: Dropout probability to prevent overfitting.\n- `reuse_item_embeddings`\n- `max_batches_per_epoch`\n- `gbce_t`\n- `filter_rated`\n- `neg_per_positive`: Negative samples per positive sample.\n- `eval_after_epochs`\n- `split_ratio`\n- `eps`\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=scoring_policy_gsasrec.yaml\npolicy_configs:\nscoring_policy: # Can also be used under embedding_policy\npolicy_type: gsasrec\n# Training Hyperparameters\nbatch_size: 32             # Samples per training batch\nn_epochs: 1                # Number of training epochs\nlearning_rate: 0.001       # Optimizer learning rate\ndropout_rate: 0.5          # General dropout rate\nneg_per_positive: 1\n# Architecture Hyperparameters\nnum_heads: 1               # Number of self-attention heads\nsequence_length: 200       # Maximum input sequence length\nembedding_dim: 128         # Dimensionality of embeddings\/hidden layers\n```\n<\/details>","document_title":"GSASRec (Sequential)","h1":"GSASRec (Sequential)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/gsasrec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/gsasrec.md","chunk_metadata":"{\"Header 1\": \"GSASRec (Sequential)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.806221","updated_at":"2026-01-30T13:46:43.806221"}
{"id":"3fe1daa9-ccae-5f38-b185-a3fcdf02c381","content":"## Usage  \n### Use this model when:\n- You're experiencing overconfidence issues with SASRec\n- You need better calibrated predictions for sequential recommendations\n- You want improved negative sampling strategies\n- You need the benefits of SASRec with better training stability","document_title":"GSASRec (Sequential)","h1":"GSASRec (Sequential)","h2":"Usage","h3":"Use this model when:","h4":"","file_path":"model_library\/gsasrec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/gsasrec.md","chunk_metadata":"{\"Header 1\": \"GSASRec (Sequential)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use this model when:\"}","created_at":"2026-01-30T13:46:43.806224","updated_at":"2026-01-30T13:46:43.806224"}
{"id":"d1199a35-5b1e-5478-b34e-370e4af3874c","content":"### Choose a different model when:\n- You don't have sequential data\n- You want the simplest sequential model (use SASRec or Item2Vec)\n- You need general item similarity (use Two-Tower or ALS)\n- You want to leverage item content primarily (use Two-Tower or BeeFormer)","document_title":"GSASRec (Sequential)","h1":"GSASRec (Sequential)","h2":"Usage","h3":"Choose a different model when:","h4":"","file_path":"model_library\/gsasrec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/gsasrec.md","chunk_metadata":"{\"Header 1\": \"GSASRec (Sequential)\", \"Header 2\": \"Usage\", \"Header 3\": \"Choose a different model when:\"}","created_at":"2026-01-30T13:46:43.806227","updated_at":"2026-01-30T13:46:43.806227"}
{"id":"39da220e-f7a2-5ee2-81a5-82cbc9bf5057","content":"### Use cases\n- E-commerce next-item prediction with calibrated scores\n- Video streaming with improved prediction confidence\n- Any sequential recommendation where calibration is critical","document_title":"GSASRec (Sequential)","h1":"GSASRec (Sequential)","h2":"Usage","h3":"Use cases","h4":"","file_path":"model_library\/gsasrec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/gsasrec.md","chunk_metadata":"{\"Header 1\": \"GSASRec (Sequential)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use cases\"}","created_at":"2026-01-30T13:46:43.806231","updated_at":"2026-01-30T13:46:43.806231"}
{"id":"d4a1cf8b-db5d-5e65-822f-c74f694b1ec7","content":"## Reference  \n*   Li, J., et al. (2021). [gSASRec: Reducing Overconfidence in Sequential Recommendation Trained with Negative Sampling](https:\/\/arxiv.org\/abs\/2308.07192). CIKM. (Check citation details - arXiv date is late for CIKM 2021).","document_title":"GSASRec (Sequential)","h1":"GSASRec (Sequential)","h2":"Reference","h3":"","h4":"","file_path":"model_library\/gsasrec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/gsasrec.md","chunk_metadata":"{\"Header 1\": \"GSASRec (Sequential)\", \"Header 2\": \"Reference\"}","created_at":"2026-01-30T13:46:43.806234","updated_at":"2026-01-30T13:46:43.806234"}
{"id":"3b9818e7-1860-5c42-bbb9-8e00a3f8a024","content":"# XGBoost (GBT)  \n## Description  \nThe XGBoost policy utilizes the XGBoost library, another popular and powerful gradient boosting framework known for its performance, regularization options, and scalability. Like LightGBM, it builds an ensemble of decision trees. It can be configured for classification, regression, or ranking tasks.  \n**Policy Type:** `xgboost`\n**Supports:** `scoring_policy`","document_title":"XGBoost (GBT)","h1":"XGBoost (GBT)","h2":"Description","h3":"","h4":"","file_path":"model_library\/xgboost.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/xgboost.md","chunk_metadata":"{\"Header 1\": \"XGBoost (GBT)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.806373","updated_at":"2026-01-30T13:46:43.806373"}
{"id":"fde8fd1d-b955-57e3-a804-ce14175d6a43","content":"## Hyperparameter tuning  \n- `event_values`: List of event value strings to filter interactions by.\n- `mode`: Model mode (regressor or classifier).\n- `n_estimators`: Number of boosting iterations (trees).\n- `max_depth`: Maximum depth of the tree. -1 means no limit.\n- `max_leaves`: Maximum number of leaves in one tree.\n- `n_jobs`\n- `learning_rate`: Learning rate (shrinkage) for gradient boosting.\n- `min_child_weight`: Minimum sum of instance weight needed in a child node.\n- `use_user_ids_as_features`: Whether to use user IDs as features.\n- `use_item_ids_as_features`: Whether to use item IDs as features.\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=scoring_policy_xgboost_classifier.yaml\npolicy_configs:\nscoring_policy:\npolicy_type: xgboost\n# Core Parameters\nmode: \"classifier\"     # Model mode: \"classifier\" or \"regressor\"\nobjective: \"binary:logistic\" # Example objective (verify available ranking objectives if needed)\nn_estimators: 100      # Number of boosting rounds\nlearning_rate: 0.2     # Step size shrinkage (eta)\n# Tree Structure Parameters\nmax_depth: 16          # Max depth per tree\nmax_leaves: 0          # Max leaves per tree (0 = no limit)\nmin_child_weight: 1    # Minimum sum of instance weight needed in a child\n```\n<\/details>","document_title":"XGBoost (GBT)","h1":"XGBoost (GBT)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/xgboost.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/xgboost.md","chunk_metadata":"{\"Header 1\": \"XGBoost (GBT)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.806377","updated_at":"2026-01-30T13:46:43.806377"}
{"id":"a5e31682-b912-55e6-8bd6-bd5efc13089d","content":"## Reference  \n*   Chen, T., & Guestrin, C. (2016). [XGBoost: A Scalable Tree Boosting System](https:\/\/arxiv.org\/abs\/1603.02754). KDD.","document_title":"XGBoost (GBT)","h1":"XGBoost (GBT)","h2":"Reference","h3":"","h4":"","file_path":"model_library\/xgboost.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/xgboost.md","chunk_metadata":"{\"Header 1\": \"XGBoost (GBT)\", \"Header 2\": \"Reference\"}","created_at":"2026-01-30T13:46:43.806381","updated_at":"2026-01-30T13:46:43.806381"}
{"id":"3245179e-6444-5d4f-942d-69a7598c6564","content":"# DeepFM (Neural Scoring)  \n## Description  \nThe DeepFM (Deep Factorization Machine) policy combines a Factorization Machine (FM) component and a deep neural network (DNN) component, sharing input feature embeddings.  \n*   **FM Component:** Models low-order interactions (linear features and pairwise\/2nd-order interactions) efficiently using the dot product of feature embeddings.\n*   **Deep Component:** An MLP that learns high-order, non-linear feature interactions implicitly from the shared embeddings.  \nThis avoids the need for manual feature crossing (unlike the wide part of Wide & Deep) and captures a spectrum of interactions. Outputs from both components are combined for the final prediction.  \n**Policy Type:** `deepfm`\n**Supports:** `scoring_policy`","document_title":"DeepFM (Neural Scoring)","h1":"DeepFM (Neural Scoring)","h2":"Description","h3":"","h4":"","file_path":"model_library\/deepfm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/deepfm.md","chunk_metadata":"{\"Header 1\": \"DeepFM (Neural Scoring)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.806509","updated_at":"2026-01-30T13:46:43.806509"}
{"id":"03905a53-546f-5236-9009-d952f573a553","content":"## Hyperparameter tuning  \n- `embedding_dim`: Dimensionality of feature embeddings (shared).\n- `deep_hidden_units`: Layer sizes for the deep MLP component.\n- `activation_fn`: Activation for deep layers.\n- `dropout`: Dropout rate for deep layers.\n- `learning_rate`: Optimizer learning rate.\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=scoring_policy_deepfm.yaml\npolicy_configs:\nscoring_policy:\npolicy_type: deepfm\n# Architecture\nembedding_dim: 16               # Dimensionality of feature embeddings (shared)\ndeep_hidden_units: [128, 64, 32] # Layer sizes for the deep MLP component\nactivation_fn: \"relu\"           # Activation for deep layers\ndropout: 0.2                    # Dropout rate for deep layers\n# Training Control\nlearning_rate: 0.001            # Optimizer learning rate\n```\n<\/details>","document_title":"DeepFM (Neural Scoring)","h1":"DeepFM (Neural Scoring)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/deepfm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/deepfm.md","chunk_metadata":"{\"Header 1\": \"DeepFM (Neural Scoring)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.806513","updated_at":"2026-01-30T13:46:43.806513"}
{"id":"5e981bc8-f7b5-59ae-bcc1-7ec0f57e0429","content":"## References  \n*   Guo, H., et al. (2017). [DeepFM: A Factorization-Machine based Neural Network for CTR Prediction](https:\/\/arxiv.org\/abs\/1703.04247). IJCAI.\n*   Wang, R., et al. (2021). [DLRM: An advanced open source deep learning recommendation model](https:\/\/arxiv.org\/abs\/2106.05139). arXiv. (Provides context on DLRM-style models).","document_title":"DeepFM (Neural Scoring)","h1":"DeepFM (Neural Scoring)","h2":"References","h3":"","h4":"","file_path":"model_library\/deepfm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/deepfm.md","chunk_metadata":"{\"Header 1\": \"DeepFM (Neural Scoring)\", \"Header 2\": \"References\"}","created_at":"2026-01-30T13:46:43.806516","updated_at":"2026-01-30T13:46:43.806516"}
{"id":"46fb314a-91b9-5b5a-82bf-2af2b7b897d8","content":"# Wide & Deep (Neural Scoring)  \n## Description  \nThe Wide & Deep policy implements the Wide & Deep Learning model, which jointly trains a wide linear model and a deep neural network (DNN) to combine the benefits of memorization and generalization.  \n*   **Wide Part:** A generalized linear model often fed with raw sparse features and manually engineered cross-product features to effectively memorize specific feature combinations.\n*   **Deep Part:** A standard MLP fed with dense embeddings (learned from categorical features) and potentially normalized dense features to generalize by learning complex, non-linear patterns.  \nThe outputs are typically summed before the final prediction layer.  \n**Policy Type:** `wide-deep`\n**Supports:** `scoring_policy`","document_title":"Wide & Deep (Neural Scoring)","h1":"Wide & Deep (Neural Scoring)","h2":"Description","h3":"","h4":"","file_path":"model_library\/wide_deep.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/wide_deep.md","chunk_metadata":"{\"Header 1\": \"Wide & Deep (Neural Scoring)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.806630","updated_at":"2026-01-30T13:46:43.806630"}
{"id":"2fc105f0-b699-5a31-8b47-b75539d227a8","content":"## Hyperparameter tuning  \n- `val_split`: Fraction of training data to use for validation.\n- `n_epochs`: Number of complete passes through the training data.\n- `num_workers`\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=scoring_policy_wide_deep.yaml\npolicy_configs:\nscoring_policy:\npolicy_type: wide-deep\n# Architecture\ndeep_hidden_units: [256, 128, 64] # Layer sizes for the deep MLP component\nactivation_fn: \"relu\"             # Activation for deep layers (e.g., \"relu\", \"sigmoid\")\n# Training Control\nval_split: 0.1                    # Proportion of data for validation during training\nn_epochs: 10                      # Number of training epochs\n```\n<\/details>","document_title":"Wide & Deep (Neural Scoring)","h1":"Wide & Deep (Neural Scoring)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/wide_deep.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/wide_deep.md","chunk_metadata":"{\"Header 1\": \"Wide & Deep (Neural Scoring)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.806634","updated_at":"2026-01-30T13:46:43.806634"}
{"id":"a1f7c150-7ba5-5426-81e9-0e689aa7dd53","content":"## Reference  \n*   Cheng, H. T., et al. (2016). [Wide & Deep Learning for Recommender Systems](https:\/\/arxiv.org\/abs\/1606.07792). DLRS Workshop @ RecSys.","document_title":"Wide & Deep (Neural Scoring)","h1":"Wide & Deep (Neural Scoring)","h2":"Reference","h3":"","h4":"","file_path":"model_library\/wide_deep.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/wide_deep.md","chunk_metadata":"{\"Header 1\": \"Wide & Deep (Neural Scoring)\", \"Header 2\": \"Reference\"}","created_at":"2026-01-30T13:46:43.806638","updated_at":"2026-01-30T13:46:43.806638"}
{"id":"eedcc40c-c19b-594a-99d9-6252fc57b76c","content":"# Two-Tower (Neural Retrieval)  \n## Description  \nThe Two-Tower model architecture separates the computation for users and items into two distinct neural networks (\"towers\") to efficiently generate embeddings for large-scale retrieval.  \n*   **User Tower:** Processes user-related features (ID, demographics, interaction history, context) to output a user embedding `u`.\n*   **Item Tower:** Processes item-related features (ID, metadata, content features) to output an item embedding `v` in the same vector space.  \nAffinity is typically calculated using a simple similarity function (dot product or cosine similarity) between `u` and `v`.  \nIts primary strength lies in decoupling computation for serving: item embeddings can be pre-computed offline, and Approximate Nearest Neighbor (ANN) search can be used at inference time to efficiently retrieve candidate items whose embeddings are most similar to a real-time computed user embedding. This makes it highly suitable for the **candidate generation** (retrieval) stage in multi-stage recommendation systems.  \nWhile powerful for retrieval, the standard Two-Tower design limits explicit modeling of cross-feature interactions between users and items until the final similarity calculation.  \n**Policy Type:** `two-tower`\n**Supports:** `embedding_policy`","document_title":"Two-Tower (Neural Retrieval)","h1":"Two-Tower (Neural Retrieval)","h2":"Description","h3":"","h4":"","file_path":"model_library\/two_tower.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/two_tower.md","chunk_metadata":"{\"Header 1\": \"Two-Tower (Neural Retrieval)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.806917","updated_at":"2026-01-30T13:46:43.806917"}
{"id":"cbdd5a98-b93c-52ce-b026-8a6675085ced","content":"## Hyperparameter tuning  \n- `event_values`: List of event value strings to filter interactions by.\n- `batch_size`: Number of samples processed before updating model weights.\n- `n_epochs`: Number of complete passes through the training data.\n- `device`\n- `negative_samples_count`: Number of negative samples per positive sample for contrastive learning.\n- `embedding_dims`: Dimensionality of the user and item embeddings.\n- `lr`: Learning rate for gradient descent optimization.\n- `weight_decay`: L2 regularization term to prevent overfitting.\n- `use_item_ids_as_features`: Whether to use item IDs as features.\n- `strategy`\n- `patience`: Number of epochs to wait without improvement before early stopping.\n- `num_workers`\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=embedding_policy_two_tower.yaml\npolicy_configs:\nembedding_policy:\npolicy_type: two-tower\n# Training Hyperparameters\nbatch_size: 32          # Samples per training batch\nn_epochs: 5             # Number of training epochs\nnegative_samples_count: 5 # Negative samples per positive for contrastive loss\nlr: 0.001               # Learning rate\nweight_decay: 0.0005    # L2 regularization strength\npatience: 5             # Epochs for early stopping patience\n# Architecture Hyperparameters\nembedding_dims: 128     # Dimensionality of the shared embedding space (u and v)\nactivation_fn: \"relu\"   # Activation function in hidden layers (e.g., \"relu\", \"gelu\")\ndropout: 0.2            # Dropout rate for regularization\n```\n<\/details>","document_title":"Two-Tower (Neural Retrieval)","h1":"Two-Tower (Neural Retrieval)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/two_tower.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/two_tower.md","chunk_metadata":"{\"Header 1\": \"Two-Tower (Neural Retrieval)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.806921","updated_at":"2026-01-30T13:46:43.806921"}
{"id":"7466c5c8-d7f3-56b1-a5c6-ff2d531da979","content":"## Usage  \n### Use this model when:\n- You have rich item metadata (text descriptions, categories, images)\n- You need efficient large-scale vector search and retrieval\n- You want to leverage both collaborative and content signals\n- You need production-ready embeddings for real-time recommendations\n- You want the best performance for general item similarity tasks","document_title":"Two-Tower (Neural Retrieval)","h1":"Two-Tower (Neural Retrieval)","h2":"Usage","h3":"Use this model when:","h4":"","file_path":"model_library\/two_tower.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/two_tower.md","chunk_metadata":"{\"Header 1\": \"Two-Tower (Neural Retrieval)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use this model when:\"}","created_at":"2026-01-30T13:46:43.806924","updated_at":"2026-01-30T13:46:43.806924"}
{"id":"0fd543f2-bb1e-5795-9454-fdcd62b36f97","content":"### Choose a different model when:\n- You have only interaction data without item features (use ALS\/ELSA)\n- You need to model strict sequential patterns (use SASRec\/BERT4Rec)\n- You have very limited compute resources\n- You need a simple baseline model","document_title":"Two-Tower (Neural Retrieval)","h1":"Two-Tower (Neural Retrieval)","h2":"Usage","h3":"Choose a different model when:","h4":"","file_path":"model_library\/two_tower.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/two_tower.md","chunk_metadata":"{\"Header 1\": \"Two-Tower (Neural Retrieval)\", \"Header 2\": \"Usage\", \"Header 3\": \"Choose a different model when:\"}","created_at":"2026-01-30T13:46:43.806928","updated_at":"2026-01-30T13:46:43.806928"}
{"id":"c5dc9e26-4ee9-56fd-966b-ac6e0acc3763","content":"### Use cases\n- E-commerce with product descriptions, categories, images (e.g., clothing, electronics)\n- Content platforms with rich metadata (articles, videos with descriptions)\n- Job recommendations with job descriptions and requirements\n- Real estate with property descriptions and features\n- Any domain where items have rich textual or categorical attributes","document_title":"Two-Tower (Neural Retrieval)","h1":"Two-Tower (Neural Retrieval)","h2":"Usage","h3":"Use cases","h4":"","file_path":"model_library\/two_tower.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/two_tower.md","chunk_metadata":"{\"Header 1\": \"Two-Tower (Neural Retrieval)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use cases\"}","created_at":"2026-01-30T13:46:43.806931","updated_at":"2026-01-30T13:46:43.806931"}
{"id":"60c46951-7221-5404-bd22-26d4d420d25e","content":"## References  \n*   Covington, P., Adams, J., & Sargin, E. (2016). [Deep Neural Networks for YouTube Recommendations](https:\/\/static.googleusercontent.com\/media\/research.google.com\/en\/\/pubs\/archive\/45530.pdf). RecSys.\n*   Ying, R., et al. (2018). [Graph Convolutional Neural Networks for Web-Scale Recommender Systems](https:\/\/arxiv.org\/abs\/1806.01973). KDD. (Example: PinSage used GNNs within towers).\n*   Huang, J., et al. (2020). [Embedding-based Retrieval in Facebook Search](https:\/\/arxiv.org\/abs\/2006.11632). KDD. (Discusses practical aspects like negative sampling).","document_title":"Two-Tower (Neural Retrieval)","h1":"Two-Tower (Neural Retrieval)","h2":"References","h3":"","h4":"","file_path":"model_library\/two_tower.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/two_tower.md","chunk_metadata":"{\"Header 1\": \"Two-Tower (Neural Retrieval)\", \"Header 2\": \"References\"}","created_at":"2026-01-30T13:46:43.806935","updated_at":"2026-01-30T13:46:43.806935"}
{"id":"8db4e344-81e2-596f-ae22-6536e99a4e7e","content":"# Item2Vec (Sequential)  \n## Description  \nThe Item2Vec policy adapts the Word2Vec algorithm (CBOW or Skip-gram) to learn item embeddings from user interaction sequences. It captures item co-occurrence patterns within a defined context window, placing items frequently interacted with together closer in the embedding space. Primarily models similarity based on co-occurrence rather than strict sequential order.  \n**Policy Type:** `item2vec`\n**Supports:** `embedding_policy`, `scoring_policy`","document_title":"Item2Vec (Sequential)","h1":"Item2Vec (Sequential)","h2":"Description","h3":"","h4":"","file_path":"model_library\/item2vec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/item2vec.md","chunk_metadata":"{\"Header 1\": \"Item2Vec (Sequential)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.807089","updated_at":"2026-01-30T13:46:43.807089"}
{"id":"4298803e-7f19-5922-8b75-827f49d1eed2","content":"## Hyperparameter tuning  \n- `event_values`: List of event value strings to filter interactions by.\n- `embedding_size`: Dimensionality of item embeddings.\n- `window_size`: Context window size for predicting items in sequences.\n- `min_count`: Minimum number of times an item must appear to be included in the vocabulary.\n- `algorithm`: Training algorithm (cbow or skip-gram).\n- `max_window_size`: Maximum window size for context.\n- `workers`: Restrict number of workers for memory estimation.\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=scoring_policy_item2vec.yaml\npolicy_configs:\nscoring_policy:\npolicy_type: item2vec\nembedding_size: 512  # Dimensionality of the learned item embeddings\nwindow_size: 20      # Context window size (items before\/after)\nmin_count: 1         # Minimum frequency for an item to be included\nalgorithm: \"cbow\"    # Training algorithm ('cbow' or 'skipgram')\n```\n<\/details>","document_title":"Item2Vec (Sequential)","h1":"Item2Vec (Sequential)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/item2vec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/item2vec.md","chunk_metadata":"{\"Header 1\": \"Item2Vec (Sequential)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.807094","updated_at":"2026-01-30T13:46:43.807094"}
{"id":"afb87aa0-d4e3-5c59-8f55-fc49fa1f28ca","content":"## Usage  \n### Use this model when:\n- You have sequential interaction data (user sessions, browsing history)\n- You want to capture item co-occurrence patterns\n- You need a simple, efficient sequential embedding approach\n- You're working with session-based recommendations\n- You want to model \"items frequently viewed together\"","document_title":"Item2Vec (Sequential)","h1":"Item2Vec (Sequential)","h2":"Usage","h3":"Use this model when:","h4":"","file_path":"model_library\/item2vec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/item2vec.md","chunk_metadata":"{\"Header 1\": \"Item2Vec (Sequential)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use this model when:\"}","created_at":"2026-01-30T13:46:43.807101","updated_at":"2026-01-30T13:46:43.807101"}
{"id":"ad44e825-b000-5f92-833c-4cbe7a733474","content":"### Choose a different model when:\n- You need to model strict temporal order and dependencies (use SASRec\/BERT4Rec)\n- You want to leverage item content features (use Two-Tower or BeeFormer)\n- You only have non-sequential interaction data\n- You need the highest accuracy for sequential recommendations","document_title":"Item2Vec (Sequential)","h1":"Item2Vec (Sequential)","h2":"Usage","h3":"Choose a different model when:","h4":"","file_path":"model_library\/item2vec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/item2vec.md","chunk_metadata":"{\"Header 1\": \"Item2Vec (Sequential)\", \"Header 2\": \"Usage\", \"Header 3\": \"Choose a different model when:\"}","created_at":"2026-01-30T13:46:43.807105","updated_at":"2026-01-30T13:46:43.807105"}
{"id":"8b095b95-5618-5e0d-bb2f-c3e6be587cfc","content":"### Use cases\n- E-commerce browsing sessions (items viewed in same session)\n- Music playlists and song sequences\n- Video watching sequences\n- Shopping cart co-occurrence patterns\n- Session-based web recommendations","document_title":"Item2Vec (Sequential)","h1":"Item2Vec (Sequential)","h2":"Usage","h3":"Use cases","h4":"","file_path":"model_library\/item2vec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/item2vec.md","chunk_metadata":"{\"Header 1\": \"Item2Vec (Sequential)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use cases\"}","created_at":"2026-01-30T13:46:43.807109","updated_at":"2026-01-30T13:46:43.807109"}
{"id":"02a9d0cf-4601-518b-8a43-3bc8cde8d42d","content":"## References  \n*   Mikolov, T., et al. (2013). [Efficient Estimation of Word Representations in Vector Space](https:\/\/arxiv.org\/abs\/1301.3781). arXiv. (Foundation Word2Vec).\n*   Barkan, O., & Koenigstein, N. (2016). [Item2vec: neural item embedding for collaborative filtering](https:\/\/arxiv.org\/abs\/1603.04254). arXiv.","document_title":"Item2Vec (Sequential)","h1":"Item2Vec (Sequential)","h2":"References","h3":"","h4":"","file_path":"model_library\/item2vec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/item2vec.md","chunk_metadata":"{\"Header 1\": \"Item2Vec (Sequential)\", \"Header 2\": \"References\"}","created_at":"2026-01-30T13:46:43.807113","updated_at":"2026-01-30T13:46:43.807113"}
{"id":"8a2037df-ce9c-587a-8d90-722cbd262c8a","content":"# Ngram (Sequential)  \n## Description  \nThe Ngram policy implements a simple, frequency-based sequential model. It predicts the next item based on the conditional probability derived from counts of the immediately preceding `n-1` items (the n-gram context). It's effective at capturing short-term co-occurrence patterns in user behavior sequences.  \n**Policy Type:** `ngram`\n**Supports:** `scoring_policy`","document_title":"Ngram (Sequential)","h1":"Ngram (Sequential)","h2":"Description","h3":"","h4":"","file_path":"model_library\/ngram.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/ngram.md","chunk_metadata":"{\"Header 1\": \"Ngram (Sequential)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.807229","updated_at":"2026-01-30T13:46:43.807229"}
{"id":"363c5960-e065-5a9d-8079-da58fa7c12a2","content":"## Hyperparameter tuning  \n- `event_values`: List of event value strings to filter interactions by.\n- `n`: Length of n-grams (sequences of n consecutive items).\n- `laplace_smoothing`: Laplace smoothing parameter to handle unseen n-grams.\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=scoring_policy_ngram.yaml\npolicy_configs:\nscoring_policy:\npolicy_type: ngram\nn: 3                  # Sequence length (e.g., 3 for trigrams - uses last 2 items)\nlaplace_smoothing: 0.05 # Smoothing factor to handle unseen sequences (avoids zero probability)\n```\n<\/details>","document_title":"Ngram (Sequential)","h1":"Ngram (Sequential)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/ngram.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/ngram.md","chunk_metadata":"{\"Header 1\": \"Ngram (Sequential)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.807233","updated_at":"2026-01-30T13:46:43.807233"}
{"id":"7df7c7aa-bd23-51b6-a326-1116d49e3d84","content":"## References  \n*   Concept based on N-gram language models. See: Jurafsky, D., & Martin, J. H. (2009). *Speech and Language Processing*. Prentice Hall.\n*   Wikipedia: [Word n-gram language model](https:\/\/en.wikipedia.org\/wiki\/Word_n-gram_language_model)","document_title":"Ngram (Sequential)","h1":"Ngram (Sequential)","h2":"References","h3":"","h4":"","file_path":"model_library\/ngram.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/ngram.md","chunk_metadata":"{\"Header 1\": \"Ngram (Sequential)\", \"Header 2\": \"References\"}","created_at":"2026-01-30T13:46:43.807237","updated_at":"2026-01-30T13:46:43.807237"}
{"id":"1d3dbd3e-56d5-509f-b312-42ebee0b98f7","content":"# BeeFormer (Neural Retrieval)  \n## Description  \nThe beeFormer policy implements a recommendation model that fine-tunes pre-trained sentence Transformers using user-item interaction data. It aims to bridge the gap between purely semantic similarity (from the language model) and interaction-based similarity (from collaborative patterns). It leverages a base sentence Transformer as an encoder and often uses an interaction-based loss (conceptually similar to ELSA's reconstruction loss) to update the Transformer's weights. This produces embeddings that reflect both content meaning and behavioral patterns, potentially improving cold-start performance and enabling knowledge transfer.  \n**Policy Type:** `beeformer`\n**Supports:** `embedding_policy`, `scoring_policy`","document_title":"BeeFormer (Neural Retrieval)","h1":"BeeFormer (Neural Retrieval)","h2":"Description","h3":"","h4":"","file_path":"model_library\/beeformer.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/beeformer.md","chunk_metadata":"{\"Header 1\": \"BeeFormer (Neural Retrieval)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.807448","updated_at":"2026-01-30T13:46:43.807448"}
{"id":"b1db3392-580a-5107-92ae-c654228032e2","content":"## Hyperparameter tuning  \n- `event_values`: List of event value strings to filter interactions by.\n- `device`\n- `seed`: Random seed for reproducibility.\n- `lr`: Learning rate for gradient descent optimization.\n- `use_scheduler`: Whether to use a learning rate scheduler.\n- `epochs`: Number of complete passes through the training data.\n- `max_output`: Negative sampling hyperparameter, uniform.\n- `batch_size`: Number of samples processed before updating model weights.\n- `top_k`: Optimize only for top-k predictions on the output.\n- `embedder`\n- `use_images`: Use image features.\n- `max_seq_length`: Maximum sequence length for tokenized input.\n- `embedder_batch_size`: Batch size for the embedder model (e.g., BERT).\n- `train_distributed`: Train on multiple devices.\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=embedding_policy_beeformer.yaml\npolicy_configs:\nembedding_policy: # Or scoring_policy\npolicy_type: beeformer\nmax_seq_length: 384       # Max sequence length for the transformer input\n# Training Hyperparameters\nbatch_size: 1               # Samples per training batch (may use gradient accumulation internally)\nepochs: 1                   # Total training epochs\nlr: 1e-5                    # Learning rate (typically small for fine-tuning)\nmax_output: 1               # Related to negative sampling\/loss calculation (from source doc)\ntop_k: 0                    # Restrict optimization (from source doc, 0=no restriction)\nembedder_batch_size: 100    # Internal batch size for base transformer inference\n```\n<\/details>","document_title":"BeeFormer (Neural Retrieval)","h1":"BeeFormer (Neural Retrieval)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/beeformer.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/beeformer.md","chunk_metadata":"{\"Header 1\": \"BeeFormer (Neural Retrieval)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.807453","updated_at":"2026-01-30T13:46:43.807453"}
{"id":"5ed25214-2feb-5733-9b5b-d430be13af78","content":"## Usage  \n### Use this model when:\n- You have rich text content (product descriptions, titles, reviews)\n- You want to combine semantic understanding with behavioral signals\n- You need good cold-start performance for new items\n- You want to leverage pre-trained language model knowledge\n- You have items with detailed textual descriptions","document_title":"BeeFormer (Neural Retrieval)","h1":"BeeFormer (Neural Retrieval)","h2":"Usage","h3":"Use this model when:","h4":"","file_path":"model_library\/beeformer.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/beeformer.md","chunk_metadata":"{\"Header 1\": \"BeeFormer (Neural Retrieval)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use this model when:\"}","created_at":"2026-01-30T13:46:43.807457","updated_at":"2026-01-30T13:46:43.807457"}
{"id":"d716a784-2c0e-5198-afd3-5f7c5b92f5d7","content":"### Choose a different model when:\n- You have minimal or no text content for items\n- You only have interaction data without item descriptions\n- You want a pure collaborative filtering approach","document_title":"BeeFormer (Neural Retrieval)","h1":"BeeFormer (Neural Retrieval)","h2":"Usage","h3":"Choose a different model when:","h4":"","file_path":"model_library\/beeformer.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/beeformer.md","chunk_metadata":"{\"Header 1\": \"BeeFormer (Neural Retrieval)\", \"Header 2\": \"Usage\", \"Header 3\": \"Choose a different model when:\"}","created_at":"2026-01-30T13:46:43.807460","updated_at":"2026-01-30T13:46:43.807460"}
{"id":"85897be9-b90b-5563-8038-a2c4bd9c6416","content":"### Use cases\n- E-commerce with detailed product descriptions (fashion, furniture, electronics)\n- Content platforms (articles, blog posts, research papers)\n- Job boards with detailed job descriptions\n- Real estate with property descriptions\n- Books, movies, or media with synopses and reviews\n- Any domain where semantic understanding of text content matters","document_title":"BeeFormer (Neural Retrieval)","h1":"BeeFormer (Neural Retrieval)","h2":"Usage","h3":"Use cases","h4":"","file_path":"model_library\/beeformer.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/beeformer.md","chunk_metadata":"{\"Header 1\": \"BeeFormer (Neural Retrieval)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use cases\"}","created_at":"2026-01-30T13:46:43.807464","updated_at":"2026-01-30T13:46:43.807464"}
{"id":"8aa6d664-74ec-50d9-8cf1-6fe2f6aa3d25","content":"## References  \n*   Van\u010dura, V., Kord\u00edk, P., & Straka, M. (2024). [beeFormer: Bridging the Gap Between Semantic and Interaction Similarity in Recommender Systems](https:\/\/arxiv.org\/abs\/2409.10309). RecSys '24 \/ arXiv.\n*   Reimers, N., & Gurevych, I. (2019). [Sentence-BERT: Sentence Embeddings using Siamese BERT-Networks](https:\/\/arxiv.org\/abs\/1908.10084). EMNLP.\n*   Van\u010dura, V., et al. (2022). [Scalable Linear Shallow Autoencoder for Collaborative Filtering](https:\/\/dl.acm.org\/doi\/10.1145\/3523227.3551482). WSDM. (ELSA paper, relevant to beeFormer's loss).","document_title":"BeeFormer (Neural Retrieval)","h1":"BeeFormer (Neural Retrieval)","h2":"References","h3":"","h4":"","file_path":"model_library\/beeformer.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/beeformer.md","chunk_metadata":"{\"Header 1\": \"BeeFormer (Neural Retrieval)\", \"Header 2\": \"References\"}","created_at":"2026-01-30T13:46:43.807468","updated_at":"2026-01-30T13:46:43.807468"}
{"id":"e9d021d6-b25a-5ef6-b2b7-0ffd7f6bb178","content":"# LightGBM (GBT)  \n## Description  \nThe LightGBM policy utilizes the LightGBM framework, a highly efficient gradient boosting implementation. It builds an ensemble of decision trees sequentially, where each new tree corrects errors made by the previous ones. It's optimized for speed and memory usage, handles large datasets well, and supports various objectives, including classification, regression, and specialized learning-to-rank objectives like LambdaRank (implementing LambdaMART).  \n**Policy Type:** `lightgbm`\n**Supports:** `scoring_policy`","document_title":"LightGBM (GBT)","h1":"LightGBM (GBT)","h2":"Description","h3":"","h4":"","file_path":"model_library\/lightgbm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/lightgbm.md","chunk_metadata":"{\"Header 1\": \"LightGBM (GBT)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.807666","updated_at":"2026-01-30T13:46:43.807666"}
{"id":"81057540-8761-58ab-822e-d13d8719e302","content":"## Hyperparameter tuning  \n- `event_values`: List of event value strings to filter interactions by.\n- `objective`: Objective function (regression, binary, lambdarank, rank_xendcg).\n- `n_estimators`: Number of boosting iterations.\n- `max_depth`: Maximum depth of the tree. -1 means no limit.\n- `num_leaves`: Maximum number of leaves in one tree.\n- `min_child_weight`: Minimum sum Hessian in one leaf.\n- `learning_rate`: Learning rate (shrinkage) for gradient boosting.\n- `colsample_bytree`: Subsample columns on each iteration.\n- `subsample`: Subsample training data on each iteration.\n- `subsample_freq`: Bagging frequency.\n- `zero_as_missing`: Treat zero values as missing.\n- `bin_construct_sample_cnt`: Number of samples used to construct bins.\n- `verbose`\n- `verbose_eval`\n- `num_threads`\n- `enable_resume`: Whether to enable resume functionality.\n- `lambdarank_truncation_level`: Number of pairs used in pairwise loss. Should be set to slightly higher than the k value used for NDCG@k.\n- `calibrate`: Whether to calibrate output probabilities.\n- `event_value_user_affinity_features`: Whether to use event value user affinity features.\n- `event_value_affinity_features_value_filter`\n- `rolling_window_hours`\n- `negative_affinity_features`: Whether to use negative affinity features.\n- `content_affinity_features`: Whether to use content affinity features.\n- `content_affinity_features_batch_size`: Batch size for content affinity features.\n- `content_affinity_max_num_latest_items`\n- `container_categorical_to_multi_hot`: Whether to convert container categorical to multi-hot.\n- `container_to_container_affinities`: Whether to use container to container affinities.\n- `point_in_time_item_feature`: Whether to use point in time item feature.\n- `drop_user_id`: Whether to drop user ID.\n- `drop_item_id`: Whether to drop item ID.\n- `early_stopping_rounds`: Number of rounds for early stopping.\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=scoring_policy_lightgbm_lambdarank.yaml\npolicy_configs:\nscoring_policy:\npolicy_type: lightgbm\n# Core Parameters\nobjective: \"lambdarank\" # Key for LTR: \"binary\", \"regression\", \"lambdarank\", \"rank_xendcg\"\nn_estimators: 1000     # Number of trees (boosting rounds)\nlearning_rate: 0.05    # Step size shrinkage\n# Tree Structure Parameters\nmax_depth: 8           # Max tree depth (-1 for no limit)\nnum_leaves: 31         # Max leaves per tree (consider tuning based on data)\nmin_child_weight: 1e-3 # Minimum sum of instance weight (hessian) needed in a child\n# Regularization & Sampling Parameters\ncolsample_bytree: 0.8  # Fraction of features considered per tree\nsubsample: 0.8         # Fraction of data sampled per boosting iteration (bagging)\nsubsample_freq: 5      # Frequency for bagging (0 means disabled)\n# Other Parameters\ncalibrate: false       # Calibrate output probabilities (usually for binary objective)\n```\n<\/details>","document_title":"LightGBM (GBT)","h1":"LightGBM (GBT)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/lightgbm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/lightgbm.md","chunk_metadata":"{\"Header 1\": \"LightGBM (GBT)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.807670","updated_at":"2026-01-30T13:46:43.807670"}
{"id":"63b9f658-f928-5d45-980f-b86ec3ded831","content":"## References  \n*   Ke, G., et al. (2017). [LightGBM: A Highly Efficient Gradient Boosting Decision Tree](https:\/\/proceedings.neurips.cc\/paper_files\/paper\/2017\/file\/6449f44a102fde848669bdd9eb6b76fa-Paper.pdf). NeurIPS.\n*   Burges, C. J. C. (2010). [From RankNet to LambdaRank to LambdaMART: An Overview](https:\/\/www.microsoft.com\/en-us\/research\/publication\/from-ranknet-to-lambdarank-to-lambdamart-an-overview\/). Microsoft Research Technical Report. (LambdaMART explanation).","document_title":"LightGBM (GBT)","h1":"LightGBM (GBT)","h2":"References","h3":"","h4":"","file_path":"model_library\/lightgbm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/lightgbm.md","chunk_metadata":"{\"Header 1\": \"LightGBM (GBT)\", \"Header 2\": \"References\"}","created_at":"2026-01-30T13:46:43.807674","updated_at":"2026-01-30T13:46:43.807674"}
{"id":"169cf77f-b7e5-531f-9ae6-ab3c1897a378","content":"# SASRec (Sequential)  \n## Description  \nThe SASRec (Self-Attentive Sequential Recommendation) policy utilizes the Transformer architecture's self-attention mechanism to model user interaction sequences. By weighing the importance of all previous items, it captures both short-term and long-range dependencies to predict the *next* item the user is likely to interact with.  \n**Policy Type:** `sasrec`\n**Supports:** `embedding_policy`, `scoring_policy`","document_title":"SASRec (Sequential)","h1":"SASRec (Sequential)","h2":"Description","h3":"","h4":"","file_path":"model_library\/sasrec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/sasrec.md","chunk_metadata":"{\"Header 1\": \"SASRec (Sequential)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.807868","updated_at":"2026-01-30T13:46:43.807868"}
{"id":"3e2c9a2a-5f4c-562a-a2d2-61f8a80c7452","content":"## Hyperparameter tuning  \n- `event_values`: List of event value strings to filter interactions by.\n- `batch_size`: Number of samples processed before updating model weights.\n- `eval_batch_size`: Batch size used during model evaluation.\n- `n_epochs`: Number of complete passes through the training data.\n- `negative_samples_count`: Number of negative samples per positive sample for contrastive learning.\n- `device`\n- `hidden_size`: Size of the hidden layers in the transformer.\n- `inner_size`: Size of the feed-forward network inner layer.\n- `learning_rate`: Learning rate for gradient descent optimization.\n- `attn_dropout_prob`: Dropout probability for attention layers.\n- `hidden_act`: Activation function.\n- `hidden_dropout_prob`: Dropout probability for hidden layers.\n- `n_heads`: Number of attention heads in the transformer.\n- `n_layers`: Number of transformer layers.\n- `layer_norm_eps`\n- `initializer_range`\n- `mask_rate`: Fraction of tokens to mask during training.\n- `loss_type`\n- `max_seq_length`: Maximum length of input sequences.\n- `sample_strategy`\n- `append_item_features`: Whether to append item features.\n- `append_item_embeddings`: Whether to append item embeddings.\n- `use_candidate_embeddings`: Whether to use candidate embeddings.\n- `sample_seed`\n- `sample_ratio`\n- `eval_step`\n- `early_stopping_step`\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=scoring_policy_sasrec.yaml\npolicy_configs:\nscoring_policy: # Can also be used under embedding_policy\npolicy_type: sasrec\n# Training Hyperparameters\nbatch_size: 1000           # Samples per training batch\nn_epochs: 1                # Number of training epochs\nnegative_samples_count: 2  # Negative samples per positive for contrastive loss\nlearning_rate: 0.001       # Optimizer learning rate\n# Architecture Hyperparameters\nhidden_size: 64            # Dimensionality of hidden layers\/embeddings\nn_heads: 2                 # Number of self-attention heads\nn_layers: 2                # Number of Transformer layers\nattn_dropout_prob: 0.2     # Dropout rate in attention mechanism\nhidden_act: \"gelu\"         # Activation function (e.g., \"gelu\", \"relu\")\nmax_seq_length: 50         # Maximum input sequence length\n```\n<\/details>","document_title":"SASRec (Sequential)","h1":"SASRec (Sequential)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/sasrec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/sasrec.md","chunk_metadata":"{\"Header 1\": \"SASRec (Sequential)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.807872","updated_at":"2026-01-30T13:46:43.807872"}
{"id":"728e3250-cd67-5836-9509-aa4017f79751","content":"## Usage  \n### Use this model when:\n- You have sequential interaction data with clear temporal order\n- You need to predict the \"next item\" in a sequence\n- You want to capture both short-term and long-term patterns\n- You need state-of-the-art sequential recommendation performance\n- You're building session-based or sequential recommendation systems","document_title":"SASRec (Sequential)","h1":"SASRec (Sequential)","h2":"Usage","h3":"Use this model when:","h4":"","file_path":"model_library\/sasrec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/sasrec.md","chunk_metadata":"{\"Header 1\": \"SASRec (Sequential)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use this model when:\"}","created_at":"2026-01-30T13:46:43.807875","updated_at":"2026-01-30T13:46:43.807875"}
{"id":"787cf76f-24e0-50df-97de-10282832d4c2","content":"### Choose a different model when:\n- You don't have sequential or temporal data\n- You want general item similarity rather than next-item prediction\n- You need bidirectional context understanding (use BERT4Rec)\n- You have very short sequences (Item2Vec might be simpler)\n- You want to leverage item content features primarily (use Two-Tower)","document_title":"SASRec (Sequential)","h1":"SASRec (Sequential)","h2":"Usage","h3":"Choose a different model when:","h4":"","file_path":"model_library\/sasrec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/sasrec.md","chunk_metadata":"{\"Header 1\": \"SASRec (Sequential)\", \"Header 2\": \"Usage\", \"Header 3\": \"Choose a different model when:\"}","created_at":"2026-01-30T13:46:43.807879","updated_at":"2026-01-30T13:46:43.807879"}
{"id":"be5d91ff-ac03-58de-a995-e4d17ed2dea8","content":"### Use cases\n- E-commerce next-item prediction (what to buy next)\n- Video streaming next-video recommendations\n- Music playlist continuation\n- News feed article sequences\n- Gaming item progression recommendations\n- Any domain with clear sequential user behavior","document_title":"SASRec (Sequential)","h1":"SASRec (Sequential)","h2":"Usage","h3":"Use cases","h4":"","file_path":"model_library\/sasrec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/sasrec.md","chunk_metadata":"{\"Header 1\": \"SASRec (Sequential)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use cases\"}","created_at":"2026-01-30T13:46:43.807882","updated_at":"2026-01-30T13:46:43.807882"}
{"id":"fba71f13-eb72-50e7-b2b8-3ac916caa726","content":"## Reference  \n*   Kang, W. C., & McAuley, J. (2018). [Self-attentive sequential recommendation](https:\/\/arxiv.org\/abs\/1808.09781). ICDM.","document_title":"SASRec (Sequential)","h1":"SASRec (Sequential)","h2":"Reference","h3":"","h4":"","file_path":"model_library\/sasrec.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/sasrec.md","chunk_metadata":"{\"Header 1\": \"SASRec (Sequential)\", \"Header 2\": \"Reference\"}","created_at":"2026-01-30T13:46:43.807886","updated_at":"2026-01-30T13:46:43.807886"}
{"id":"b333a658-d160-5460-9739-605176845320","content":"# SVD (Matrix Factorization)  \n## Description  \nThe SVD (Singular Value Decomposition) policy implements matrix factorization, often referring to iterative algorithms inspired by SVD used for collaborative filtering (like Funk SVD or SVD++). It decomposes the user-item interaction matrix into latent factors and potentially incorporates user\/item biases (mean-centering tendencies) to improve prediction accuracy. It's typically trained using optimization techniques like Stochastic Gradient Descent (SGD).  \n**Policy Type:** `svd`\n**Supports:** `embedding_policy`, `scoring_policy`","document_title":"SVD (Matrix Factorization)","h1":"SVD (Matrix Factorization)","h2":"Description","h3":"","h4":"","file_path":"model_library\/svd.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/svd.md","chunk_metadata":"{\"Header 1\": \"SVD (Matrix Factorization)\", \"Header 2\": \"Description\"}","created_at":"2026-01-30T13:46:43.808031","updated_at":"2026-01-30T13:46:43.808031"}
{"id":"a1a00958-affc-575e-82a8-680fb0a88833","content":"## Hyperparameter tuning  \n- `event_values`: List of event value strings to filter interactions by.\n- `factors`: Number of latent factors in the matrix factorization.\n- `num_epochs`: Number of complete passes through the training data.\n<details>\n<summary>\n**V1 API**\n<\/summary>\n```yaml title=embedding_policy_svd.yaml\npolicy_configs:\nembedding_policy: # Can also be used under scoring\npolicy_type: svd\nn_factors: 100        # Number of latent factors\nn_epochs: 20          # Number of training iterations (epochs) for SGD\nbiased: true          # Whether to include user\/item bias terms\nlr_all: 0.005         # Learning rate for SGD\nreg_all: 0.02         # Regularization strength for SG\n```\n<\/details>","document_title":"SVD (Matrix Factorization)","h1":"SVD (Matrix Factorization)","h2":"Hyperparameter tuning","h3":"","h4":"","file_path":"model_library\/svd.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/svd.md","chunk_metadata":"{\"Header 1\": \"SVD (Matrix Factorization)\", \"Header 2\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.808036","updated_at":"2026-01-30T13:46:43.808036"}
{"id":"73e37dca-e69d-5101-ab4f-c4c3fe43c31d","content":"## Usage  \n### Use this model when:\n- You have explicit feedback data (ratings, reviews with scores)\n- You want to model user and item biases (mean-centering tendencies)\n- You prefer SGD-based optimization over ALS\n- You need a straightforward matrix factorization approach\n- You're working with medium-sized datasets","document_title":"SVD (Matrix Factorization)","h1":"SVD (Matrix Factorization)","h2":"Usage","h3":"Use this model when:","h4":"","file_path":"model_library\/svd.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/svd.md","chunk_metadata":"{\"Header 1\": \"SVD (Matrix Factorization)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use this model when:\"}","created_at":"2026-01-30T13:46:43.808040","updated_at":"2026-01-30T13:46:43.808040"}
{"id":"6665a4cf-50b9-5d5e-aa79-4d86f17158ea","content":"### Choose a different model when:\n- You have only implicit feedback (ALS is typically better for this)\n- You need to leverage item content features (use Two-Tower or BeeFormer)\n- You want the most scalable solution (ELSA may be better)\n- You need to model sequential patterns (use sequential models)","document_title":"SVD (Matrix Factorization)","h1":"SVD (Matrix Factorization)","h2":"Usage","h3":"Choose a different model when:","h4":"","file_path":"model_library\/svd.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/svd.md","chunk_metadata":"{\"Header 1\": \"SVD (Matrix Factorization)\", \"Header 2\": \"Usage\", \"Header 3\": \"Choose a different model when:\"}","created_at":"2026-01-30T13:46:43.808048","updated_at":"2026-01-30T13:46:43.808048"}
{"id":"af5925ac-db43-578a-8fbb-f90e490abdb2","content":"### Use cases\n- Product recommendations with review scores\n- Restaurant or service recommendations with ratings\n- Any domain with explicit user feedback","document_title":"SVD (Matrix Factorization)","h1":"SVD (Matrix Factorization)","h2":"Usage","h3":"Use cases","h4":"","file_path":"model_library\/svd.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/svd.md","chunk_metadata":"{\"Header 1\": \"SVD (Matrix Factorization)\", \"Header 2\": \"Usage\", \"Header 3\": \"Use cases\"}","created_at":"2026-01-30T13:46:43.808052","updated_at":"2026-01-30T13:46:43.808052"}
{"id":"9c6e79fc-6f3c-5bf2-bbcd-5581bec15035","content":"## References  \n*   Koren, Y. (2008). [Factorization Meets the Neighborhood: A Multifaceted Collaborative Filtering Model](https:\/\/dl.acm.org\/doi\/10.1145\/1401890.1401944). KDD. (Introduced SVD++ which includes biases and implicit influence).\n*   Funk, S. (2006). [Netflix Update: Try This at Home](https:\/\/sifter.org\/~simon\/journal\/20061211.html). Blog post. (Popularized iterative matrix factorization with SGD for the Netflix Prize).","document_title":"SVD (Matrix Factorization)","h1":"SVD (Matrix Factorization)","h2":"References","h3":"","h4":"","file_path":"model_library\/svd.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/svd.md","chunk_metadata":"{\"Header 1\": \"SVD (Matrix Factorization)\", \"Header 2\": \"References\"}","created_at":"2026-01-30T13:46:43.808055","updated_at":"2026-01-30T13:46:43.808055"}
{"id":"f37d9f8f-0857-53c8-acaf-ebac64f7156a","content":"# Kafka  \nThis connector is in **Beta**. Reach out to our support (hello@shaped.ai) if you face any issues when integrating your [Kafka](https:\/\/kafka.apache.org\/) cluster with Shaped.","document_title":"Kafka","h1":"Kafka","h2":"","h3":"","h4":"","file_path":"connectors\/kafka.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/kafka.md","chunk_metadata":"{\"Header 1\": \"Kafka\"}","created_at":"2026-01-30T13:46:43.808226","updated_at":"2026-01-30T13:46:43.808226"}
{"id":"d5ca7707-6bb9-5c81-aba6-b8a7b9e09847","content":"## Preparation  \nIn order for Shaped to successfully connect to your [Kafka](https:\/\/kafka.apache.org\/) cluster, you need to:  \n- ensure your Kafka cluster is publicly available. To use private connectivity options (such as [AWS PrivateLink](https:\/\/docs.aws.amazon.com\/vpc\/latest\/privatelink\/what-is-privatelink.html)) reach out to our support (hello@shaped.ai).\n- enable SSL for your cluster and use a publicly-verifiable certificate. To use private certificates reach out to our support (hello@shaped.ai).\n- create a set of SASL credentials, which has sufficient permissions to read from your Kafka topic and to create consumer groups with ID of format `shaped-*`.","document_title":"Kafka","h1":"Kafka","h2":"Preparation","h3":"","h4":"","file_path":"connectors\/kafka.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/kafka.md","chunk_metadata":"{\"Header 1\": \"Kafka\", \"Header 2\": \"Preparation\"}","created_at":"2026-01-30T13:46:43.808230","updated_at":"2026-01-30T13:46:43.808230"}
{"id":"c8d4fe30-d9c1-59ec-9105-f41a12b1f58a","content":"# Table Configuration  \n### Required fields  \n| Field         | Example                                                                | Description\n|---------------|------------------------------------------------------------------------|--------------------\n| schema_type   | `KAFKA`                                                             | Specifies the connector schema type, in this case \"KAFKA\".\n| column_schema | See below                       | Specifies the schema of the table.\n| unique_keys   | [\"id\"]                          | Specify a list of columns that uniquely identify a row in the table, if duplicate rows are inserted with these keys, the latest row will be used.\n| topic         | `your-kafka-topic`                                               | Specifies the Kafka topic, to which the connector should subscribe. If your topic name contains invalid YAML characters, you must surround it with backticks and double-quotes.\n| username   | `JSW2WAMXW9CMTCVO`                          | Username used for the SASL authorization to your cluster.\n| password   | `pAssw0rd1!`                          | Passsword used for the SASL authorization to your cluster.\n| bootstrap_server | `xxxxxxx.us-east-2.aws.confluent.cloud:9092` | URI of the bootstrap server of your Kafka cluster.","document_title":"Kafka","h1":"Table Configuration","h2":"","h3":"Required fields","h4":"","file_path":"connectors\/kafka.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/kafka.md","chunk_metadata":"{\"Header 1\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.808234","updated_at":"2026-01-30T13:46:43.808234"}
{"id":"da48c20c-84a4-5fe2-96e5-677dfc3f488c","content":"## Table Creation Example  \nBelow is an example of a Kafka table connector configuration:\n```yaml\nname: your_kafka_dataset\nschema_type: KAFKA\nunique_keys: [id]\ncolumn_schema:\nevent_name: String\nevent_time: DateTime\nuser_id: String\nevent_weight: Float\nevent_value: Int32\nevent_tags: Array(String)\njson_payload: String\nusername: JSW2WAMXW9CMTCVO\npassword: pAssw0rd1!\nbootstrap_server: xxxxxxx.us-east-2.aws.confluent.cloud:9092\ntopic: your-kafka-topic\n```  \nThe following payload will create a Kafka table and begin syncing data from Shaped using the Shaped CLI.\n```bash\nshaped create-table --file dataset.yaml\n```","document_title":"Kafka","h1":"Table Configuration","h2":"Table Creation Example","h3":"","h4":"","file_path":"connectors\/kafka.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/kafka.md","chunk_metadata":"{\"Header 1\": \"Table Configuration\", \"Header 2\": \"Table Creation Example\"}","created_at":"2026-01-30T13:46:43.808238","updated_at":"2026-01-30T13:46:43.808238"}
{"id":"856431cf-1313-5171-9550-eab287da88bb","content":"## Delivering Data\nAfter setting up the connector, you need to publish your data to the specified Kafka topic in JSON format. If formatted correctly, data will be loaded into Shaped automatically.","document_title":"Kafka","h1":"Table Configuration","h2":"Delivering Data","h3":"","h4":"","file_path":"connectors\/kafka.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/kafka.md","chunk_metadata":"{\"Header 1\": \"Table Configuration\", \"Header 2\": \"Delivering Data\"}","created_at":"2026-01-30T13:46:43.808241","updated_at":"2026-01-30T13:46:43.808241"}
{"id":"573fc325-47a8-5116-a84e-7f39a6291c49","content":"# Snowflake  \n## Preparation  \nTo allow Shaped to connect to your [Snowflake](https:\/\/www.snowflake.com\/) database, you need to\ncreate a read-only user and share those credentials through the\n[Create Table](\/docs\/api#tag\/Table\/operation\/tables__create_table_post) endpoint.  You\ncan create a read-only user on a Snowflake database instance with the following commands:  \n```sql\n-- 1. Create a role that will be used to grant access to the specific table.\nCREATE ROLE read_only_role;\n\n-- 2. Create a user and grant the read-only role to the user.\nCREATE USER read_only_user\nPASSWORD = '<password>'\nDEFAULT_ROLE = read_only_role\nMUST_CHANGE_PASSWORD = FALSE;\n\n-- 3. Grant the newly created role to the user.\nGRANT ROLE read_only_role TO USER read_only_user;\n\n-- 4. Grant the SELECT permission on the specific table to the read-only role.\nGRANT SELECT ON TABLE <database_name>.<schema_name>.<table_name> TO ROLE read_only_role;\n\n-- 5. Grant USAGE permission on the schema and database containing the table.\nGRANT USAGE ON SCHEMA <database_name>.<schema_name> TO ROLE read_only_role;\nGRANT USAGE ON DATABASE <database_name> TO ROLE read_only_role;\n```  \nReplace password, database_name, schema_name, and table_name with the appropriate values for your Snowflake account.","document_title":"Snowflake","h1":"Snowflake","h2":"Preparation","h3":"","h4":"","file_path":"connectors\/snowflake.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/snowflake.md","chunk_metadata":"{\"Header 1\": \"Snowflake\", \"Header 2\": \"Preparation\"}","created_at":"2026-01-30T13:46:43.808469","updated_at":"2026-01-30T13:46:43.808469"}
{"id":"8798ff07-96a3-55d8-8575-be6d2869cfb6","content":"## Table Configuration  \n### Required fields  \n| Field                   |  Example                                          |  Description\n| ------------------------|---------------------------------------------------|--------------------\n| schema_type             |  `SNOWFLAKE`        |  Specifies the connector schema type, in this case \"Snowflake\".\n| table            |  analytics.events          | The name of the table to sync, prefixed with the schema name if applicable.\n| user             |  your_user          | Access account username.\n| password         |  pAssw0rd1!         | Access account password.\n| account          |  snowflake-access   | Your Snowflake account identifier. See [Account Identifiers](https:\/\/docs.snowflake.com\/en\/user-guide\/admin-account-identifier).\n| database         |  movielens          | The name of the database that contains table to sync.\n| replication_key  |  updated_at         | The name of the column that contains a datetime key or ascending id for ordering data during incremental syncs. Note if your column name is uppercase, you should convert to lowercase.","document_title":"Snowflake","h1":"Snowflake","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/snowflake.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/snowflake.md","chunk_metadata":"{\"Header 1\": \"Snowflake\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.808473","updated_at":"2026-01-30T13:46:43.808473"}
{"id":"d7c6c688-e377-57d3-a067-95b45a8ed4e0","content":"### Optional fields  \n| Field                   |  Example                                          |  Description\n| ------------------------|---------------------------------------------------|--------------------\n| columns          |  [\"productId\", \"color\", \"brand\", \"stockLevel\"]    | The name of the columns you wish to sync from Snowflake into Shaped. If not specified, all columns will be synced. Note if your column name(s) are uppercase, you should convert to lowercase.\n| database_schema  |  public             | The name of the schema that contains table to sync.\n| role             |  read_only_role     | The name of the role to use when connecting to the database.\n| warehouse        |  your_warehouse     | The name of the warehouse to use when connecting to the database.\n| unique_keys      |  [\"productId\"]      | Specify a list of columns that uniquely identify a row in the table, if duplicate rows are inserted with these keys, the latest row will be used.\n| batch_size       | 100000                                           | The number of rows to fetch from the database in each batch, changing this can improve throughput for large tables. The default is 10000.","document_title":"Snowflake","h1":"Snowflake","h2":"Table Configuration","h3":"Optional fields","h4":"","file_path":"connectors\/snowflake.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/snowflake.md","chunk_metadata":"{\"Header 1\": \"Snowflake\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Optional fields\"}","created_at":"2026-01-30T13:46:43.808477","updated_at":"2026-01-30T13:46:43.808477"}
{"id":"ab3dd3fc-086c-571c-9ceb-1a051506ecf4","content":"## Table Creation Example  \nBelow is an example of a Snowflake table connector configuration:\n```yaml\nname: your_snowflake_dataset\nschema_type: SNOWFLAKE\ntable: movies\nuser: your_user\npassword: pAssw0rd1!\naccount: snowflake-access\ndatabase: movielens\nreplication_key: updated_at\n```  \nThe following payload will create a Snowflake table and begin syncing data from Shaped using the Shaped CLI.\n```bash\nshaped create-table --file dataset.yaml\n```","document_title":"Snowflake","h1":"Snowflake","h2":"Table Creation Example","h3":"","h4":"","file_path":"connectors\/snowflake.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/snowflake.md","chunk_metadata":"{\"Header 1\": \"Snowflake\", \"Header 2\": \"Table Creation Example\"}","created_at":"2026-01-30T13:46:43.808481","updated_at":"2026-01-30T13:46:43.808481"}
{"id":"f1587c50-8a3e-5f76-b347-3cc38eb5dbb7","content":"# Apache Iceberg  \n## Preparation  \nTo allow Shaped to connect to your [Iceberg](https:\/\/iceberg.apache.org\/) table, you need to\ngrant Shaped\u2019s AWS service account read-only access to your data lake.\nYou can do this through the AWS console or with the following steps:  \n1. Contact us for our service account via email.\n2. Grant our service account permission to access your data lake via the appropriate IAM role.\nFor example, if your Iceberg table is stored in S3, you can grant our service account the `s3:GetObject` and `s3:ListBucket` permissions on the relevant S3 bucket.","document_title":"Apache Iceberg","h1":"Apache Iceberg","h2":"Preparation","h3":"","h4":"","file_path":"connectors\/iceberg.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/iceberg.md","chunk_metadata":"{\"Header 1\": \"Apache Iceberg\", \"Header 2\": \"Preparation\"}","created_at":"2026-01-30T13:46:43.808661","updated_at":"2026-01-30T13:46:43.808661"}
{"id":"7b81cd16-5f84-5895-89d1-016437d1ad57","content":"## Table Configuration  \n### Required fields  \n| Field         | Example                                                                | Description\n|---------------|------------------------------------------------------------------------|--------------------\n| schema_type   | `ICEBERG`                                                              | Specifies the connector schema type, in this case \"ICEBERG\".\n| catalog_type | `glue` or `hive`                                                        | Specifies the type of the Iceberg catalog.\n| catalog_name | `my_glue_catalog` or `my_hive_catalog`                                  | Specifies the name of the Iceberg catalog.\n| table_name   | `my_iceberg_table`                                                      | Specifies the name of the Iceberg table.","document_title":"Apache Iceberg","h1":"Apache Iceberg","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/iceberg.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/iceberg.md","chunk_metadata":"{\"Header 1\": \"Apache Iceberg\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.808665","updated_at":"2026-01-30T13:46:43.808665"}
{"id":"aa7e66bc-e32a-5de9-a726-e8e1e9a6ebe0","content":"### Optional fields  \n| Field          | Example                                  | Description\n|----------------|------------------------------------------|--------------------\n| aws_role_arn   | `arn:aws:iam::123456789012:role\/my_role` | Specifies the ARN of an AWS role to assume when accessing the Iceberg table. This is required if the Iceberg table is stored in a secure location, such as an S3 bucket with restricted access.\n| aws_region     | `us-east-1`                              | Specifies the AWS region where the Iceberg table is located. This is required if the Iceberg table is stored in a region other than the default region for your AWS account.\n| unique_keys    | [\"productId\"]                            | Specify a list of columns that uniquely identify a row in the table, if duplicate rows are inserted with these keys, the latest row will be used.\n| batch_size     | 10000                                     | Specifies the number of records to fetch in each batch. The default value is 10000.","document_title":"Apache Iceberg","h1":"Apache Iceberg","h2":"Table Configuration","h3":"Optional fields","h4":"","file_path":"connectors\/iceberg.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/iceberg.md","chunk_metadata":"{\"Header 1\": \"Apache Iceberg\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Optional fields\"}","created_at":"2026-01-30T13:46:43.808669","updated_at":"2026-01-30T13:46:43.808669"}
{"id":"fd2d5ee6-a4a2-51b5-b9ea-f8753abfd415","content":"## Table Creation Example  \nBelow is an example of an Iceberg table connector configuration:\n```yaml\nname: my_iceberg_dataset\nschema_type: ICEBERG\ncatalog_type: glue\ncatalog_name: my_glue_catalog\ntable_name: my_iceberg_table\naws_role_arn: arn:aws:iam::123456789012:role\/my_role\naws_region: us-east-1\n```  \nThe following payload will create an Iceberg table and begin syncing data from Shaped using the Shaped CLI.\n```bash\nshaped create-table --file dataset.yaml\n```","document_title":"Apache Iceberg","h1":"Apache Iceberg","h2":"Table Creation Example","h3":"","h4":"","file_path":"connectors\/iceberg.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/iceberg.md","chunk_metadata":"{\"Header 1\": \"Apache Iceberg\", \"Header 2\": \"Table Creation Example\"}","created_at":"2026-01-30T13:46:43.808672","updated_at":"2026-01-30T13:46:43.808672"}
{"id":"64ea4edb-e25d-50e5-9c3f-0222e4d6cff4","content":"# Firebase\/Firestore  \nShaped supports Firebase through Google BigQuery exports. This approach leverages Firebase's built-in export capabilities to sync your Firebase data with Shaped.","document_title":"Firebase\/Firestore","h1":"Firebase\/Firestore","h2":"","h3":"","h4":"","file_path":"connectors\/firebase.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/firebase.md","chunk_metadata":"{\"Header 1\": \"Firebase\/Firestore\"}","created_at":"2026-01-30T13:46:43.808831","updated_at":"2026-01-30T13:46:43.808831"}
{"id":"cfcd785e-d4df-54d1-b6c2-d53e970e6ebf","content":"## Recommended Integration Path  \nThe recommended approach for integrating Firebase with Shaped is:  \n1. Export your Firebase data to Google BigQuery\n2. Connect Shaped to your BigQuery table  \nThis method provides the most reliable and scalable way to work with your Firebase data in Shaped.","document_title":"Firebase\/Firestore","h1":"Firebase\/Firestore","h2":"Recommended Integration Path","h3":"","h4":"","file_path":"connectors\/firebase.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/firebase.md","chunk_metadata":"{\"Header 1\": \"Firebase\/Firestore\", \"Header 2\": \"Recommended Integration Path\"}","created_at":"2026-01-30T13:46:43.808835","updated_at":"2026-01-30T13:46:43.808835"}
{"id":"c26a5bcd-5a15-52d2-8191-76444a118890","content":"## Setting Up Firebase BigQuery Export  \nFirebase offers a streamlined process to automatically export your Firebase Analytics, Realtime Database, and Cloud Firestore data to BigQuery:","document_title":"Firebase\/Firestore","h1":"Firebase\/Firestore","h2":"Setting Up Firebase BigQuery Export","h3":"","h4":"","file_path":"connectors\/firebase.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/firebase.md","chunk_metadata":"{\"Header 1\": \"Firebase\/Firestore\", \"Header 2\": \"Setting Up Firebase BigQuery Export\"}","created_at":"2026-01-30T13:46:43.808839","updated_at":"2026-01-30T13:46:43.808839"}
{"id":"d8bd1db1-7047-5de1-a6ab-673f4defd4e9","content":"### Step 1: Enable BigQuery Export  \n1. Go to your [Firebase console](https:\/\/console.firebase.google.com\/)\n2. Select your project\n3. Navigate to Project Settings > Integrations > BigQuery\n4. Click \"Link\" and follow the setup instructions","document_title":"Firebase\/Firestore","h1":"Firebase\/Firestore","h2":"Setting Up Firebase BigQuery Export","h3":"Step 1: Enable BigQuery Export","h4":"","file_path":"connectors\/firebase.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/firebase.md","chunk_metadata":"{\"Header 1\": \"Firebase\/Firestore\", \"Header 2\": \"Setting Up Firebase BigQuery Export\", \"Header 3\": \"Step 1: Enable BigQuery Export\"}","created_at":"2026-01-30T13:46:43.808842","updated_at":"2026-01-30T13:46:43.808842"}
{"id":"4e20a049-2ccd-5236-91d4-ddf0d89d1362","content":"### Step 2: Configure Data Export  \nDepending on which Firebase products you use, configure the export settings:","document_title":"Firebase\/Firestore","h1":"Firebase\/Firestore","h2":"Setting Up Firebase BigQuery Export","h3":"Step 2: Configure Data Export","h4":"","file_path":"connectors\/firebase.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/firebase.md","chunk_metadata":"{\"Header 1\": \"Firebase\/Firestore\", \"Header 2\": \"Setting Up Firebase BigQuery Export\", \"Header 3\": \"Step 2: Configure Data Export\"}","created_at":"2026-01-30T13:46:43.808846","updated_at":"2026-01-30T13:46:43.808846"}
{"id":"56604346-f5b7-514f-b373-f61e23f053c8","content":"#### For Firebase Analytics:\n- BigQuery export is automatically enabled when you link BigQuery\n- Analytics data will appear in BigQuery within 24 hours of linking","document_title":"Firebase\/Firestore","h1":"Firebase\/Firestore","h2":"Setting Up Firebase BigQuery Export","h3":"Step 2: Configure Data Export","h4":"For Firebase Analytics:","file_path":"connectors\/firebase.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/firebase.md","chunk_metadata":"{\"Header 1\": \"Firebase\/Firestore\", \"Header 2\": \"Setting Up Firebase BigQuery Export\", \"Header 3\": \"Step 2: Configure Data Export\", \"Header 4\": \"For Firebase Analytics:\"}","created_at":"2026-01-30T13:46:43.808850","updated_at":"2026-01-30T13:46:43.808850"}
{"id":"ee70d901-5cab-5641-be80-aa34ee9891ca","content":"#### For Realtime Database:\n- Select the database instances you want to export\n- Choose between daily or streaming exports\n- Select the data location for your BigQuery export","document_title":"Firebase\/Firestore","h1":"Firebase\/Firestore","h2":"Setting Up Firebase BigQuery Export","h3":"Step 2: Configure Data Export","h4":"For Realtime Database:","file_path":"connectors\/firebase.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/firebase.md","chunk_metadata":"{\"Header 1\": \"Firebase\/Firestore\", \"Header 2\": \"Setting Up Firebase BigQuery Export\", \"Header 3\": \"Step 2: Configure Data Export\", \"Header 4\": \"For Realtime Database:\"}","created_at":"2026-01-30T13:46:43.808853","updated_at":"2026-01-30T13:46:43.808853"}
{"id":"b8301bbb-b51c-5c17-ab3c-bb1cf89cc989","content":"#### For Cloud Firestore:\n- Select the collections you want to export\n- Configure export frequency (daily or streaming)\n- Choose the BigQuery export location  \nFor detailed instructions, see the [Firebase BigQuery Export documentation](https:\/\/firebase.google.com\/docs\/projects\/bigquery-export).","document_title":"Firebase\/Firestore","h1":"Firebase\/Firestore","h2":"Setting Up Firebase BigQuery Export","h3":"Step 2: Configure Data Export","h4":"For Cloud Firestore:","file_path":"connectors\/firebase.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/firebase.md","chunk_metadata":"{\"Header 1\": \"Firebase\/Firestore\", \"Header 2\": \"Setting Up Firebase BigQuery Export\", \"Header 3\": \"Step 2: Configure Data Export\", \"Header 4\": \"For Cloud Firestore:\"}","created_at":"2026-01-30T13:46:43.808857","updated_at":"2026-01-30T13:46:43.808857"}
{"id":"3f9f014b-9698-5d9c-8243-baf3b30704d2","content":"## Connecting Shaped to Your Firebase Data  \nOnce your Firebase data is being exported to BigQuery, follow our [BigQuery integration guide](.\/bigquery) to connect Shaped to your data.  \nThe BigQuery integration will allow you to:\n- Sync your Firebase data to Shaped\n- Configure how and when data is refreshed\n- Apply filters and transformations as needed","document_title":"Firebase\/Firestore","h1":"Firebase\/Firestore","h2":"Connecting Shaped to Your Firebase Data","h3":"","h4":"","file_path":"connectors\/firebase.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/firebase.md","chunk_metadata":"{\"Header 1\": \"Firebase\/Firestore\", \"Header 2\": \"Connecting Shaped to Your Firebase Data\"}","created_at":"2026-01-30T13:46:43.808860","updated_at":"2026-01-30T13:46:43.808860"}
{"id":"76815485-b975-5937-b40c-0d4b8f579e72","content":"## Additional Resources  \n- [Firebase BigQuery Export Official Documentation](https:\/\/firebase.google.com\/docs\/projects\/bigquery-export)\n- [Google BigQuery Documentation](https:\/\/cloud.google.com\/bigquery\/docs)","document_title":"Firebase\/Firestore","h1":"Firebase\/Firestore","h2":"Additional Resources","h3":"","h4":"","file_path":"connectors\/firebase.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/firebase.md","chunk_metadata":"{\"Header 1\": \"Firebase\/Firestore\", \"Header 2\": \"Additional Resources\"}","created_at":"2026-01-30T13:46:43.808863","updated_at":"2026-01-30T13:46:43.808863"}
{"id":"122cc895-0cff-50e3-bcc9-7ee3a572fdf2","content":"# Snowplow  \nShaped can ingest data in real-time from your [Snowplow](https:\/\/snowplow.io)  instance, for either Snowplow Community Edition, or Snowplow BDP (Behavioral Data Platform).","document_title":"Snowplow","h1":"Snowplow","h2":"","h3":"","h4":"","file_path":"connectors\/snowplow.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/snowplow.md","chunk_metadata":"{\"Header 1\": \"Snowplow\"}","created_at":"2026-01-30T13:46:43.808966","updated_at":"2026-01-30T13:46:43.808966"}
{"id":"3e5aceae-c409-5cc4-a232-e3846c9aa672","content":"## Preparation  \nShaped consumes data from Snowplow via AWS Kinesis streams. In order to deploy a table backed by AWS Kinesis, you should create a table of schema type [KINESIS](\/docs\/connectors\/kinesis.md) and configure the table with the following fields:\n```\n- tenant_aws_account_id: <your_aws_account_id>\n- column_schema: <your_unified_event_schema>\n```  \nShaped will automatically provision an AWS Kinesis stream and a corresponding IAM role within the Shaped Ingestion AWS account with appropriate permissions to write to the Kinesis stream, and to be assumed by your AWS principal. This IAM role and Kinesis stream can be retrieved for you by using the get table details endpoint.","document_title":"Snowplow","h1":"Snowplow","h2":"Preparation","h3":"","h4":"","file_path":"connectors\/snowplow.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/snowplow.md","chunk_metadata":"{\"Header 1\": \"Snowplow\", \"Header 2\": \"Preparation\"}","created_at":"2026-01-30T13:46:43.808970","updated_at":"2026-01-30T13:46:43.808970"}
{"id":"4adbd1d3-98d7-5bbf-9dbc-5aa026684e73","content":"## Snowplow Configuration  \nEvents can be forwarded from Snowplow to Shaped in two manners:\n- [Snowbridge](https:\/\/docs.snowplow.io\/docs\/destinations\/forwarding-events\/snowbridge\/configuration\/sources\/kinesis\/): Snowplow's native tooling to forward events to destinations with minimal configuration.\n- [Custom Kinesis Forwarding](https:\/\/docs.snowplow.io\/docs\/destinations\/forwarding-events\/custom-integrations\/#kinesis-client-library-kcl-applications): Using a custom Kinesis Client Library application to forward events from your Snowplow enriched data stream to Shaped.","document_title":"Snowplow","h1":"Snowplow","h2":"Snowplow Configuration","h3":"","h4":"","file_path":"connectors\/snowplow.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/snowplow.md","chunk_metadata":"{\"Header 1\": \"Snowplow\", \"Header 2\": \"Snowplow Configuration\"}","created_at":"2026-01-30T13:46:43.808973","updated_at":"2026-01-30T13:46:43.808973"}
{"id":"3dbf98d4-af6d-5274-b1a8-e61599395ac3","content":"# MySQL  \n## Preparation  \nTo allow Shaped to connect to your [MySQL](https:\/\/www.mysql.com\/) database, you need to\ncreate a read-only user and share those credentials through the\n[Create Table](\/docs\/api#tag\/Table\/operation\/tables__create_table_post) endpoint.  You\ncan create a read-only user on a MySQL database with the following commands:  \n```sql\n# 1. Create a new user.\nCREATE USER '[username]'@'%' IDENTIFIED BY '[password]';\n\n# 2. Grant the user read access to all the tables in the schema. Note you can also\n# restrict this to your specific user, item and interaction views.\nGRANT SELECT ON [database_name].* TO '[username]'@'%';\n\n# 3. Save.\nFLUSH PRIVILEGES;\n```","document_title":"MySQL","h1":"MySQL","h2":"Preparation","h3":"","h4":"","file_path":"connectors\/mysql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mysql.md","chunk_metadata":"{\"Header 1\": \"MySQL\", \"Header 2\": \"Preparation\"}","created_at":"2026-01-30T13:46:43.809154","updated_at":"2026-01-30T13:46:43.809154"}
{"id":"bbada9b7-7c7d-58e4-b597-a567522f6421","content":"## Network Access\nIf your database is publicy accessible, reach out to the Shaped team to get our IPs for allow listing.\nOtherwise, check out our [private link](\/docs\/\/model_creation\/private-link.md) docs.","document_title":"MySQL","h1":"MySQL","h2":"Network Access","h3":"","h4":"","file_path":"connectors\/mysql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mysql.md","chunk_metadata":"{\"Header 1\": \"MySQL\", \"Header 2\": \"Network Access\"}","created_at":"2026-01-30T13:46:43.809158","updated_at":"2026-01-30T13:46:43.809158"}
{"id":"e4767fcb-e7dd-50ca-b3f1-a5eb1168b2e7","content":"## Table Configuration  \n### Required fields  \n| Field                   |  Example                                          |  Description\n| ------------------------|---------------------------------------------------|--------------------\n| schema_type             |  `MYSQL`                                          |  Specifies the connector schema type, in this case \"MYSQL\".\n| table            |  movies                                           | The name of the table to sync.\n| user             |  your_user                                        | Access account username.\n| password         |  pAssw0rd1!                                       | Access account Password.\n| host             |  my-mysql-db.xxxxxxx.us-east-2.rds.amazonaws.com  | Database hostname.\n| port             |  3306                                             | Database port (the default for MySQL is 3306).\n| database         |  movielens                                        | The name of the database that contains table to sync.\n| replication_key  |  updated_at                                       | The name of the column that contains a datetime key or ascending id for ordering data during incremental syncs.","document_title":"MySQL","h1":"MySQL","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/mysql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mysql.md","chunk_metadata":"{\"Header 1\": \"MySQL\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.809162","updated_at":"2026-01-30T13:46:43.809162"}
{"id":"d433378d-240f-50e4-876f-25c6bdaa63ea","content":"### Optional fields  \n| Field                   |  Example                                          |  Description\n| ------------------------|---------------------------------------------------|--------------------\n| columns          |  [\"productId\", \"color\", \"brand\", \"stockLevel\"]    | The name of the columns you wish to sync from MySQL into Shaped. If not specified, all columns will be synced.\n| unique_keys      |  [\"productId\"]                                   | Specify a list of columns that uniquely identify a row in the table, if duplicate rows are inserted with these keys, the latest row will be used.\n| batch_size       | 100000                                           | The number of rows to fetch from the database in each batch, changing this can improve throughput for large tables. The default is 10000.","document_title":"MySQL","h1":"MySQL","h2":"Table Configuration","h3":"Optional fields","h4":"","file_path":"connectors\/mysql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mysql.md","chunk_metadata":"{\"Header 1\": \"MySQL\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Optional fields\"}","created_at":"2026-01-30T13:46:43.809166","updated_at":"2026-01-30T13:46:43.809166"}
{"id":"ed113b69-c099-519f-992b-9965c856ebc2","content":"## Table Creation Example  \nBelow is an example of a MySQL table connector configuration:\n```yaml\nname: your_mysql_dataset\nschema_type: MYSQL\ntable: movies\nuser: your_user\npassword: pAssw0rd1!\nhost: my-mysql-db.xxxxxxx.us-east-2.rds.amazonaws.com\nport: 3306\ndatabase: movielens\nreplication_key: updated_at\n```  \nThe following payload will create a MySQL table and begin syncing data from Shaped using the Shaped CLI.\n```bash\nshaped create-table --file dataset.yaml\n```","document_title":"MySQL","h1":"MySQL","h2":"Table Creation Example","h3":"","h4":"","file_path":"connectors\/mysql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mysql.md","chunk_metadata":"{\"Header 1\": \"MySQL\", \"Header 2\": \"Table Creation Example\"}","created_at":"2026-01-30T13:46:43.809170","updated_at":"2026-01-30T13:46:43.809170"}
{"id":"296867d6-de36-5a4d-b7cf-e7acd5e644da","content":"# Segment  \nOur real-time data streaming infrastructure is built on-top of the\n[AWS Kinesis Data Streams](https:\/\/aws.amazon.com\/kinesis\/data-streams\/) service, as\nsuch we will be connecting [Segment](https:\/\/segment.com\/) to Shaped via the\n[Segment Kinesis Destination](https:\/\/segment.com\/docs\/connections\/destinations\/catalog\/amazon-kinesis\/).  \nTo begin connecting your Segment account, create a Shaped table with `schema_type: SEGMENT`, the event schema will be automatically\ncreated based on the Segment event specification. Once in `ACTIVE` state, you can access the Kinesis Data Stream name and\nIAM Role ARN to configure the Segment Data Destination, found via the Shaped CLI or API.","document_title":"Segment","h1":"Segment","h2":"","h3":"","h4":"","file_path":"connectors\/segment.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/segment.md","chunk_metadata":"{\"Header 1\": \"Segment\"}","created_at":"2026-01-30T13:46:43.809308","updated_at":"2026-01-30T13:46:43.809308"}
{"id":"10cb3bf5-b44c-5392-8f0a-43c48f493d5e","content":"## CLI\n```bash\nshaped view-table --table-name segment_events\n\ntable_name: segment_events\ntable_uri: https:\/\/api.shaped.ai\/v2\/tables\/segment_events\nschema_type: SEGMENT\ntable_schema: <event_schema>\nkinesis_stream_arn: arn:aws:kinesis:us-east-2:11111111111:stream\/ShapedDatasetStream-abc123\nkinesis_iam_role_arn: arn:aws:iam::11111111111:role\/ShapedDatasetAccessRole-abc123\n```","document_title":"Segment","h1":"Segment","h2":"CLI","h3":"","h4":"","file_path":"connectors\/segment.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/segment.md","chunk_metadata":"{\"Header 1\": \"Segment\", \"Header 2\": \"CLI\"}","created_at":"2026-01-30T13:46:43.809313","updated_at":"2026-01-30T13:46:43.809313"}
{"id":"4a5785ec-4632-5e10-920a-3a3bb20de4bc","content":"## API\n```bash\ncurl -X GET \"https:\/\/api.shaped.ai\/v2\/tables\/segment_events\" \\\n-H \"x-api-key: <API_KEY>\"\n```","document_title":"Segment","h1":"Segment","h2":"API","h3":"","h4":"","file_path":"connectors\/segment.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/segment.md","chunk_metadata":"{\"Header 1\": \"Segment\", \"Header 2\": \"API\"}","created_at":"2026-01-30T13:46:43.809317","updated_at":"2026-01-30T13:46:43.809317"}
{"id":"fa3638b3-90b7-5504-9411-baa4ac6c5bea","content":"## Configuring Segment  \nIn order to forward events from Segment to Kinesis you will need to perform the\nfollowing steps:  \n1. In your Segment dashboard source, navigate to 'Add Destination' then find 'Amazon Kinesis'.\n3. Click 'Edit', then enter the following details:\n* **AWS Kinesis Stream Name** \u2014 `\"ShapedDatasetStream-*****\"`\n* **AWS IAM Role Resource Name (ARN)** \u2014 `\"kinesisIamRoleArn\": \"arn:aws:iam::*****:role\/ShapedDatasetAccessRole-*****\"`\n* **AWS Region: us-east-2**\n4. When finished, enable the destination and save.","document_title":"Segment","h1":"Segment","h2":"Configuring Segment","h3":"","h4":"","file_path":"connectors\/segment.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/segment.md","chunk_metadata":"{\"Header 1\": \"Segment\", \"Header 2\": \"Configuring Segment\"}","created_at":"2026-01-30T13:46:43.809322","updated_at":"2026-01-30T13:46:43.809322"}
{"id":"35a0953f-0f5f-5404-b49a-4292488d4d4c","content":"# Databricks  \nPlease contact us at hello@shaped.ai for access to our\n[Databricks](https:\/\/www.databricks.com\/) connector.","document_title":"Databricks","h1":"Databricks","h2":"","h3":"","h4":"","file_path":"connectors\/databricks.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/databricks.md","chunk_metadata":"{\"Header 1\": \"Databricks\"}","created_at":"2026-01-30T13:46:43.809384","updated_at":"2026-01-30T13:46:43.809384"}
{"id":"3ef92225-19d6-5f13-a867-aea15b51147a","content":"# S3  \nThe [S3](https:\/\/aws.amazon.com\/s3\/) connector allows you to create a Shaped model directly from a set of\n[Parquet](https:\/\/parquet.apache.org\/), CSV, TSV, or JSONL files within an S3 bucket.  \nShaped fetches data from the given S3 bucket periodically each time a new file is added to the buicket.\nTo ensure your model is trained on the most recent data, make sure you push the latest data to S3 periodically.  \n**Info:** In order for Shaped to incrementally load data from S3, the files must be lexicographically sorted by name, and the file names must be unique.\nThe simplest way to achieve this is to include a timestamp suffix in the file names, such that the most recent files are lexicographically last.","document_title":"S3","h1":"S3","h2":"","h3":"","h4":"","file_path":"connectors\/s3.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/s3.md","chunk_metadata":"{\"Header 1\": \"S3\"}","created_at":"2026-01-30T13:46:43.809562","updated_at":"2026-01-30T13:46:43.809562"}
{"id":"8c169914-3112-5c65-9140-3e0186d13357","content":"## Resource Access  \nShaped needs access to the S3 bucket that contains your files. This can be done by\nmodifying the bucket policy to grant explicit read access to the Shaped AWS Customer Data Access IAM User.  \nTo grant access:  \n1. Update the bucket policy attached to your S3 bucket to grant the following permissions:\n* s3:GetObject\n* s3:ListBucket  \n2. In this bucket policy, grant the Shaped AWS Customer Data Access IAM User permissions to access the bucket:  \n```json\n{\n\"Version\": \"2012-10-17\",\n\"Statement\": [\n{\n\"Effect\": \"Allow\",\n\"Principal\": {\n\"AWS\": \"arn:aws:iam::<shaped_account_id>:role\/CustomerS3DataAccessRole\"\n},\n\"Action\": [\n\"s3:GetObject\",\n\"s3:ListBucket\"\n],\n\"Resources\": [\n\"arn:aws:s3\n{your_bucket}\",\n\"arn:aws:s3\n{your_bucket}\/*\"\n]\n}\n]\n}\n```  \nThe Shaped AWS Account ID is available on request from the Shaped team.","document_title":"S3","h1":"S3","h2":"Resource Access","h3":"","h4":"","file_path":"connectors\/s3.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/s3.md","chunk_metadata":"{\"Header 1\": \"S3\", \"Header 2\": \"Resource Access\"}","created_at":"2026-01-30T13:46:43.809566","updated_at":"2026-01-30T13:46:43.809566"}
{"id":"510e7107-0334-5af0-80d7-1e752bc30933","content":"## Table Configuration  \n### Required fields  \n| Field                   |  Example                                          |  Description\n| ------------------------|---------------------------------------------------|--------------------\n| schema_type      |  `CUSTOM`                                         |  Specifies the connector schema type, in this case \"CUSTOM\".\n| column_schema    |                                                   |  The schema of the data contained within files.\n| s3_path          | s3:\/\/shaped-data\/product\/                         |  The path to the directory within the bucket, with the format `s3:\/\/{bucket}\/{path}\/`. Note: If a path is provided, we will expand the path to include all files within the directory. If a specific glob pattern is provided, this will be used to filter the files, i.e. `s3:\/\/shaped-data\/product\/*.parquet.gz`.\n| s3_format        | `PARQUET`                                         |  The type of file to sync from S3 into Shaped, currently supports `PARQUET`, `CSV`, `TSV` and `JSON`.\n| unique_keys   | [\"id\"]                          | Specify a list of columns that uniquely identify a row in the table, if duplicate rows are inserted with these keys, the latest row will be used.","document_title":"S3","h1":"S3","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/s3.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/s3.md","chunk_metadata":"{\"Header 1\": \"S3\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.809570","updated_at":"2026-01-30T13:46:43.809570"}
{"id":"69746d3e-6c8f-51f0-8e6d-0251cf94d2b4","content":"# Rudderstack  \nOur real-time data streaming infrastructure is built on-top of the\n[AWS Kinesis Data Streams](https:\/\/aws.amazon.com\/kinesis\/data-streams\/) service, as\nsuch we will be connecting [Rudderstack](https:\/\/rudderstack.com\/) to Shaped via the\n[Kinesis Data Stream Event Streaming Destination](https:\/\/www.rudderstack.com\/docs\/destinations\/streaming-destinations\/amazon-kinesis\/).  \nTo begin connecting your Rudderstack account, create a Shaped table with `schema_type: RUDDERSTACK`, the event schema will be automatically\ncreated based on the Rudderstack event specification.  \n```bash title=\"rudderstack_dataset.yaml\"\nname: rudderstack_events\nschema_type: RUDDERSTACK\ndescription: Events including clicks, likes and comments\n```\n```\nshaped create-table --file rudderstack_dataset.yaml\n```  \nOnce in `ACTIVE` state, you can access the Kinesis Data Stream name and\nIAM Role ARN to configure the Rudderstack Data Destination, found via the Shaped CLI or API.","document_title":"Rudderstack","h1":"Rudderstack","h2":"","h3":"","h4":"","file_path":"connectors\/rudderstack.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/rudderstack.md","chunk_metadata":"{\"Header 1\": \"Rudderstack\"}","created_at":"2026-01-30T13:46:43.809723","updated_at":"2026-01-30T13:46:43.809723"}
{"id":"37db1fe2-8f8a-54be-a3dc-90e7ecacb0b6","content":"## CLI\n```bash\nshaped view-table --table-name rudderstack_events\n\ntable_name: rudderstack_events\ntable_uri: https:\/\/api.shaped.ai\/v2\/tables\/rudderstack_events\nschema_type: RUDDERSTACK\ntable_schema: <event_schema>\nkinesis_stream_arn: arn:aws:kinesis:us-east-2:11111111111:stream\/ShapedDatasetStream-abc123\nkinesis_iam_role_arn: arn:aws:iam::11111111111:role\/ShapedDatasetAccessRole-abc123\n```","document_title":"Rudderstack","h1":"Rudderstack","h2":"CLI","h3":"","h4":"","file_path":"connectors\/rudderstack.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/rudderstack.md","chunk_metadata":"{\"Header 1\": \"Rudderstack\", \"Header 2\": \"CLI\"}","created_at":"2026-01-30T13:46:43.809727","updated_at":"2026-01-30T13:46:43.809727"}
{"id":"f099f83e-caa4-5fa1-9d94-f0b42a5a6fdc","content":"## API\n```bash\ncurl -X GET \"https:\/\/api.shaped.ai\/v2\/tables\/rudderstack_events\" \\\n-H \"x-api-key: <API_KEY>\"\n```","document_title":"Rudderstack","h1":"Rudderstack","h2":"API","h3":"","h4":"","file_path":"connectors\/rudderstack.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/rudderstack.md","chunk_metadata":"{\"Header 1\": \"Rudderstack\", \"Header 2\": \"API\"}","created_at":"2026-01-30T13:46:43.809730","updated_at":"2026-01-30T13:46:43.809730"}
{"id":"9143ac7c-22d8-58cd-99c0-e4a21c3eb959","content":"## Configuring Rudderstack  \nIn order to forward events from Rudderstack to Kinesis you will need to perform the following steps:  \n1. In Rudderstack, navigate to 'Cloud Destinations' then find 'Amazon Kinesis'.\nEnter a sync name, then click 'Create Sync'.\n3. Click Edit, then enter the following details:\n* **AWS Kinesis Stream Name** `\"ShapedDatasetStream-*****\"`\n* **AWS IAM Role Resource Name (ARN)** `\"kinesisIamRoleArn\": \"arn:aws:iam::*****:role\/ShapedDatasetAccessRole-*****\"`\n* **AWS Region:** `us-east-2`\n4. Use the Rudderstack Sources tab to select the events you want to send. You can send\nall events, but our team recommends choosing the most important events that indicate\nuser engagement on your content.\n5. When finished, enable the destination and save.","document_title":"Rudderstack","h1":"Rudderstack","h2":"Configuring Rudderstack","h3":"","h4":"","file_path":"connectors\/rudderstack.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/rudderstack.md","chunk_metadata":"{\"Header 1\": \"Rudderstack\", \"Header 2\": \"Configuring Rudderstack\"}","created_at":"2026-01-30T13:46:43.809734","updated_at":"2026-01-30T13:46:43.809734"}
{"id":"90a92010-03cb-5937-bd62-bfb308998702","content":"# Google Analytics  \nPlease contact us at hello@shaped.ai for access to our\n[Google Analytics](https:\/\/analytics.google.com\/) connector.","document_title":"Google Analytics","h1":"Google Analytics","h2":"","h3":"","h4":"","file_path":"connectors\/google-analytics.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/google-analytics.md","chunk_metadata":"{\"Header 1\": \"Google Analytics\"}","created_at":"2026-01-30T13:46:43.809790","updated_at":"2026-01-30T13:46:43.809790"}
{"id":"abf60edc-d5b6-5cc6-a478-85246a9da898","content":"# DynamoDB (Beta)  \nThe DynamoDB connector allows you to sync data from a DynamoDB table into Shaped.  \n**Warning:** This connector is currently in beta, and does not yet support incremental syncing. By default, the connector will scan the entire table once to fetch all the data. This can be overridden by setting the `schedule_interval` to a cron expression, and providing `unique_keys` to ensure that deduplication occurs. This will lead to a full table scan on every sync.","document_title":"DynamoDB (Beta)","h1":"DynamoDB (Beta)","h2":"","h3":"","h4":"","file_path":"connectors\/dynamodb.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/dynamodb.md","chunk_metadata":"{\"Header 1\": \"DynamoDB (Beta)\"}","created_at":"2026-01-30T13:46:43.809973","updated_at":"2026-01-30T13:46:43.809973"}
{"id":"1cb29a94-45bb-5f10-af26-49e85318a4a3","content":"## Preparation  \nTo allow Shaped to connect to your DynamoDB table, you need to grant Shaped\u2019s AWS service account read-only access to your table. You can do this through the AWS console or with the following steps:  \n1. Contact us for our service account via email and we will provide you with our AWS service account ARN.\n2. Create an IAM role in your AWS account that Shaped can assume. This role should have the following permissions:\n- `dynamodb:DescribeTable`\n- `dynamodb:Scan`\n- `dynamodb:GetItem`\n- `dynamodb:ListTables`\n3. Grant our service account permission to assume the IAM role you created by adding the following trust relationship policy to the role:\n```json\n{\n\"Version\": \"2012-10-17\",\n\"Statement\": [\n{\n\"Effect\": \"Allow\",\n\"Principal\": {\n\"AWS\": \"arn:aws:iam::123456789012:role\/shaped-service-account\"\n},\n\"Action\": \"sts:AssumeRole\"\n}\n]\n}\n```","document_title":"DynamoDB (Beta)","h1":"DynamoDB (Beta)","h2":"Preparation","h3":"","h4":"","file_path":"connectors\/dynamodb.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/dynamodb.md","chunk_metadata":"{\"Header 1\": \"DynamoDB (Beta)\", \"Header 2\": \"Preparation\"}","created_at":"2026-01-30T13:46:43.809977","updated_at":"2026-01-30T13:46:43.809977"}
{"id":"7b192c2d-f0d1-5f1f-8a04-3337f7fa4ecd","content":"## Table Configuration  \n### Required fields  \n| Field         | Example                                | Description\n|---------------|----------------------------------------|--------------------\n| schema_type   | `DYNAMODB`                             | Specifies the connector schema type, in this case \"DYNAMODB\".\n| table         | `my_dynamodb_table`                    | Specifies the name of the DynamoDB table.\n| aws_role_arn  | `arn:aws:iam::123456789012:role\/my_role` | Specifies the ARN of the IAM role that Shaped will assume when accessing the DynamoDB table.\n| aws_region    | `us-east-2`                            | Specifies the AWS region where the DynamoDB table is located.","document_title":"DynamoDB (Beta)","h1":"DynamoDB (Beta)","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/dynamodb.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/dynamodb.md","chunk_metadata":"{\"Header 1\": \"DynamoDB (Beta)\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.809981","updated_at":"2026-01-30T13:46:43.809981"}
{"id":"7a623393-032b-5397-8628-fccf2373a875","content":"### Optional fields  \n| Field                    | Example                                 | Description\n|--------------------------|-----------------------------------------|--------------------\n| infer_schema_sample_size | `100`                                   | Specifies the number of items to sample when inferring the schema of the DynamoDB table. Default is `100`.\n| scan_kwargs              | `{\"Limit\": 100}`                        | Specifies additional scan parameters to use when reading data from the DynamoDB table.\n| batch_size               | `1000`                                  | Specifies the number of records to fetch in each batch. Default is `1000`.\n| unique_keys              | `[\"id\"]`                                | Specifies the list of columns that uniquely identify a row in the table. If duplicate rows are inserted with these keys, the latest row will be used.\n| schedule_interval        | `0 0 * * *`                             | Specifies the schedule interval in crontab syntax for syncing data from the DynamoDB table. Default is @once.","document_title":"DynamoDB (Beta)","h1":"DynamoDB (Beta)","h2":"Table Configuration","h3":"Optional fields","h4":"","file_path":"connectors\/dynamodb.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/dynamodb.md","chunk_metadata":"{\"Header 1\": \"DynamoDB (Beta)\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Optional fields\"}","created_at":"2026-01-30T13:46:43.809985","updated_at":"2026-01-30T13:46:43.809985"}
{"id":"1e9b1b60-e4c0-532e-8c1b-8584815a1d7a","content":"# Microsoft SQL Server (MSSQL)  \n## Preparation  \nTo allow Shaped to connect to your [MSSQL](https:\/\/www.microsoft.com\/en-us\/sql-server\/sql-server-downloads\/) database,\nyou need to create a read-only user and share those credentials through the\n[Create Table](\/docs\/api#tag\/Table\/operation\/tables__create_table_post) endpoint.  \nYou can create a read-only user on a MSSQL database with the following commands:\n```sql\n-- 1. Create a new login (server-level).\nCREATE LOGIN [username] WITH PASSWORD = '[password]';\n\n-- 2. Create a user (database-level) and map it to the login.\nUSE [database_name];\nCREATE USER [username] FOR LOGIN [username];\n\n-- 3. Grant read-only access by adding the user to the db_datareader role.\nALTER ROLE db_datareader ADD MEMBER [username];\n\n-- 4. (Optional) Restrict access to specific tables instead of granting db_datareader role.\nGRANT SELECT ON [schema].[table_name] TO [username];\n```","document_title":"Microsoft SQL Server (MSSQL)","h1":"Microsoft SQL Server (MSSQL)","h2":"Preparation","h3":"","h4":"","file_path":"connectors\/mssql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mssql.md","chunk_metadata":"{\"Header 1\": \"Microsoft SQL Server (MSSQL)\", \"Header 2\": \"Preparation\"}","created_at":"2026-01-30T13:46:43.810171","updated_at":"2026-01-30T13:46:43.810171"}
{"id":"ca8ab16d-6478-5d6f-a791-422f9e18d495","content":"## Table Configuration  \n### Required fields  \n| Field                   |  Example                                          |  Description\n| ------------------------|---------------------------------------------------|--------------------\n| schema_type             |  `MSSQL`                                          |  Specifies the connector schema type, in this case \"MSSQL\".\n| table            |  movies                                           | The name of the table to sync.\n| user             |  your_user                                        | Access account username.\n| password         |  pAssw0rd1!                                       | Access account Password.\n| host             |  my-mssql-db.xxxxxxx.us-east-2.rds.amazonaws.com  | Database hostname.\n| port             |  1433                                             | Database port (the default for MSSQL is 1433).\n| database         |  movielens                                        | The name of the database that contains table to sync.\n| replication_key  |  updated_at                                       | The name of the column that contains a datetime key or ascending id for ordering data during incremental syncs.","document_title":"Microsoft SQL Server (MSSQL)","h1":"Microsoft SQL Server (MSSQL)","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/mssql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mssql.md","chunk_metadata":"{\"Header 1\": \"Microsoft SQL Server (MSSQL)\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.810177","updated_at":"2026-01-30T13:46:43.810177"}
{"id":"c7fe08a4-bf7f-5611-a5b3-e965cfe44b1c","content":"### Optional fields  \n| Field                   |  Example                                          |  Description\n| ------------------------|---------------------------------------------------|--------------------\n| columns          |  [\"productId\", \"color\", \"brand\", \"stockLevel\"]    | The name of the columns you wish to sync from MSSQL into Shaped. If not specified, all columns will be synced.\n| unique_keys      |  [\"productId\"]                                   | Specify a list of columns that uniquely identify a row in the table, if duplicate rows are inserted with these keys, the latest row will be used.\n| batch_size       | 100000                                           | The number of rows to fetch from the database in each batch, changing this can improve throughput for large tables. The default is 10000.","document_title":"Microsoft SQL Server (MSSQL)","h1":"Microsoft SQL Server (MSSQL)","h2":"Table Configuration","h3":"Optional fields","h4":"","file_path":"connectors\/mssql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mssql.md","chunk_metadata":"{\"Header 1\": \"Microsoft SQL Server (MSSQL)\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Optional fields\"}","created_at":"2026-01-30T13:46:43.810181","updated_at":"2026-01-30T13:46:43.810181"}
{"id":"e5baed3d-b7f7-5e9f-a3a6-2cf83be86168","content":"## Table Creation Example  \nBelow is an example of a MSSQL table connector configuration:\n```yaml\nname: your_mssql_dataset\nschema_type: MSSQL\ntable: movies\nuser: your_user\npassword: pAssw0rd1!\nhost: my-mssql-db.xxxxxxx.us-east-2.rds.amazonaws.com\nport: 3306\ndatabase: movielens\nreplication_key: updated_at\n```  \nThe following payload will create a MSSQL table and begin syncing data from Shaped using the Shaped CLI.\n```bash\nshaped create-table --file dataset.yaml\n```","document_title":"Microsoft SQL Server (MSSQL)","h1":"Microsoft SQL Server (MSSQL)","h2":"Table Creation Example","h3":"","h4":"","file_path":"connectors\/mssql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mssql.md","chunk_metadata":"{\"Header 1\": \"Microsoft SQL Server (MSSQL)\", \"Header 2\": \"Table Creation Example\"}","created_at":"2026-01-30T13:46:43.810184","updated_at":"2026-01-30T13:46:43.810184"}
{"id":"be400858-f11a-587c-879d-774cd18c84fa","content":"# ClickHouse  \n## Preparation  \nTo allow Shaped to connect to your [ClickHouse](https:\/\/clickhouse.com\/) database, you need to\ncreate a read-only user and share those credentials through the\n[Create Table](\/docs\/api#tag\/Table\/operation\/tables__create_table_post) endpoint. You\ncan create a read-only user on a ClickHouse database with the following commands:  \n```sql\n# 1. Create a new user with a password\nCREATE USER read_only_user IDENTIFIED BY 'secure_password1!';\n\n# 2. Grant SELECT privileges on the database you want to access\nGRANT SELECT ON database_name.* TO read_only_user;\n\n# 3. If you want to restrict access to specific tables, use:\nGRANT SELECT ON database_name.table_name TO read_only_user;\n```","document_title":"ClickHouse","h1":"ClickHouse","h2":"Preparation","h3":"","h4":"","file_path":"connectors\/clickhouse.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/clickhouse.md","chunk_metadata":"{\"Header 1\": \"ClickHouse\", \"Header 2\": \"Preparation\"}","created_at":"2026-01-30T13:46:43.810366","updated_at":"2026-01-30T13:46:43.810366"}
{"id":"022ec3c6-47c4-593e-ab0c-c5d48ad63978","content":"## Table Configuration  \n### Required fields  \n| Field           | Example                                   | Description\n|-----------------|-------------------------------------------|--------------------\n| schema_type     | `CLICKHOUSE`                              | Specifies the connector schema type, in this case \"CLICKHOUSE\".\n| table           | events                                    | The name of the table to sync.\n| user            | read_only_user                            | Access account username.\n| password        | secure_password1!                         | Access account password.\n| host            | clickhouse.example.com                    | Database hostname.\n| port            | 9440                                      | Database port (the default for ClickHouse HTTPS is 8443, HTTP is 8123).\n| replication_key | created_at                                | The name of the column that contains a datetime key or ascending id for ordering data during incremental syncs.","document_title":"ClickHouse","h1":"ClickHouse","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/clickhouse.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/clickhouse.md","chunk_metadata":"{\"Header 1\": \"ClickHouse\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.810370","updated_at":"2026-01-30T13:46:43.810370"}
{"id":"736b9df7-a322-5b3a-b5e2-0208256aea98","content":"### Optional fields  \n| Field            | Example                                   | Description\n|------------------|-------------------------------------------|--------------------\n| database         | analytics                                 | The name of the database that contains the table to sync. If not specified, the default database will be used.\n| columns          | [\"userId\", \"eventType\", \"timestamp\", \"properties\"] | The name of the columns you wish to sync from ClickHouse into Shaped. If not specified, all columns will be synced.\n| unique_keys      | [\"eventId\"]                               | Specify a list of columns that uniquely identify a row in the table, if duplicate rows are inserted with these keys, the latest row will be used.\n| description      | \"User events data\"                        | A description of the table.\n| schedule_interval| \"@hourly\"                                 | The schedule on which to sync data. Defaults to \"@hourly\".","document_title":"ClickHouse","h1":"ClickHouse","h2":"Table Configuration","h3":"Optional fields","h4":"","file_path":"connectors\/clickhouse.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/clickhouse.md","chunk_metadata":"{\"Header 1\": \"ClickHouse\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Optional fields\"}","created_at":"2026-01-30T13:46:43.810374","updated_at":"2026-01-30T13:46:43.810374"}
{"id":"5ca573ff-c23c-55d8-bb20-dbd81404ddf4","content":"## Table Creation Example  \nBelow is an example of a ClickHouse table connector configuration:  \n```yaml\nname: clickhouse_events_dataset\nschema_type: CLICKHOUSE\ntable: users\nuser: read_only_user\npassword: secure_password1!\nhost: clickhouse.example.com\nport: 9440\ndatabase: analytics\nreplication_key: updated_at\nunique_keys:\n- userId\ncolumns:\n- userId\n- eventType\n- timestamp\n- properties\n- created_at\n- updated_at\n```  \nThe following payload will create a ClickHouse table and begin syncing data from Shaped using the Shaped CLI:  \n```bash\nshaped create-table --file dataset.yaml\n```","document_title":"ClickHouse","h1":"ClickHouse","h2":"Table Creation Example","h3":"","h4":"","file_path":"connectors\/clickhouse.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/clickhouse.md","chunk_metadata":"{\"Header 1\": \"ClickHouse\", \"Header 2\": \"Table Creation Example\"}","created_at":"2026-01-30T13:46:43.810377","updated_at":"2026-01-30T13:46:43.810377"}
{"id":"66e91a18-6a1d-53ce-9735-edb24c22740b","content":"# Shopify  \nThe Shopify connector allows you to sync data from your Shopify store into Shaped.","document_title":"Shopify","h1":"Shopify","h2":"","h3":"","h4":"","file_path":"connectors\/shopify.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/shopify.md","chunk_metadata":"{\"Header 1\": \"Shopify\"}","created_at":"2026-01-30T13:46:43.810576","updated_at":"2026-01-30T13:46:43.810576"}
{"id":"d3bb7167-3f74-5cf0-8912-1d7897809edc","content":"## Preparation  \nTo allow Shaped to connect to your [Shopify](https:\/\/www.shopify.com\/) store, obtain an access token and provide your store name.  \n1. Log in to your Shopify admin panel.\n2. Navigate to **Settings** then **Apps** and select **Develop apps**.\n3. Click **Create an app** and follow the prompts to create a new private app.\n4. Go to **Configuration** and enable the required Admin API scopes for the data you want to sync.\n5. Once configured, retrieve the **Access token** to provide to Shaped.\n6. Note your **Store Name**, which is your Shopify store's name (Note: You don't need to include the domain) (e.g., `your-store`).","document_title":"Shopify","h1":"Shopify","h2":"Preparation","h3":"","h4":"","file_path":"connectors\/shopify.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/shopify.md","chunk_metadata":"{\"Header 1\": \"Shopify\", \"Header 2\": \"Preparation\"}","created_at":"2026-01-30T13:46:43.810580","updated_at":"2026-01-30T13:46:43.810580"}
{"id":"f5c5a1c7-1a16-5127-aa1c-7592d84c04a7","content":"## Table Configuration  \n### Required fields  \n| Field         | Example                      | Description                                                                                  |\n|---------------|------------------------------|----------------------------------------------------------------------------------------------|\n| name          | `shopify_products`           | Assign a name for your table.                                                              |\n| schema_type   | `SHOPIFY`                    | Specifies the connector schema type, in this case `\"SHOPIFY\"`.                               |\n| access_token  | `shp_1234567890abcdef`       | Your Shopify API access token.                                                               |\n| store         | `your-store`                 | Your Shopify store name, typically in the format `your-store`.                               |\n| stream        | `orders`                     | The Shopify API data stream to sync (e.g., `orders`, `products`, `customers`).               |","document_title":"Shopify","h1":"Shopify","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/shopify.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/shopify.md","chunk_metadata":"{\"Header 1\": \"Shopify\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.810584","updated_at":"2026-01-30T13:46:43.810584"}
{"id":"735126b1-938f-5144-a535-4f343101c528","content":"### Optional fields  \n| Field                     | Example                                    | Description                                                                                  |\n|---------------------------|--------------------------------------------|----------------------------------------------------------------------------------------------|\n| is_plus_account           | `true`                                       | Set to `true` if using a Shopify Plus account, required to sync the `users` stream.          |\n| start_date                | `2023-01-01T00:00:00Z`                       | The start date for syncing data. If not provided, syncing starts from the earliest data.     |\n| admin_url                 | `https:\/\/admin.shopify.com\/store\/your-store` | Your Shopify admin URL if different from the default.                                      |\n| batch_size                | `10000`                                      | Number of records to fetch from the Shopify API in each batch. Default is `1000`.           |\n| unique_keys               | `[\"id\"]`                                     | Specify a list of columns that uniquely identify a row in the table, if duplicate rows are inserted with these keys, the latest row will be used. |\n| schedule_interval         | `@hourly`                                    | Schedule interval for syncing data. Default is `@hourly`.                                    |","document_title":"Shopify","h1":"Shopify","h2":"Table Configuration","h3":"Optional fields","h4":"","file_path":"connectors\/shopify.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/shopify.md","chunk_metadata":"{\"Header 1\": \"Shopify\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Optional fields\"}","created_at":"2026-01-30T13:46:43.810588","updated_at":"2026-01-30T13:46:43.810588"}
{"id":"d15547e1-547b-5e6d-a4e2-b7e6741be1ac","content":"## Table Creation Example  \nBelow is an example of a Shopify table connector configuration:  \n```yaml\nname: your_shopify_dataset\nschema_type: SHOPIFY\naccess_token: shp_1234567890abcdef\nstore: your-store\nstream: orders\n```  \nThe following payload will create a Shopify table and begin syncing data from Shaped using the Shaped CLI.\n```bash\nshaped create-table --file dataset.yaml\n```","document_title":"Shopify","h1":"Shopify","h2":"Table Creation Example","h3":"","h4":"","file_path":"connectors\/shopify.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/shopify.md","chunk_metadata":"{\"Header 1\": \"Shopify\", \"Header 2\": \"Table Creation Example\"}","created_at":"2026-01-30T13:46:43.810591","updated_at":"2026-01-30T13:46:43.810591"}
{"id":"f4d2447e-84ad-5edc-800b-e06110ac6d19","content":"# Google Cloud Storage  \nPlease contact us at hello@shaped.ai for access to our\n[Google Cloud Storage](https:\/\/cloud.google.com\/storage) connector.","document_title":"Google Cloud Storage","h1":"Google Cloud Storage","h2":"","h3":"","h4":"","file_path":"connectors\/gcs.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/gcs.md","chunk_metadata":"{\"Header 1\": \"Google Cloud Storage\"}","created_at":"2026-01-30T13:46:43.810656","updated_at":"2026-01-30T13:46:43.810656"}
{"id":"83dc90d5-6dfc-53bb-aa57-aec3a0a0c0bf","content":"# Custom  \nIf you don't see your data source listed in our supported integrations, you can still\nstream data into Shaped using our custom data source support. This feature allows you to\nwrite data directly into a Shaped table using the [Shaped API](\/docs\/api) or the\n[Shaped CLI](https:\/\/github.com\/shaped-ai\/shaped-cli).","document_title":"Custom","h1":"Custom","h2":"","h3":"","h4":"","file_path":"connectors\/custom.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/custom.md","chunk_metadata":"{\"Header 1\": \"Custom\"}","created_at":"2026-01-30T13:46:43.810842","updated_at":"2026-01-30T13:46:43.810842"}
{"id":"7670a5e4-bc58-5cf9-9183-b4b9d30b74eb","content":"## Setting up a Shaped Table to receive events  \nBefore you can stream data into Shaped, you need to have provisioned a Shaped Table to\nreceive the data. If you don't already have a Shaped Table, you can create one by\ncalling the [Create Table API](\/docs\/api#tag\/Table) endpoint, or with the Shaped CLI.  \nFor example, let's create a table to stream custom events:  \n```yaml title=\"custom_dataset.yaml\"\nname: my_custom_dataset\nschema_type: CUSTOM\nunique_keys: [id]\ncolumn_schema:\nevent_name: String\nevent_time: DateTime\nuser_id: String\nevent_weight: Float\nevent_value: Int32\nevent_tags: Array(String)\njson_payload: String\n```  \n**Info:**\n`unique_keys` deduplicates rows in the table based on the provided key. It is common to use an `id` column which results in a unique row for each `id` value representing its latest version.","document_title":"Custom","h1":"Custom","h2":"Setting up a Shaped Table to receive events","h3":"","h4":"","file_path":"connectors\/custom.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/custom.md","chunk_metadata":"{\"Header 1\": \"Custom\", \"Header 2\": \"Setting up a Shaped Table to receive events\"}","created_at":"2026-01-30T13:46:43.810847","updated_at":"2026-01-30T13:46:43.810847"}
{"id":"44517cc4-bf06-5f01-8c28-b7f654d277f2","content":"### CLI  \n```bash\nshaped create-table --file custom_dataset.yaml\n```","document_title":"Custom","h1":"Custom","h2":"Setting up a Shaped Table to receive events","h3":"CLI","h4":"","file_path":"connectors\/custom.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/custom.md","chunk_metadata":"{\"Header 1\": \"Custom\", \"Header 2\": \"Setting up a Shaped Table to receive events\", \"Header 3\": \"CLI\"}","created_at":"2026-01-30T13:46:43.810851","updated_at":"2026-01-30T13:46:43.810851"}
{"id":"47b144a3-d773-53f1-8aa3-bc9ea206f6ef","content":"### Supported Data Types  \n| Data Type       | Description                              |\n|-----------------|------------------------------------------|\n| Bytes           | A sequence of bytes.                     |\n| String          | A sequence of characters.                |\n| Array(String)   | An array of strings.                     |\n| Array(Int32)    | An array of 32-bit integers.             |\n| Array(Int64)    | An array of 64-bit integers.             |\n| Int32           | A 32-bit integer.                        |\n| Int64           | A 64-bit integer.                        |\n| Float           | A single-precision floating point number.|\n| Double          | A double-precision floating point number.|\n| Array(Float64)  | An array of double-precision floating point numbers.|\n| Bool            | A boolean value (true or false).         |\n| DateTime        | A date and time value.                   |  \n**Info:** If you want to send JSON, send it as a String type. You'll need to stringify the JSON first. Then you can use the `->>` operator in the model queries to manipulate the JSON String.","document_title":"Custom","h1":"Custom","h2":"Setting up a Shaped Table to receive events","h3":"Supported Data Types","h4":"","file_path":"connectors\/custom.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/custom.md","chunk_metadata":"{\"Header 1\": \"Custom\", \"Header 2\": \"Setting up a Shaped Table to receive events\", \"Header 3\": \"Supported Data Types\"}","created_at":"2026-01-30T13:46:43.810855","updated_at":"2026-01-30T13:46:43.810855"}
{"id":"0e1f04f7-b3be-5349-a39a-f86e36b09374","content":"## Sending data to a Shaped Table  \n### CLI  \nFor experimentation, you can use the Shaped CLI to insert data into a table. Supported\nformats for the CLI include JSONL, CSV, TSV and Parquet.  \n```bash\nshaped table-insert --table-name my_custom_dataset --file my_data.jsonl\n```","document_title":"Custom","h1":"Custom","h2":"Sending data to a Shaped Table","h3":"CLI","h4":"","file_path":"connectors\/custom.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/custom.md","chunk_metadata":"{\"Header 1\": \"Custom\", \"Header 2\": \"Sending data to a Shaped Table\", \"Header 3\": \"CLI\"}","created_at":"2026-01-30T13:46:43.810859","updated_at":"2026-01-30T13:46:43.810859"}
{"id":"e499e086-d3a3-5415-991f-2631561f9473","content":"### API  \nSee the [API documentation](\/docs\/api#tag\/Table\/operation\/tables___table_insert_post) for more information on how to insert data into a table.  \n```bash\ncurl -X POST \"https:\/\/api.shaped.ai\/v2\/tables\/my_custom_dataset\/table_insert\" \\\n-H \"x-api-key: <API_KEY>\" \\\n-d @my_data.jsonl\n```","document_title":"Custom","h1":"Custom","h2":"Sending data to a Shaped Table","h3":"API","h4":"","file_path":"connectors\/custom.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/custom.md","chunk_metadata":"{\"Header 1\": \"Custom\", \"Header 2\": \"Sending data to a Shaped Table\", \"Header 3\": \"API\"}","created_at":"2026-01-30T13:46:43.810862","updated_at":"2026-01-30T13:46:43.810862"}
{"id":"69c6406f-05af-5aca-8909-3b8d27c4ce06","content":"# PostgreSQL  \n## Preparation  \nTo allow Shaped to connect to your [Postgres](https:\/\/www.postgresql.org) database,\nyou need to create a read-only user and pass the details into a\n[Create Table](\/docs\/api#tag\/Table\/operation\/tables__create_table_post) request. You can\ncreate a read-only user on your Postgres DB with the following commands:  \n```sql\n# 1. Create a new user.\nCREATE USER read_only_user WITH PASSWORD 'secure_password1!';\n\n# 2. Grant the user connection to the database.\nGRANT CONNECT ON DATABASE database_name TO read_only_user;\n\n# 3. Grant the user usage of the schema.\nGRANT USAGE ON SCHEMA public TO read_only_user;\n\n# 4. Grant the user read access to all the tables in the schema. Note you can also\n# restrict this to your specific user, item and interaction views.\nGRANT SELECT ON ALL TABLES IN SCHEMA public TO read_only_user;\n\n# 5. Grant the group access to future tables in the schema.\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT ON TABLES TO read_only_user;\n```","document_title":"PostgreSQL","h1":"PostgreSQL","h2":"Preparation","h3":"","h4":"","file_path":"connectors\/postgresql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/postgresql.md","chunk_metadata":"{\"Header 1\": \"PostgreSQL\", \"Header 2\": \"Preparation\"}","created_at":"2026-01-30T13:46:43.811199","updated_at":"2026-01-30T13:46:43.811199"}
{"id":"558ec019-27ce-5465-82c3-2c9619620232","content":"## Network Access\nIf your database is publicy accessible, reach out to the Shaped team to get our IPs for allow listing.\nOtherwise, check out our [private link](\/docs\/\/model_creation\/private-link.md) docs.","document_title":"PostgreSQL","h1":"PostgreSQL","h2":"Network Access","h3":"","h4":"","file_path":"connectors\/postgresql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/postgresql.md","chunk_metadata":"{\"Header 1\": \"PostgreSQL\", \"Header 2\": \"Network Access\"}","created_at":"2026-01-30T13:46:43.811203","updated_at":"2026-01-30T13:46:43.811203"}
{"id":"6051c1cc-503c-58e6-8989-7800f75f0153","content":"## Table Configuration  \n### Required fields  \n| Field                   | Example                                           | Description\n|-------------------------|---------------------------------------------------|--------------------\n| schema_type             | `POSTGRES`                                        | Specifies the connector schema type, in this case \"Postgres\".\n| table            | movies                                            | The name of the table to sync.\n| user             | your_user                                         | Access account username.\n| password         | pAssw0rd1!                                        | Access account password.\n| host             | my-postgres-db.xxxxxxx.us-east-2.rds.amazonaws.com| Database hostname.\n| port             | 5432                                              | Database port (the default for Postgres is 5432).\n| database         | movielens                                         | The name of the database that contains table to sync.\n| replication_key  | updated_at                                        | The name of the column that contains a datetime key or ascending id for ordering data during incremental syncs.","document_title":"PostgreSQL","h1":"PostgreSQL","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/postgresql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/postgresql.md","chunk_metadata":"{\"Header 1\": \"PostgreSQL\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.811206","updated_at":"2026-01-30T13:46:43.811206"}
{"id":"b76376cd-7008-5f69-b510-11b89942e0f8","content":"### Optional fields  \n| Field                            | Example                                  | Description\n|----------------------------------|------------------------------------------|--------------------\n| database_schema           | public                                   | The name of the schema that contains table to sync.\n| columns                   | [\"productId\", \"color\", \"brand\", \"stockLevel\"] | The name of the columns you wish to sync from Postgres into Shaped. If not specified, all columns will be synced.\n| unique_keys            | [\"productId\"]                            | Specify a list of columns that uniquely identify a row in the table, if duplicate rows are inserted with these keys, the latest row will be used.\n| ssl_certificate_authority | (certificate content)                    | The certificate authority that should be used to verify the server's identity.\n| ssl_client_certificate    | (certificate content)                    | The certificate that should be used to verify your identity to the server.\n| ssl_client_private_key    | (key content)                            | The private key for the certificate you provided.\n| ssh_tunnel_host           | ssh.example.com                          | The hostname of the SSH server to tunnel through.\n| ssh_tunnel_port           | 22                                       | The port of the SSH server (default is 22).\n| ssh_tunnel_username       | your_ssh_username                        | The username for SSH authentication.\n| ssh_tunnel_password       | your_ssh_password                        | The password for SSH authentication (if not using private key).\n| ssh_tunnel_private_key    | (key content)                            | The content of the private key for SSH authentication. Can be used instead of private_key_path.\n| ssh_tunnel_private_key_password | (password)                              | The password for the private key (if using ssh_tunnel_private_key).\n| batch_size       | 100000                                           | The number of rows to fetch from the database in each batch, changing this can improve throughput for large tables. The default is 10000.","document_title":"PostgreSQL","h1":"PostgreSQL","h2":"Table Configuration","h3":"Optional fields","h4":"","file_path":"connectors\/postgresql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/postgresql.md","chunk_metadata":"{\"Header 1\": \"PostgreSQL\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Optional fields\"}","created_at":"2026-01-30T13:46:43.811209","updated_at":"2026-01-30T13:46:43.811209"}
{"id":"787b354d-4445-5776-86df-b75727598c94","content":"## Table Creation Example  \nBelow is an example of a Postgres table connector configuration:\n```yaml\nname: your_postgres_dataset\nschema_type: POSTGRES\ntable: movies\nuser: your_user\npassword: pAssw0rd1!\nhost: my-postgres-db.xxxxxxx.us-east-2.rds.amazonaws.com\nport: 5432\ndatabase: movielens\nreplication_key: updated_at\n```  \nThe following payload will create a Postgres table and begin syncing data from Shaped using the Shaped CLI.\n```bash\nshaped create-table --file dataset.yaml\n```","document_title":"PostgreSQL","h1":"PostgreSQL","h2":"Table Creation Example","h3":"","h4":"","file_path":"connectors\/postgresql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/postgresql.md","chunk_metadata":"{\"Header 1\": \"PostgreSQL\", \"Header 2\": \"Table Creation Example\"}","created_at":"2026-01-30T13:46:43.811213","updated_at":"2026-01-30T13:46:43.811213"}
{"id":"57d55726-55cf-5d6d-b958-07c8771c11c9","content":"# Redshift  \n## Preparation  \nTo allow Shaped to connect to your\n[Redshift data warehouse](https:\/\/aws.amazon.com\/redshift\/), you need to create a\nread-only user and share its credentials through the\n[Create Table](\/docs\/api#tag\/Table\/operation\/tables__create_table_post) request. You can\ncreate this user with the following steps on your Redshift cluster:  \n```sql\n# 1. Create a new user.\nCREATE USER read_only_user WITH PASSWORD 'secure_password1!';\n\n# 2. Create a group for granting\/revoking permissions.\nCREATE GROUP read_only_group;\n\n# 3. Add user to group.\nALTER GROUP read_only_group ADD USER read_only_user;\n\n# 4. Revoke default granted create rights in schema from group.\nREVOKE CREATE ON SCHEMA public FROM GROUP read_only_group;\n\n# 5. Grant the group usage access to the schema.\nGRANT USAGE ON SCHEMA public TO group read_only_group;\n\n# 6. Grant the group read access to all the tables in the schema. Note you can also\n# restrict this to your specific user, item and interaction views.\nGRANT SELECT ON ALL TABLES IN SCHEMA public TO group read_only_group;\n\n# 7. Grant the group access to future tables in the schema.\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT ON TABLES TO group read_only_group;\n```","document_title":"Redshift","h1":"Redshift","h2":"Preparation","h3":"","h4":"","file_path":"connectors\/redshift.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/redshift.md","chunk_metadata":"{\"Header 1\": \"Redshift\", \"Header 2\": \"Preparation\"}","created_at":"2026-01-30T13:46:43.811579","updated_at":"2026-01-30T13:46:43.811579"}
{"id":"42a21fb3-c31c-5108-b033-12737e9d99b7","content":"## Network Access\nIf your database is publicy accessible, reach out to the Shaped team to get our IPs for allow listing.\nOtherwise, check out our [private link](\/docs\/\/model_creation\/private-link.md) docs.","document_title":"Redshift","h1":"Redshift","h2":"Network Access","h3":"","h4":"","file_path":"connectors\/redshift.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/redshift.md","chunk_metadata":"{\"Header 1\": \"Redshift\", \"Header 2\": \"Network Access\"}","created_at":"2026-01-30T13:46:43.811584","updated_at":"2026-01-30T13:46:43.811584"}
{"id":"98ef9da0-2a17-51dc-9ec2-a76cbada23b8","content":"## Table Configuration  \n### Required fields  \n| Field                   |  Example                                          |  Description\n| ------------------------|---------------------------------------------------|--------------------\n| schema_type             |  `REDSHIFT`                                       |  Specifies the connector schema type, in this case \"REDSHIFT\".\n| table            |  movies                                           | The name of the table to sync.\n| user             |  your_user                                        | Access account username.\n| password         |  pAssw0rd1!                                       | Access account Password.\n| host             |  my-redshift-db.xxxxxxx.us-east-2.rds.amazonaws.com  | Database hostname.\n| port             |  5439                                             | Database port (the default for Redshift is 5439).\n| database         |  movielens                                        | The name of the database that contains that contains table to sync.\n| replication_key  |  updated_at                                       | The name of the column that contains a datetime key or ascending id for ordering data during incremental syncs.","document_title":"Redshift","h1":"Redshift","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/redshift.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/redshift.md","chunk_metadata":"{\"Header 1\": \"Redshift\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.811587","updated_at":"2026-01-30T13:46:43.811587"}
{"id":"fc423b8d-1ca6-54b1-ac7c-479febdc854e","content":"### Optional fields  \n| Field                   |  Example                                          |  Description\n| ------------------------|---------------------------------------------------|--------------------\n| database_schema  |  public                                           | The name of the schema that contains table to sync.\n| columns          |  [\"productId\", \"color\", \"brand\", \"stockLevel\"]    | the name of the columns you wish to sync from Redshift into Shaped. If not specified, all columns will be synced.\n| unique_keys      |  [\"productId\"]                                   | Specify a list of columns that uniquely identify a row in the table, if duplicate rows are inserted with these keys, the latest row will be used.\n| batch_size       | 100000                                           | The number of rows to fetch from the database in each batch, changing this can improve throughput for large tables. The default is 10000.","document_title":"Redshift","h1":"Redshift","h2":"Table Configuration","h3":"Optional fields","h4":"","file_path":"connectors\/redshift.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/redshift.md","chunk_metadata":"{\"Header 1\": \"Redshift\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Optional fields\"}","created_at":"2026-01-30T13:46:43.811591","updated_at":"2026-01-30T13:46:43.811591"}
{"id":"5e5e9cc8-77f5-55de-821c-f8f09b2a4d2b","content":"## Table Creation Example  \nBelow is an example of a Redshift table connector configuration:\n```yaml\nname: your_redshift_dataset\nschema_type: REDSHIFT\ntable: movies\nuser: your_user\npassword: pAssw0rd1!\nhost: my-redshift-db.xxxxxxx.us-east-2.rds.amazonaws.com\nport: 5439\ndatabase: movielens\ndatabase_schema: public\nreplication_key: updated_at\n```  \nThe following payload will create a Redshift table and begin syncing data from Shaped using the Shaped CLI.\n```bash\nshaped create-table --file dataset.yaml\n```","document_title":"Redshift","h1":"Redshift","h2":"Table Creation Example","h3":"","h4":"","file_path":"connectors\/redshift.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/redshift.md","chunk_metadata":"{\"Header 1\": \"Redshift\", \"Header 2\": \"Table Creation Example\"}","created_at":"2026-01-30T13:46:43.811595","updated_at":"2026-01-30T13:46:43.811595"}
{"id":"9540d18d-5133-5bb0-9ca7-ebf02278caad","content":"# Mux  \n[Mux](https:\/\/www.mux.com\/) is a video platform that provides APIs for streaming video and monitoring video performance. Shaped can integrate with Mux to ingest viewer video engagement data via AWS Kinesis.","document_title":"Mux","h1":"Mux","h2":"","h3":"","h4":"","file_path":"connectors\/mux.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mux.md","chunk_metadata":"{\"Header 1\": \"Mux\"}","created_at":"2026-01-30T13:46:43.811926","updated_at":"2026-01-30T13:46:43.811926"}
{"id":"a86feab7-ea97-5984-8958-e3de66226b77","content":"## Overview  \nThis integration allows you to:\n- Stream video viewing data from Mux to Shaped in real-time\n- Analyze viewer engagement and video performance metrics\n- Combine Mux data with other data sources in Shaped  \nThe integration works by:\n1. Creating a Kinesis table in Shaped with an appropriate schema for Mux data\n2. Configuring Mux to export data to the Kinesis stream provisioned by Shaped","document_title":"Mux","h1":"Mux","h2":"Overview","h3":"","h4":"","file_path":"connectors\/mux.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mux.md","chunk_metadata":"{\"Header 1\": \"Mux\", \"Header 2\": \"Overview\"}","created_at":"2026-01-30T13:46:43.811936","updated_at":"2026-01-30T13:46:43.811936"}
{"id":"80e79d72-544d-5662-b293-2e3c25ae8835","content":"## Table Configuration  \nTo receive Mux video views data, you'll need to create a Kinesis table in Shaped.","document_title":"Mux","h1":"Mux","h2":"Table Configuration","h3":"","h4":"","file_path":"connectors\/mux.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mux.md","chunk_metadata":"{\"Header 1\": \"Mux\", \"Header 2\": \"Table Configuration\"}","created_at":"2026-01-30T13:46:43.811942","updated_at":"2026-01-30T13:46:43.811942"}
{"id":"8b74a953-209c-5712-95ff-a21693a57502","content":"### Required fields  \n| Field         | Example                         | Description\n|---------------|---------------------------------|--------------------\n| schema_type   | `KINESIS`                       | Specifies the connector schema type, in this case \"KINESIS\".\n| column_schema | See below                       | Specifies the schema of the table matching Mux's data structure.\n| unique_keys   | [\"view_id\"]                     | Specify the column that uniquely identifies a row in the table.\n| tenant_aws_account_id | \"123456789012\"          | Your AWS Account ID where Mux will be configured to send data from.","document_title":"Mux","h1":"Mux","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/mux.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mux.md","chunk_metadata":"{\"Header 1\": \"Mux\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.811946","updated_at":"2026-01-30T13:46:43.811946"}
{"id":"a6c2e64f-1b89-5621-8ab5-abb5499bf4f1","content":"### Example Schema for Mux Video Views  \n```yaml title=\"mux_views_dataset.yaml\"\nname: mux_video_views\nschema_type: KINESIS\nunique_keys: [view_id]\ncolumn_schema:\nview_id: String\nviewer_os_family: String\nviewer_application_name: String\nvideo_title: String\nview_start: DateTime\nview_end: DateTime\nvideo_id: String\nplayer_error_code: String\nplayer_error_message: String\nplayer_error_type: String\nplayer_startup_time: Float\nplayer_watch_time: Float\nvideo_startup_time: Float\nvideo_duration: Float\nview_max_request_latency: Float\nview_max_downscale_percentage: Float\nview_max_upscale_percentage: Float\nview_average_request_throughput: Float\nview_average_request_latency: Float\nview_error_count: Int32\nviewer_experience_score: Float\ncontinent_code: String\ncountry_code: String\ncity: String\nregion: String\nmetadata: String\ntenant_aws_account_id: \"123456789012\"\n```  \nNote: Adjust the schema as needed to match the specific Mux data points you want to capture. The above example includes common fields from Mux video view events.","document_title":"Mux","h1":"Mux","h2":"Table Configuration","h3":"Example Schema for Mux Video Views","h4":"","file_path":"connectors\/mux.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mux.md","chunk_metadata":"{\"Header 1\": \"Mux\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Example Schema for Mux Video Views\"}","created_at":"2026-01-30T13:46:43.811950","updated_at":"2026-01-30T13:46:43.811950"}
{"id":"55a3d6da-43b6-510e-b9fe-1953fb40c178","content":"### Creating the Table  \n```bash\nshaped create-table --file mux_views_dataset.yaml\n```  \nOnce created, the table will be provisioned asynchronously and will transition from `SCHEDULING` to `DEPLOYING` then `ACTIVE` once the Kinesis Data Stream is ready to receive events.","document_title":"Mux","h1":"Mux","h2":"Table Configuration","h3":"Creating the Table","h4":"","file_path":"connectors\/mux.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mux.md","chunk_metadata":"{\"Header 1\": \"Mux\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Creating the Table\"}","created_at":"2026-01-30T13:46:43.811954","updated_at":"2026-01-30T13:46:43.811954"}
{"id":"ecd2cf1e-817f-576d-b446-12b4112604d5","content":"## Connecting Mux to Shaped  \nWhen the Kinesis table is provisioned, Shaped will provide:\n- `Kinesis Stream ARN` - The Amazon Resource Name of the Kinesis Data Stream\n- `Kinesis Access Role ARN` - The IAM Role that Mux will need to assume to send data to the stream","document_title":"Mux","h1":"Mux","h2":"Connecting Mux to Shaped","h3":"","h4":"","file_path":"connectors\/mux.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mux.md","chunk_metadata":"{\"Header 1\": \"Mux\", \"Header 2\": \"Connecting Mux to Shaped\"}","created_at":"2026-01-30T13:46:43.811958","updated_at":"2026-01-30T13:46:43.811958"}
{"id":"80c716c1-8975-52f1-8f30-907a27e8d97b","content":"### Configuring Mux Export to Kinesis  \nFollow these steps to configure Mux to export data to your Shaped Kinesis stream:  \n1. In the Mux dashboard, navigate to **Settings** > **Data Export**\n2. Select **Amazon Kinesis Data Streams** as the export destination\n3. Configure the export with the following information:\n- **AWS Region**: The region of your Kinesis stream (provided by Shaped)\n- **Kinesis Stream Name**: Extract this from the Kinesis Stream ARN provided by Shaped\n- **AWS IAM Role ARN**: The Kinesis Access Role ARN provided by Shaped  \n4. Select the data types you want to export (ensure \"Video Views\" is selected)\n5. Click \"Save\" to activate the export  \nFor more detailed instructions, refer to [Mux's documentation on exporting to Amazon Kinesis Data Streams](https:\/\/www.mux.com\/docs\/guides\/export-amazon-kinesis-data-streams).","document_title":"Mux","h1":"Mux","h2":"Connecting Mux to Shaped","h3":"Configuring Mux Export to Kinesis","h4":"","file_path":"connectors\/mux.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mux.md","chunk_metadata":"{\"Header 1\": \"Mux\", \"Header 2\": \"Connecting Mux to Shaped\", \"Header 3\": \"Configuring Mux Export to Kinesis\"}","created_at":"2026-01-30T13:46:43.811962","updated_at":"2026-01-30T13:46:43.811962"}
{"id":"7a6e6554-5d7e-5546-828a-2a2277c168ab","content":"## Data Validation  \nAfter setting up the export, you can validate that data is flowing correctly:  \n1. Stream a test video through your Mux-powered player\n2. Check the Shaped dashboard  to confirm that video view data is being received","document_title":"Mux","h1":"Mux","h2":"Data Validation","h3":"","h4":"","file_path":"connectors\/mux.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mux.md","chunk_metadata":"{\"Header 1\": \"Mux\", \"Header 2\": \"Data Validation\"}","created_at":"2026-01-30T13:46:43.811965","updated_at":"2026-01-30T13:46:43.811965"}
{"id":"fb14f3ab-c151-5c61-adff-768a878d157b","content":"## Troubleshooting  \nIf you don't see data appearing in Shaped:  \n1. Check that the Mux export is configured correctly and showing as \"Active\" in the Mux dashboard\n2. Verify the IAM role permissions are correctly set up\n3. Confirm the Kinesis table is in \"Active\" state\n4. Contact Shaped support for further assistance with debugging connection issues","document_title":"Mux","h1":"Mux","h2":"Troubleshooting","h3":"","h4":"","file_path":"connectors\/mux.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mux.md","chunk_metadata":"{\"Header 1\": \"Mux\", \"Header 2\": \"Troubleshooting\"}","created_at":"2026-01-30T13:46:43.811969","updated_at":"2026-01-30T13:46:43.811969"}
{"id":"81f45d52-69dd-51ee-9cf4-274ab50715e5","content":"# Google Pub\/Sub  \nPlease contact us at hello@shaped.ai for access to our [Pub Sub](https:\/\/cloud.google.com\/pubsub)\nconnector.","document_title":"Google Pub\/Sub","h1":"Google Pub\/Sub","h2":"","h3":"","h4":"","file_path":"connectors\/pub-sub.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/pub-sub.md","chunk_metadata":"{\"Header 1\": \"Google Pub\/Sub\"}","created_at":"2026-01-30T13:46:43.812048","updated_at":"2026-01-30T13:46:43.812048"}
{"id":"c08b912f-48e6-54be-bf2b-9cce92eb183f","content":"# Kinesis  \nOur real-time data streaming infrastructure is built on-top of the\n[AWS Kinesis Data Streams](https:\/\/aws.amazon.com\/kinesis\/data-streams\/) service.  \nAs part of this integration Shaped can also receive arbitrary schema-fied JSON events for customers that would like to deliver data in real-time,\neither by sending events directly to the Kinesis Data Stream or by sending events to the [Shaped Table Insert API Method](https:\/\/docs.shaped.ai\/docs\/api#tag\/Table\/operation\/tables___table_insert_post).","document_title":"Kinesis","h1":"Kinesis","h2":"","h3":"","h4":"","file_path":"connectors\/kinesis.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/kinesis.md","chunk_metadata":"{\"Header 1\": \"Kinesis\"}","created_at":"2026-01-30T13:46:43.812496","updated_at":"2026-01-30T13:46:43.812496"}
{"id":"e4f70c14-d265-53be-9ef6-55628b04db6a","content":"## Table Configuration  \n### Required fields  \n| Field         | Example                         | Description\n|---------------|---------------------------------|--------------------\n| schema_type   | `KINESIS`                       | Specifies the connector schema type, in this case \"KINESIS\".\n| column_schema | See below                       | Specifies the schema of the table.\n| unique_keys   | [\"id\"]                          | Specify a list of columns that uniquely identify a row in the table, if duplicate rows are inserted with these keys, the latest row will be used.","document_title":"Kinesis","h1":"Kinesis","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/kinesis.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/kinesis.md","chunk_metadata":"{\"Header 1\": \"Kinesis\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.812500","updated_at":"2026-01-30T13:46:43.812500"}
{"id":"1ff6c7cb-b7c2-56d0-94a4-c9ef1cd6a472","content":"### Optional fields  \n| Field                  | Example                                  | Description\n|------------------------|------------------------------------------|--------------------\n| tenant_aws_account_id  | \"123456789012\"                           | Specifies the AWS Account ID of the tenant that will be sending data to the Kinesis Data Stream. If this field is provided, the Kinesis Access Role ARN will be provided to the tenant to assume in order to send events to the Kinesis Data Stream directly.","document_title":"Kinesis","h1":"Kinesis","h2":"Table Configuration","h3":"Optional fields","h4":"","file_path":"connectors\/kinesis.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/kinesis.md","chunk_metadata":"{\"Header 1\": \"Kinesis\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Optional fields\"}","created_at":"2026-01-30T13:46:43.812504","updated_at":"2026-01-30T13:46:43.812504"}
{"id":"a2da4229-d429-5619-b134-650a958a1d4d","content":"## Creation Example  \nFor the supported column data-types, see the [Custom Table](\/docs\/connectors\/custom) documentation.  \n```yaml title=\"custom_kinesis_dataset.yaml\"\nname: my_custom_dataset\nschema_type: KINESIS\nunique_keys: [id]\ncolumn_schema:\nevent_name: String\nevent_time: DateTime\nuser_id: String\nevent_weight: Float\nevent_value: Int32\nevent_tags: Array(String)\njson_payload: String\ntenant_aws_account_id: \"123456789012\"\n```  \nWhen creating a Kinesis table, the table will be provisioned asynchronously and will transition from `SCHEDULING` to `DEPLOYING` then `ACTIVE`\nonce the Kinesis Data Stream is ready to receive events.","document_title":"Kinesis","h1":"Kinesis","h2":"Creation Example","h3":"","h4":"","file_path":"connectors\/kinesis.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/kinesis.md","chunk_metadata":"{\"Header 1\": \"Kinesis\", \"Header 2\": \"Creation Example\"}","created_at":"2026-01-30T13:46:43.812507","updated_at":"2026-01-30T13:46:43.812507"}
{"id":"1242d5dd-7abb-5561-8bdd-2d9a50890a63","content":"### CLI  \n```bash\nshaped create-table --file custom_kinesis_dataset.yaml\n```","document_title":"Kinesis","h1":"Kinesis","h2":"Creation Example","h3":"CLI","h4":"","file_path":"connectors\/kinesis.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/kinesis.md","chunk_metadata":"{\"Header 1\": \"Kinesis\", \"Header 2\": \"Creation Example\", \"Header 3\": \"CLI\"}","created_at":"2026-01-30T13:46:43.812511","updated_at":"2026-01-30T13:46:43.812511"}
{"id":"7b265a19-eccc-56ec-bdd8-f9838b41f12f","content":"## Delivering Data via Shaped API  \nThe Shaped API provides an endpoint to insert events into the table with your account API key, [Table Insert](https:\/\/docs.shaped.ai\/docs\/api#tag\/Table\/operation\/tables___table_insert_post).","document_title":"Kinesis","h1":"Kinesis","h2":"Delivering Data via Shaped API","h3":"","h4":"","file_path":"connectors\/kinesis.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/kinesis.md","chunk_metadata":"{\"Header 1\": \"Kinesis\", \"Header 2\": \"Delivering Data via Shaped API\"}","created_at":"2026-01-30T13:46:43.812514","updated_at":"2026-01-30T13:46:43.812514"}
{"id":"a25d8e28-ed67-58ca-8692-0c5cfc6e5851","content":"## Delivering Data via Kinesis SDK  \nWhen the Kinesis table is provisioned, you will be provided with the following information from the Shaped team:\n- `Kinesis Stream ARN`, the Amazon Resource Name of the Kinesis Data Stream provisioned for your account.\n- `Kinesis Access Role ARN`, if a `tenant_aws_account_id` is provided, the Amazon Resource Name of the IAM Role that you will need to assume in order to send events to the Kinesis Data Stream directly.  \nIn order to forward events from to the AWS Kinesis Data Stream SDK you will need to perform the\nfollowing steps in your environment:  \n1. Assume the IAM Role provided by the Shaped team, which will have appropriate permissions to be assumed from your principal.\n2. Use the appropriate AWS Kinesis SDK to send events to the provided Kinesis stream.  \nSee: [Writing Data to Kinesis Data Streams](https:\/\/docs.aws.amazon.com\/streams\/latest\/dev\/building-producers.html) for additional information.","document_title":"Kinesis","h1":"Kinesis","h2":"Delivering Data via Kinesis SDK","h3":"","h4":"","file_path":"connectors\/kinesis.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/kinesis.md","chunk_metadata":"{\"Header 1\": \"Kinesis\", \"Header 2\": \"Delivering Data via Kinesis SDK\"}","created_at":"2026-01-30T13:46:43.812517","updated_at":"2026-01-30T13:46:43.812517"}
{"id":"07c9e741-44d4-5e44-8678-ec643b55bfac","content":"# BigQuery  \nShaped supports BigQuery through a Table Connector which will automatically sync\ndata between your BigQuery data warehouse and Shaped.","document_title":"BigQuery","h1":"BigQuery","h2":"","h3":"","h4":"","file_path":"connectors\/bigquery.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/bigquery.md","chunk_metadata":"{\"Header 1\": \"BigQuery\"}","created_at":"2026-01-30T13:46:43.812815","updated_at":"2026-01-30T13:46:43.812815"}
{"id":"9500f2af-d75a-5f65-b872-816293da9dae","content":"## Preparation  \nTo allow Shaped to connect to your\n[BigQuery data warehouse](https:\/\/cloud.google.com\/bigquery), you need to grant\nShaped's GCP service account read-only access to your project, BigQuery dataset, and tables.\nYou can do this through the GCP portal or with the following steps:  \n1. [Install the gcloud command line tool](https:\/\/cloud.google.com\/sdk\/docs\/install).\n2. Contact us for our service account via email.\n3. Grant our service account permission to access your project, BigQuery dataset, and tables via\nthe ``roles\/bigquery.dataViewer``, ``roles\/bigquery.jobUser`` and\n``roles\/bigquery.readSessionUser`` roles.  \n```bash\ngcloud projects add-iam-policy-binding <YOUR_PROJECT> \\\n--member='serviceAccount:<OUR_SERVICE_ACCOUNT>' \\\n--role='roles\/bigquery.dataViewer'\n\ngcloud projects add-iam-policy-binding <YOUR_PROJECT> \\\n--member='serviceAccount:<OUR_SERVICE_ACCOUNT>' \\\n--role='roles\/bigquery.jobUser'\n\ngcloud projects add-iam-policy-binding <YOUR_PROJECT> \\\n--member='serviceAccount:<OUR_SERVICE_ACCOUNT>' \\\n--role='roles\/bigquery.readSessionUser'\n```","document_title":"BigQuery","h1":"BigQuery","h2":"Preparation","h3":"","h4":"","file_path":"connectors\/bigquery.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/bigquery.md","chunk_metadata":"{\"Header 1\": \"BigQuery\", \"Header 2\": \"Preparation\"}","created_at":"2026-01-30T13:46:43.812818","updated_at":"2026-01-30T13:46:43.812818"}
{"id":"be8e7fa2-42b2-5380-87e6-31465a2bc7de","content":"## Table Configuration  \n### Required fields  \n| Field         | Example                                                                | Description\n|---------------|------------------------------------------------------------------------|--------------------\n| schema_type   | `BIGQUERY`                                                             | Specifies the connector schema type, in this case \"BIGQUERY\".\n| table         | `bq-project.shaped.data`                                               | Specifies the Google BigQuery table, qualified with the project and BigQuery dataset. If your project name contains invalid YAML characters, you must surround it with backticks and double-quotes.\n| columns       | `[\"productId\", \"color\", \"brand\", \"stockLevel\", \"createdAt\", \"updatedAt\"]` | The name of the columns you wish to sync from BigQuery into Shaped.\n| datetime_key  | `updatedAt`                                                            | The name of the column that contains a datetime key for ordering data during incremental syncs.","document_title":"BigQuery","h1":"BigQuery","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/bigquery.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/bigquery.md","chunk_metadata":"{\"Header 1\": \"BigQuery\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.812822","updated_at":"2026-01-30T13:46:43.812822"}
{"id":"716ebfaf-4e8a-55b8-8fe4-e2516c37edda","content":"### Optional fields  \n| Field          | Example                                | Description\n|----------------|----------------------------------------|--------------------\n| start_datetime | `2020-01-01T00:00:00Z`                 | Specify a start datetime for the initial sync. If not specified, the initial sync will start from the earliest datetime in the table.\n| filters        | `[\"event_type IN ['viewed', 'liked']\"]` | Specify a list of filters to apply to the table. Filters must be in the form of a SQL WHERE clause.\n| unique_keys    | `[\"productId\"]`                        | Specify a list of columns that uniquely identify a row in the table, if duplicate rows are inserted with these keys, the latest row will be used.\n| batch_size       | 100000                                           | The number of rows to fetch from the database in each batch, changing this can improve throughput for large tables. The default is 10000.","document_title":"BigQuery","h1":"BigQuery","h2":"Table Configuration","h3":"Optional fields","h4":"","file_path":"connectors\/bigquery.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/bigquery.md","chunk_metadata":"{\"Header 1\": \"BigQuery\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Optional fields\"}","created_at":"2026-01-30T13:46:43.812825","updated_at":"2026-01-30T13:46:43.812825"}
{"id":"1ff3014a-774a-5110-8a2d-20b618a21cb6","content":"## Table Creation Example  \nBelow is an example of a BigQuery table connector configuration:\n```yaml\nname: your_bigquery_dataset\nschema_type: BIGQUERY\ntable: \"`bq-project`.shaped.`data`\"\ncolumns: [\"productId\", \"color\", \"brand\", \"stockLevel\", \"createdAt\", \"updatedAt\"]\ndatetime_key: \"updatedAt\"\nstart_datetime: \"2020-01-01T00:00:00Z\"\nfilters: [\"stockLevel > 0\"]\n```  \nThe following payload will create a BigQuery table and begin syncing data from Shaped using the Shaped CLI.\n```bash\nshaped create-table --file dataset.yaml\n```","document_title":"BigQuery","h1":"BigQuery","h2":"Table Creation Example","h3":"","h4":"","file_path":"connectors\/bigquery.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/bigquery.md","chunk_metadata":"{\"Header 1\": \"BigQuery\", \"Header 2\": \"Table Creation Example\"}","created_at":"2026-01-30T13:46:43.812829","updated_at":"2026-01-30T13:46:43.812829"}
{"id":"a62fa014-76c2-562a-b219-52fec681f09e","content":"# PostHog  \nConnecting PostHog works by using [PostHog's Kinesis destination](https:\/\/posthog.com\/cdp) to send events to our AWS PostHog connector. This setup uses Kinesis under the hood to enable real-time, secure, and scalable event ingestion. With this setup we're able to ingest events in real-time directly in a secure and scalable way.  \nThis guide walks you through how to setup a a PostHog to AWS Kinesis destination, including how to setup a Shaped AWS PostHog connector that consumes from the PostHog destination.  \n---","document_title":"PostHog","h1":"PostHog","h2":"","h3":"","h4":"","file_path":"connectors\/posthog.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/posthog.md","chunk_metadata":"{\"Header 1\": \"PostHog\"}","created_at":"2026-01-30T13:46:43.813806","updated_at":"2026-01-30T13:46:43.813806"}
{"id":"b5e7bfa2-6206-54dd-a85b-09bdd6cd8435","content":"## 1. Setting up a Shaped PostHog connector  \nThat guide outlines how to configure a PostHog table and run the CLI command (`shaped create-table --file dataset_schema.yml,`) so that Shaped will provision the stream for you and manage its lifecycle.  \nOnce the table becomes `ACTIVE`, you'll receive the stream ARN from Shaped to enable event delivery.  \nThe table schema mirrors the structure of a PostHog event. For example, an example schema for creating your table might look like:\n```\nname: example_posthog_events\nschema_type: POSTHOG\nunique_keys: [event.uuid]\ncolumn_schema:\nevent:\nuuid: String             # Unique identifier for the PostHog event\ndistinct_id: String      # The user\/session identifier associated with the event\ntimestamp: DateTime      # When the event occurred\nevent: String            # Event name (e.g., \"$pageview\")\nelements_chain: String   # Serialized elements chain (used for autocapture)\nurl: String              # URL of the page where the event was captured\nproperties: String       # JSON string of custom event properties\n```","document_title":"PostHog","h1":"PostHog","h2":"1. Setting up a Shaped PostHog connector","h3":"","h4":"","file_path":"connectors\/posthog.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/posthog.md","chunk_metadata":"{\"Header 1\": \"PostHog\", \"Header 2\": \"1. Setting up a Shaped PostHog connector\"}","created_at":"2026-01-30T13:46:43.813811","updated_at":"2026-01-30T13:46:43.813811"}
{"id":"0d631fca-d5e4-51bd-aab9-c2fede0b6c93","content":"## 2. Configure PostHog Data Pipeline  \nThe user keys and stream information required to configure Posthog will be provided by Shaped.  \n1. In PostHog, go to **Data pipeline \u2192 Destinations \u2192 + Create \u2192 AWS Kinesis**.\n2. Enter the following values:  \n- **AWS Access Key ID** \u2192 from IAM user\n- **AWS Secret Access Key** \u2192 from IAM user\n- **AWS Region** \u2192 region of your stream\n- **Kinesis Stream Name** \u2192 `<your-provisioned-stream>`  which will be provided by Shaped\n- **Kinesis Partition Key** \u2192 optional (e.g. `user_id`)  \n3. Click **Create & Enable**.","document_title":"PostHog","h1":"PostHog","h2":"2. Configure PostHog Data Pipeline","h3":"","h4":"","file_path":"connectors\/posthog.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/posthog.md","chunk_metadata":"{\"Header 1\": \"PostHog\", \"Header 2\": \"2. Configure PostHog Data Pipeline\"}","created_at":"2026-01-30T13:46:43.813814","updated_at":"2026-01-30T13:46:43.813814"}
{"id":"cb8e555d-2a45-5b51-8f3a-d8316239192d","content":"# Salesforce  \nPlease contact us at hello@shaped.ai for access to our\n[Salesforce](https:\/\/www.salesforce.com\/) connector.","document_title":"Salesforce","h1":"Salesforce","h2":"","h3":"","h4":"","file_path":"connectors\/salesforce.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/salesforce.md","chunk_metadata":"{\"Header 1\": \"Salesforce\"}","created_at":"2026-01-30T13:46:43.813878","updated_at":"2026-01-30T13:46:43.813878"}
{"id":"9cc14b56-0a53-5365-952e-829b9524be6a","content":"# SingleStore  \n## Preparation  \nTo allow Shaped to connect to your [SingleStore](https:\/\/www.singlestore.com\/) database, you need to\ncreate a read-only user and share those credentials through the\n[Create Table](\/docs\/api#tag\/Table\/operation\/tables__create_table_post) endpoint.  You\ncan create a read-only user in your the SingleStore service by following the [SingleStore User Management documentation](https:\/\/docs.singlestore.com\/db\/v8.7\/user-and-cluster-administration\/singlestore-user-management\/#add-a-user).  \nShaped connects to SingleStore using the MySQL protocol, so you can follow the same steps as you would for a MySQL database, with the `schema_type` set to `MYSQL`.","document_title":"SingleStore","h1":"SingleStore","h2":"Preparation","h3":"","h4":"","file_path":"connectors\/singlestore.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/singlestore.md","chunk_metadata":"{\"Header 1\": \"SingleStore\", \"Header 2\": \"Preparation\"}","created_at":"2026-01-30T13:46:43.814045","updated_at":"2026-01-30T13:46:43.814045"}
{"id":"a9fc7276-1f88-555a-8fc3-f6b6b925f703","content":"## Table Configuration  \n### Required fields  \n| Field                   |  Example                                   |  Description\n| ------------------------|--------------------------------------------|--------------------\n| schema_type      |  `MYSQL`                                          |  Specifies the connector type, in this case \"MYSQL\" due to wire-compatibility.\n| table            |  movies                                           | The name of the table to sync.\n| user             |  your_user                                        | Access account username.\n| password         |  pAssw0rd1!                                       | Access account Password.\n| host             |  my-db.aws-virginia-6.svc.singlestore.com         | Database hostname.\n| port             |  3333                                             | Database port (the default for SingleStore is 3333).\n| database         |  movielens                                        | The name of the database that contains table to sync.\n| replication_key  |  updated_at                                       | The name of the column that contains a datetime key or ascending id for ordering data during incremental syncs.","document_title":"SingleStore","h1":"SingleStore","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/singlestore.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/singlestore.md","chunk_metadata":"{\"Header 1\": \"SingleStore\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.814049","updated_at":"2026-01-30T13:46:43.814049"}
{"id":"e933dda1-d467-56af-af46-d0ea08c6e00c","content":"### Optional fields  \n| Field                   |  Example                                          |  Description\n| ------------------------|---------------------------------------------------|--------------------\n| columns          |  [\"productId\", \"color\", \"brand\", \"stockLevel\"]    | The name of the columns you wish to sync from SingleStore into Shaped. If not specified, all columns will be synced.\n| unique_keys      |  [\"productId\"]                                   | Specify a list of columns that uniquely identify a row in the table, if duplicate rows are inserted with these keys, the latest row will be used.\n| batch_size       | 100000                                           | The number of rows to fetch from the database in each batch, changing this can improve throughput for large tables. The default is 10000.","document_title":"SingleStore","h1":"SingleStore","h2":"Table Configuration","h3":"Optional fields","h4":"","file_path":"connectors\/singlestore.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/singlestore.md","chunk_metadata":"{\"Header 1\": \"SingleStore\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Optional fields\"}","created_at":"2026-01-30T13:46:43.814053","updated_at":"2026-01-30T13:46:43.814053"}
{"id":"ba27aa07-932c-573e-bacb-896d83c92316","content":"## Table Creation Example  \nBelow is an example of a SingleStore table connector configuration:\n```yaml\nname: your_singlestore_dataset\nschema_type: MYSQL\ntable: movies\nuser: your_user\npassword: pAssw0rd1!\nhost: my-db.aws-virginia-6.svc.singlestore.com\nport: 3306\ndatabase: movielens\nreplication_key: updated_at\n```  \nThe following payload will create a SingleStore table and begin syncing data from Shaped using the Shaped CLI.\n```bash\nshaped create-table --file dataset.yaml\n```","document_title":"SingleStore","h1":"SingleStore","h2":"Table Creation Example","h3":"","h4":"","file_path":"connectors\/singlestore.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/singlestore.md","chunk_metadata":"{\"Header 1\": \"SingleStore\", \"Header 2\": \"Table Creation Example\"}","created_at":"2026-01-30T13:46:43.814056","updated_at":"2026-01-30T13:46:43.814056"}
{"id":"c8669349-5b6d-57fa-9b16-ae0be38b5824","content":"# MongoDB  \n## Preparation  \nTo allow Shaped to connect to your [MongoDB](https:\/\/www.mongodb.com\/) database, you need to\ncreate a read-only user and share those credentials through the\n[Create Table](\/docs\/api#tag\/Table\/operation\/tables__create_table_post) endpoint.\nYou can create a read-only user on a MongoDB database instance with the following commands:  \n```shell\n# 1. Connect to MongoDB instance and switch to the database.\nmongo --host <host> --port <port> --username <username> --password <password>\nuse <database_name>\n\n# 2. Create a user with read-only access to the database.\ndb.createUser({\nuser: \"read_only_user\",\npwd: \"<password>\",\nroles: [{ role: \"read\", db: \"<database_name>\" }]\n});\n\n# 3. Grant Access to Specific Collection\ndb.createRole({\nrole: \"read_only_collection_role\",\nprivileges: [\n{\nresource: {\ndb: \"<database_name>\",\ncollection: \"<collection_name>\"\n},\nactions: [\"find\"]\n}\n],\nroles: []\n});\n```  \nIn MongoDB, read-only access at the database level will automatically grant read access to all collections in the database. If you want to restrict access to a specific collection, you will need to create a custom role.  \n```shell\ndb.grantRolesToUser(\"read_only_user\", [\"read_only_collection_role\"]);\n```  \nReplace host, port, username, password, database_name, and collection_name with the appropriate values for your MongoDB account.","document_title":"MongoDB","h1":"MongoDB","h2":"Preparation","h3":"","h4":"","file_path":"connectors\/mongodb.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mongodb.md","chunk_metadata":"{\"Header 1\": \"MongoDB\", \"Header 2\": \"Preparation\"}","created_at":"2026-01-30T13:46:43.814264","updated_at":"2026-01-30T13:46:43.814264"}
{"id":"f4f7c97b-d638-5c05-a238-3575bc4b3b62","content":"## Network Access\nIf your database is publicy accessible, reach out to the Shaped team to get our IPs for allow listing.\nOtherwise, check out our [private link](\/docs\/\/model_creation\/private-link.md) docs.","document_title":"MongoDB","h1":"MongoDB","h2":"Network Access","h3":"","h4":"","file_path":"connectors\/mongodb.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mongodb.md","chunk_metadata":"{\"Header 1\": \"MongoDB\", \"Header 2\": \"Network Access\"}","created_at":"2026-01-30T13:46:43.814269","updated_at":"2026-01-30T13:46:43.814269"}
{"id":"03d5c6be-5a2d-5a68-bf5b-402c08c15cc6","content":"## Table Configuration  \n### Required fields  \n| Field                   |  Example                                          |  Description\n| ------------------------|---------------------------------------------------|--------------------\n| schema_type             |  `MONGODB`          | Specifies the connector schema type, in this case \"MongoDB\".\n| mongodb_connection_string | `mongodb:\/\/user:password@host:port\/database` | The connection string for your MongoDB database, including the username, password, host, port, and database name.\n| collection       |  `movies`             | The name of the MongoDB collection to sync.\n| database         |  `movielens`          | The name of the database that contains the collection to sync.","document_title":"MongoDB","h1":"MongoDB","h2":"Table Configuration","h3":"Required fields","h4":"","file_path":"connectors\/mongodb.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mongodb.md","chunk_metadata":"{\"Header 1\": \"MongoDB\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Required fields\"}","created_at":"2026-01-30T13:46:43.814273","updated_at":"2026-01-30T13:46:43.814273"}
{"id":"a2baea2c-d9ac-5e9b-9ef8-ea0adbe26bd1","content":"### Optional fields  \n| Field                   |  Example                                          |  Description\n| ------------------------|---------------------------------------------------|--------------------\n| start_date              |  `2024-01-01`        | The date from which to start syncing data. If not provided, the connector will sync all data from the collection.\n| replication_key         |  `created_at`        | The field to use as the replication key. If not provided, the connector will use the document `_id` field.\n| replication_mode        |  `INCREMENTAL` or `FULL_COLLECTION`        | The replication model to use. `INCREMENTAL` will only sync newly added records to the collection ordering by `_id`, while `FULL_COLLECTION` will read all records from the collection and deduplicate on `_id` upon each run. If not provided, the connector will use the `INCREMENTAL` model.","document_title":"MongoDB","h1":"MongoDB","h2":"Table Configuration","h3":"Optional fields","h4":"","file_path":"connectors\/mongodb.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mongodb.md","chunk_metadata":"{\"Header 1\": \"MongoDB\", \"Header 2\": \"Table Configuration\", \"Header 3\": \"Optional fields\"}","created_at":"2026-01-30T13:46:43.814276","updated_at":"2026-01-30T13:46:43.814276"}
{"id":"db144d11-d4d5-52ce-8c74-903a184934ab","content":"## Table Creation Example  \nBelow is an example of a MongoDB table connector configuration:\n```yaml\nname: mongodb_dataset\nschema_type: MONGODB\ncollection: movies\ndatabase: movielens\nmongodb_connection_string: mongodb:\/\/user:password@host:port\/database\nstart_date: \"2024-01-01\"\n```  \nThe following payload will create a MongoDB table and begin syncing data from Shaped using the Shaped CLI.\n```bash\nshaped create-table --file dataset.yaml\n```","document_title":"MongoDB","h1":"MongoDB","h2":"Table Creation Example","h3":"","h4":"","file_path":"connectors\/mongodb.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mongodb.md","chunk_metadata":"{\"Header 1\": \"MongoDB\", \"Header 2\": \"Table Creation Example\"}","created_at":"2026-01-30T13:46:43.814279","updated_at":"2026-01-30T13:46:43.814279"}
{"id":"58aa4f39-0486-5734-a498-36c7d1265d40","content":"## How Shaped ingests MongoDB documents  \nAs MongoDB data is schemaless, Shaped will convert the BSON documents into a JSON structure, saved into the table `document` column, with associated metadata columns for the `replication_key` comprised of document `_id` and document created time, and `namespace` containing collection and database names.  \nWhen creating a Shaped model from a MongoDB table, you can use the `document` column to access the raw JSON document data, with [JSON Extraction DuckDB functions](https:\/\/duckdb.org\/docs\/extensions\/json.html#json-extraction-functions) to extract specific fields from the document.","document_title":"MongoDB","h1":"MongoDB","h2":"How Shaped ingests MongoDB documents","h3":"","h4":"","file_path":"connectors\/mongodb.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mongodb.md","chunk_metadata":"{\"Header 1\": \"MongoDB\", \"Header 2\": \"How Shaped ingests MongoDB documents\"}","created_at":"2026-01-30T13:46:43.814283","updated_at":"2026-01-30T13:46:43.814283"}
{"id":"5b1337b0-5762-576f-9d18-16a347de8743","content":"# Amplitude\n\/v2\/tables\nOur real-time data streaming infrastructure is built on-top of the\n[AWS Kinesis Data Streams](https:\/\/aws.amazon.com\/kinesis\/data-streams\/) service, as\nsuch we will be connecting [Amplitude](https:\/\/amplitude.com\/) to Shaped via the\n[Kinesis Data Stream Event Streaming Destination](https:\/\/www.docs.developers.amplitude.com\/data\/destinations\/kinesis-data-stream\/).  \nTo begin connecting your Amplitude account, create a Shaped table with `schema_type: AMPLITUDE`, the event schema will be automatically\ncreated based on the Amplitude event specification. Once in `ACTIVE` state, you can access the Kinesis Data Stream name and\nIAM Role ARN to configure the Amplitude Data Destination, found via the Shaped CLI or API.","document_title":"Amplitude","h1":"Amplitude","h2":"","h3":"","h4":"","file_path":"connectors\/amplitude.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/amplitude.md","chunk_metadata":"{\"Header 1\": \"Amplitude\"}","created_at":"2026-01-30T13:46:43.814443","updated_at":"2026-01-30T13:46:43.814443"}
{"id":"d63155b5-62d4-52a0-8082-3396db8bfb9e","content":"## Create the Shaped Table  \nThe first step is to provision your table using the Shaped CLI. You'll need to create the file below.  \n```yaml title=amplitude_events.yaml\nname: amplitude_events\nschema_type: AMPLITUDE\n```  \n```bash\nshaped create-table --file amplitude_events.yaml\n```  \nVerify that the table has successfully created on the [Dashboard](https:\/\/dashboard.shaped.ai).","document_title":"Amplitude","h1":"Amplitude","h2":"Create the Shaped Table","h3":"","h4":"","file_path":"connectors\/amplitude.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/amplitude.md","chunk_metadata":"{\"Header 1\": \"Amplitude\", \"Header 2\": \"Create the Shaped Table\"}","created_at":"2026-01-30T13:46:43.814447","updated_at":"2026-01-30T13:46:43.814447"}
{"id":"6bdd8c8a-4eb4-562a-8aec-ac55323b71fc","content":"## Retrieve Your Table Details with Shaped CLI  \n```bash\nshaped view-table --table-name amplitude_events\n\ntable_name: amplitude_events\ntable_uri: https:\/\/api.shaped.ai\/v2\/tables\/amplitude_events\nschema_type: AMPLITUDE\ntable_schema: <event_schema>\nkinesis_stream_arn: arn:aws:kinesis:us-east-2:11111111111:stream\/ShapedDatasetStream-abc123\nkinesis_iam_role_arn: arn:aws:iam::11111111111:role\/ShapedDatasetAccessRole-abc123\n```  \n**Info:** You can also use the Shaped API to get the table details\n```bash\ncurl -X GET \"https:\/\/api.shaped.ai\/v2\/tables\/amplitude_events\" \\\n-H \"x-api-key: <API_KEY>\"\n```  \nNow that we have the table details, we can add them to your Amplitude dashboard.","document_title":"Amplitude","h1":"Amplitude","h2":"Retrieve Your Table Details with Shaped CLI","h3":"","h4":"","file_path":"connectors\/amplitude.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/amplitude.md","chunk_metadata":"{\"Header 1\": \"Amplitude\", \"Header 2\": \"Retrieve Your Table Details with Shaped CLI\"}","created_at":"2026-01-30T13:46:43.814451","updated_at":"2026-01-30T13:46:43.814451"}
{"id":"07e63860-60f1-5aaa-8c91-649daab5fa2c","content":"## Configuring Amplitude  \nIn order to forward events from Amplitude to Kinesis you will need to perform the\nfollowing steps in the Amplitude dashboard:  \n1. In Amplitude, navigate to 'Data Destinations' then find 'Kinesis Data Stream - Event\nStream'. Enter a sync name, then click 'Create Sync'.\n2. Click Edit, then enter the following details:\n* **AWS Kinesis Stream Name**\n* **AWS IAM Role Resource Name (ARN)**\n* **AWS Region: us-east-2**\n3. Use the 'Send Events' filter to select the events you want to send. You can send\nall events, but our team recommends choosing the most important events that indicate\nuser engagement on your content.\n4. When finished, enable the destination and save.  \n**Tip:**  Finding \"Stream Name\"\n\"Stream Name\" is the last string value on the `kinesis_stream_arn` property value. In the example above, it would be `ShapedDatasetStream-abc123`","document_title":"Amplitude","h1":"Amplitude","h2":"Configuring Amplitude","h3":"","h4":"","file_path":"connectors\/amplitude.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/amplitude.md","chunk_metadata":"{\"Header 1\": \"Amplitude\", \"Header 2\": \"Configuring Amplitude\"}","created_at":"2026-01-30T13:46:43.814454","updated_at":"2026-01-30T13:46:43.814454"}
{"id":"1d06d9d1-2ef4-58e4-9aa1-c771c1718efb","content":"# MixPanel  \nPlease contact us at hello@shaped.ai for access to our\n[MixPanel](https:\/\/mixpanel.com\/) connector.","document_title":"MixPanel","h1":"MixPanel","h2":"","h3":"","h4":"","file_path":"connectors\/mixpanel.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/mixpanel.md","chunk_metadata":"{\"Header 1\": \"MixPanel\"}","created_at":"2026-01-30T13:46:43.814519","updated_at":"2026-01-30T13:46:43.814519"}
{"id":"ef6cad8f-fced-587e-bea9-481ea879be88","content":"# Shaped Query Language  \nThe Shaped Query Language is a SQL-like domain-specific language (DSL) for\nbuilding recommendation and ranking queries. It provides a familiar SQL syntax\nwhile supporting advanced retrieval, filtering, scoring, and reordering\noperations specific to recommendation systems.","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\"}","created_at":"2026-01-30T13:46:43.818735","updated_at":"2026-01-30T13:46:43.818735"}
{"id":"f51923e6-f5a0-5946-b21e-667e38fa7bcf","content":"## Quick Start  \n**Simple recommendation query:**","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Quick Start","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Quick Start\"}","created_at":"2026-01-30T13:46:43.818741","updated_at":"2026-01-30T13:46:43.818741"}
{"id":"59c0cad1-b5e0-50a4-bb04-47eda5c156a2","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='als', limit=50,\nencoder='precomputed_user', input_user_id='$user_id')\nLIMIT 10\n```","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Quick Start","h3":"ShapedQL","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Quick Start\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.818746","updated_at":"2026-01-30T13:46:43.818746"}
{"id":"61cc1c2c-2bb3-538b-a9d2-29346ebd9e67","content":"### Python SDK\n```python\nfrom shaped import RankQueryBuilder, Similarity\n\nquery = (\nRankQueryBuilder()\n.from_entity('item')\n.retrieve(\nSimilarity(\nembedding_ref='als',\nquery_encoder={\n'type': 'precomputed_user',\n'input_user_id': '$user_id'\n},\nlimit=50\n)\n)\n.limit(10)\n.build()\n)\n```","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Quick Start","h3":"Python SDK","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Quick Start\", \"Header 3\": \"Python SDK\"}","created_at":"2026-01-30T13:46:43.818750","updated_at":"2026-01-30T13:46:43.818750"}
{"id":"8035d81b-9eab-582e-9006-f2e5bd0f6f82","content":"### TypeScript SDK\n```typescript\n\nconst query = new RankQueryBuilder()\n.from('item')\n.retrieve(step =>\nstep.similarity(\n'als',\n{ type: 'precomputed_user', inputUserId: '$user_id' },\n{ limit: 50 }\n)\n)\n.limit(10)\n.build();\n```","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Quick Start","h3":"TypeScript SDK","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Quick Start\", \"Header 3\": \"TypeScript SDK\"}","created_at":"2026-01-30T13:46:43.818754","updated_at":"2026-01-30T13:46:43.818754"}
{"id":"8c6fd066-b541-577c-b8ab-35973f956ffc","content":"### REST\n```bash\ncurl -X POST https:\/\/api.shaped.ai\/v2\/engines\/{engine_name}\/query \\\n-H \"x-api-key: YOUR_API_KEY\" \\\n-H \"Content-Type: application\/json\" \\\n-d '{\n\"query\": \"SELECT * FROM similarity(embedding_ref=''als'', limit=50, encoder=''precomputed_user'', input_user_id=''$user_id'') LIMIT 10\",\n\"parameters\": {\n\"user_id\": \"user123\"\n}\n}'\n```  \n**Response:**  \n```json\n{\n\"results\": [\n{\n\"id\": \"item123\",\n\"score\": 0.95,\n\"attributes\": {\n\"name\": \"Product Name\",\n\"price\": 99.99\n}\n}\n]\n}\n```","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Quick Start","h3":"REST","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Quick Start\", \"Header 3\": \"REST\"}","created_at":"2026-01-30T13:46:43.818758","updated_at":"2026-01-30T13:46:43.818758"}
{"id":"195b11fe-4fe7-56d5-9052-31fdf57eef35","content":"## Overview  \nThe query language transpiles SQL-like queries into query configuration objects\nthat define the complete query pipeline. Queries can be written in two formats:  \n1. **SQL Syntax**: A SQL-like string that gets transpiled to a query config\n2. **YAML\/JSON Query Objects**: Direct configuration objects with explicit\nstructure  \nThis document focuses on the SQL syntax, which provides a familiar interface for\nbuilding recommendation and ranking queries.","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Overview","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Overview\"}","created_at":"2026-01-30T13:46:43.818762","updated_at":"2026-01-30T13:46:43.818762"}
{"id":"511ccfe4-4bf1-5aaf-a351-07979950d6d5","content":"### Mental model  \nShapedQL queries map to a multi-stage ranking pipeline:  \n- **Retrieve**: Select candidates (e.g., `text_search(...)`, `similarity(...)`,\n`ids(...)`).\n- **Filter**: Apply rules to exclude candidates.\n- **Score**: Compute a relevance score with `ORDER BY score(expression='...')`.\n- **Reorder**: Post-process ordering (e.g., diversity, exploration).  \nStandard information retrieval reranking fits naturally into the score stage:\ntext rerankers like `colbert_v2(...)` and `cross_encoder(...)`, rank fusion like RRF,\nand linear interpolation are all expressed as scoring expressions and work the same\nway for both **search** and **recommendations**.","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Overview","h3":"Mental model","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Overview\", \"Header 3\": \"Mental model\"}","created_at":"2026-01-30T13:46:43.818765","updated_at":"2026-01-30T13:46:43.818765"}
{"id":"8dcbcdd6-4970-5897-b45f-828b1e40e724","content":"### SQL vs YAML Format  \n**Use SQL When:**  \n- You're familiar with SQL and want a quick way to write queries\n- You need ad-hoc queries for experimentation\n- You want a concise, readable syntax\n- You're building simple to moderately complex queries  \n**Use YAML\/JSON When:**  \n- You need fine-grained control over every query component\n- You're defining complex queries with many nested options\n- You want explicit type safety and validation\n- You're programmatically generating queries  \n**SQL Example:**  \nBoth formats transpile to the same internal query configuration.","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Overview","h3":"SQL vs YAML Format","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Overview\", \"Header 3\": \"SQL vs YAML Format\"}","created_at":"2026-01-30T13:46:43.818769","updated_at":"2026-01-30T13:46:43.818769"}
{"id":"3e251927-6bb6-5ec9-b528-b594312ef63f","content":"## Basic Syntax  \n**Query Execution Pipeline:**  \n1. **Retrieval**: Each retriever in the `FROM` clause fetches candidates in parallel\n2. **Union**: Results are combined (union) and deduplicated\n3. **Filtering**: The `WHERE` clause is applied\n4. **Scoring**: The `ORDER BY` expression is evaluated\n5. **Reordering**: The `REORDER BY` functions are applied\n6. **Limiting**: The final result is limited to `LIMIT` rows  \n**Notes:**  \n- Multiple retrievers can be specified, separated by commas\n- If no FROM clause is specified, a default filter retriever is used\n- Function names are case-insensitive\n- SQL comments (`-- comment`) are supported\n- String literals support escaped quotes: `'O''Reilly'` or `\"He said \"\"Hello\"\"\"`","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Basic Syntax","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Basic Syntax\"}","created_at":"2026-01-30T13:46:43.818773","updated_at":"2026-01-30T13:46:43.818773"}
{"id":"28782499-97b0-59cb-97f4-68c03d43c6ba","content":"## Entity Types  \nQueries operate on one of two entity types:  \n- **`items`**: Items to be recommended (products, content, etc.)\n- **`users`**: Users to be recommended (for user-to-user recommendations)  \nThe `entity_type` parameter determines which entity type a query operates on.\nAll retrievers in a single query must use the same entity type. If not\nspecified, the default is `items`.","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Entity Types","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Entity Types\"}","created_at":"2026-01-30T13:46:43.818777","updated_at":"2026-01-30T13:46:43.818777"}
{"id":"7ea61028-e073-58d6-bf15-cc802d4271e4","content":"## Retriever Functions  \nRetriever functions define how candidates are initially retrieved. All retriever\nfunctions support the `entity_type` parameter and the optional `where` parameter\nfor filter expressions. The `where` parameter uses DataFusion SQL syntax (see\n[WHERE Clause](#where-clause) for complete syntax documentation).  \n**Multiple Retrievers:**  \nYou can specify multiple retrievers in the FROM clause, separated by commas.\nThey execute in parallel and their results are merged (union). All retrievers\nmust use the same `entity_type`.  \n```sql\nSELECT *\nFROM similarity(embedding_ref='als', limit=50),\ntext_search(query='$query', mode='lexical', limit=50)\nLIMIT 20\n```  \n**No FROM Clause:**  \nIf no FROM clause is specified, a default filter retriever is used with\n`limit=100`.","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Retriever Functions","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Retriever Functions\"}","created_at":"2026-01-30T13:46:43.818780","updated_at":"2026-01-30T13:46:43.818780"}
{"id":"715a7149-e8eb-585d-be43-a94dbffaa6aa","content":"### similarity()  \nPerforms vector similarity search using embeddings.  \n**Parameters:**  \n- `embedding_ref` (required, string):\n- The name of the embedding model to use for similarity search.\n- Example: `'als'`, `'dssm'`, `'collaborative-filtering'`\n- Must match a pre-configured embedding in your Shaped environment  \n- `limit` (optional, int, default: 100):\n- Maximum number of candidate items to retrieve before any filtering or reordering\n- For best performance, keep this under 1000\n- Example: `limit=50`  \n- `entity_type` (optional, string, default: 'items'):\n- Type of entities to retrieve\n- Allowed values: `'items'` or `'users'`\n- Example: `entity_type='users'`  \n- `encoder` (optional, string or object):\n- Configuration for the query encoder\n- Default: `'precomputed_user'` for user-based recommendations\n- Example with precomputed user embedding:\n```\nencoder={\ntype: 'precomputed_user',\ninput_user_id: '$user_id'\n}\n```  \n- `where` (optional, string):\n- Filter expression using DataFusion SQL syntax\n- Applied during the retrieval phase for better performance\n- Example: `where='category = \"electronics\" AND price < 100'`\n- Supports parameters: `where='category = $category'`  \n- `name` (optional, string):\n- Identifier for this step in query execution logs\n- Useful for debugging complex queries\n- Example: `name='retrieve_similar_items'`","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Retriever Functions","h3":"similarity()","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Retriever Functions\", \"Header 3\": \"similarity()\"}","created_at":"2026-01-30T13:46:43.818784","updated_at":"2026-01-30T13:46:43.818784"}
{"id":"a3cc9aae-2489-56c3-8af9-3149a767f4ea","content":"### text_search()  \nPerforms full-text search using lexical or vector search.  \n**Parameters:**  \n- `query` (required, string):\n- The search query string\n- For vector search, this will be encoded using the specified encoder\n- Example: `query='wireless headphones'`  \n- `mode` (optional, string, default: 'lexical'):\n- Search mode to use\n- Options:\n- `'lexical'`: Traditional text search using BM25 scoring\n- `'vector'`: Semantic search using embeddings\n- Example: `mode='vector'`  \n- `limit` (optional, int, default: 100):\n- Maximum number of results to return\n- For best performance, keep this under 1000\n- Example: `limit=50`  \n- `entity_type` (optional, string, default: 'items'):\n- Type of entities to search\n- Allowed values: `'items'`, `'users'`, or custom entity types\n- Example: `entity_type='products'`  \n- `where` (optional, string):\n- Additional filter expression in DataFusion SQL syntax\n- Applied after text search for additional filtering\n- Example: `where='price < 100 AND in_stock = true'`\n- Supports parameters: `where='category = $category'`  \n- `name` (optional, string):\n- Identifier for this step in query execution logs\n- Useful for debugging and monitoring\n- Example: `name='product_search'`  \n**Performance Tips:**\n1. For large catalogs, always specify `fields` to limit the search scope\n2. Use `where` clauses to filter results early in the pipeline\n3. For best performance with vector search, ensure your embeddings are pre-computed","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Retriever Functions","h3":"text_search()","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Retriever Functions\", \"Header 3\": \"text_search()\"}","created_at":"2026-01-30T13:46:43.818788","updated_at":"2026-01-30T13:46:43.818788"}
{"id":"dec117a8-3e9c-5096-aa5f-8ef2aec01ac2","content":"### column_order()  \nRetrieves candidates ordered by column values.  \n**Parameters:**  \n- `columns` (required): Column(s) to order by, with optional sort direction (ASC\/DESC)\n- `limit` (default: 100): Maximum number of candidates to retrieve\n- `entity_type` (default: 'items'): Type of entities to retrieve\n- `where` (optional): Filter expression\n- `name` (optional): Step name for debugging\/explanation  \n**Column Ordering Syntax:**  \n- `column_name ASC` - Ascending order\n- `column_name DESC` - Descending order\n- `column_name ASC NULLS FIRST` - Nulls first\n- `column_name DESC NULLS LAST` - Nulls last  \nMultiple columns can be specified, separated by commas.  \n**Derived columns:**  \nWith an `interaction_table`, Shaped automatically generates two convenience columns:  \n- `_derived_popular_rank`: Popularity score from interaction frequency and recency\n- `_derived_chronological_rank`: Chronological ranking from item timestamps  \nUseful for popular item retrieval, trending algorithms, and chronological ordering. See\n[Derived columns](\/docs\/v2\/concepts\/engines#derived-columns) for details.  \n**Example:**  \n**Example with derived columns:**","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Retriever Functions","h3":"column_order()","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Retriever Functions\", \"Header 3\": \"column_order()\"}","created_at":"2026-01-30T13:46:43.818791","updated_at":"2026-01-30T13:46:43.818791"}
{"id":"e52a2b18-2f4d-53cd-ac96-aeed3c056ff0","content":"### filter()  \nRetrieves candidates matching a filter expression. The `where` parameter uses\nthe same DataFusion SQL syntax as the WHERE clause. See the [WHERE\nClause](#where-clause) section for complete syntax documentation.  \n**Parameters:**  \n- `where` (required): Filter expression using DataFusion SQL syntax. Note:\nSubqueries are not supported.\n- `limit` (default: 100): Maximum number of candidates to retrieve\n- `entity_type` (default: 'items'): Entity type to retrieve\n- `name` (optional): Step name for debugging\/explanation  \n**Examples:**","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Retriever Functions","h3":"filter()","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Retriever Functions\", \"Header 3\": \"filter()\"}","created_at":"2026-01-30T13:46:43.818795","updated_at":"2026-01-30T13:46:43.818795"}
{"id":"cffb6cb3-987e-5115-bf66-124857e28336","content":"### ids()  \nRetrieves a specific list of entity IDs. This is the primary retriever for\nreranking use-cases where you already have a set of candidates.  \n**Parameters:**  \n- `item_ids` (required, list of strings or parameter): The list of entity IDs to\nretrieve. Can be provided as a parameter reference (e.g., `$candidate_item_ids`)\nor as a literal list.\n- `where` (optional, string): Filter expression using DataFusion SQL syntax\napplied to the retrieved IDs.\n- `name` (optional, string): Identifier for this step in query execution logs.  \n**Use Cases:**  \n- **Reranking**: When you have a list of candidates from an external source (e.g.,\nsearch engine, business logic) and want to reorder them using Shaped's scoring\nmodels.\n- **Filtering by IDs**: When you want to retrieve specific items by their IDs and\napply additional filtering or scoring.  \n**Example:**","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Retriever Functions","h3":"ids()","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Retriever Functions\", \"Header 3\": \"ids()\"}","created_at":"2026-01-30T13:46:43.818799","updated_at":"2026-01-30T13:46:43.818799"}
{"id":"0210822b-156e-53d1-8dd6-96973f48e1b0","content":"### candidate_attributes()  \nRetrieves candidates from attributes provided at query time. Used for reranking\nitems not in the catalog.  \n**Parameters:**  \n- First argument (required): Parameter reference to item attributes (e.g.,\n`$item_attributes`)\n- `entity_type` (default: 'items'): Entity type to retrieve\n- `where` (optional): Filter expression using DataFusion SQL syntax (see [WHERE\nClause](#where-clause))\n- `name` (optional): Step name for debugging\/explanation  \n**Example:**","document_title":"Shaped Query Language","h1":"Shaped Query Language","h2":"Retriever Functions","h3":"candidate_attributes()","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"Shaped Query Language\", \"Header 2\": \"Retriever Functions\", \"Header 3\": \"candidate_attributes()\"}","created_at":"2026-01-30T13:46:43.818803","updated_at":"2026-01-30T13:46:43.818803"}
{"id":"905df26a-8a8c-5b6e-b66e-0bc829dddf80","content":"# ... (rest of the code remains the same)  \n## Query Encoders  \nQuery encoders determine how the query vector is created for similarity search.\nThey are specified via the `encoder` parameter in `similarity()` retrievers.  \n**Default Encoders:**  \n- `precomputed_user` - Default when using precomputed user embeddings\n- `interaction_pooling` - Default when using interaction-based encoders  \nIf no encoder is specified, the system will choose an appropriate default based\non the embedding type and available data.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Query Encoders","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Query Encoders\"}","created_at":"2026-01-30T13:46:43.818807","updated_at":"2026-01-30T13:46:43.818807"}
{"id":"1e6f977a-35dd-5c6e-b908-43af4c2486b1","content":"### precomputed_user (default)  \nUses a precomputed user embedding. This is the default encoder for user-based\nrecommendations when precomputed embeddings are available.  \n**Parameters:**  \n- `input_user_id` (default: '$user_id'): User ID parameter or value to use for\nthe precomputed embedding.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Query Encoders","h3":"precomputed_user (default)","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Query Encoders\", \"Header 3\": \"precomputed_user (default)\"}","created_at":"2026-01-30T13:46:43.818811","updated_at":"2026-01-30T13:46:43.818811"}
{"id":"9bc6f002-a7d1-5deb-8df0-91285ecc7ad2","content":"### precomputed_item  \nUses a precomputed item embedding. Useful for item-to-item similarity queries.  \n**Parameters:**  \n- `input_item_id` (default: '$item_id'): Item ID parameter or value to use for\nthe precomputed embedding.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Query Encoders","h3":"precomputed_item","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Query Encoders\", \"Header 3\": \"precomputed_item\"}","created_at":"2026-01-30T13:46:43.818814","updated_at":"2026-01-30T13:46:43.818814"}
{"id":"d27d081d-b3ab-5fdf-80ed-8ac7395a0532","content":"### interaction_pooling (default)  \nCreates a query vector by pooling embeddings from a user's interaction history.\nThis encoder retrieves the user's recent interactions and pools their item\nembeddings. This is the default encoder when using interaction-based\nrecommendations.  \n**Parameters:**  \n- `input_user_id` (default: '$user_id'): User ID parameter or value to pool\ninteractions for.\n- `truncate_interactions` (default: 10): Maximum number of interactions to use\nfor pooling.\n- `pooling_function` (default: 'mean'): Function to use when pooling multiple\nembeddings. Options: 'mean', 'max', 'sum', 'min'.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Query Encoders","h3":"interaction_pooling (default)","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Query Encoders\", \"Header 3\": \"interaction_pooling (default)\"}","created_at":"2026-01-30T13:46:43.818818","updated_at":"2026-01-30T13:46:43.818818"}
{"id":"f674da21-be6d-5de4-bda1-1a3d3dc69fbf","content":"### interaction_round_robin  \nCreates a query vector using round-robin retrieval from user interaction\nclusters. This encoder groups interactions into clusters and retrieves from each\ncluster in a round-robin fashion.  \n**Parameters:**  \n- `input_user_id` (default: '$user_id'): User ID parameter or value for\nround-robin retrieval.\n- `num_clusters` (default: 5): Number of interaction clusters to create.\n- `pooling_function` (default: 'mean'): Function to use when pooling cluster\nresults. Options: 'mean', 'max', 'sum', 'min'.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Query Encoders","h3":"interaction_round_robin","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Query Encoders\", \"Header 3\": \"interaction_round_robin\"}","created_at":"2026-01-30T13:46:43.818822","updated_at":"2026-01-30T13:46:43.818822"}
{"id":"f5ce4d94-0cc4-59ac-b5a7-4b64b8ef3796","content":"### user_attribute_pooling  \nCreates a query vector by encoding the user's attributes. This can only be\nused with a content or text embedding.  \n**Parameters:**  \n- `input_user_id` (optional): User ID parameter or value to encode. If provided,\nuser features from the database will be merged with `input_user_features`.\n- `input_user_features` (optional): User features dictionary to encode. This\nwill be merged with features from `input_user_id` if both are provided.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Query Encoders","h3":"user_attribute_pooling","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Query Encoders\", \"Header 3\": \"user_attribute_pooling\"}","created_at":"2026-01-30T13:46:43.818826","updated_at":"2026-01-30T13:46:43.818826"}
{"id":"5d6e1579-0ea3-56f8-95ab-3b0072f49c16","content":"### item_attribute_pooling  \nCreates a query vector by encoding the item's attributes. This can only be\nused with a content or text embedding.  \n**Parameters:**  \n- `input_item_id` (optional): Item ID parameter or value to encode. If\nprovided, item features from the database will be merged with\n`input_item_features`.\n- `input_item_features` (optional): Item features dictionary to encode. This\nwill be merged with features from `input_item_id` if both are provided.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Query Encoders","h3":"item_attribute_pooling","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Query Encoders\", \"Header 3\": \"item_attribute_pooling\"}","created_at":"2026-01-30T13:46:43.818829","updated_at":"2026-01-30T13:46:43.818829"}
{"id":"93817256-d28f-53bf-90cf-97063885f021","content":"## Filter Functions  \nFilter functions are used in the WHERE clause to apply prebuilt filters or\ntruncate candidate sets.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Filter Functions","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Filter Functions\"}","created_at":"2026-01-30T13:46:43.818833","updated_at":"2026-01-30T13:46:43.818833"}
{"id":"c74d6274-72e5-5410-b232-01e489ab0f9d","content":"### prebuilt()  \nApplies a prebuilt filter defined in your model configuration.  \n```sql\nWHERE prebuilt('filter_name', input_user_id='$user_id')\n```  \n**Parameters:**  \n- First argument or `filter_ref` (required): Filter name (e.g., 'filter_name')\n- `input_user_id` (optional): User ID parameter for personal filters\n- `name` (optional): Step name for debugging\/explanation  \n**Filter References:**  \nPrebuilt filters are defined in your model configuration and can be referenced\nby name. The filter name should match a filter defined in `data.filters`.  \n**Example query:**  \n```sql\nSELECT * FROM similarity(embedding_ref='als', limit=100)\nWHERE price > 100 AND prebuilt('exclude_purchased', input_user_id='$user_id')\nLIMIT 20\n```  \nThis assumes you have a filter named `exclude_purchased` defined in your model\nconfiguration.  \n**Example engine configuration:**  \nThe following config creates a filter dataset of all the items a user has reviewed before.  \n```yaml\ndata:\nfilters:\n- name: exclude_seen_items\nfilter_type:\ntype: personal_filter\nuser_id_column: user_id\nitem_id_column: item_id\nfilter_table:\ntype: query\nquery: SELECT item_id, user_id FROM reviews\n[...rest of engine config]\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Filter Functions","h3":"prebuilt()","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Filter Functions\", \"Header 3\": \"prebuilt()\"}","created_at":"2026-01-30T13:46:43.818837","updated_at":"2026-01-30T13:46:43.818837"}
{"id":"4886d7f5-b4d3-545a-b88a-136717ca5438","content":"### truncate()  \nTruncates the candidate set to a maximum length.  \n```sql\nWHERE truncate(500)\n```  \n**Parameters:**  \n- First argument or `max_length` (required): Maximum number of candidates to\nkeep\n- `name` (optional): Step name for debugging\/explanation  \n**Example:**  \n```sql\nSELECT * FROM similarity(embedding_ref='als', limit=1000)\nWHERE truncate(500)\nLIMIT 20\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Filter Functions","h3":"truncate()","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Filter Functions\", \"Header 3\": \"truncate()\"}","created_at":"2026-01-30T13:46:43.818840","updated_at":"2026-01-30T13:46:43.818840"}
{"id":"80c86b6f-dd27-5606-ad6a-2b9c6cbe9a5b","content":"## Reorder Functions  \nReorder functions apply post-retrieval reordering to diversify or explore the\nresults. They are specified in the `REORDER BY` clause.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Reorder Functions","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Reorder Functions\"}","created_at":"2026-01-30T13:46:43.818844","updated_at":"2026-01-30T13:46:43.818844"}
{"id":"b1f912ae-44e6-5439-aa10-5ef658089d2e","content":"### diversity()  \nApplies diversity reordering to reduce similarity between consecutive results.  \n```sql\nREORDER BY diversity(0.3)\n```  \n**Parameters:**  \n- First argument or `strength` (default: 0.5): Diversity strength (0.0 to 1.0)\n- `diversity_lookback_window` (default: 30): Number of previous items to consider\nfor diversity.\n- `diversity_lookforward_window` (default: 30): Top number of candidate items in the\nranked list to consider for diversity.\n- `diversity_attributes` (default: None): Which attributes to look at when determining diversity. Defaults to all supported fields.\n- `text_encoding_embedding_ref` (default: None): Which text embedding to use when determining diversity.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Reorder Functions","h3":"diversity()","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Reorder Functions\", \"Header 3\": \"diversity()\"}","created_at":"2026-01-30T13:46:43.818848","updated_at":"2026-01-30T13:46:43.818848"}
{"id":"d92199e2-92e5-50df-9c28-2c231c82fbef","content":"### exploration()  \nApplies exploration reordering to balance exploitation and exploration. This\ninjects items from a specified retriever into the main ranking results. All\nitems from the exploration retriever are treated with equal weight (1.0), and\nthe strength parameter determines how often exploration items are selected over\ntop-scored items.  \n**Parameters:**  \n- `retriever` (required, string): Name of the retriever from the FROM clause to\nuse for exploration. The retriever must have a `name` parameter.\n- `strength` (default: 0.5): Exploration strength (0.0 to 1.0). Higher values\ninject more items from the exploration pool.\n- `diversity_lookback_window` (default: 20): Number of previous items to consider\nwhen applying diversity alongside exploration.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Reorder Functions","h3":"exploration()","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Reorder Functions\", \"Header 3\": \"exploration()\"}","created_at":"2026-01-30T13:46:43.818851","updated_at":"2026-01-30T13:46:43.818851"}
{"id":"8ccf7424-203d-53fe-a553-ee8c845a74d3","content":"### boosted()  \nApplies boosted reordering using boost values from item metadata. Unlike\n`exploration()`, which treats all items equally, `boosted()` uses the `boost`\ncolumn from item metadata as weights. Items with higher boost values have a\nhigher probability of being selected during injection.  \n**Key Differences from `exploration()`:**  \n- **`exploration()`**: All items from the retriever have equal weight (1.0)\n- **`boosted()`**: Items use their `boost` column value as weight, so items with\nhigher boost values are more likely to be selected  \n**Parameters:**  \n- `retriever` (required, string): Name of the retriever from the FROM clause to\nuse for boosting. The retriever must have a `name` parameter, and items from\nthis retriever should have a `boost` column in their metadata.\n- `strength` (default: 0.5): Boost strength (0.0 to 1.0). Closer to 1.0 pulls\nmore items from the boosted retriever. Items with `boost=1` are prioritized\nmost strongly.  \n**Multiple Reorder Functions:**  \nYou can chain multiple reorder functions:  \n```sql\nREORDER BY diversity(0.3), exploration(0.2), boosted(retriever='promoted', strength=0.1)\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Reorder Functions","h3":"boosted()","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Reorder Functions\", \"Header 3\": \"boosted()\"}","created_at":"2026-01-30T13:46:43.818855","updated_at":"2026-01-30T13:46:43.818855"}
{"id":"78a0e752-29f4-51e1-a0cc-8b6b4449e0a5","content":"## Parameters  \nParameters allow runtime value substitution using `$parameter_name` or\n`$parameter.name` syntax.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Parameters","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Parameters\"}","created_at":"2026-01-30T13:46:43.818858","updated_at":"2026-01-30T13:46:43.818858"}
{"id":"5ba446ab-c5bb-587f-853a-195585fdfc2f","content":"### Parameter Syntax  \n- `$param_name` - Simple parameter reference\n- `$parameter.param_name` - Explicit parameter reference\n- `$param.param_name` - Alternative syntax (normalized to $parameter.name)  \n**Supported Parameter Types:**  \n- `int` - Integer values\n- `float` - Floating-point numbers\n- `str` - String values\n- `bool` - Boolean values (true\/false)\n- `List[int]` - Arrays of integers\n- `List[float]` - Arrays of floats\n- `List[str]` - Arrays of strings\n- `List[bool]` - Arrays of booleans  \n**Important Notes:**  \n- Parameters are substituted at query execution time, not at transpilation time\n- Parameter names must be valid identifiers (letters, numbers, underscores)\n- `limit` is a reserved keyword and cannot be used as a parameter name (use\n`max_results` or similar instead)\n- Nested function calls are not supported in parameter values","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Parameters","h3":"Parameter Syntax","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Parameters\", \"Header 3\": \"Parameter Syntax\"}","created_at":"2026-01-30T13:46:43.818862","updated_at":"2026-01-30T13:46:43.818862"}
{"id":"f6e72d4e-2bd7-58b4-85d6-93f14188c406","content":"### Common Parameters  \n- `$user_id` - User identifier\n- `$item_id` - Item identifier\n- `$query` - Search query text\n- `$item_ids` - List of item IDs for reranking\n- `$item_attributes` - Item attributes for reranking\n- `$limit` - Result limit (use LIMIT clause instead when possible)","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Parameters","h3":"Common Parameters","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Parameters\", \"Header 3\": \"Common Parameters\"}","created_at":"2026-01-30T13:46:43.818865","updated_at":"2026-01-30T13:46:43.818865"}
{"id":"805eed1c-3e88-53af-8936-fe983cbeef5f","content":"### Parameter Examples  \n```sql\n-- Using user_id parameter\nSELECT * FROM similarity(embedding_ref='als',\nencoder='precomputed_user',\ninput_user_id='$user_id')\nLIMIT 10\n\n-- Using query parameter\nSELECT * FROM text_search(query='$query', mode='lexical')\nLIMIT 20\n\n-- Using item_ids parameter for reranking\nSELECT * FROM ids($item_ids) LIMIT 10\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Parameters","h3":"Parameter Examples","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Parameters\", \"Header 3\": \"Parameter Examples\"}","created_at":"2026-01-30T13:46:43.818868","updated_at":"2026-01-30T13:46:43.818868"}
{"id":"4c7269bc-797b-5b51-8497-fa70de2956ae","content":"## SELECT Clause  \nThe SELECT clause specifies which columns to return.  \n- `SELECT *` - Returns all columns (default)\n- `SELECT column1, column2` - Returns specific columns  \n**Example:**  \n```sql\nSELECT name, price, category\nFROM similarity(embedding_ref='als', limit=50)\nLIMIT 10\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"SELECT Clause","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"SELECT Clause\"}","created_at":"2026-01-30T13:46:43.818871","updated_at":"2026-01-30T13:46:43.818871"}
{"id":"c9f1e0a8-7969-5d82-a2e9-1f080b56a799","content":"## WHERE Clause  \nThe WHERE clause applies filtering expressions using DataFusion SQL syntax. You\ncan combine regular SQL expressions with filter functions. The same filter\nexpression syntax is also used in the `where` parameter of all retriever\nfunctions (see [Retriever Functions](#retriever-functions)).  \nFilter expressions use DataFusion SQL syntax and are evaluated in two contexts:  \n1. **Retrieval layer**: In the `where` parameter of any retriever function\n(e.g., `similarity()`, `text_search()`, `column_order()`, `filter()`, etc.)\n2. **Post-retrieval**: In the WHERE clause of ShapedQL queries","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"WHERE Clause","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"WHERE Clause\"}","created_at":"2026-01-30T13:46:43.818874","updated_at":"2026-01-30T13:46:43.818874"}
{"id":"89a4e172-4085-5166-884b-2b2ed1850fab","content":"### Supported Operations  \nFilter expressions support the following operators and functions:  \n**Comparison Operators:**\n- `=`, `!=`, `>`, `>=`, `<`, `<=`  \n**Logical Operators:**\n- `AND`, `OR`, `NOT`  \n**Null Checks:**\n- `IS NULL`, `IS NOT NULL`  \n**Boolean Checks:**\n- `IS TRUE`, `IS NOT TRUE`, `IS FALSE`, `IS NOT FALSE`  \n**Membership Operations:**\n- `IN (...)`, `NOT IN (...)` - Note: Subqueries are not supported inside `IN` clauses. Use a list of values or a parameter instead.  \n**String Operations:**\n- `LIKE`, `NOT LIKE`\n- `ILIKE` (case-insensitive LIKE)  \n**Range Operations:**\n- `BETWEEN ... AND ...`  \n**Functions:**\n- `regexp_match(column, pattern)` - Regular expression matching\n- `CAST(value AS type)` - Type casting\n- `array_has(sequential_column, value)` - Check if array contains value\n- `array_has_any(sequential_column, values)` - Check if array contains any\nvalue from list\n- `array_has_all(sequential_column, values)` - Check if array contains all\nvalues from list  \n**Boolean Values:**\n- `true`, `false`","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"WHERE Clause","h3":"Supported Operations","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"WHERE Clause\", \"Header 3\": \"Supported Operations\"}","created_at":"2026-01-30T13:46:43.818878","updated_at":"2026-01-30T13:46:43.818878"}
{"id":"aa6ad879-8be9-5204-9af7-6d6d3fce2b8a","content":"### Examples  \n**Simple Comparisons:**  \n```sql\n-- Basic comparison\nWHERE category = 'electronics' AND price < 100\n\n-- Multiple conditions\nWHERE price > 50 AND price < 500 AND in_stock = true\n```  \n**Complex Expressions with Parentheses:**  \n```sql\n-- Grouped conditions\nWHERE (category = 'electronics' OR category = 'computers')\nAND price BETWEEN 50 AND 500\n\n-- Nested logic\nWHERE ((label IN [10, 20]) AND (note.email IS NOT NULL))\nOR NOT note.created\n```  \n**Null and Boolean Checks:**  \n```sql\n-- Null checks\nWHERE description IS NOT NULL AND author IS NULL\n\n-- Boolean checks\nWHERE is_published IS TRUE AND is_archived IS NOT TRUE\n```  \n**String Matching:**  \n```sql\n-- LIKE pattern matching\nWHERE name LIKE '%shirt%' AND description LIKE 'Blue%'\n\n-- Case-insensitive matching\nWHERE category ILIKE 'ELECTRONICS'\n```  \n**Array Operations:**  \n```sql\n-- Check if array contains value\nWHERE array_has(category_sequence, 'sports')\n\n-- Check if array contains any value from list\nWHERE array_has_any(category_sequence, ['sports', 'news'])\n\n-- Check if array contains all values from list\nWHERE array_has_all(tags, ['featured', 'popular'])\n```  \n**Regular Expressions:**  \n```sql\n-- Regex pattern matching\nWHERE regexp_match(description, '^[A-Z].*')\n```  \n**Type Casting:**  \n```sql\n-- Cast to different type\nWHERE CAST(price AS INTEGER) > 100\n```  \n**With Filter Functions:**  \n```sql\n-- Combining SQL expressions with filter functions\nWHERE price > 100\nAND prebuilt('ref:data.filters:category_filter', input_user_id='$user_id')\nAND truncate(500)\n```  \n**Note:** Filter expressions are evaluated using DataFusion SQL syntax, so\nDataFusion functions and operators are supported. Use parameters for dynamic\nvalues rather than trying to embed complex expressions.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"WHERE Clause","h3":"Examples","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"WHERE Clause\", \"Header 3\": \"Examples\"}","created_at":"2026-01-30T13:46:43.818881","updated_at":"2026-01-30T13:46:43.818881"}
{"id":"f6d7ad4e-2d34-59d9-ae8e-49039adb59af","content":"## ORDER BY Clause  \nThe ORDER BY clause specifies how to score and sort results in the score stage of\nthe query pipeline. It maps to the `score` block in the JSON query configuration.  \n**When to use ORDER BY:**  \n- **Omit ORDER BY** - Uses the retriever's default score (PassthroughScore)\n- **Use ORDER BY score()** - Uses a custom scoring expression (ScoreEnsemble) via\nthe `score()` function. The expression is a value model string that can\nreference models, user\/item attributes, retrieval scores, and functions.  \n**Default Scoring (No ORDER BY):**  \n```sql\n-- Use retriever's default score - no ORDER BY needed\nSELECT * FROM similarity(embedding_ref='als', limit=50)\nLIMIT 10\n```  \n**Custom Expression Scoring:**  \nFor complex scoring with user\/item attributes, text encodings, or retrieval scores,\nuse the `score()` function in ORDER BY:  \n```sql\n-- Single model\nSELECT * FROM similarity(embedding_ref='als', limit=50)\nORDER BY score(expression='click_through_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 10\n\n-- Ensemble of multiple models\nSELECT * FROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nORDER BY score(expression='0.6 * click_through_rate + 0.4 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n\n-- Simple expression combining model scores\nSELECT * FROM similarity(embedding_ref='als', limit=50)\nORDER BY score(expression='0.6 * click_through_rate + 0.4 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 10\n```  \nThe `score()` function evaluates the value model expression with the provided\nuser context and interaction history. User context comes from `input_user_id`\nand `input_interactions_item_ids` query parameters. See the\n[Value Model Expressions](#value-model-expressions) section below for\navailable objects, functions, and operators.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"ORDER BY Clause","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"ORDER BY Clause\"}","created_at":"2026-01-30T13:46:43.818884","updated_at":"2026-01-30T13:46:43.818884"}
{"id":"507711a3-2775-5544-b7e3-d0a5b41ce876","content":"## Value Model Expressions  \nValue model expressions are Python-like mathematical expressions evaluated per\nuser-item pair to compute a relevance score. They support accessing user\/item\nattributes, trained model outputs, retrieval scores, text encodings, and various\nutility functions.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Value Model Expressions","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Value Model Expressions\"}","created_at":"2026-01-30T13:46:43.818887","updated_at":"2026-01-30T13:46:43.818887"}
{"id":"257befbd-fa59-5b29-9060-e0789499f150","content":"### Available Objects  \n**User Object (`user`):**  \nAccess all attributes from your user table:  \n```sql\nORDER BY score(expression='click_through_rate + 0.1 * user.age + 0.05 * user.membership_tier', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\n```  \nCommon attributes: `user.user_id`, `user.age`, `user.location`, `user.interests`,\netc. All columns from your user table are available.  \n**Item Object (`item`):**  \nAccess all attributes from your item table:  \n```sql\nORDER BY score(expression='click_through_rate - 0.05 * item.price + 0.1 * item.rating', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\n```  \nCommon attributes: `item.item_id`, `item.price`, `item.category`, `item.rating`,\netc. All columns from your item table are available.  \n**Retrieval Object (`retrieval`):**  \nAccess scores and ranks from named retrievers in your query. Retrieval scores are\nonly materialized if referenced in the expression (performance optimization).  \n**Direct Score Attributes:**  \nAccess retriever scores by name:  \n```sql\nORDER BY score(expression='0.5 * retrieval.vector_search + 0.5 * retrieval.lexical_search', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\n```  \n**Rank Attributes:**  \nAccess retriever ranks with `_rank` suffix:  \n```sql\nORDER BY score(expression='click_through_rate - 0.01 * retrieval.vector_search_rank', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\n```  \n**Methods:**  \n- `retrieval.get_score(name, default=0.0)` - Get score with default value\n- `retrieval.get_rank(name, default=999)` - Get rank with default value  \nExample:  \n```sql\nORDER BY score(expression='click_through_rate + 0.1 * retrieval.get_score(\"vector_search\", 0.0)', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Value Model Expressions","h3":"Available Objects","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Value Model Expressions\", \"Header 3\": \"Available Objects\"}","created_at":"2026-01-30T13:46:43.818891","updated_at":"2026-01-30T13:46:43.818891"}
{"id":"90860424-89c4-5b15-9206-ae0ae52b3ac0","content":"#### Rank fusion (RRF)  \nReciprocal rank fusion (RRF) combines multiple ranked lists using only ranks. This\nis useful when mixing retrievers with different score scales.  \n```sql\nORDER BY score(\nexpression='1.0 \/ (60 + retrieval.get_rank(\"vector_search\", 999)) + 1.0 \/ (60 + retrieval.get_rank(\"lexical_search\", 999))'\n)\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Value Model Expressions","h3":"Available Objects","h4":"Rank fusion (RRF)","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Value Model Expressions\", \"Header 3\": \"Available Objects\", \"Header 4\": \"Rank fusion (RRF)\"}","created_at":"2026-01-30T13:46:43.818894","updated_at":"2026-01-30T13:46:43.818894"}
{"id":"84ffe616-f283-55ee-8777-b98429c42ee2","content":"### Available Functions  \n**Text Encoding Functions:**  \n- `text_encoding(entity, embedding_ref='text_embedding')` - Get text encoding\nvector for a user or item entity using the specified embedding. Returns None if\nencoding is not available.  \n```sql\nORDER BY score(expression='cosine_similarity(text_encoding(user, embedding_ref=''text_embedding''), text_encoding(item, embedding_ref=''text_embedding''))', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\n```  \n- `pooled_text_encoding(recent_interactions, pool_fn='mean', embedding_ref='text_embedding')` -\nCompute pooled encoding from user's recent interactions using the specified\nembedding. Pooling functions: `'mean'`, `'max'`.  \n```sql\nORDER BY score(expression='cosine_similarity(pooled_text_encoding(user.recent_interactions, pool_fn=''mean'', embedding_ref=''text_embedding''), text_encoding(item, embedding_ref=''text_embedding''))', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Value Model Expressions","h3":"Available Functions","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Value Model Expressions\", \"Header 3\": \"Available Functions\"}","created_at":"2026-01-30T13:46:43.818897","updated_at":"2026-01-30T13:46:43.818897"}
{"id":"097a9da7-a70a-540f-8b04-f2a2705d0c05","content":"#### Text reranking functions  \nUse these zero-shot rerankers for text-based reranking on a smaller candidate set.\nIn these examples, `$params.query` is a request parameter containing the query text.  \n- `colbert_v2(item, query)` - Late-interaction text reranker.\n- `cross_encoder(item, query)` - Cross-encoder text reranker.  \nExamples:  \n```sql\nSELECT *\nFROM ids($candidate_item_ids)\nORDER BY score(expression='colbert_v2(item, $params.query)')\nLIMIT 20\n```  \n```sql\nSELECT *\nFROM ids($candidate_item_ids)\nORDER BY score(expression='cross_encoder(item, $params.query)')\nLIMIT 20\n```  \n**Similarity Functions:**  \n- `cosine_similarity(a, b)` - Compute cosine similarity between two vectors.\nReturns 0.0 if either vector is None.  \n```sql\nORDER BY score(expression='0.5 * click_through_rate + 0.5 * cosine_similarity(text_encoding(user, embedding_ref=''text_embedding''), text_encoding(item, embedding_ref=''text_embedding''))', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\n```  \n- `dot(a, b)` - Compute dot product of two vectors. Returns 0.0 if either vector\nis None.  \n**Distance Functions:**  \n- `haversine_distance(lat1, lon1, lat2, lon2)` - Calculate distance in kilometers\nbetween two geographic coordinates.  \n```sql\nORDER BY score(expression='click_through_rate - 0.1 * haversine_distance(user.lat, user.lon, item.lat, item.lon)', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\n```  \n**Utility Functions:**  \n- `coalesce(*args)` - Return the first non-null, non-NaN value from arguments.  \n```sql\nORDER BY score(expression='click_through_rate + 0.1 * coalesce(user.age, 25)', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\n```  \n- `now_seconds()` - Return current Unix timestamp in seconds.  \n**Math Functions:**  \nStandard Python math functions are available: `abs()`, `sqrt()`, `log()`, `exp()`,\n`max()`, `min()`, `pow()`, `round()`, etc.  \n```sql\nORDER BY score(expression='click_through_rate + 0.1 * log(item.price + 1)', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Value Model Expressions","h3":"Available Functions","h4":"Text reranking functions","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Value Model Expressions\", \"Header 3\": \"Available Functions\", \"Header 4\": \"Text reranking functions\"}","created_at":"2026-01-30T13:46:43.818901","updated_at":"2026-01-30T13:46:43.818901"}
{"id":"a46bba46-0fed-53f9-b9d8-12756657ad06","content":"### Operators  \nValue model expressions support standard Python operators:  \n- **Arithmetic**: `+`, `-`, `*`, `\/`, `**` (exponentiation), `%` (modulo)\n- **Comparison**: `==`, `!=`, `>`, `<`, `>=`, `<=`\n- **Logical**: `and`, `or`, `not`\n- **Conditional**: `if ... else ...` (ternary operator)","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Value Model Expressions","h3":"Operators","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Value Model Expressions\", \"Header 3\": \"Operators\"}","created_at":"2026-01-30T13:46:43.818905","updated_at":"2026-01-30T13:46:43.818905"}
{"id":"c0a9116c-49d5-55d2-9d24-9437a55aaff4","content":"### Model References  \nReference trained models from your engine configuration by name:  \n```sql\nORDER BY score(expression='0.6 * click_through_rate + 0.4 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\n```  \nModel names must match the model names defined in your engine's `training` block.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Value Model Expressions","h3":"Model References","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Value Model Expressions\", \"Header 3\": \"Model References\"}","created_at":"2026-01-30T13:46:43.818908","updated_at":"2026-01-30T13:46:43.818908"}
{"id":"dbd85567-ea34-5eb3-a13a-7281bbd73a1a","content":"### Policy Features  \nPolicy features from `policy_scores_dict` are available as direct variables in the\nexpression. These are features computed by policy models (e.g., embedding policies).","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Value Model Expressions","h3":"Policy Features","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Value Model Expressions\", \"Header 3\": \"Policy Features\"}","created_at":"2026-01-30T13:46:43.818911","updated_at":"2026-01-30T13:46:43.818911"}
{"id":"896c09fc-8ff4-591a-aa0d-6a3265c12589","content":"### Expression Evaluation  \n- Value models are evaluated **pair-wise** (one score per user-item pair)\n- All functions handle None values gracefully (return 0.0 or default values)\n- Expressions must return a numeric value (float or int)","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Value Model Expressions","h3":"Expression Evaluation","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Value Model Expressions\", \"Header 3\": \"Expression Evaluation\"}","created_at":"2026-01-30T13:46:43.818915","updated_at":"2026-01-30T13:46:43.818915"}
{"id":"5df5a3d4-3ad3-5f16-8b48-b4c234369dea","content":"### Value Model Examples  \n**Simple Model Scoring:**  \n```sql\nSELECT * FROM similarity(embedding_ref='als', limit=50)\nORDER BY score(expression='click_through_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 10\n```  \n**Ensemble of Multiple Models:**  \n```sql\nSELECT * FROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nORDER BY score(expression='0.6 * click_through_rate + 0.4 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```  \n**Combining Model Scores with Retrieval Scores:**  \n```sql\nSELECT * FROM text_search(query=$query, mode='vector', limit=50, name='vector_search'),\ntext_search(query=$query, mode='lexical', limit=50, name='lexical_search')\nORDER BY score(expression='0.5 * retrieval.vector_search + 0.3 * retrieval.lexical_search + 0.2 * click_through_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```  \n**Using Text Encodings for Similarity:**  \n```sql\nSELECT * FROM similarity(embedding_ref='als', limit=50)\nORDER BY score(expression='0.7 * click_through_rate + 0.3 * cosine_similarity(text_encoding(user, embedding_ref=''text_embedding''), text_encoding(item, embedding_ref=''text_embedding''))', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 10\n```  \n**Using User and Item Attributes:**  \n```sql\nSELECT * FROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nORDER BY score(expression='click_through_rate + 0.1 * user.age - 0.05 * item.price + 0.2 * item.rating', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```  \n**Using Pooled Text Encodings from Interactions:**  \n```sql\nSELECT * FROM similarity(embedding_ref='als', limit=50)\nORDER BY score(expression='0.6 * click_through_rate + 0.4 * cosine_similarity(pooled_text_encoding(user.recent_interactions, pool_fn=''mean'', embedding_ref=''text_embedding''), text_encoding(item, embedding_ref=''text_embedding''))', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 10\n```  \n**Complex Expression with Multiple Features:**  \n```sql\nSELECT * FROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nORDER BY score(expression='0.4 * click_through_rate + 0.3 * retrieval.vector_search + 0.2 * cosine_similarity(text_encoding(user, embedding_ref=''text_embedding''), text_encoding(item, embedding_ref=''text_embedding'')) + 0.1 * (user.age \/ 100.0) - 0.05 * log(item.price + 1)', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```  \n**Using Geographic Distance:**  \n```sql\nSELECT * FROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nORDER BY score(expression='click_through_rate - 0.1 * haversine_distance(user.lat, user.lon, item.lat, item.lon)', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```  \n**Using Retrieval Ranks:**  \n```sql\nSELECT * FROM text_search(query=$query, mode='vector', limit=50, name='vector_search'),\ntext_search(query=$query, mode='lexical', limit=50, name='lexical_search')\nORDER BY score(expression='click_through_rate - 0.01 * retrieval.vector_search_rank - 0.005 * retrieval.lexical_search_rank', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Value Model Expressions","h3":"Value Model Examples","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Value Model Expressions\", \"Header 3\": \"Value Model Examples\"}","created_at":"2026-01-30T13:46:43.818918","updated_at":"2026-01-30T13:46:43.818918"}
{"id":"30d9698e-33e8-515a-8b5f-9dae8e94387c","content":"### Common Value Model Patterns  \n**Popular (by upvotes):**  \n```sql\nSELECT * FROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nORDER BY score(expression='item.upvotes', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```  \n**Chronological (by publish date):**  \n```sql\nSELECT * FROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nORDER BY score(expression='item.published_at', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```  \n**Trendy (popularity with time decay):**  \n```sql\nSELECT * FROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nORDER BY score(expression='(item.score - 1) \/ ((((now_seconds() - item.published_at) \/ 3600) + 2) ** 1.8)', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```  \n**Personalized (trendy with personalization):**  \n```sql\nSELECT * FROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nORDER BY score(expression='((item.score \/ 1000) + cosine_similarity(text_encoding(item, embedding_ref=''text_embedding''), pooled_text_encoding(user.recent_interactions, embedding_ref=''text_embedding''))) \/ ((((now_seconds() - item.published_at) \/ 3600) + 2) ** 1.8)', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Value Model Expressions","h3":"Common Value Model Patterns","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Value Model Expressions\", \"Header 3\": \"Common Value Model Patterns\"}","created_at":"2026-01-30T13:46:43.818921","updated_at":"2026-01-30T13:46:43.818921"}
{"id":"ffa72952-c0e3-5bb4-a5aa-12fcd0d85fe7","content":"## LIMIT Clause  \nThe LIMIT clause specifies the maximum number of results to return.  \n```sql\nLIMIT 20\n```  \nOr using a parameter:  \n```sql\nLIMIT $limit\n```  \n**Note:** The LIMIT applies after all retrieval, filtering, scoring, and\nreordering operations.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"LIMIT Clause","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"LIMIT Clause\"}","created_at":"2026-01-30T13:46:43.818925","updated_at":"2026-01-30T13:46:43.818925"}
{"id":"8acac47f-ab13-503d-a81d-121bdcda8f27","content":"## Complete Examples  \n### Basic Similarity Search  \n```sql\nSELECT *\nFROM similarity(embedding_ref='als', limit=50,\nencoder='precomputed_user', input_user_id='$user_id')\nLIMIT 10\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Complete Examples","h3":"Basic Similarity Search","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Complete Examples\", \"Header 3\": \"Basic Similarity Search\"}","created_at":"2026-01-30T13:46:43.818928","updated_at":"2026-01-30T13:46:43.818928"}
{"id":"631a9405-28b2-5e43-9f48-1d005befda5f","content":"### Text Search with Filtering  \n```sql\nSELECT name, price, category\nFROM text_search(query='$query', mode='lexical', entity_type='items', limit=100)\nWHERE category = 'electronics' AND price < 500\nLIMIT 20\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Complete Examples","h3":"Text Search with Filtering","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Complete Examples\", \"Header 3\": \"Text Search with Filtering\"}","created_at":"2026-01-30T13:46:43.818931","updated_at":"2026-01-30T13:46:43.818931"}
{"id":"22f19de0-36c7-5dd3-8256-b7c70e6d488c","content":"### User Search  \n```sql\nSELECT *\nFROM text_search(query='$query', entity_type='users', limit=50)\nLIMIT 10\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Complete Examples","h3":"User Search","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Complete Examples\", \"Header 3\": \"User Search\"}","created_at":"2026-01-30T13:46:43.818934","updated_at":"2026-01-30T13:46:43.818934"}
{"id":"806290f4-9b49-5d95-a04e-c34cdb14d957","content":"### Reranking with Diversity  \n```sql\nSELECT *\nFROM ids($item_ids)\nREORDER BY diversity(0.3)\nLIMIT 10\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Complete Examples","h3":"Reranking with Diversity","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Complete Examples\", \"Header 3\": \"Reranking with Diversity\"}","created_at":"2026-01-30T13:46:43.818938","updated_at":"2026-01-30T13:46:43.818938"}
{"id":"e887764b-8814-5f11-98a6-51a3254dbffa","content":"### Complex Query with Multiple Filters  \n```sql\nSELECT name, price, rating\nFROM similarity(embedding_ref='als', limit=200,\nencoder='interaction_pooling',\ninput_user_id='$user_id',\ntruncate_interactions=20)\nWHERE price > 100\nAND category IN ('electronics', 'computers')\nAND prebuilt('ref:data.filters:exclude_purchased',\ninput_user_id='$user_id')\nAND truncate(500)\nORDER BY score(expression='0.7 * similarity_score + 0.3 * rating', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nREORDER BY diversity(0.2), exploration(0.1)\nLIMIT 20\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Complete Examples","h3":"Complex Query with Multiple Filters","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Complete Examples\", \"Header 3\": \"Complex Query with Multiple Filters\"}","created_at":"2026-01-30T13:46:43.818941","updated_at":"2026-01-30T13:46:43.818941"}
{"id":"bfacd214-383e-5d76-9afe-7e74f9ee7afc","content":"### Column Ordering  \n```sql\nSELECT *\nFROM column_order(columns='price DESC, rating DESC NULLS LAST', limit=100)\nWHERE in_stock = true\nLIMIT 20\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Complete Examples","h3":"Column Ordering","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Complete Examples\", \"Header 3\": \"Column Ordering\"}","created_at":"2026-01-30T13:46:43.818944","updated_at":"2026-01-30T13:46:43.818944"}
{"id":"9bd1d651-9e33-5275-a3f5-968cfd77a05c","content":"## Query Patterns and Recipes  \n### Pattern: Cold Start Recommendations  \nFor new users without interaction history, use attribute-based similarity:  \n```sql\nSELECT *\nFROM similarity(embedding_ref='content_embedding',\nencoder='user_attribute_pooling',\ninput_user_features='$user_features',\nlimit=100)\nREORDER BY diversity(0.3)\nLIMIT 20\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Query Patterns and Recipes","h3":"Pattern: Cold Start Recommendations","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Query Patterns and Recipes\", \"Header 3\": \"Pattern: Cold Start Recommendations\"}","created_at":"2026-01-30T13:46:43.818947","updated_at":"2026-01-30T13:46:43.818947"}
{"id":"d4c99615-6480-52aa-b3c7-b5751780b400","content":"### Pattern: Multi-Stage Retrieval  \nRetrieve from multiple sources and combine:  \n```sql\nSELECT *\nFROM similarity(embedding_ref='collaborative', limit=50),\nsimilarity(embedding_ref='content', limit=50),\ntext_search(query='$query', mode='lexical', limit=50)\nWHERE category = '$category'\nREORDER BY diversity(0.2)\nLIMIT 20\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Query Patterns and Recipes","h3":"Pattern: Multi-Stage Retrieval","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Query Patterns and Recipes\", \"Header 3\": \"Pattern: Multi-Stage Retrieval\"}","created_at":"2026-01-30T13:46:43.818951","updated_at":"2026-01-30T13:46:43.818951"}
{"id":"b4ebe919-6510-51cb-8613-d00684b975d6","content":"### Pattern: Time-Based Filtering  \nFilter by recency using date comparisons:  \n```sql\nSELECT *\nFROM similarity(embedding_ref='als', limit=100)\nWHERE created_at > '2024-01-01'\nAND last_interaction > '2024-12-01'\nLIMIT 20\n```  \nFor dynamic dates, use parameters:  \n```sql\nSELECT *\nFROM similarity(embedding_ref='als', limit=100)\nWHERE created_at > $start_date\nAND last_interaction > $recent_date\nLIMIT 20\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Query Patterns and Recipes","h3":"Pattern: Time-Based Filtering","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Query Patterns and Recipes\", \"Header 3\": \"Pattern: Time-Based Filtering\"}","created_at":"2026-01-30T13:46:43.818954","updated_at":"2026-01-30T13:46:43.818954"}
{"id":"3a6b13df-4052-5ca7-bd67-f335887d5c51","content":"### Pattern: A\/B Testing Queries  \nUse parameters to switch between query variants. Note that parameters work\nbest for values, not entire expressions:  \n```sql\nSELECT *\nFROM similarity(embedding_ref=$embedding_name, limit=$retriever_limit)\nWHERE category = $test_category\nREORDER BY diversity($diversity_strength)\nLIMIT $result_limit\n```  \nFor more complex A\/B testing, define separate saved queries and switch between\nthem at the application level.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Query Patterns and Recipes","h3":"Pattern: A\/B Testing Queries","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Query Patterns and Recipes\", \"Header 3\": \"Pattern: A\/B Testing Queries\"}","created_at":"2026-01-30T13:46:43.818957","updated_at":"2026-01-30T13:46:43.818957"}
{"id":"0ca9a0ea-7aba-5055-a3dd-05f1ee01be5c","content":"### Pattern: Category-Specific Recommendations  \nPersonalize by category with fallback:  \n```sql\nSELECT *\nFROM similarity(embedding_ref='als',\nencoder='interaction_pooling',\ninput_user_id='$user_id',\nwhere='category = $category',\nlimit=50)\nWHERE category = $category\nLIMIT 20\n```  \nIf no results, fall back to general recommendations by omitting the category\nfilter.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Query Patterns and Recipes","h3":"Pattern: Category-Specific Recommendations","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Query Patterns and Recipes\", \"Header 3\": \"Pattern: Category-Specific Recommendations\"}","created_at":"2026-01-30T13:46:43.818961","updated_at":"2026-01-30T13:46:43.818961"}
{"id":"6135574c-5a16-5f37-b9ea-1037a93e1431","content":"## Unsupported Features  \nThe following SQL features are **not supported**:  \n- JOINs - Use multiple retriever functions instead\n- Subqueries (in FROM or WHERE clause) - Use retriever functions or prebuilt filters instead\n- Nested function calls - Functions cannot be nested (e.g., `similarity(embedding_ref=func('arg'))` is invalid)\n- GROUP BY \/ Aggregations - This DSL is for ranking, not analytics\n- HAVING clause - Use WHERE instead\n- Window functions (OVER clause) - Not supported\n- Common Table Expressions (WITH clause) - Use retriever functions instead\n- Multiple statements - Only single SELECT statements are allowed\n- Table aliases - Not supported in FROM clause\n- Column aliases in SELECT - Column names are used as-is","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Unsupported Features","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Unsupported Features\"}","created_at":"2026-01-30T13:46:43.818964","updated_at":"2026-01-30T13:46:43.818964"}
{"id":"9dcd4bf4-c4c0-5f22-9c8d-448ca4be2501","content":"## Limits and Constraints  \n### Result Limits  \n- **Maximum LIMIT**: 1000 results per query\n- **Default LIMIT**: 15 results (if not specified)\n- **Retriever Limits**: Each retriever function can retrieve up to the limit\nspecified in its `limit` parameter","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Limits and Constraints","h3":"Result Limits","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Limits and Constraints\", \"Header 3\": \"Result Limits\"}","created_at":"2026-01-30T13:46:43.818967","updated_at":"2026-01-30T13:46:43.818967"}
{"id":"6b012b0d-25ba-56a7-b0a9-35c381929d6e","content":"### String Length Limits  \n- **Maximum string length**: 1000 characters for string parameters and values","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Limits and Constraints","h3":"String Length Limits","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Limits and Constraints\", \"Header 3\": \"String Length Limits\"}","created_at":"2026-01-30T13:46:43.818971","updated_at":"2026-01-30T13:46:43.818971"}
{"id":"852021da-6c23-5396-bf01-7d4f45505d4c","content":"### Performance Considerations  \n- **Retriever Limits**: Set appropriate `limit` values in retriever functions to\nbalance recall and performance. Retrieving too many candidates can slow down\nqueries.\n- **Filter Complexity**: Complex WHERE clauses with many conditions may impact\nperformance. Consider using prebuilt filters for frequently-used filter\npatterns.\n- **Multiple Retrievers**: When using multiple retrievers, they execute in\nparallel for better performance.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Limits and Constraints","h3":"Performance Considerations","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Limits and Constraints\", \"Header 3\": \"Performance Considerations\"}","created_at":"2026-01-30T13:46:43.818974","updated_at":"2026-01-30T13:46:43.818974"}
{"id":"fbe5e28f-09be-57cc-a1fd-50812ba9a93b","content":"## Pagination  \nPagination allows you to retrieve results in pages, maintaining consistency\nacross requests.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Pagination","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Pagination\"}","created_at":"2026-01-30T13:46:43.818977","updated_at":"2026-01-30T13:46:43.818977"}
{"id":"379cf624-1355-5ef1-805c-760a4a07e428","content":"### Using Pagination  \nPagination is supported through the `pagination_key` parameter in API\nrequests. The same pagination key will return consistent results across\nmultiple requests.  \n**Example API Request:**  \n```json\n{\n\"query\": \"SELECT * FROM similarity(embedding_ref='als', limit=50) LIMIT 20\",\n\"parameters\": {\n\"user_id\": \"user123\"\n},\n\"pagination_key\": \"page_1\"\n}\n```  \n**Pagination Behavior:**  \n- Results are consistent for the same `pagination_key`\n- Changing the `pagination_key` returns a new page\n- The pagination offset is automatically handled based on the key\n- Results maintain the prefix property: page N results are a prefix of page N+1\nresults","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Pagination","h3":"Using Pagination","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Pagination\", \"Header 3\": \"Using Pagination\"}","created_at":"2026-01-30T13:46:43.818980","updated_at":"2026-01-30T13:46:43.818980"}
{"id":"9fb0dc30-c7d7-5713-9eea-d1d673698561","content":"## API Usage  \n### Endpoints  \n**Ad-hoc Query:**\n- `POST \/v2\/engines\/{engine_name}\/query` - Execute a SQL query string directly  \n**Saved Query:**\n- `POST \/v2\/engines\/{engine_name}\/queries\/{query_name}` - Execute a saved query\n- `GET \/v2\/engines\/{engine_name}\/queries` - List all saved queries\n- `GET \/v2\/engines\/{engine_name}\/queries\/{query_name}` - Get saved query details","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"API Usage","h3":"Endpoints","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"API Usage\", \"Header 3\": \"Endpoints\"}","created_at":"2026-01-30T13:46:43.818984","updated_at":"2026-01-30T13:46:43.818984"}
{"id":"1e26b0b7-6bfd-5f4e-8212-2db3b9ef5e97","content":"### Authentication  \nAll requests require an API key in the `x-api-key` header:  \n```bash\nx-api-key: YOUR_API_KEY\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"API Usage","h3":"Authentication","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"API Usage\", \"Header 3\": \"Authentication\"}","created_at":"2026-01-30T13:46:43.818987","updated_at":"2026-01-30T13:46:43.818987"}
{"id":"3b882aad-c45e-5ca2-be6a-379bce067ecd","content":"### Making Query Requests  \nQueries can be executed via the API in two ways:  \n1. **Ad-hoc queries**: Send a SQL query string directly in the request\n2. **Saved queries**: Reference a pre-saved query by name (defined in model\nconfiguration)  \n**Key Differences:**  \n- **Ad-hoc queries**: Flexible, can be modified per request, but must be\nvalidated each time\n- **Saved queries**: Pre-validated, reusable, can define parameter schemas,\nbetter for production use","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"API Usage","h3":"Making Query Requests","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"API Usage\", \"Header 3\": \"Making Query Requests\"}","created_at":"2026-01-30T13:46:43.818991","updated_at":"2026-01-30T13:46:43.818991"}
{"id":"f7245301-320b-5384-8f52-80cc4f0ce59b","content":"### Defining Saved Queries  \nSaved queries are defined in your model configuration YAML under the `queries`\nsection:  \n```yaml\nqueries:\npersonalized_recommendations:\nparams:\nuser_id:\ntype: string\nrequired: true\nlimit:\ntype: number\ndefault: 20\nquery: |\nSELECT *\nFROM similarity(embedding_ref='als', limit=100,\nencoder='interaction_pooling',\ninput_user_id='$user_id')\nREORDER BY diversity(0.3)\nLIMIT $limit\n```  \n**Benefits of Saved Queries:**  \n- Pre-validated at deployment time (SQL syntax errors caught early)\n- Parameter schemas with types and defaults\n- Reusable across multiple API calls\n- Better performance (no re-parsing on each request)\n- Version controlled with your model configuration  \n**Query Validation:**  \nSaved queries are automatically validated when you create or update an engine.\nIf a SQL query has syntax errors, you'll get a clear error message during\nengine setup, preventing deployment of invalid queries.  \n**Ad-hoc Query Request:**  \n```json\n{\n\"query\": \"SELECT * FROM similarity(embedding_ref='als', limit=50) LIMIT 10\",\n\"parameters\": {\n\"user_id\": \"user123\"\n},\n\"return_metadata\": true,\n\"return_explanation\": false\n}\n```  \n**Saved Query Request:**  \n```json\n{\n\"parameters\": {\n\"user_id\": \"user123\",\n\"query\": \"laptop\"\n},\n\"return_metadata\": true\n}\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"API Usage","h3":"Defining Saved Queries","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"API Usage\", \"Header 3\": \"Defining Saved Queries\"}","created_at":"2026-01-30T13:46:43.818994","updated_at":"2026-01-30T13:46:43.818994"}
{"id":"ebe7bbf1-227d-5238-b14a-743a7753ba84","content":"### Response Format  \nQuery responses include the following structure:  \n```json\n{\n\"results\": [\n{\n\"id\": \"item123\",\n\"score\": 0.95,\n\"attributes\": {\n\"name\": \"Product Name\",\n\"price\": 99.99,\n\"category\": \"electronics\"\n}\n}\n],\n\"explanation\": {\n\"retrieval\": [...],\n\"filtering\": [...],\n\"scoring\": [...],\n\"reordering\": [...]\n}\n}\n```  \n**Response Fields:**  \n- `results`: Array of result objects, each containing:\n- `id`: Entity identifier (string)\n- `score`: Relevance score (float, 0.0 to 1.0)\n- `attributes`: Entity metadata object (if `return_metadata=true`)\n- `journey`: Entity journey tracking object (if\n`return_journey_explanations=true`)\n- `explanation`: Detailed execution breakdown object (if\n`return_explanation=true`)\n- `retrieval`: List of retrieval step explanations\n- `filtering`: List of filtering step explanations\n- `scoring`: Scoring step explanation\n- `reordering`: List of reordering step explanations\n- `pagination_key`: Pagination key for fetching next page (string, only if more\nresults available)  \n**HTTP Status Codes:**  \n- `200 OK` - Query executed successfully\n- `400 Bad Request` - Invalid request format\n- `401 Unauthorized` - Missing or invalid API key\n- `404 Not Found` - Saved query not found (for saved query endpoint)\n- `422 Unprocessable Entity` - Query validation error (invalid SQL, missing\nparameters, etc.)\n- `500 Internal Server Error` - Server error during query execution  \n**Empty Results:**  \nIf a query returns zero results, you'll still receive a `200 OK` response with\nan empty `results` array. This is normal behavior - it means the query executed\nsuccessfully but no entities matched your criteria. Use `return_explanation=true`\nto understand why no results were returned (e.g., filters removed all\ncandidates).","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"API Usage","h3":"Response Format","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"API Usage\", \"Header 3\": \"Response Format\"}","created_at":"2026-01-30T13:46:43.818997","updated_at":"2026-01-30T13:46:43.818997"}
{"id":"b1d4be7a-7180-5f81-a140-277c3f1748b5","content":"## Best Practices  \n### Query Design  \n1. **Set Appropriate Limits**: Use retriever `limit` parameters to retrieve\nenough candidates (typically 50-200) while keeping final `LIMIT` reasonable\n(10-50 for most use cases).  \n2. **Use Prebuilt Filters**: For frequently-used filter patterns, define them\nas prebuilt filters in your model configuration and reference them with\n`prebuilt()`.  \n3. **Combine Retrievers**: Use multiple retrievers in the FROM clause to\ncombine different retrieval strategies (e.g., similarity + text_search).  \n4. **Optimize WHERE Clauses**: Place the most selective filters first in WHERE\nclauses. Use indexes on frequently-filtered columns.  \n5. **Parameterize Queries**: Use parameters for dynamic values (user IDs,\nsearch queries) rather than string concatenation.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Best Practices","h3":"Query Design","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Best Practices\", \"Header 3\": \"Query Design\"}","created_at":"2026-01-30T13:46:43.819000","updated_at":"2026-01-30T13:46:43.819000"}
{"id":"30c99308-d2f0-5d42-bfc6-56e4862c538a","content":"### Performance Tips  \n1. **Retriever Limits**: Start with smaller retriever limits (50-100) and\nincrease if needed. Larger limits improve recall but increase latency.  \n2. **Filter Early**: Apply filters in the WHERE clause or retriever `where`\nparameter to reduce the candidate set early in the pipeline.  \n3. **Use Truncate**: If you retrieve many candidates but only need a subset,\nuse `truncate()` to limit before expensive scoring operations.  \n4. **Diversity Strength**: Use moderate diversity values (0.2-0.4) to balance\ndiversity and relevance. Higher values may reduce relevance.  \n5. **Column Selection**: Use `SELECT column1, column2` instead of `SELECT *`\nwhen you only need specific columns to reduce response size.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Best Practices","h3":"Performance Tips","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Best Practices\", \"Header 3\": \"Performance Tips\"}","created_at":"2026-01-30T13:46:43.819004","updated_at":"2026-01-30T13:46:43.819004"}
{"id":"1a75ab5a-0653-52dc-816d-e9d7e32c7f5c","content":"### Security Considerations  \n1. **Parameter Validation**: Always validate and sanitize user-provided\nparameters before passing them to queries.  \n2. **SQL Injection Prevention**: The query language automatically handles\nparameter substitution safely. Parameters are never concatenated into SQL\nstrings. Never concatenate user input directly into query strings.  \n3. **Access Control**: Ensure proper authentication and authorization for\nquery endpoints. Users should only be able to query data they have access\nto.  \n4. **API Key Security**: Never expose API keys in client-side code or public\nrepositories. Use server-side proxies for client applications.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Best Practices","h3":"Security Considerations","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Best Practices\", \"Header 3\": \"Security Considerations\"}","created_at":"2026-01-30T13:46:43.819007","updated_at":"2026-01-30T13:46:43.819007"}
{"id":"da92b51e-1165-5012-95f6-4f0bfa01ad55","content":"## When to Use Each Retriever  \n| Retriever | Best For | Avoid When |\n|-----------|----------|------------|\n| `similarity()` | Personalized recommendations, similar items\/users | No embeddings configured |\n| `text_search()` | Search features, keyword queries | No text fields indexed |\n| `column_order()` | Trending, newest, most popular | Need personalization |\n| `filter()` | Rule-based retrieval, filtering only | Need ranking\/scoring |\n| `ids()` | Reranking known items | Initial retrieval (no candidates) |\n| `candidate_attributes()` | Reranking new\/ephemeral items | Items in catalog |","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"When to Use Each Retriever","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"When to Use Each Retriever\"}","created_at":"2026-01-30T13:46:43.819010","updated_at":"2026-01-30T13:46:43.819010"}
{"id":"504821d6-c91d-56f8-a8f0-c1c16d1d1de4","content":"## Common Use Cases  \n### Personalized Recommendations  \nRetrieve personalized recommendations for a user based on their interaction\nhistory:  \n```sql\nSELECT *\nFROM similarity(embedding_ref='als', limit=100,\nencoder='interaction_pooling',\ninput_user_id='$user_id',\ntruncate_interactions=20)\nWHERE prebuilt('ref:data.filters:exclude_purchased',\ninput_user_id='$user_id')\nREORDER BY diversity(0.3)\nLIMIT 20\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Common Use Cases","h3":"Personalized Recommendations","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Common Use Cases\", \"Header 3\": \"Personalized Recommendations\"}","created_at":"2026-01-30T13:46:43.819014","updated_at":"2026-01-30T13:46:43.819014"}
{"id":"97fd6a08-6455-51a2-9c99-b603e2df9731","content":"### Search with Filters  \nCombine text search with attribute filtering:  \n```sql\nSELECT name, price, category\nFROM text_search(query='$query', mode='lexical', limit=200)\nWHERE category = '$category'\nAND price BETWEEN $min_price AND $max_price\nAND in_stock = true\nLIMIT 20\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Common Use Cases","h3":"Search with Filters","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Common Use Cases\", \"Header 3\": \"Search with Filters\"}","created_at":"2026-01-30T13:46:43.819017","updated_at":"2026-01-30T13:46:43.819017"}
{"id":"02cfb546-4500-50a9-b0a8-12010c6a0da8","content":"### Trending Items  \nRetrieve trending items ordered by popularity metrics:  \n```sql\nSELECT *\nFROM column_order(columns='views DESC, likes DESC, created_at DESC', limit=100)\nWHERE created_at > '2024-12-01'\nLIMIT 20\n```  \nUse a date parameter for dynamic filtering:  \n```sql\nSELECT *\nFROM column_order(columns='views DESC, likes DESC, created_at DESC', limit=100)\nWHERE created_at > $start_date\nLIMIT 20\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Common Use Cases","h3":"Trending Items","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Common Use Cases\", \"Header 3\": \"Trending Items\"}","created_at":"2026-01-30T13:46:43.819020","updated_at":"2026-01-30T13:46:43.819020"}
{"id":"595ecbf0-a32c-55e4-9b27-3d36962943f9","content":"### Reranking  \nRerank a set of candidate items with diversity:  \n```sql\nSELECT *\nFROM ids($item_ids)\nREORDER BY diversity(0.4), exploration(0.2)\nLIMIT 10\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Common Use Cases","h3":"Reranking","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Common Use Cases\", \"Header 3\": \"Reranking\"}","created_at":"2026-01-30T13:46:43.819024","updated_at":"2026-01-30T13:46:43.819024"}
{"id":"b80bcfe4-6de4-5bd9-adfd-65c5f4ab577b","content":"### Hybrid Search  \nCombine similarity and text search for better recall:  \n```sql\nSELECT *\nFROM similarity(embedding_ref='als', limit=50),\ntext_search(query='$query', mode='lexical', limit=50)\nWHERE category = '$category'\nLIMIT 20\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Common Use Cases","h3":"Hybrid Search","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Common Use Cases\", \"Header 3\": \"Hybrid Search\"}","created_at":"2026-01-30T13:46:43.819027","updated_at":"2026-01-30T13:46:43.819027"}
{"id":"6d0901d2-3867-5aa1-9e92-5cb69a07bcb0","content":"### User-to-User Recommendations  \nFind similar users:  \n```sql\nSELECT *\nFROM similarity(embedding_ref='user_embedding',\nencoder='precomputed_user',\ninput_user_id='$user_id',\nentity_type='users',\nlimit=50)\nLIMIT 10\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Common Use Cases","h3":"User-to-User Recommendations","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Common Use Cases\", \"Header 3\": \"User-to-User Recommendations\"}","created_at":"2026-01-30T13:46:43.819030","updated_at":"2026-01-30T13:46:43.819030"}
{"id":"b33c7313-34b2-5636-bb5e-9a4f38cb42a2","content":"## Troubleshooting  \n### Common Errors  \n**\"Unknown retriever function: 'similiarity'\"**  \n```\nUnknown retriever function: 'similiarity'.\nSupported: candidate_attributes, column_order, filter, ids, similarity, text_search\nDid you mean: similarity?\n```  \n- Check function name spelling (case-insensitive)\n- The error message includes suggestions for similar function names  \n**\"All retrievers must use the same entity_type\"**  \n```\nAll retrievers must use the same entity_type. Found: items and users\n```  \n- Ensure all retriever functions in your query use the same `entity_type`\nparameter\n- Remove conflicting `entity_type` specifications  \n**\"Parameter 'limit' exceeds maximum\"**  \n```\nParameter 'limit' exceeds maximum allowed value of 1000. Got: 5000\n```  \n- The LIMIT value must be \u2264 1000\n- Reduce the LIMIT value or use pagination for larger result sets  \n**\"'limit' is a reserved keyword\"**  \n```\nFailed to parse SQL: 'limit' is a reserved keyword and cannot be used as a\nparameter name. Use 'max_results' instead.\n```  \n- Don't use `limit` as a parameter name\n- Use `max_results`, `result_limit`, or similar instead  \n**\"JOINs are not supported\"**  \n```\nJOINs are not supported. Use retriever functions to combine data sources:\nFROM similarity(...), text_search(...), etc.\n```  \n- Use multiple retriever functions in the FROM clause instead of JOINs  \n**\"Subqueries in FROM clause are not supported\"**  \n```\nSubqueries in FROM clause are not supported. Use retriever functions instead\n```  \n- Replace subqueries with retriever functions  \n**\"GROUP BY and aggregations are not supported\"**  \n```\nGROUP BY and aggregations are not supported. This DSL is designed for ranking\nqueries, not analytical queries.\n```  \n- This query language is for recommendations\/ranking, not analytics\n- Use a data warehouse or OLAP system for analytical queries  \n**\"Nested function calls are not supported\"**  \n```\nNested function calls are not supported.\nExample: similarity(embedding_ref=func('arg')) is invalid.\nUse simple values: similarity(embedding_ref='als')\n```  \n- Don't nest functions within function arguments\n- Use parameters for dynamic values instead  \n**\"Missing required parameter: 'input_user_id'\"**  \n```\nMissing required field: 'parameters.user_id'. Please include this field in\nyour request.\n```  \n- Provide all required parameters in the request\n- Check saved query parameter schemas for required fields  \n**\"Embedding 'als2' referenced in retriever is not defined\"**  \n```\nEmbedding 'als2' not found in model configuration\n```  \n- Verify the embedding name exists in your model configuration\n- Check for typos in the `embedding_ref` parameter","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Troubleshooting","h3":"Common Errors","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Troubleshooting\", \"Header 3\": \"Common Errors\"}","created_at":"2026-01-30T13:46:43.819033","updated_at":"2026-01-30T13:46:43.819033"}
{"id":"c3833e20-606e-5c53-9d42-978a6afc0343","content":"### Query Performance Issues  \n**Slow queries:**  \n- Reduce retriever `limit` values\n- Add filters earlier in the pipeline (in retriever `where` or WHERE clause)\n- Use `truncate()` to limit candidate sets before scoring\n- Check if multiple retrievers can be optimized or combined  \n**Low recall:**  \n- Increase retriever `limit` values\n- Use multiple retrievers to combine different retrieval strategies\n- Adjust diversity\/exploration strength (lower values improve relevance)  \n**Inconsistent results:**  \n- Ensure parameters are provided consistently\n- Use pagination keys for consistent pagination\n- Check for non-deterministic operations (some reorder functions may have\nslight variations)","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Troubleshooting","h3":"Query Performance Issues","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Troubleshooting\", \"Header 3\": \"Query Performance Issues\"}","created_at":"2026-01-30T13:46:43.819037","updated_at":"2026-01-30T13:46:43.819037"}
{"id":"0eb0d1ea-21b5-5094-874a-a87786b767e5","content":"## Error Handling  \nThe query language provides helpful error messages for common issues:  \n- **Unknown retriever functions**: Includes suggestions for similar function\nnames\n- **Invalid parameter syntax**: Explains correct parameter format\n- **Missing required parameters**: Lists which parameters are required\n- **Entity type mismatches**: Explains entity type conflicts\n- **Invalid function arguments**: Describes expected argument types and values\n- **Limit violations**: Shows maximum allowed values  \nAll errors include context about where the error occurred in your query to help\nwith debugging.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Error Handling","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Error Handling\"}","created_at":"2026-01-30T13:46:43.819040","updated_at":"2026-01-30T13:46:43.819040"}
{"id":"0c8e7b10-7232-5082-89ad-f899527d629b","content":"### Error Response Format  \nError responses follow this structure:  \n```json\n{\n\"status_code\": 422,\n\"message\": \"Invalid query configuration: similarity() requires a non-empty 'embedding_ref'\",\n\"data\": null\n}\n```  \n**Common Error Messages:**  \n- `\"SQL query cannot be empty\"` - Query string is empty or whitespace\n- `\"Unknown retriever function: 'X'\"` - Function name not recognized\n- `\"All retrievers must use the same entity_type\"` - Entity type conflict\n- `\"Parameter 'limit' exceeds maximum\"` - LIMIT value too large\n- `\"Failed to transpile SQL query: ...\"` - SQL syntax error\n- `\"Saved query 'X' not found\"` - Saved query doesn't exist\n- `\"Missing required field: 'X'\"` - Required request field missing","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Error Handling","h3":"Error Response Format","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Error Handling\", \"Header 3\": \"Error Response Format\"}","created_at":"2026-01-30T13:46:43.819043","updated_at":"2026-01-30T13:46:43.819043"}
{"id":"eecd3cc9-7b9b-5e1e-b6b5-732aa0ed4cfc","content":"## Quick Reference  \n### Retriever Functions  \n| Function | Purpose | Key Parameters |\n|----------|---------|----------------|\n| `similarity()` | Vector similarity search | `embedding_ref`, `encoder`, `limit` |\n| `text_search()` | Full-text search | `query`, `mode`, `limit` |\n| `column_order()` | Order by column values | `columns`, `limit` |\n| `filter()` | Filter-based retrieval | `where`, `limit` |\n| `ids()` | Retrieve by IDs (reranking) | `item_ids` (list or parameter) |\n| `candidate_attributes()` | Rerank from attributes | Parameter reference |","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Quick Reference","h3":"Retriever Functions","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Quick Reference\", \"Header 3\": \"Retriever Functions\"}","created_at":"2026-01-30T13:46:43.819046","updated_at":"2026-01-30T13:46:43.819046"}
{"id":"fa07ddb7-9fff-5111-bad2-47fce429bf55","content":"### Query Encoders  \n| Encoder | Use Case | Key Parameters |\n|---------|----------|----------------|\n| `precomputed_user` (default) | User-based recommendations | `input_user_id` |\n| `precomputed_item` | Item-to-item similarity | `input_item_id` |\n| `interaction_pooling` (default) | Pool user interactions | `input_user_id`, `truncate_interactions` |\n| `interaction_round_robin` | Round-robin from interactions | `input_user_id`, `num_clusters` |\n| `user_attribute_pooling` | Encode user attributes | `input_user_id`, `input_user_features` |\n| `item_attribute_pooling` | Encode item attributes | `input_item_id`, `input_item_features` |","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Quick Reference","h3":"Query Encoders","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Quick Reference\", \"Header 3\": \"Query Encoders\"}","created_at":"2026-01-30T13:46:43.819049","updated_at":"2026-01-30T13:46:43.819049"}
{"id":"bc1cb166-6f0d-50c5-b37f-39c8e52986f3","content":"### Filter Functions  \n| Function | Purpose | Parameters |\n|----------|---------|------------|\n| `prebuilt()` | Apply prebuilt filter | `filter_ref`, `input_user_id` |\n| `truncate()` | Limit candidate set | `max_length` |","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Quick Reference","h3":"Filter Functions","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Quick Reference\", \"Header 3\": \"Filter Functions\"}","created_at":"2026-01-30T13:46:43.819053","updated_at":"2026-01-30T13:46:43.819053"}
{"id":"472bb40c-795a-5ba9-8049-3c0b97045316","content":"### Reorder Functions  \n| Function | Purpose | Parameters |\n|----------|---------|------------|\n| `diversity()` | Reduce similarity | `strength` (0.0-1.0) |\n| `exploration()` | Inject items with equal weight | `retriever`, `strength` (0.0-1.0) |\n| `boosted()` | Inject items using boost column weights | `retriever`, `strength` (0.0-1.0) |","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Quick Reference","h3":"Reorder Functions","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Quick Reference\", \"Header 3\": \"Reorder Functions\"}","created_at":"2026-01-30T13:46:43.819056","updated_at":"2026-01-30T13:46:43.819056"}
{"id":"de8d1aa8-e8e3-56c8-a1b2-45cce28f0c0b","content":"### Common Parameters  \n- `$user_id` - User identifier (string)\n- `$item_id` - Item identifier (string)\n- `$query` - Search query text (string)\n- `$item_ids` - List of item IDs (array of strings)\n- `$item_attributes` - Item attributes dictionary (object\/array)\n- `$limit` - Result limit (integer) - Note: use LIMIT clause when possible  \n**Array Parameters Example:**  \n```json\n{\n\"parameters\": {\n\"item_ids\": [\"item1\", \"item2\", \"item3\"]\n}\n}\n```","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Quick Reference","h3":"Common Parameters","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Quick Reference\", \"Header 3\": \"Common Parameters\"}","created_at":"2026-01-30T13:46:43.819059","updated_at":"2026-01-30T13:46:43.819059"}
{"id":"a1a87342-8cce-522a-a1e9-580e7e79f689","content":"### Limits  \n- Maximum LIMIT: **1000**\n- Default LIMIT: **15**\n- Maximum string length: **1000 characters**","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Quick Reference","h3":"Limits","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Quick Reference\", \"Header 3\": \"Limits\"}","created_at":"2026-01-30T13:46:43.819062","updated_at":"2026-01-30T13:46:43.819062"}
{"id":"065f3202-7c44-53c0-8ed3-6e8c6d8ffe57","content":"### SQL Operators  \n- Comparison: `=`, `!=`, `>`, `<`, `>=`, `<=`\n- Logical: `AND`, `OR`, `NOT`\n- String: `LIKE`, `ILIKE`\n- Null: `IS NULL`, `IS NOT NULL`\n- Membership: `IN (...)`, `NOT IN (...)`\n- Range: `BETWEEN ... AND ...`","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Quick Reference","h3":"SQL Operators","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Quick Reference\", \"Header 3\": \"SQL Operators\"}","created_at":"2026-01-30T13:46:43.819065","updated_at":"2026-01-30T13:46:43.819065"}
{"id":"e6fa23c5-f88a-56e3-a0eb-3182cf97c301","content":"## Glossary  \n- **Ad-hoc Query**: A query sent directly in the API request\n- **Candidate**: An entity retrieved by a retriever function\n- **Embedding**: A vector representation of an entity or query\n- **Encoder**: A component that converts user\/item input into a query vector\n- **Engine**: A deployed model with its configuration (also called model name)\n- **Entity Type**: The type of entity being queried (items or users)\n- **Filter**: A condition that excludes entities from results\n- **Pagination**: Mechanism for retrieving results in pages\n- **Prebuilt Filter**: A filter defined in the model configuration\n- **Query Pipeline**: The sequence of retrieve \u2192 filter \u2192 score \u2192 reorder \u2192\nlimit operations\n- **Reorder**: Post-processing step that modifies result order (diversity,\nexploration, etc.)\n- **Retriever**: A function that retrieves candidate entities from the index\n- **Saved Query**: A pre-defined query stored in the model configuration\n- **Score**: A relevance score assigned to each entity (0.0 to 1.0)\n- **Transpilation**: Converting SQL syntax to query configuration objects","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"Glossary","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"Glossary\"}","created_at":"2026-01-30T13:46:43.819069","updated_at":"2026-01-30T13:46:43.819069"}
{"id":"deef0591-3d5f-5537-9cbd-982a704b1e04","content":"## FAQ  \n**Q: Can I use SQL joins in queries?**  \nNo, joins are not supported. Use multiple retriever functions in the FROM\nclause to combine data from different sources. The retrievers execute in\nparallel and results are merged.  \n**Q: How do I filter out items a user has already seen?**  \nDefine a prebuilt personal filter in your model configuration and use it in\nyour query:  \n```sql\nWHERE prebuilt('exclude_seen', input_user_id='$user_id')\n```  \n**Q: Can I use SQL functions in WHERE clauses?**  \nYes, DataFusion SQL functions are supported. For example: `WHERE LENGTH(name) > 10`\nor `WHERE price * 1.1 > 100`.  \n**Q: What's the difference between ORDER BY and REORDER BY?**  \n- `ORDER BY`: Scores\/sorts results based on a custom value model expression\n(omitted if using default retriever scores)\n- `REORDER BY`: Post-processes already-scored results for diversity or\nexploration  \nUse both together: `ORDER BY score(expression='0.6 * click_through_rate + 0.4 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids') REORDER BY diversity(0.3)`  \n**Q: How do I debug slow queries?**  \nUse `return_explanation=true` to see:\n- How many candidates each retriever found\n- How long each step took\n- Which filters removed the most candidates  \n**Q: Can I cache query results?**  \nThe platform handles caching automatically. Identical queries with identical\nparameters within a short time window may return cached results.  \n**Q: What happens if a parameter is missing?**  \nIf a required parameter is missing, you'll get a 422 error with details about\nwhich parameter is missing. Optional parameters use their default values if not\nprovided.  \n**Q: Can I use this for analytics queries?**  \nNo, this DSL is designed for ranking and recommendation queries, not analytical\nqueries. It doesn't support GROUP BY, aggregations, or other analytical\noperations.  \n**Q: How do I create a saved query?**  \nAdd it to your model configuration YAML under `queries` and deploy. See\n[Defining Saved Queries](#defining-saved-queries) for details.  \n**Q: What happens if my query returns zero results?**  \nQueries that return zero results are handled gracefully. You'll receive an empty\n`results` array with a 200 OK status. The `explanation` field (if requested)\nwill show how many candidates were found at each stage, helping you debug why\nno results were returned.  \n**Q: Can I test queries before deploying?**  \nYes! You can test queries in two ways:  \n1. **Ad-hoc queries**: Use the ad-hoc query endpoint to test SQL syntax and\nlogic before creating saved queries\n2. **Console UI**: Use the query console in the dashboard to interactively test\nqueries with live data  \n**Q: Are there limits on query complexity?**  \nThere are no explicit limits on query complexity (number of retrievers, filters,\netc.), but very complex queries may impact performance. Monitor query execution\ntimes using `return_explanation=true` and optimize as needed.","document_title":"Shaped Query Language","h1":"... (rest of the code remains the same)","h2":"FAQ","h3":"","h4":"","file_path":"query_reference\/shapedql.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/shapedql.md","chunk_metadata":"{\"Header 1\": \"... (rest of the code remains the same)\", \"Header 2\": \"FAQ\"}","created_at":"2026-01-30T13:46:43.819072","updated_at":"2026-01-30T13:46:43.819072"}
{"id":"6cf6c96d-2e91-5866-992d-33a47ecf54b1","content":"# Contact  \n## Demo  \nTo book a demo with one of our product experts or solution engineers, please fill out\nthe [form on our webpage](https:\/\/www.shaped.ai\/contact).  \nYou can also email us directly at sales@shaped.ai.","document_title":"Contact","h1":"Contact","h2":"Demo","h3":"","h4":"","file_path":"support\/contact.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/contact.md","chunk_metadata":"{\"Header 1\": \"Contact\", \"Header 2\": \"Demo\"}","created_at":"2026-01-30T13:46:43.819200","updated_at":"2026-01-30T13:46:43.819200"}
{"id":"9a8ec3e5-23b7-5d59-bfcd-06e678148bac","content":"## Slack  \nYou can join our public Slack through this\n[link](https:\/\/join.slack.com\/t\/shapedhq\/shared_invite\/zt-3kq01h8c2-uL5HB3j8wT7S6JxAjKMNcg).\nEveryone's welcome to join the community and we'll be available 24\/7 to answer any of\nyour product, recommendation or personalized AI questions.  \nLet us know if you'd like to setup a more direct Slack channel at support@shaped.ai.","document_title":"Contact","h1":"Contact","h2":"Slack","h3":"","h4":"","file_path":"support\/contact.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/contact.md","chunk_metadata":"{\"Header 1\": \"Contact\", \"Header 2\": \"Slack\"}","created_at":"2026-01-30T13:46:43.819205","updated_at":"2026-01-30T13:46:43.819205"}
{"id":"846a6809-f08d-5502-b367-91199b496ace","content":"## Email  \nFor general enquiries or questions about Shaped, please feel free to reach out at\nhello@shaped.ai.","document_title":"Contact","h1":"Contact","h2":"Email","h3":"","h4":"","file_path":"support\/contact.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/contact.md","chunk_metadata":"{\"Header 1\": \"Contact\", \"Header 2\": \"Email\"}","created_at":"2026-01-30T13:46:43.819208","updated_at":"2026-01-30T13:46:43.819208"}
{"id":"4e6c0cff-3959-5d41-93c4-5afd72509cd0","content":"## Security & Privacy  \nFor any questions, complaints, or disputes related to security and privacy, email us at\nsecurity@shaped.ai.","document_title":"Contact","h1":"Contact","h2":"Security & Privacy","h3":"","h4":"","file_path":"support\/contact.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/contact.md","chunk_metadata":"{\"Header 1\": \"Contact\", \"Header 2\": \"Security & Privacy\"}","created_at":"2026-01-30T13:46:43.819212","updated_at":"2026-01-30T13:46:43.819212"}
{"id":"184be0f7-c874-5218-b2c9-44cdc950c92e","content":"# FAQ  \n### How much data do I need to get started?  \nShaped requires, user, item and event data to power the underlying machine-learning\nalgorithms that understand your data. The more unique interactions and user and item\nmetadata you have, the better Shaped will perform. However, Shaped works in very low\ndata regimes because we pre-train our models on external datasets. In some cases you\ncan get started with less than 1000 events. Likely you have more data than you think!","document_title":"FAQ","h1":"FAQ","h2":"","h3":"How much data do I need to get started?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"How much data do I need to get started?\"}","created_at":"2026-01-30T13:46:43.819588","updated_at":"2026-01-30T13:46:43.819588"}
{"id":"9765ead5-6b28-5244-8e4c-ba746cf23934","content":"### How many items do I need to get started with Shaped?  \nThe more items you have the harder it is for your users to find what they want and the\nmore beneficial personalized discovery is for your application. We've seen that 100\nitems is enough to get reasonable uplift by using Shaped.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"How many items do I need to get started with Shaped?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"How many items do I need to get started with Shaped?\"}","created_at":"2026-01-30T13:46:43.819595","updated_at":"2026-01-30T13:46:43.819595"}
{"id":"7d81e0db-7b7a-591e-a11b-afed6830d780","content":"### How do I know what personalization use-case is going to be best to start with?  \nWe've found that the best way to get started is to start with the most obvious\nuse-case for your application. For example, if you're a news site, you might want to\nstart with personalized news recommendations. If you're a social network, you might\nwant to start with personalized feed recommendations. If you're an e-commerce site,\nyou might want to start with personalized product recommendations. When you work with\nus, we'll help you identify the use-case that's going to generate the most uplift.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"How do I know what personalization use-case is going to be best to start with?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"How do I know what personalization use-case is going to be best to start with?\"}","created_at":"2026-01-30T13:46:43.819599","updated_at":"2026-01-30T13:46:43.819599"}
{"id":"f9c52ce6-a5c3-5bad-a1df-cc14ed5694a0","content":"### My personalization use-case isn't listed, can Shaped help with it?  \nYes, please reach out, we're continuing to add support for any discovery or\npersonalization use-case and would love to hear what you're trying to do.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"My personalization use-case isn't listed, can Shaped help with it?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"My personalization use-case isn't listed, can Shaped help with it?\"}","created_at":"2026-01-30T13:46:43.819603","updated_at":"2026-01-30T13:46:43.819603"}
{"id":"e1c1baa6-309c-5459-9233-de5c10e96bf5","content":"### Does Shaped work for anonymous and\/or semi-persistent users?  \nYes, we can personalize to anonymous traffic by using contextual information like\nlocation, device, time of day, etc. We can use semi-persistent user information from\ncookies and we use real-time session based ranking to personalize to the users first\nfew clicks.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"Does Shaped work for anonymous and\/or semi-persistent users?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"Does Shaped work for anonymous and\/or semi-persistent users?\"}","created_at":"2026-01-30T13:46:43.819607","updated_at":"2026-01-30T13:46:43.819607"}
{"id":"6a5211e3-8fa7-5329-8e5a-2c0eb251cd69","content":"### I want recent items to be shown more often than older items, how can I make sure Shaped respects this?  \nYes, if you provide a created_at or updated_at field within your item metadata, we can\nuse it as signal to rank more recent items higher. You can also put in hard\nfilter limits using metadata filtering or the\n[Create Model](\/docs\/api#tag\/Model-Management\/operation\/post_create_models_post) filter queries.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"I want recent items to be shown more often than older items, how can I make sure Shaped respects this?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"I want recent items to be shown more often than older items, how can I make sure Shaped respects this?\"}","created_at":"2026-01-30T13:46:43.819610","updated_at":"2026-01-30T13:46:43.819610"}
{"id":"eb17ef7f-c63c-5c01-b5e0-33bffa505790","content":"### I want social posts to be shown more than trending posts, how can I make sure Shaped respects this?  \nPlease contact us about this. We have some private beta features around\nmulti-objective optimization that can help you control your final ranking based on\nfactors like social affinity vs trending signal.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"I want social posts to be shown more than trending posts, how can I make sure Shaped respects this?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"I want social posts to be shown more than trending posts, how can I make sure Shaped respects this?\"}","created_at":"2026-01-30T13:46:43.819614","updated_at":"2026-01-30T13:46:43.819614"}
{"id":"26cc0af2-a634-5401-af32-ed1a76b894f6","content":"### How do I optimize for both the consumers\/purchasers and producers\/sellers for my use-case?  \nPlease contact us about this. We have some private beta features around\nmulti-objective optimization that can help you balance all sides of your use-case.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"How do I optimize for both the consumers\/purchasers and producers\/sellers for my use-case?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"How do I optimize for both the consumers\/purchasers and producers\/sellers for my use-case?\"}","created_at":"2026-01-30T13:46:43.819618","updated_at":"2026-01-30T13:46:43.819618"}
{"id":"d97a3fad-10bb-58d3-9387-bb49ee0461d5","content":"### I'm not sure if i'm logging the correct data for ranking, how do I know if Shaped will work?  \nPlease contact us about this. We can help you identify the best events to use for your\nuse-case and help you get started.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"I'm not sure if i'm logging the correct data for ranking, how do I know if Shaped will work?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"I'm not sure if i'm logging the correct data for ranking, how do I know if Shaped will work?\"}","created_at":"2026-01-30T13:46:43.819621","updated_at":"2026-01-30T13:46:43.819621"}
{"id":"81732945-cc65-5125-abf6-d6452f0a882b","content":"### My data is spread-out across many data sources, how can I integrate Shaped?  \nYes, take a look at our guide on using multiple connectors to integrate Shaped with\nyour heterogeneous data sources.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"My data is spread-out across many data sources, how can I integrate Shaped?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"My data is spread-out across many data sources, how can I integrate Shaped?\"}","created_at":"2026-01-30T13:46:43.819625","updated_at":"2026-01-30T13:46:43.819625"}
{"id":"1ae32d75-5311-594a-98a9-c3a6e009bede","content":"### How can I perform an A\/B test with Shaped?  \nPlease contact us about this. We can provide best practices and tooling for running\nA\/B tests to compare recommendations from Shaped to your existing recommendation\nsolution.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"How can I perform an A\/B test with Shaped?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"How can I perform an A\/B test with Shaped?\"}","created_at":"2026-01-30T13:46:43.819628","updated_at":"2026-01-30T13:46:43.819628"}
{"id":"d172b1e6-95ed-524f-b234-02d427477f27","content":"### Can I weight different events\/interaction more than others (e.g. value model)?  \nYes! Event labels must be a numerical value, where `&lt;=` 0 is negative and `>` 0 is\npositive. The magnitude of these values convey the confidence of the label either in\nthe positive or negative direction. You can experiment with different values for each\nlabel type to work out what works best for your use-case and goals.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"Can I weight different events\/interaction more than others (e.g. value model)?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"Can I weight different events\/interaction more than others (e.g. value model)?\"}","created_at":"2026-01-30T13:46:43.819631","updated_at":"2026-01-30T13:46:43.819631"}
{"id":"d93e0e6f-02c8-54aa-9f5b-d777b8e44980","content":"### How often do you retrain my model?  \nBy default we retrain your model every 24 hours but it can be adjusted up to every few\nhours depending on your use-case.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"How often do you retrain my model?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"How often do you retrain my model?\"}","created_at":"2026-01-30T13:46:43.819635","updated_at":"2026-01-30T13:46:43.819635"}
{"id":"f8cf8e4c-09f2-5905-b123-ce3d5706b329","content":"### What performance uplift should I expect from Shaped?  \nWe've seen up to a 15% uplift in conversion rates and a 25% uplift in engagement rates\nwhen using Shaped.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"What performance uplift should I expect from Shaped?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"What performance uplift should I expect from Shaped?\"}","created_at":"2026-01-30T13:46:43.819638","updated_at":"2026-01-30T13:46:43.819638"}
{"id":"34444309-b37e-5404-90d5-ad6e80d93289","content":"### How can I keep my API key secure for client side applications?  \nFor now, we recommend that you use a server side proxy to make requests to Shaped.\nWe're working on a solution to make this easier.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"How can I keep my API key secure for client side applications?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"How can I keep my API key secure for client side applications?\"}","created_at":"2026-01-30T13:46:43.819641","updated_at":"2026-01-30T13:46:43.819641"}
{"id":"20d461c2-7377-5ada-8cf5-caf21dc2894e","content":"### My data isn't 'tagged' or is very messy, will Shaped still work?  \nYes, we can work with messy and unstructured data. We use unstructured data encoders\nto extract the things that matter from your data.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"My data isn't 'tagged' or is very messy, will Shaped still work?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"My data isn't 'tagged' or is very messy, will Shaped still work?\"}","created_at":"2026-01-30T13:46:43.819644","updated_at":"2026-01-30T13:46:43.819644"}
{"id":"bc0effd6-8395-5565-bf26-c2070825bfbf","content":"### Does Shaped work for my unstructured image, video and language data?  \nYes, we use unstructured data encoders for image, video and language data, which can\nbe helpful if you have few interactions.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"Does Shaped work for my unstructured image, video and language data?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"Does Shaped work for my unstructured image, video and language data?\"}","created_at":"2026-01-30T13:46:43.819647","updated_at":"2026-01-30T13:46:43.819647"}
{"id":"5fae1a67-3d52-571b-a9c4-de67dc3a6db6","content":"### What are the best events\/interactions to optimize for?  \nThe events that correlate with your business goals are the best events to optimize for.\nFor example, if you're optimizing for revenue, you might want to optimize for purchases\nor add-to-cart. If you're optimizing for engagement, you might want to optimize for\nclicks.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"What are the best events\/interactions to optimize for?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"What are the best events\/interactions to optimize for?\"}","created_at":"2026-01-30T13:46:43.819650","updated_at":"2026-01-30T13:46:43.819650"}
{"id":"c511d18f-1349-51c4-9b0d-dc4148933278","content":"### What are your scale limits and request queries per second?  \nOur scale limits can be found in the 'Why Shaped' page. Our Rank API endpoints handle\n1000s of requests per second.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"What are your scale limits and request queries per second?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"What are your scale limits and request queries per second?\"}","created_at":"2026-01-30T13:46:43.819654","updated_at":"2026-01-30T13:46:43.819654"}
{"id":"c9ae62a0-c7e2-5411-950d-42619ef7e6e1","content":"### How do you handle timestamp data?  \nWe have timestamp encoders that bin your timestamps into different time periods and use\ncyclic encodings to capture seasonal patterns.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"How do you handle timestamp data?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"How do you handle timestamp data?\"}","created_at":"2026-01-30T13:46:43.819657","updated_at":"2026-01-30T13:46:43.819657"}
{"id":"6f0dada9-6e98-5e14-9563-e50397549a52","content":"### How do you handle location data?  \nWe have location encoders that bin your locations into different regions.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"How do you handle location data?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"How do you handle location data?\"}","created_at":"2026-01-30T13:46:43.819660","updated_at":"2026-01-30T13:46:43.819660"}
{"id":"b9eff3a6-444d-57a7-827f-139e5e6b19f3","content":"### How do I paginate ranked results?  \nWe re-rank and filter after every interaction so Shaped's ranking API can be called\neach time if you need a new page of results. Just set the `limit` flags to your\npage\/slate size.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"How do I paginate ranked results?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"How do I paginate ranked results?\"}","created_at":"2026-01-30T13:46:43.819663","updated_at":"2026-01-30T13:46:43.819663"}
{"id":"d47b7bac-5bc8-5674-b995-5904aed29749","content":"### How should I evaluate the performance of Shaped?  \nThere's two primary ways customers quantitatively evaluate recommendation\nsystems:  \n1. Offline evaluation, involves computing the accuracy of predicting historic\ninteractions from a held out set.\n2. Online evaluation, involves evaluating your engagement or revenue uplift from a\nlive experiment.  \nWe do 1. for you, and we can help you do 2., just let us know!","document_title":"FAQ","h1":"FAQ","h2":"","h3":"How should I evaluate the performance of Shaped?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"How should I evaluate the performance of Shaped?\"}","created_at":"2026-01-30T13:46:43.819666","updated_at":"2026-01-30T13:46:43.819666"}
{"id":"4c609bef-d8d8-53e2-9750-3ed4d07fc46e","content":"### Do you share my data with other customers?  \nNo we use external datasets to pre-train our models, your data is never shared with\nother customers.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"Do you share my data with other customers?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"Do you share my data with other customers?\"}","created_at":"2026-01-30T13:46:43.819669","updated_at":"2026-01-30T13:46:43.819669"}
{"id":"6aa08660-e3a2-52d5-ac9e-ae4ca969d3e0","content":"### I have some promotional content that I want interleaved with my rankings, how can I do this with Shaped?  \nPlease contact us about this. We've worked with a few customers to do this.","document_title":"FAQ","h1":"FAQ","h2":"","h3":"I have some promotional content that I want interleaved with my rankings, how can I do this with Shaped?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"I have some promotional content that I want interleaved with my rankings, how can I do this with Shaped?\"}","created_at":"2026-01-30T13:46:43.819672","updated_at":"2026-01-30T13:46:43.819672"}
{"id":"0b85a2b5-c288-575e-9433-4104d7dfe210","content":"### I already have search but want to make the search results personalized, how can I use Shaped for this?  \nYes, you can just use Shaped's re-ranker to score and rank your search results. Take a\nlook at the `item_ids` argument in our [Rank API](\/docs\/api#tag\/Model-Inference).","document_title":"FAQ","h1":"FAQ","h2":"","h3":"I already have search but want to make the search results personalized, how can I use Shaped for this?","h4":"","file_path":"support\/faq.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/faq.md","chunk_metadata":"{\"Header 1\": \"FAQ\", \"Header 3\": \"I already have search but want to make the search results personalized, how can I use Shaped for this?\"}","created_at":"2026-01-30T13:46:43.819676","updated_at":"2026-01-30T13:46:43.819676"}
{"id":"eb61bdd6-c486-548e-b25c-5e8ff21a145c","content":"# Book Recommendations (Goodbooks)  \nThis tutorial demonstrates how to configure a recommendation engine using the [Goodbooks-10k dataset](http:\/\/fastml.com\/goodbooks-10k-a-new-dataset-for-book-recommendations\/). The dataset contains 6 million ratings for 10,000 popular books. This example uses the MongoDB connector; the same approach applies to other supported data stores.  \n[Accompanying notebook](https:\/\/colab.research.google.com\/github\/shaped-ai\/shaped-tutorials\/blob\/main\/tutorials\/MongoDB%20Goodbooks%20Tutorial.ipynb)","document_title":"Book Recommendations (Goodbooks)","h1":"Book Recommendations (Goodbooks)","h2":"","h3":"","h4":"","file_path":"tutorials\/goodbooks.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/goodbooks.md","chunk_metadata":"{\"Header 1\": \"Book Recommendations (Goodbooks)\"}","created_at":"2026-01-30T13:46:43.820240","updated_at":"2026-01-30T13:46:43.820240"}
{"id":"58be5452-54d2-5b12-bb8f-62b955f7ba76","content":"## Setup  \nInstall required packages:  \n```python\n! pip install shaped\n! pip install pyyaml\n```","document_title":"Book Recommendations (Goodbooks)","h1":"Book Recommendations (Goodbooks)","h2":"Setup","h3":"","h4":"","file_path":"tutorials\/goodbooks.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/goodbooks.md","chunk_metadata":"{\"Header 1\": \"Book Recommendations (Goodbooks)\", \"Header 2\": \"Setup\"}","created_at":"2026-01-30T13:46:43.820244","updated_at":"2026-01-30T13:46:43.820244"}
{"id":"f7af729f-973d-5481-b0b2-0d943a3eeeed","content":"### Initialize the CLI  \nSet your API key:  \n```python\n\nSHAPED_API_KEY = os.getenv('TEST_SHAPED_API_KEY', '<YOUR_API_KEY>')\n```  \nInitialize the CLI:  \n```python\n! shaped init --api-key $SHAPED_API_KEY\n```  \nIf you don't have an API key, see [How to get an API key](\/docs\/support\/getting-an-api-key.md).","document_title":"Book Recommendations (Goodbooks)","h1":"Book Recommendations (Goodbooks)","h2":"Setup","h3":"Initialize the CLI","h4":"","file_path":"tutorials\/goodbooks.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/goodbooks.md","chunk_metadata":"{\"Header 1\": \"Book Recommendations (Goodbooks)\", \"Header 2\": \"Setup\", \"Header 3\": \"Initialize the CLI\"}","created_at":"2026-01-30T13:46:43.820248","updated_at":"2026-01-30T13:46:43.820248"}
{"id":"65d3f2a2-3b62-5bbf-82bc-44d9e51326b3","content":"## Data Preparation  \n### Install dependencies  \n```python\n! pip install pandas\n```","document_title":"Book Recommendations (Goodbooks)","h1":"Book Recommendations (Goodbooks)","h2":"Data Preparation","h3":"Install dependencies","h4":"","file_path":"tutorials\/goodbooks.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/goodbooks.md","chunk_metadata":"{\"Header 1\": \"Book Recommendations (Goodbooks)\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Install dependencies\"}","created_at":"2026-01-30T13:46:43.820251","updated_at":"2026-01-30T13:46:43.820251"}
{"id":"edd2c96d-1f8f-5551-bada-b1b5be57e4b7","content":"### Download the dataset  \nDownload and extract the dataset:  \n```python\n\ndef download_and_extract_dataset(url, destination_directory):\nprint(f\"Downloading dataset from {url}...\")\nos.makedirs(destination_directory, exist_ok=True)\nzip_file_path = os.path.join(destination_directory, os.path.basename(url))\n\n# Download the ZIP file\n!wget $url --no-check-certificate -P $destination_directory\n\n# Extract the contents of the ZIP file\nwith zipfile.ZipFile(zip_file_path, 'r') as zip_ref:\nzip_ref.extractall(destination_directory)\n\n# Directory name for storing datasets\nDIR_NAME = \"notebook_assets\"\n\n# Download and extract each dataset\ndatasets = [\n(\"https:\/\/github.com\/zygmuntz\/goodbooks-10k\/releases\/download\/v1.0\/ratings.zip\", DIR_NAME),\n(\"https:\/\/github.com\/zygmuntz\/goodbooks-10k\/releases\/download\/v1.0\/books.zip\", DIR_NAME)\n]\n\nfor dataset_url, destination_dir in datasets:\ndownload_and_extract_dataset(dataset_url, destination_dir)\n```  \nInspect the data:  \n```python\n\ndata_dir = \"notebook_assets\"\n\nevents_df = pd.read_csv(f'{data_dir}\/ratings.csv')\nbooks_df = pd.read_csv(f'{data_dir}\/books.csv')\ndisplay(events_df.head())\ndisplay(books_df.head())\n```","document_title":"Book Recommendations (Goodbooks)","h1":"Book Recommendations (Goodbooks)","h2":"Data Preparation","h3":"Download the dataset","h4":"","file_path":"tutorials\/goodbooks.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/goodbooks.md","chunk_metadata":"{\"Header 1\": \"Book Recommendations (Goodbooks)\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Download the dataset\"}","created_at":"2026-01-30T13:46:43.820254","updated_at":"2026-01-30T13:46:43.820254"}
{"id":"2376459d-b650-587d-a5c8-1669f610f081","content":"### Required columns  \nThe minimum required columns for an interaction table are:\n- `user_id`: User identifier\n- `item_id`: Item identifier\n- `label`: Interaction label\n- `created_at`: Timestamp  \nThe ratings data contains:\n- `user_id`: Reader identifier (1 to 53424)\n- `book_id`: Book identifier (1 to 10000), used as `item_id`\n- `rating`: Rating value (1 to 5)  \nThe dataset lacks a `created_at` column. Since ratings are sorted by time, create a timestamp column:  \n```python\nevents_df = events_df[[\"user_id\",\"book_id\",\"rating\"]]\nevents_df = events_df.head(1000)\n# Create a new column 'ratingTime' with ascending values\nevents_df['ratingTime'] = range(1, len(events_df) + 1)\n\ndisplay(events_df.head())\n```","document_title":"Book Recommendations (Goodbooks)","h1":"Book Recommendations (Goodbooks)","h2":"Data Preparation","h3":"Required columns","h4":"","file_path":"tutorials\/goodbooks.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/goodbooks.md","chunk_metadata":"{\"Header 1\": \"Book Recommendations (Goodbooks)\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Required columns\"}","created_at":"2026-01-30T13:46:43.820258","updated_at":"2026-01-30T13:46:43.820258"}
{"id":"6b9215b2-06a2-57f0-962e-1f9598de2840","content":"### Create table using MongoDB connector  \nThis example uses the MongoDB connector to upload local CSV files. Steps:  \n1. Set up a MongoDB instance and obtain a connection string. See [MongoDB connection string documentation](https:\/\/www.mongodb.com\/basics\/mongodb-connection-string).\n2. Create a database and collection (this example uses \"goodbooks\" database and \"ratings\" collection).\n3. Define the table schema in YAML.\n4. Create the table and insert data.  \nDefine the table schema:  \n```python\n\"\"\"\nCreate a Shaped Table schema and store in a .yaml file.\n\"\"\"\n\ndir_path = \"notebook_assets\"\n\nevents_table_schema = {\n\"name\": \"goodbooks_events\",\n\"schema_type\": \"MONGODB\",\n\"schedule_interval\": \"@daily\",\n\"mongodb_connection_string\": \"<YOUR_CONNECTION_STRING>\",\n\"database\": \"goodbooks\",\n\"collection\": \"ratings\"\n}\n\nwith open(f'{dir_path}\/events_table_schema.yaml', 'w') as file:\nyaml.dump(events_table_schema, file)\n```  \nCreate the table:  \n```python\n! shaped create-table --file $DIR_NAME\/events_table_schema.yaml\n```  \nCheck table status:  \n```python\n! shaped list-tables\n```  \nResponse:  \ntables:\n- table_name: goodbooks_events\ntable_uri: https:\/\/api.shaped.ai\/v2\/tables\/goodbooks_events\ncreated_at: 2023-09-08T12:35:12 UTC\nschema_type: MONGODB\nstatus: ACTIVE  \nInsert data:  \n```python\n! shaped table-insert --table-name goodbooks_events --file $DIR_NAME\/ratings.csv --type 'csv'\n```","document_title":"Book Recommendations (Goodbooks)","h1":"Book Recommendations (Goodbooks)","h2":"Data Preparation","h3":"Create table using MongoDB connector","h4":"","file_path":"tutorials\/goodbooks.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/goodbooks.md","chunk_metadata":"{\"Header 1\": \"Book Recommendations (Goodbooks)\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Create table using MongoDB connector\"}","created_at":"2026-01-30T13:46:43.820261","updated_at":"2026-01-30T13:46:43.820261"}
{"id":"56d7985a-810b-5342-ba70-385dd63de616","content":"## Create the engine  \nThis example uses ratings to build a collaborative filtering engine. Higher ratings indicate stronger user preference.  \nDefine the engine schema:  \n```python\n\"\"\"\nCreate a Shaped Engine schema and store in a .yaml file.\n\"\"\"\n\ngoodbooks_ratings_engine_schema = {\n\"data\": {\n\"interaction_table\": {\n\"name\": \"goodbooks_events\",\n\"type\": \"query\",\n\"query\": \"SELECT JSON_EXTRACT_STRING(document, '$.book_id') as item_id, JSON_EXTRACT_STRING(document, '$.rating') as label, JSON_EXTRACT_STRING(document, '$.ratingTime') as created_at, JSON_EXTRACT_STRING(document, '$.user_id') as user_id FROM goodbooks_events\"\n}\n},\n\"training\": {\n\"models\": [\n{\n\"name\": \"als\",\n\"policy_type\": \"als\"\n}\n]\n}\n}\n\ndir_path = \"notebook_assets\"\n\nwith open(f'{dir_path}\/goodbooks_ratings_engine_schema.yaml', 'w') as file:\nyaml.dump(goodbooks_ratings_engine_schema, file)\n```  \nCreate the engine:  \n```python\n\"\"\"\nCreate a Shaped Engine using the .yaml schema file.\n\"\"\"\n\n! shaped create-engine --file $DIR_NAME\/goodbooks_ratings_engine_schema.yaml\n```  \nResponse:  \n```json\n{\n\"data\": {\n\"interaction_table\": {\n\"name\": \"goodbooks_events\",\n\"type\": \"query\",\n\"query\": \"SELECT JSON_EXTRACT_STRING(document, '$.book_id') as item_id, JSON_EXTRACT_STRING(document, '$.rating') as label, JSON_EXTRACT_STRING(document, '$.ratingTime') as created_at, JSON_EXTRACT_STRING(document, '$.user_id') as user_id FROM goodbooks_events\"\n}\n},\n\"training\": {\n\"models\": [\n{\n\"name\": \"als\",\n\"policy_type\": \"als\"\n}\n]\n}\n}\n```  \nengine_url: https:\/\/api.shaped.ai\/v2\/engines\/goodbooks_book_recommendations","document_title":"Book Recommendations (Goodbooks)","h1":"Book Recommendations (Goodbooks)","h2":"Create the engine","h3":"","h4":"","file_path":"tutorials\/goodbooks.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/goodbooks.md","chunk_metadata":"{\"Header 1\": \"Book Recommendations (Goodbooks)\", \"Header 2\": \"Create the engine\"}","created_at":"2026-01-30T13:46:43.820264","updated_at":"2026-01-30T13:46:43.820264"}
{"id":"ab7808b5-2ba0-5572-bfdb-418425cc2a90","content":"## Monitor engine status  \nEngine creation and training can take up to several hours, depending on data volume and attributes. For this example, training typically completes within 30 minutes.  \nCheck status:  \n```python\n! shaped list-engines\n```  \nResponse:  \nengines:\n- engine_name: goodbooks_book_recommendations\nengine_uri: https:\/\/api.shaped.ai\/v2\/engines\/goodbooks_book_recommendations\ncreated_at: 2023-09-12T01:46:21 UTC\nstatus: SCHEDULING  \nThe engine progresses through these stages:\n1. `SCHEDULING`\n2. `FETCHING`\n3. `TRAINING`\n4. `DEPLOYING`\n5. `ACTIVE`  \nOnce the status is `ACTIVE`, the engine is ready for queries.","document_title":"Book Recommendations (Goodbooks)","h1":"Book Recommendations (Goodbooks)","h2":"Monitor engine status","h3":"","h4":"","file_path":"tutorials\/goodbooks.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/goodbooks.md","chunk_metadata":"{\"Header 1\": \"Book Recommendations (Goodbooks)\", \"Header 2\": \"Monitor engine status\"}","created_at":"2026-01-30T13:46:43.820267","updated_at":"2026-01-30T13:46:43.820267"}
{"id":"4303ee1c-6d3c-5fcd-b3a7-3fec5026e435","content":"## Query recommendations  \nQuery recommendations using the [Query endpoint](\/docs\/v2\/query_reference\/shapedql). Provide a `user_id` and the number of results to return. Ensure the `user_id` exists in the table.  \nUsing the CLI:  \n```python\n! shaped query --engine-name goodbooks_book_recommendations \\\n--query \"SELECT * FROM similarity(embedding_ref='als', limit=50, encoder='precomputed_user', input_user_id='\\$user_id') LIMIT 5\" \\\n--parameters '{\"user_id\": \"5\"}'\n```  \nResponse:  \n```json\n{\n\"results\": [\n{\n\"id\": \"8\",\n\"score\": 1.0\n},\n{\n\"id\": \"27\",\n\"score\": 0.90909091\n},\n{\n\"id\": \"101\",\n\"score\": 0.90909091\n},\n{\n\"id\": \"24\",\n\"score\": 0.90909091\n},\n{\n\"id\": \"2\",\n\"score\": 0.81818182\n}\n]\n}\n```  \nThe response contains an array of result objects with book IDs and scores.  \nUsing the REST API:  \n```python\n! curl https:\/\/api.shaped.ai\/v2\/engines\/goodbooks_book_recommendations\/query \\\n-H \"x-api-key: <YOUR_API_KEY>\" \\\n-H \"Content-Type: application\/json\" \\\n-d '{\n\"query\": \"SELECT * FROM similarity(embedding_ref=''als'', limit=50, encoder=''precomputed_user'', input_user_id=''$user_id'') LIMIT 5\",\n\"parameters\": {\n\"user_id\": \"5\"\n}\n}'\n```","document_title":"Book Recommendations (Goodbooks)","h1":"Book Recommendations (Goodbooks)","h2":"Query recommendations","h3":"","h4":"","file_path":"tutorials\/goodbooks.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/goodbooks.md","chunk_metadata":"{\"Header 1\": \"Book Recommendations (Goodbooks)\", \"Header 2\": \"Query recommendations\"}","created_at":"2026-01-30T13:46:43.820271","updated_at":"2026-01-30T13:46:43.820271"}
{"id":"c113819d-329c-50a5-b36a-3b783084f6c2","content":"## Clean up  \nDelete tables, engines, and associated assets when finished:  \n```python\n! shaped delete-table --table-name goodbooks_events\n\n! shaped delete-engine --engine-name goodbooks_book_recommendations\n\n! rm -r notebook_assets\n```  \nResponse:  \nmessage: Table with name 'goodbooks_events' was successfully deleted  \nmessage: Engine with name 'goodbooks_book_recommendations' is deleting...","document_title":"Book Recommendations (Goodbooks)","h1":"Book Recommendations (Goodbooks)","h2":"Clean up","h3":"","h4":"","file_path":"tutorials\/goodbooks.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/goodbooks.md","chunk_metadata":"{\"Header 1\": \"Book Recommendations (Goodbooks)\", \"Header 2\": \"Clean up\"}","created_at":"2026-01-30T13:46:43.820274","updated_at":"2026-01-30T13:46:43.820274"}
{"id":"1f7fb1cf-3dac-5caa-81a9-48ccb0fd001c","content":"# RentTheRunway Recommendations  \nThis tutorial demonstrates how to configure a recommendation engine using the [RentTheRunway dataset](https:\/\/cseweb.ucsd.edu\/~jmcauley\/datasets.html#clothing_fit). The dataset contains 192,544 ratings from 105,508 users on 5,850 items. This example uses the local table connector; the same approach applies to other supported connectors.  \n[Accompanying notebook](https:\/\/colab.research.google.com\/github\/shaped-ai\/shaped-tutorials\/blob\/main\/tutorials\/Shaped_Dataset_RentTheRunway_Turorial.ipynb)","document_title":"RentTheRunway Recommendations","h1":"RentTheRunway Recommendations","h2":"","h3":"","h4":"","file_path":"tutorials\/rent-the-runway.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/rent-the-runway.md","chunk_metadata":"{\"Header 1\": \"RentTheRunway Recommendations\"}","created_at":"2026-01-30T13:46:43.820617","updated_at":"2026-01-30T13:46:43.820617"}
{"id":"2ecc60b9-4d45-51bf-9b3c-8ab8e4444059","content":"## CLI Setup  \n### Install the CLI  \n```bash\npip install shaped\n```  \n**Info:** Shaped supports Python 3.8 to 3.11. See [installation instructions](https:\/\/packaging.python.org\/en\/latest\/tutorials\/installing-packages\/) if you need to install pip.","document_title":"RentTheRunway Recommendations","h1":"RentTheRunway Recommendations","h2":"CLI Setup","h3":"Install the CLI","h4":"","file_path":"tutorials\/rent-the-runway.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/rent-the-runway.md","chunk_metadata":"{\"Header 1\": \"RentTheRunway Recommendations\", \"Header 2\": \"CLI Setup\", \"Header 3\": \"Install the CLI\"}","created_at":"2026-01-30T13:46:43.820622","updated_at":"2026-01-30T13:46:43.820622"}
{"id":"10416d94-4a0e-579c-a15c-c5c6ce41d6e7","content":"### Initialize the CLI  \n```bash\nshaped init --api-key <YOUR_API_KEY>\n```  \nIf you don't have an API key, see [How to get an API key](\/docs\/support\/getting-an-api-key.md).","document_title":"RentTheRunway Recommendations","h1":"RentTheRunway Recommendations","h2":"CLI Setup","h3":"Initialize the CLI","h4":"","file_path":"tutorials\/rent-the-runway.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/rent-the-runway.md","chunk_metadata":"{\"Header 1\": \"RentTheRunway Recommendations\", \"Header 2\": \"CLI Setup\", \"Header 3\": \"Initialize the CLI\"}","created_at":"2026-01-30T13:46:43.820625","updated_at":"2026-01-30T13:46:43.820625"}
{"id":"a16b98c9-236d-5fc0-be61-c797bb9e068c","content":"## Data Preparation  \n### Download the dataset  \n```bash title=\"CLI\"\nwget https:\/\/mcauleylab.ucsd.edu\/public_datasets\/data\/renttherunway\/renttherunway_final_data.json.gz --no-check-certificate\ngunzip renttherunway_final_data.json.gz\n```  \nThe dataset contains a single JSON file (`renttherunway_final_data.json`) with events, users, and items combined. Convert to CSV and preprocess:  \n- Convert weight and height columns to numerical types\n- Convert ratings (1-10 scale) to binary: values > 8 become 1, values \u2264 8 become 0  \nSee the [notebook](https:\/\/colab.research.google.com\/github\/shaped-ai\/shaped-tutorials\/blob\/main\/tutorials\/Shaped_Dataset_RentTheRunway_Turorial.ipynb) for preprocessing code.  \nSave as TSV:  \n```\ndata.to_csv('notebook_assets\/events.csv', sep='\\t', index=False)\n```  \nThis example uses event data along with user and item information. While these are typically separate tables, this dataset combines them. The `events.csv` file contains events, users, and items. The engine configuration extracts each type using SQL queries.","document_title":"RentTheRunway Recommendations","h1":"RentTheRunway Recommendations","h2":"Data Preparation","h3":"Download the dataset","h4":"","file_path":"tutorials\/rent-the-runway.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/rent-the-runway.md","chunk_metadata":"{\"Header 1\": \"RentTheRunway Recommendations\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Download the dataset\"}","created_at":"2026-01-30T13:46:43.820629","updated_at":"2026-01-30T13:46:43.820629"}
{"id":"395e9edc-c463-5231-8d49-05016f1f334b","content":"### Create the table  \nDefine a custom table schema:  \n```yaml title=\"events_table_schema.yaml\"\ncolumn_schema:\nage: Int32\nbody_type: String\nbust_size: String\ncategory: String\nfit: String\nheight: Int32\nitem_id: String\nrating: Int32\nrented_for: String\nreview_date: DateTime\nreview_summary: String\nreview_text: String\nsize: Int32\nuser_id: String\nweight: Int32\nname: rent_runway_events\nschema_type: CUSTOM\n```  \nCreate the table and insert data:  \n```bash title=\"CLI\"\nshaped create-table --file notebook_assets\/events_table_schema.yaml\nshaped table-insert --table-name rent_runway_events --file notebook_assets\/events.csv --type 'tsv'\n```  \nRecords upload in batches of 1000. Wait until all 192,544 records are uploaded.","document_title":"RentTheRunway Recommendations","h1":"RentTheRunway Recommendations","h2":"Data Preparation","h3":"Create the table","h4":"","file_path":"tutorials\/rent-the-runway.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/rent-the-runway.md","chunk_metadata":"{\"Header 1\": \"RentTheRunway Recommendations\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Create the table\"}","created_at":"2026-01-30T13:46:43.820632","updated_at":"2026-01-30T13:46:43.820632"}
{"id":"ca500da1-f2b4-5b9a-93b9-5ca3fcd61d94","content":"## Create the engine  \nThis example uses events, users, and items from a single table. The engine configuration uses SQL queries to extract each type:  \n```yaml title=\"rent_runway_recommendations.yaml\"\ndata:\nitem_table:\ntype: query\nquery: |\nSELECT item_id, fit, category, size FROM rent_runway_events\nuser_table:\ntype: query\nquery: |\nSELECT user_id, bust_size, weight, body_type, height, age FROM rent_runway_events\ninteraction_table:\ntype: query\nquery: |\nSELECT user_id, item_id, review_date AS created_at, rating AS label, rented_for,\nreview_text, review_summary FROM rent_runway_events\ntraining:\nmodels:\n- name: als\npolicy_type: als\n```  \nCreate the engine:  \n```bash\nshaped create-engine --file notebook_assets\/rent_runway_recommendations.yaml\n```  \nFor details on engine configuration, see [Engines documentation](\/docs\/v2\/concepts\/engines).","document_title":"RentTheRunway Recommendations","h1":"RentTheRunway Recommendations","h2":"Create the engine","h3":"","h4":"","file_path":"tutorials\/rent-the-runway.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/rent-the-runway.md","chunk_metadata":"{\"Header 1\": \"RentTheRunway Recommendations\", \"Header 2\": \"Create the engine\"}","created_at":"2026-01-30T13:46:43.820635","updated_at":"2026-01-30T13:46:43.820635"}
{"id":"37ad194c-8b5f-55ae-b0f3-81063bd4b03e","content":"## Monitor engine status  \nEngine creation and training can take several hours, depending on data volume and attributes. Check status:  \n```bash\nshaped list-engines\n```  \nResponse:  \n```json\n[\n\"engines\": {\n\"created_at\": \"2023-03-18T19:17:51 UTC\",\n\"engine_name\": \"rent_runway_recommendations\",\n\"engine_uri\": \"https:\/\/api.shaped.ai\/v2\/engines\/rent_runway_recommendations\",\n\"status\": \"FETCHING\",\n}\n]\n```  \nThe engine progresses through these stages:\n1. `SCHEDULING`\n2. `FETCHING`\n3. `TRAINING`\n4. `DEPLOYING`\n5. `ACTIVE`  \nOnce the status is `ACTIVE`, the engine is ready for queries.","document_title":"RentTheRunway Recommendations","h1":"RentTheRunway Recommendations","h2":"Monitor engine status","h3":"","h4":"","file_path":"tutorials\/rent-the-runway.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/rent-the-runway.md","chunk_metadata":"{\"Header 1\": \"RentTheRunway Recommendations\", \"Header 2\": \"Monitor engine status\"}","created_at":"2026-01-30T13:46:43.820638","updated_at":"2026-01-30T13:46:43.820638"}
{"id":"3fa7b6e9-fdef-5920-9d10-7f46d3a81f05","content":"## Query recommendations  \nQuery recommendations using the [Query endpoint](\/docs\/v2\/query_reference\/shapedql). Provide a `user_id` and the number of results to return.  \nUsing the CLI:  \n```bash\nshaped query --engine-name rent_runway_recommendations \\\n--query \"SELECT * FROM similarity(embedding_ref='als', limit=50, encoder='precomputed_user', input_user_id='\\$user_id') LIMIT 5\" \\\n--parameters '{\"user_id\": \"1\"}'\n```  \nResponse:  \n```json\n{\n\"results\": [\n{\n\"id\": \"427010\",\n\"score\": 0.9\n},\n{\n\"id\": \"182094\",\n\"score\": 0.8\n},\n{\n\"id\": \"332874\",\n\"score\": 0.7\n},\n{\n\"id\": \"827918\",\n\"score\": 0.3\n},\n{\n\"id\": \"403528\",\n\"score\": 0.2\n}\n]\n}\n```  \nThe response contains an array of result objects with item IDs and scores.  \nUsing the REST API:  \n```bash\ncurl https:\/\/api.shaped.ai\/v2\/engines\/rent_runway_recommendations\/query \\\n-H \"x-api-key: <API_KEY>\" \\\n-H \"Content-Type: application\/json\" \\\n-d '{\n\"query\": \"SELECT * FROM similarity(embedding_ref=''als'', limit=50, encoder=''precomputed_user'', input_user_id=''$user_id'') LIMIT 5\",\n\"parameters\": {\n\"user_id\": \"1\"\n}\n}'\n```","document_title":"RentTheRunway Recommendations","h1":"RentTheRunway Recommendations","h2":"Query recommendations","h3":"","h4":"","file_path":"tutorials\/rent-the-runway.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/rent-the-runway.md","chunk_metadata":"{\"Header 1\": \"RentTheRunway Recommendations\", \"Header 2\": \"Query recommendations\"}","created_at":"2026-01-30T13:46:43.820642","updated_at":"2026-01-30T13:46:43.820642"}
{"id":"f78e8063-5836-5fa2-b9f3-1fdd70220225","content":"## Clean up  \nDelete the engine when finished:  \n```bash\nshaped delete-engine --engine-name rent_runway_recommendations\n```","document_title":"RentTheRunway Recommendations","h1":"RentTheRunway Recommendations","h2":"Clean up","h3":"","h4":"","file_path":"tutorials\/rent-the-runway.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/rent-the-runway.md","chunk_metadata":"{\"Header 1\": \"RentTheRunway Recommendations\", \"Header 2\": \"Clean up\"}","created_at":"2026-01-30T13:46:43.820645","updated_at":"2026-01-30T13:46:43.820645"}
{"id":"42670edb-d8a1-5ec5-8102-6eccf605faf8","content":"# Movie Recommendations (MovieLens)  \nThis tutorial demonstrates how to configure a recommendation engine using the [100k-MovieLens dataset](https:\/\/grouplens.org\/datasets\/movielens\/100k\/). The dataset contains 100,000 ratings from approximately 1000 users on 1700 movies. This example uses the local table connector; the same approach applies to other supported connectors.  \n[Accompanying notebook](https:\/\/colab.research.google.com\/github\/shaped-ai\/shaped-tutorials\/blob\/main\/tutorials\/Shaped%20Dataset%20Movielens%20Tutorial.ipynb)","document_title":"Movie Recommendations (MovieLens)","h1":"Movie Recommendations (MovieLens)","h2":"","h3":"","h4":"","file_path":"tutorials\/movielens.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movielens.md","chunk_metadata":"{\"Header 1\": \"Movie Recommendations (MovieLens)\"}","created_at":"2026-01-30T13:46:43.820914","updated_at":"2026-01-30T13:46:43.820914"}
{"id":"bc24d2b8-a1d6-54bc-9ef9-43174c23de41","content":"## CLI Setup  \n### Install the CLI  \n```bash\npip install shaped\n```  \n**Info:** Shaped supports Python 3.8 to 3.11. See [installation instructions](https:\/\/packaging.python.org\/en\/latest\/tutorials\/installing-packages\/) if you need to install pip.","document_title":"Movie Recommendations (MovieLens)","h1":"Movie Recommendations (MovieLens)","h2":"CLI Setup","h3":"Install the CLI","h4":"","file_path":"tutorials\/movielens.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movielens.md","chunk_metadata":"{\"Header 1\": \"Movie Recommendations (MovieLens)\", \"Header 2\": \"CLI Setup\", \"Header 3\": \"Install the CLI\"}","created_at":"2026-01-30T13:46:43.820918","updated_at":"2026-01-30T13:46:43.820918"}
{"id":"6498a36b-486b-5485-a126-544b68c210f9","content":"### Initialize the CLI  \n```bash\nshaped init --api-key <YOUR_API_KEY>\n```  \nIf you don't have an API key, see [How to get an API key](\/docs\/support\/getting-an-api-key.md).","document_title":"Movie Recommendations (MovieLens)","h1":"Movie Recommendations (MovieLens)","h2":"CLI Setup","h3":"Initialize the CLI","h4":"","file_path":"tutorials\/movielens.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movielens.md","chunk_metadata":"{\"Header 1\": \"Movie Recommendations (MovieLens)\", \"Header 2\": \"CLI Setup\", \"Header 3\": \"Initialize the CLI\"}","created_at":"2026-01-30T13:46:43.820922","updated_at":"2026-01-30T13:46:43.820922"}
{"id":"0815acc0-5de2-50fb-be48-154d1e002bfe","content":"## Data Preparation  \n### Download the dataset  \n```bash title=\"CLI\"\nwget http:\/\/files.grouplens.org\/datasets\/movielens\/ml-100k.zip --no-check-certificate\nunzip ml-100k.zip\n```  \nThe dataset contains three tab-separated files:\n- `ml-100k\/u.data`: Ratings\n- `ml-100k\/u.user`: Users\n- `ml-100k\/u.item`: Movies  \nThe TSV files lack headers, which are required. Add a header to the ratings file:  \n```bash\n(echo -e \"user_id\\titem_id\\trating\\ttimestamp\"; cat ml-100k\/u.data) > ml-100k\/u.data_with_header\n```  \nThis tutorial uses only interaction data. To include user and item data, follow the same pattern. See the [notebook](https:\/\/colab.research.google.com\/github\/shaped-ai\/shaped-tutorials\/blob\/main\/tutorials\/Shaped%20Dataset%20Movielens%20Tutorial.ipynb) for an example.","document_title":"Movie Recommendations (MovieLens)","h1":"Movie Recommendations (MovieLens)","h2":"Data Preparation","h3":"Download the dataset","h4":"","file_path":"tutorials\/movielens.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movielens.md","chunk_metadata":"{\"Header 1\": \"Movie Recommendations (MovieLens)\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Download the dataset\"}","created_at":"2026-01-30T13:46:43.820926","updated_at":"2026-01-30T13:46:43.820926"}
{"id":"428a25cd-9469-5293-a01e-fe5546102fc8","content":"### Create the table  \nCreate a table and insert ratings using `create-table-from-uri`:  \n```bash title=\"CLI\"\nshaped create-table-from-uri --name movielens_ratings --path ml-100k\/u.data_with_header --type tsv\n```  \nRecords upload in batches of 1000. Wait until all 100k records are uploaded.","document_title":"Movie Recommendations (MovieLens)","h1":"Movie Recommendations (MovieLens)","h2":"Data Preparation","h3":"Create the table","h4":"","file_path":"tutorials\/movielens.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movielens.md","chunk_metadata":"{\"Header 1\": \"Movie Recommendations (MovieLens)\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Create the table\"}","created_at":"2026-01-30T13:46:43.820930","updated_at":"2026-01-30T13:46:43.820930"}
{"id":"7d43c3aa-1a27-5369-a531-8e445bc19980","content":"## Create the engine  \nThis example uses ratings to build a collaborative filtering engine. Higher ratings indicate stronger user preference.  \nEngine configuration:  \n```yaml title=\"movielens_movie_recommendations.yaml\"\ndata:\ninteraction_table:\ntype: query\nquery: |\nSELECT user_id, item_id, timestamp AS created_at, rating AS label\nFROM movielens_ratings\ntraining:\nmodels:\n- name: als\npolicy_type: als\n```  \nCreate the engine:  \n```bash\nshaped create-engine --file movielens_movie_recommendations.yaml\n```  \nFor details on engine configuration, see [Engines documentation](\/docs\/v2\/concepts\/engines).","document_title":"Movie Recommendations (MovieLens)","h1":"Movie Recommendations (MovieLens)","h2":"Create the engine","h3":"","h4":"","file_path":"tutorials\/movielens.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movielens.md","chunk_metadata":"{\"Header 1\": \"Movie Recommendations (MovieLens)\", \"Header 2\": \"Create the engine\"}","created_at":"2026-01-30T13:46:43.820933","updated_at":"2026-01-30T13:46:43.820933"}
{"id":"71260a08-a5fb-5e07-a6a3-b4c3190e6ccd","content":"## Monitor engine status  \nEngine creation and training can take several hours, depending on data volume and attributes. Check status:  \n```bash\nshaped list-engines\n```  \nResponse:  \n```json\n[\n\"engines\": {\n\"created_at\": \"2023-03-18T19:17:51 UTC\",\n\"engine_name\": \"movielens_movie_recommendation\",\n\"engine_uri\": \"https:\/\/api.shaped.ai\/v2\/engines\/movielens_movie_recommendation\",\n\"status\": \"FETCHING\",\n}\n]\n```  \nThe engine progresses through these stages:\n1. `SCHEDULING`\n2. `FETCHING`\n3. `TRAINING`\n4. `DEPLOYING`\n5. `ACTIVE`  \nOnce the status is `ACTIVE`, the engine is ready for queries.","document_title":"Movie Recommendations (MovieLens)","h1":"Movie Recommendations (MovieLens)","h2":"Monitor engine status","h3":"","h4":"","file_path":"tutorials\/movielens.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movielens.md","chunk_metadata":"{\"Header 1\": \"Movie Recommendations (MovieLens)\", \"Header 2\": \"Monitor engine status\"}","created_at":"2026-01-30T13:46:43.820937","updated_at":"2026-01-30T13:46:43.820937"}
{"id":"b0b80414-37fb-5ee4-8e89-a7261573cdbf","content":"## Query recommendations  \nQuery recommendations using the [Query endpoint](\/docs\/v2\/query_reference\/shapedql). Provide a `user_id` and the number of results to return.  \nUsing the CLI:  \n```bash\nshaped query --engine-name movielens_movie_recommendation \\\n--query \"SELECT * FROM similarity(embedding_ref='als', limit=50, encoder='precomputed_user', input_user_id='\\$user_id') LIMIT 5\" \\\n--parameters '{\"user_id\": \"1\"}'\n```  \nResponse:  \n```json\n{\n\"results\": [\n{\n\"id\": \"427010\",\n\"score\": 0.9\n},\n{\n\"id\": \"182094\",\n\"score\": 0.8\n},\n{\n\"id\": \"332874\",\n\"score\": 0.7\n},\n{\n\"id\": \"827918\",\n\"score\": 0.3\n},\n{\n\"id\": \"403528\",\n\"score\": 0.2\n}\n]\n}\n```  \nThe response contains an array of result objects with movie IDs and scores.  \nUsing the REST API:  \n```bash\ncurl https:\/\/api.shaped.ai\/v2\/engines\/movielens_movie_recommendation\/query \\\n-H \"x-api-key: <API_KEY>\" \\\n-H \"Content-Type: application\/json\" \\\n-d '{\n\"query\": \"SELECT * FROM similarity(embedding_ref=''als'', limit=50, encoder=''precomputed_user'', input_user_id=''$user_id'') LIMIT 5\",\n\"parameters\": {\n\"user_id\": \"1\"\n}\n}'\n```","document_title":"Movie Recommendations (MovieLens)","h1":"Movie Recommendations (MovieLens)","h2":"Query recommendations","h3":"","h4":"","file_path":"tutorials\/movielens.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movielens.md","chunk_metadata":"{\"Header 1\": \"Movie Recommendations (MovieLens)\", \"Header 2\": \"Query recommendations\"}","created_at":"2026-01-30T13:46:43.820940","updated_at":"2026-01-30T13:46:43.820940"}
{"id":"683882ce-f344-5588-978d-40cc30c05560","content":"## Clean up  \nDelete the engine when finished:  \n```bash\nshaped delete-engine --engine-name movielens_movie_recommendation\n```","document_title":"Movie Recommendations (MovieLens)","h1":"Movie Recommendations (MovieLens)","h2":"Clean up","h3":"","h4":"","file_path":"tutorials\/movielens.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movielens.md","chunk_metadata":"{\"Header 1\": \"Movie Recommendations (MovieLens)\", \"Header 2\": \"Clean up\"}","created_at":"2026-01-30T13:46:43.820944","updated_at":"2026-01-30T13:46:43.820944"}
{"id":"05802d55-45a1-57e6-abbd-4a762c0552aa","content":"# Product Recommendations (Amazon Product)  \nThis tutorial demonstrates how to configure a recommendation engine using the [Amazon Product dataset](https:\/\/jmcauley.ucsd.edu\/data\/amazon\/). The dataset contains product reviews from Amazon.com. This example uses the Postgres connector, but the same approach applies to other supported data stores.  \n[Accompanying notebook](https:\/\/colab.research.google.com\/github\/shaped-ai\/shaped-tutorials\/blob\/main\/tutorials\/Postgres%20Amazon%20Beauty%20Ratings%20Tutorial.ipynb)","document_title":"Product Recommendations (Amazon Product)","h1":"Product Recommendations (Amazon Product)","h2":"","h3":"","h4":"","file_path":"tutorials\/amazon.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/amazon.md","chunk_metadata":"{\"Header 1\": \"Product Recommendations (Amazon Product)\"}","created_at":"2026-01-30T13:46:43.821348","updated_at":"2026-01-30T13:46:43.821348"}
{"id":"617045bd-e55a-5e71-85e5-63a8deb563d7","content":"## Data Preparation  \nThe complete Amazon dataset contains 82.8 million reviews, 9.35 million products, and 20.98 million users. This tutorial uses the 'Beauty' category subset (371k reviews) to reduce processing time. This subset is commonly used in recommendation systems research.","document_title":"Product Recommendations (Amazon Product)","h1":"Product Recommendations (Amazon Product)","h2":"Data Preparation","h3":"","h4":"","file_path":"tutorials\/amazon.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/amazon.md","chunk_metadata":"{\"Header 1\": \"Product Recommendations (Amazon Product)\", \"Header 2\": \"Data Preparation\"}","created_at":"2026-01-30T13:46:43.821352","updated_at":"2026-01-30T13:46:43.821352"}
{"id":"65c05d7f-5f4f-5368-943f-e2d46da6a0e4","content":"### Download the dataset  \nDownload the Beauty rating subset and product metadata:  \n```bash\n# Beauty ratings.\ncurl -L -O \"https:\/\/huggingface.co\/datasets\/McAuley-Lab\/Amazon-Reviews-2023\/resolve\/main\/raw\/review_categories\/All_Beauty.jsonl\"\n\n# Beauty product metadata.\ncurl -L -O \"https:\/\/huggingface.co\/datasets\/McAuley-Lab\/Amazon-Reviews-2023\/resolve\/main\/raw\/meta_categories\/meta_All_Beauty.jsonl\"\n```  \nThe data is stored in JSONL format. Load and inspect it:  \n```python\n\nevents_df = pd.read_json('All_Beauty.jsonl', lines=True)\nproducts_df = pd.read_json('meta_All_Beauty.jsonl', lines=True)\n\ndisplay(events_df.head())\ndisplay(products_df.head())\n```  \n`events_df`  \n`products_df`  \nThe data contains some inconsistencies: prices include '$' symbols, and some fields have empty strings or malformed HTML. These can be handled during data ingestion.","document_title":"Product Recommendations (Amazon Product)","h1":"Product Recommendations (Amazon Product)","h2":"Data Preparation","h3":"Download the dataset","h4":"","file_path":"tutorials\/amazon.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/amazon.md","chunk_metadata":"{\"Header 1\": \"Product Recommendations (Amazon Product)\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Download the dataset\"}","created_at":"2026-01-30T13:46:43.821356","updated_at":"2026-01-30T13:46:43.821356"}
{"id":"f860ac0b-3e10-588e-878e-10abb8435bf2","content":"### Required columns  \nThe minimum required columns for an interaction table are:\n- `user_id`: User identifier\n- `item_id`: Item identifier\n- `label`: Interaction label (e.g., rating, click)\n- `created_at`: Timestamp  \nIf user or item tables are provided, their ID columns must be aliased to `user_id` and `item_id`.","document_title":"Product Recommendations (Amazon Product)","h1":"Product Recommendations (Amazon Product)","h2":"Data Preparation","h3":"Required columns","h4":"","file_path":"tutorials\/amazon.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/amazon.md","chunk_metadata":"{\"Header 1\": \"Product Recommendations (Amazon Product)\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Required columns\"}","created_at":"2026-01-30T13:46:43.821359","updated_at":"2026-01-30T13:46:43.821359"}
{"id":"5233f235-ae7c-5d89-91dd-32f519a8956d","content":"### Column mapping  \n**Interaction data (`events_df`):**\n- `reviewerID`: User identifier\n- `asin`: Product identifier (used as `item_id`)\n- `overall`: Review rating\n- `unixReviewTime`: Review timestamp  \n**Item data (`products_df`):**\n- `asin`: Product identifier\n- `title`: Product name\n- `price`: Price in US dollars\n- `brand`: Product brand","document_title":"Product Recommendations (Amazon Product)","h1":"Product Recommendations (Amazon Product)","h2":"Data Preparation","h3":"Column mapping","h4":"","file_path":"tutorials\/amazon.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/amazon.md","chunk_metadata":"{\"Header 1\": \"Product Recommendations (Amazon Product)\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Column mapping\"}","created_at":"2026-01-30T13:46:43.821363","updated_at":"2026-01-30T13:46:43.821363"}
{"id":"dde39a3c-b1cf-55dd-8751-1f4be02e9c0b","content":"## CLI Setup  \n### Install the CLI  \n```bash\npip install shaped\n```  \n**Info:** Shaped supports Python 3.8 to 3.11. See [installation instructions](https:\/\/packaging.python.org\/en\/latest\/tutorials\/installing-packages\/) if you need to install pip.","document_title":"Product Recommendations (Amazon Product)","h1":"Product Recommendations (Amazon Product)","h2":"CLI Setup","h3":"Install the CLI","h4":"","file_path":"tutorials\/amazon.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/amazon.md","chunk_metadata":"{\"Header 1\": \"Product Recommendations (Amazon Product)\", \"Header 2\": \"CLI Setup\", \"Header 3\": \"Install the CLI\"}","created_at":"2026-01-30T13:46:43.821366","updated_at":"2026-01-30T13:46:43.821366"}
{"id":"58316e37-f17f-58cf-93a1-f4f50a366649","content":"### Initialize the CLI  \n```bash\nshaped init --api-key <YOUR_API_KEY>\n```  \nIf you don't have an API key, see [How to get an API key](\/docs\/support\/getting-an-api-key.md).","document_title":"Product Recommendations (Amazon Product)","h1":"Product Recommendations (Amazon Product)","h2":"CLI Setup","h3":"Initialize the CLI","h4":"","file_path":"tutorials\/amazon.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/amazon.md","chunk_metadata":"{\"Header 1\": \"Product Recommendations (Amazon Product)\", \"Header 2\": \"CLI Setup\", \"Header 3\": \"Initialize the CLI\"}","created_at":"2026-01-30T13:46:43.821369","updated_at":"2026-01-30T13:46:43.821369"}
{"id":"67d7f953-22e1-5da1-b994-05eeaa549a70","content":"## Create tables  \nCreate tables for ratings and product metadata using `create-table-from-uri`:  \n```bash\nshaped create-table-from-uri --name amazon_beauty_ratings --type json --path .\/All_Beauty.jsonl\nshaped create-table-from-uri --name amazon_beauty_products --type json --path .\/meta_All_Beauty.jsonl\n```","document_title":"Product Recommendations (Amazon Product)","h1":"Product Recommendations (Amazon Product)","h2":"Create tables","h3":"","h4":"","file_path":"tutorials\/amazon.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/amazon.md","chunk_metadata":"{\"Header 1\": \"Product Recommendations (Amazon Product)\", \"Header 2\": \"Create tables\"}","created_at":"2026-01-30T13:46:43.821372","updated_at":"2026-01-30T13:46:43.821372"}
{"id":"051d1516-3dc5-5f8d-8aa0-7b47591b5a83","content":"## Create the engine  \nDefine the engine configuration:  \n```yaml title=\"amazon_beauty_product_recommendation.yaml\"\ndata:\nitem_table:\ntype: query\nquery: |\nSELECT\nasin AS item_id,\ntitle,\nTRY_CAST(TRIM(price, '$') AS DOUBLE) AS price,\nbrand\nFROM amazon_beauty_products\ninteraction_table:\ntype: query\nquery: |\nSELECT\nCASE\nWHEN overall >= 4 THEN 1\nELSE 0\nEND as label,\nasin AS item_id,\nreviewerID AS user_id,\nunixReviewTime AS created_at,\nsummary,\nverified\nFROM amazon_beauty_ratings\ntraining:\nmodels:\n- name: als\npolicy_type: als\n```  \nCreate the engine:  \n```bash\nshaped create-engine --file amazon_beauty_product_recommendation.yaml\n```","document_title":"Product Recommendations (Amazon Product)","h1":"Product Recommendations (Amazon Product)","h2":"Create the engine","h3":"","h4":"","file_path":"tutorials\/amazon.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/amazon.md","chunk_metadata":"{\"Header 1\": \"Product Recommendations (Amazon Product)\", \"Header 2\": \"Create the engine\"}","created_at":"2026-01-30T13:46:43.821375","updated_at":"2026-01-30T13:46:43.821375"}
{"id":"29114593-6662-5129-a341-203a1690056a","content":"## Monitor engine status  \nEngine creation and training can take several hours, depending on data volume and attributes. Check status using the CLI:  \n```bash\nshaped list-engines\n```  \nResponse:  \n```json\n[\n\"engines\": {\n\"created_at\": \"2024-01-18T19:17:51 UTC\",\n\"engine_name\": \"amazon_beauty_product_recommendations\",\n\"engine_uri\": \"https:\/\/api.shaped.ai\/v2\/engines\/amazon_beauty_product_recommendations\",\n\"status\": \"FETCHING\",\n}\n]\n```  \nThe engine progresses through these stages:\n1. `SCHEDULING`\n2. `FETCHING`\n3. `TRAINING`\n4. `DEPLOYING`\n5. `ACTIVE`  \nOnce the status is `ACTIVE`, the engine is ready for queries.","document_title":"Product Recommendations (Amazon Product)","h1":"Product Recommendations (Amazon Product)","h2":"Monitor engine status","h3":"","h4":"","file_path":"tutorials\/amazon.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/amazon.md","chunk_metadata":"{\"Header 1\": \"Product Recommendations (Amazon Product)\", \"Header 2\": \"Monitor engine status\"}","created_at":"2026-01-30T13:46:43.821379","updated_at":"2026-01-30T13:46:43.821379"}
{"id":"83ea999e-9b23-5b89-82fb-00a38d7d0333","content":"## Query recommendations  \nQuery recommendations using the [Query endpoint](\/docs\/v2\/query_reference\/shapedql). Provide a `user_id` and the number of results to return.  \nUsing the CLI:  \n```bash\nshaped query --engine-name amazon_beauty_product_recommendations \\\n--query \"SELECT * FROM similarity(embedding_ref='als', limit=50, encoder='precomputed_user', input_user_id='\\$user_id') LIMIT 5\" \\\n--parameters '{\"user_id\": \"AHGHQ5SPYZ60Q\"}'\n```  \nResponse:  \n```json\n{\n\"results\": [\n{\n\"id\": \"0002007770\",\n\"score\": 0.98,\n\"attributes\": {\n\"title\": \"Compact Hair Dryer\",\n\"price\": 64.99\n}\n},\n{\n\"id\": \"000100039X\",\n\"score\": 0.92,\n\"attributes\": {\n\"title\": \"Eye Balm\",\n\"price\": 32.0\n}\n},\n{\n\"id\": \"0002051850\",\n\"score\": 0.73,\n\"attributes\": {\n\"title\": \"Ear and Nose Hair Trimmer\",\n\"price\": 12.99\n}\n},\n{\n\"id\": \"0002219417\",\n\"score\": 0.69,\n\"attributes\": {\n\"title\": \"Pure Instinct Perfume\",\n\"price\": 16.95\n}\n},\n{\n\"id\": \"0000031887\",\n\"score\": 0.68,\n\"attributes\": {\n\"title\": \"Eye Shadow and Eye Liner Pen\",\n\"price\": 15.99\n}\n}\n]\n}\n```  \nThe response contains an array of result objects with item IDs, scores, and metadata.  \nUsing the REST API:  \n```bash\ncurl https:\/\/api.shaped.ai\/v2\/engines\/amazon_beauty_product_recommendations\/query \\\n-H \"x-api-key: <API_KEY>\" \\\n-H \"Content-Type: application\/json\" \\\n-d '{\n\"query\": \"SELECT * FROM similarity(embedding_ref=''als'', limit=50, encoder=''precomputed_user'', input_user_id=''$user_id'') LIMIT 5\",\n\"parameters\": {\n\"user_id\": \"AHGHQ5SPYZ60Q\"\n},\n\"return_metadata\": true\n}'\n```","document_title":"Product Recommendations (Amazon Product)","h1":"Product Recommendations (Amazon Product)","h2":"Query recommendations","h3":"","h4":"","file_path":"tutorials\/amazon.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/amazon.md","chunk_metadata":"{\"Header 1\": \"Product Recommendations (Amazon Product)\", \"Header 2\": \"Query recommendations\"}","created_at":"2026-01-30T13:46:43.821382","updated_at":"2026-01-30T13:46:43.821382"}
{"id":"0207016d-5580-5b81-8c5b-71e6e1b91f9a","content":"## Clean up  \nDelete the engine when finished:  \n```bash\nshaped delete-engine --engine-name amazon_beauty_product_recommendations\n```","document_title":"Product Recommendations (Amazon Product)","h1":"Product Recommendations (Amazon Product)","h2":"Clean up","h3":"","h4":"","file_path":"tutorials\/amazon.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/amazon.md","chunk_metadata":"{\"Header 1\": \"Product Recommendations (Amazon Product)\", \"Header 2\": \"Clean up\"}","created_at":"2026-01-30T13:46:43.821385","updated_at":"2026-01-30T13:46:43.821385"}
{"id":"3b54e412-7806-5d09-8095-68a065e854a5","content":"# Enriching Movie Descriptions with LLMs  \nThis tutorial demonstrates how to use Shaped Views to enrich a table with LLM-generated content. The example uses a movie table and generates features suitable for search and recommendation use cases.  \nThis process is performed through the Shaped dashboard without writing code.","document_title":"Enriching Movie Descriptions with LLMs","h1":"Enriching Movie Descriptions with LLMs","h2":"","h3":"","h4":"","file_path":"tutorials\/movie_enrichment.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movie_enrichment.md","chunk_metadata":"{\"Header 1\": \"Enriching Movie Descriptions with LLMs\"}","created_at":"2026-01-30T13:46:43.821748","updated_at":"2026-01-30T13:46:43.821748"}
{"id":"8e1b0bb4-a432-575b-86b6-d1b039ad002d","content":"## Sign up  \n1. Navigate to the Shaped website and sign up for a free trial\n2. Provide basic information to create your organization  \nAfter signing up, you'll see the home page, which provides access to tables, engines, and views.","document_title":"Enriching Movie Descriptions with LLMs","h1":"Enriching Movie Descriptions with LLMs","h2":"Sign up","h3":"","h4":"","file_path":"tutorials\/movie_enrichment.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movie_enrichment.md","chunk_metadata":"{\"Header 1\": \"Enriching Movie Descriptions with LLMs\", \"Header 2\": \"Sign up\"}","created_at":"2026-01-30T13:46:43.821751","updated_at":"2026-01-30T13:46:43.821751"}
{"id":"7c1bc4a3-03ca-5cac-8c62-811716f0020b","content":"## Get the data  \nUse the [MovieLens dataset](https:\/\/grouplens.org\/datasets\/movielens\/), specifically the \"latest small\" version.  \n1. Download: [ml-latest-small.zip](http:\/\/files.grouplens.org\/datasets\/movielens\/ml-latest-small.zip)\n2. Unzip the file\n3. Locate `movies.csv`  \nThe file contains `movieId`, `title`, and a pipe-separated list of `genres`. Use `title` and `genres` as input for enrichment.","document_title":"Enriching Movie Descriptions with LLMs","h1":"Enriching Movie Descriptions with LLMs","h2":"Get the data","h3":"","h4":"","file_path":"tutorials\/movie_enrichment.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movie_enrichment.md","chunk_metadata":"{\"Header 1\": \"Enriching Movie Descriptions with LLMs\", \"Header 2\": \"Get the data\"}","created_at":"2026-01-30T13:46:43.821755","updated_at":"2026-01-30T13:46:43.821755"}
{"id":"75c41ca0-668e-54a0-a037-e3438062980c","content":"## Upload the table  \n1. Navigate to the **Connectors** tab\n2. Click **Create Connector** and select **File Upload**\n3. Drag and drop `movies.csv` into the upload area. Shaped infers the schema and creates a table  \nAfter upload, you'll see confirmation that the `movies` table was created. Click the table name to view it.  \nThe table contains `title` and `genres` columns, which will be used for enrichment.","document_title":"Enriching Movie Descriptions with LLMs","h1":"Enriching Movie Descriptions with LLMs","h2":"Upload the table","h3":"","h4":"","file_path":"tutorials\/movie_enrichment.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movie_enrichment.md","chunk_metadata":"{\"Header 1\": \"Enriching Movie Descriptions with LLMs\", \"Header 2\": \"Upload the table\"}","created_at":"2026-01-30T13:46:43.821758","updated_at":"2026-01-30T13:46:43.821758"}
{"id":"c0183473-249e-5340-aaf7-1671e90fb44b","content":"## Create the enrichment view  \n1. Navigate to the **Views** tab and click **Create View**\n2. Configure the view:\n- **Name:** `movies_enrichment`\n- **Type:** AI Enrichment\n- **Source table:** `movies`\n- **Source columns:** `title`, `genres`\n- **Prompt:**\n```text\nGiven information about movies as title and genres, create the following new features:\n\n- themes: Describe the central themes or ideas the movie explores (e.g., friendship, revenge, coming-of-age).\n- mood_tones: Generate a list of emotional tones (e.g., dark, uplifting, suspenseful, heartwarming).\n- keyword_tags: Create a set of descriptive tags that capture the movie's setting, mood, and subject matter.\n- semantic_genre_expansion: Expand the basic genres into a richer natural-language description (e.g., \"A lighthearted romantic comedy about second chances\").\n- target_audience: Predict the ideal audience segment (e.g., families, teenagers, adults, animation fans).\n- character_focus: Identify the likely character focus or archetypes (e.g., \"a brave child protagonist,\" \"an unlikely hero,\" \"ensemble cast\").\n```\n- **AI Enriched Columns:** `themes`, `mood_tones`, `keyword_tags`, `semantic_genre_expansion`, `target_audience`, `character_focus`\n- **Source Output Columns to include:** `movie_id`, `title`  \n3. Click **Create View**. Shaped starts backfilling, processing each row in the `movies` table with the defined AI enrichment.","document_title":"Enriching Movie Descriptions with LLMs","h1":"Enriching Movie Descriptions with LLMs","h2":"Create the enrichment view","h3":"","h4":"","file_path":"tutorials\/movie_enrichment.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movie_enrichment.md","chunk_metadata":"{\"Header 1\": \"Enriching Movie Descriptions with LLMs\", \"Header 2\": \"Create the enrichment view\"}","created_at":"2026-01-30T13:46:43.821761","updated_at":"2026-01-30T13:46:43.821761"}
{"id":"bfb1b037-0e4f-5670-9c1d-e5a0b9747da9","content":"## View results  \nWhen backfilling completes, the view status changes to **Finalized**. Click the view to see its output.  \nThe output includes the original movie data plus the new columns (`themes`, `mood_tones`, `keyword_tags`, `semantic_genre_expansion`, `target_audience`, `character_focus`) populated with LLM-generated descriptions.  \n**Before:**\n- **Title:** Toy Story (1995)\n- **Genres:** Adventure|Animation|Children|Comedy|Fantasy  \n**After:**\n- **themes:** \"friendship, loyalty, dealing with change, jealousy, acceptance\"\n- **mood_tones:** \"comedic, adventurous, heartwarming, nostalgic, whimsical\"\n- **keyword_tags:** \"toys, childhood, friendship, adventure, animated, comedy, fantasy, 1990s\"\n- **semantic_genre_expansion:** \"A comedic animated fantasy adventure about toys that come to life, exploring themes of friendship and jealousy.\"\n- **target_audience:** \"families, children, animation fans, adults nostalgic for the 90s\"\n- **character_focus:** \"an unlikely hero (Woody), a new friend (Buzz Lightyear), ensemble cast of toys\"  \nThis enriched data can be used for semantic search indexes or as features for recommendation engines. Export the data using the **Export** button.","document_title":"Enriching Movie Descriptions with LLMs","h1":"Enriching Movie Descriptions with LLMs","h2":"View results","h3":"","h4":"","file_path":"tutorials\/movie_enrichment.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movie_enrichment.md","chunk_metadata":"{\"Header 1\": \"Enriching Movie Descriptions with LLMs\", \"Header 2\": \"View results\"}","created_at":"2026-01-30T13:46:43.821765","updated_at":"2026-01-30T13:46:43.821765"}
{"id":"a3661620-6ff5-580a-9b65-3dff6261680b","content":"## Clean up  \nDelete the resources created for this tutorial:  \n1. Navigate to the **Views** tab and delete the `movies_enrichment` view\n2. Navigate to the **Tables** tab and delete the `movies` table","document_title":"Enriching Movie Descriptions with LLMs","h1":"Enriching Movie Descriptions with LLMs","h2":"Clean up","h3":"","h4":"","file_path":"tutorials\/movie_enrichment.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/movie_enrichment.md","chunk_metadata":"{\"Header 1\": \"Enriching Movie Descriptions with LLMs\", \"Header 2\": \"Clean up\"}","created_at":"2026-01-30T13:46:43.821768","updated_at":"2026-01-30T13:46:43.821768"}
{"id":"b3b6f1ee-a617-5eb2-803f-0d1e895da8e2","content":"# Music Recommendations (LastFM)  \nThis tutorial demonstrates how to configure a recommendation engine using the [LastFM-360k dataset](http:\/\/ocelma.net\/MusicRecommendationDataset\/lastfm-360K.html). The dataset contains listening data (play counts) for approximately 360,000 users on 160,000 artists. This example uses the local table connector; the same approach applies to other supported connectors.  \n[Accompanying notebook](https:\/\/colab.research.google.com\/github\/shaped-ai\/shaped-tutorials\/blob\/main\/tutorials\/LastFM%20Dataset%20Tutorial.ipynb)","document_title":"Music Recommendations (LastFM)","h1":"Music Recommendations (LastFM)","h2":"","h3":"","h4":"","file_path":"tutorials\/lastfm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/lastfm.md","chunk_metadata":"{\"Header 1\": \"Music Recommendations (LastFM)\"}","created_at":"2026-01-30T13:46:43.822596","updated_at":"2026-01-30T13:46:43.822596"}
{"id":"9e91d674-57c2-5ad2-99d0-07112dbc3598","content":"## CLI Setup  \n### Install the CLI  \n```bash\npip install shaped\n```  \n**Info:** Shaped supports Python 3.8 to 3.11. See [installation instructions](https:\/\/packaging.python.org\/en\/latest\/tutorials\/installing-packages\/) if you need to install pip.","document_title":"Music Recommendations (LastFM)","h1":"Music Recommendations (LastFM)","h2":"CLI Setup","h3":"Install the CLI","h4":"","file_path":"tutorials\/lastfm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/lastfm.md","chunk_metadata":"{\"Header 1\": \"Music Recommendations (LastFM)\", \"Header 2\": \"CLI Setup\", \"Header 3\": \"Install the CLI\"}","created_at":"2026-01-30T13:46:43.822601","updated_at":"2026-01-30T13:46:43.822601"}
{"id":"484e85a2-9291-54ff-92c8-a4acf9a461cc","content":"### Initialize the CLI  \n```bash\nshaped init --api-key <YOUR_API_KEY>\n```  \nIf you don't have an API key, see [How to get an API key](\/docs\/support\/getting-an-api-key.md).","document_title":"Music Recommendations (LastFM)","h1":"Music Recommendations (LastFM)","h2":"CLI Setup","h3":"Initialize the CLI","h4":"","file_path":"tutorials\/lastfm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/lastfm.md","chunk_metadata":"{\"Header 1\": \"Music Recommendations (LastFM)\", \"Header 2\": \"CLI Setup\", \"Header 3\": \"Initialize the CLI\"}","created_at":"2026-01-30T13:46:43.822605","updated_at":"2026-01-30T13:46:43.822605"}
{"id":"0b514f1b-cfcf-5de5-9c6a-2db6ae5c1364","content":"## Data Preparation  \n### Download the dataset  \nDownload the dataset (this step may take approximately 10 minutes):  \n```bash title=\"CLI\"\ncurl http:\/\/mtg.upf.edu\/static\/datasets\/last.fm\/lastfm-dataset-360K.tar.gz -o lastfm-dataset-360K.tar.gz\ntar -xzf lastfm-dataset-360K.tar.gz\n```  \nThe dataset contains two tab-separated files:\n- `lastfm-dataset-360K\/usersha1-artmbid-artname-plays.tsv`: Play counts\n- `lastfm-dataset-360K\/usersha1-profile.tsv`: User profiles  \nThis tutorial uses only interaction data (plays). The files lack headers, which are required. Add a header and trim to 100k samples:  \n```bash\n(echo \"user_id\\tartist_id\\tartist_name\\tplays\"; head -n 100000 lastfm-dataset-360K\/usersha1-artmbid-artname-plays.tsv) > lastfm-dataset-360K\/user-artist-plays-100k.tsv\n```  \nThe full LastFM dataset contains approximately 17 million events. This example uses 100k events to reduce processing time. Verify the full dataset size:  \n```bash\nwc -l lastfm-dataset-360K\/usersha1-artmbid-artname-plays.tsv\n```","document_title":"Music Recommendations (LastFM)","h1":"Music Recommendations (LastFM)","h2":"Data Preparation","h3":"Download the dataset","h4":"","file_path":"tutorials\/lastfm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/lastfm.md","chunk_metadata":"{\"Header 1\": \"Music Recommendations (LastFM)\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Download the dataset\"}","created_at":"2026-01-30T13:46:43.822608","updated_at":"2026-01-30T13:46:43.822608"}
{"id":"bea68067-9a31-556c-ba11-d3d7c615c017","content":"### Create the table  \nCreate a table and insert play records using `create-table-from-uri`:  \n```bash title=\"CLI\"\nshaped create-table-from-uri --name lastfm_plays --path lastfm-dataset-360K\/user-artist-plays-100k.tsv --type tsv\n```  \nRecords upload in batches of 1000. Wait until all 100k records are uploaded.","document_title":"Music Recommendations (LastFM)","h1":"Music Recommendations (LastFM)","h2":"Data Preparation","h3":"Create the table","h4":"","file_path":"tutorials\/lastfm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/lastfm.md","chunk_metadata":"{\"Header 1\": \"Music Recommendations (LastFM)\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Create the table\"}","created_at":"2026-01-30T13:46:43.822612","updated_at":"2026-01-30T13:46:43.822612"}
{"id":"406cf9c4-1976-5d99-841c-074d96b3e72b","content":"## Create the engine  \nThis example uses play counts to build a collaborative filtering engine. Higher play counts indicate stronger user preference.  \nEngine configuration:  \n```yaml title=\"lastfm_artist_recommendations.yaml\"\ndata:\ninteraction_table:\ntype: query\nquery: |\nSELECT user_id, artist_id AS item_id, 0 AS created_at, plays AS label\nFROM lastfm_plays\ntraining:\nmodels:\n- name: als\npolicy_type: als\n```  \nCreate the engine:  \n```bash\nshaped create-engine --file lastfm_artist_recommendations.yaml\n```  \nFor details on engine configuration, see [Engines documentation](\/docs\/v2\/concepts\/engines).","document_title":"Music Recommendations (LastFM)","h1":"Music Recommendations (LastFM)","h2":"Create the engine","h3":"","h4":"","file_path":"tutorials\/lastfm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/lastfm.md","chunk_metadata":"{\"Header 1\": \"Music Recommendations (LastFM)\", \"Header 2\": \"Create the engine\"}","created_at":"2026-01-30T13:46:43.822615","updated_at":"2026-01-30T13:46:43.822615"}
{"id":"273827b5-3f1c-55e6-b9c2-0f983b02e164","content":"## Monitor engine status  \nEngine creation and training can take several hours, depending on data volume and attributes. Check status:  \n```bash\nshaped list-engines\n```  \nResponse:  \n```json\n[\n\"engines\": {\n\"created_at\": \"2024-05-15T08:55:23 UTC\",\n\"engine_name\": \"lastfm_artist_recommendations\",\n\"engine_uri\": \"https:\/\/api.shaped.ai\/v2\/engines\/lastfm_artist_recommendations\",\n\"status\": \"FETCHING\",\n}\n]\n```  \nThe engine progresses through these stages:\n1. `SCHEDULING`\n2. `FETCHING`\n3. `TRAINING`\n4. `DEPLOYING`\n5. `ACTIVE`  \nOnce the status is `ACTIVE`, the engine is ready for queries.","document_title":"Music Recommendations (LastFM)","h1":"Music Recommendations (LastFM)","h2":"Monitor engine status","h3":"","h4":"","file_path":"tutorials\/lastfm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/lastfm.md","chunk_metadata":"{\"Header 1\": \"Music Recommendations (LastFM)\", \"Header 2\": \"Monitor engine status\"}","created_at":"2026-01-30T13:46:43.822618","updated_at":"2026-01-30T13:46:43.822618"}
{"id":"0f9312f1-63f5-5d39-9e52-4dd17fa290d3","content":"## Query recommendations  \nQuery recommendations using the [Query endpoint](\/docs\/v2\/query_reference\/shapedql). Provide a `user_id` and the number of results to return.  \nUsing the CLI:  \n```bash\nshaped query --engine-name lastfm_artist_recommendations \\\n--query \"SELECT * FROM similarity(embedding_ref='als', limit=50, encoder='precomputed_user', input_user_id='\\$user_id') LIMIT 5\" \\\n--parameters '{\"user_id\": \"00000c289a1829a808ac09c00daf10bc3c4e223b\"}'\n```  \nResponse:  \n```json\n{\n\"results\": [\n{\n\"id\": \"67e344da-ec54-4e26-b2a4-8351d744a14c\",\n\"score\": 1.0\n},\n{\n\"id\": \"b7ffd2af-418f-4be2-bdd1-22f8b48613da\",\n\"score\": 0.43973369\n},\n{\n\"id\": \"a74b1b7f-71a5-4011-9441-d0b5e4122711\",\n\"score\": 0.37249291\n},\n{\n\"id\": \"e7c2d42e-b045-41b6-a391-88f4ea545185\",\n\"score\": 0.3511156\n},\n{\n\"id\": \"f2fddf9f-02fd-421a-b5e8-75a3988309ab\",\n\"score\": 0.33543342\n}\n]\n}\n```  \nThe response contains an array of result objects with artist IDs and scores.  \nUsing the REST API:  \n```bash\ncurl https:\/\/api.shaped.ai\/v2\/engines\/lastfm_artist_recommendations\/query \\\n-H \"x-api-key: <API_KEY>\" \\\n-H \"Content-Type: application\/json\" \\\n-d '{\n\"query\": \"SELECT * FROM similarity(embedding_ref=''als'', limit=50, encoder=''precomputed_user'', input_user_id=''$user_id'') LIMIT 5\",\n\"parameters\": {\n\"user_id\": \"00000c289a1829a808ac09c00daf10bc3c4e223b\"\n}\n}'\n```","document_title":"Music Recommendations (LastFM)","h1":"Music Recommendations (LastFM)","h2":"Query recommendations","h3":"","h4":"","file_path":"tutorials\/lastfm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/lastfm.md","chunk_metadata":"{\"Header 1\": \"Music Recommendations (LastFM)\", \"Header 2\": \"Query recommendations\"}","created_at":"2026-01-30T13:46:43.822622","updated_at":"2026-01-30T13:46:43.822622"}
{"id":"03f5bc8e-7b7d-5df9-ad2a-1ead707fecfa","content":"## Clean up  \nDelete the table and engine when finished:  \n```bash\nshaped delete-engine --engine-name lastfm_artist_recommendations\nshaped delete-table --table-name lastfm_plays\n```","document_title":"Music Recommendations (LastFM)","h1":"Music Recommendations (LastFM)","h2":"Clean up","h3":"","h4":"","file_path":"tutorials\/lastfm.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/lastfm.md","chunk_metadata":"{\"Header 1\": \"Music Recommendations (LastFM)\", \"Header 2\": \"Clean up\"}","created_at":"2026-01-30T13:46:43.822625","updated_at":"2026-01-30T13:46:43.822625"}
{"id":"27c2e0ef-c09b-54f1-b288-29dbb8912860","content":"# Game Recommendations (Steam Reviews)  \nThis tutorial demonstrates how to configure a recommendation engine using the [Steam Australian Reviews dataset](https:\/\/cseweb.ucsd.edu\/~jmcauley\/datasets.html#steam_data), specifically the `australian_user_reviews.json.gz` file. The dataset contains reviews from Australian Steam users, including whether they recommended the games they reviewed.  \n[Accompanying notebook](https:\/\/colab.research.google.com\/github\/shaped-ai\/shaped-tutorials\/blob\/main\/tutorials\/Shaped_Steam_Review_Tutorial.ipynb)","document_title":"Game Recommendations (Steam Reviews)","h1":"Game Recommendations (Steam Reviews)","h2":"","h3":"","h4":"","file_path":"tutorials\/steam_review.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/steam_review.md","chunk_metadata":"{\"Header 1\": \"Game Recommendations (Steam Reviews)\"}","created_at":"2026-01-30T13:46:43.822974","updated_at":"2026-01-30T13:46:43.822974"}
{"id":"766ab59c-26f3-5402-b278-e9a9f20df2fd","content":"## CLI Setup  \n### Install the CLI  \n```bash\npip install shaped\n```  \n**Info:** Shaped supports Python 3.8 to 3.11. See [installation instructions](https:\/\/packaging.python.org\/en\/latest\/tutorials\/installing-packages\/) if you need to install pip.","document_title":"Game Recommendations (Steam Reviews)","h1":"Game Recommendations (Steam Reviews)","h2":"CLI Setup","h3":"Install the CLI","h4":"","file_path":"tutorials\/steam_review.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/steam_review.md","chunk_metadata":"{\"Header 1\": \"Game Recommendations (Steam Reviews)\", \"Header 2\": \"CLI Setup\", \"Header 3\": \"Install the CLI\"}","created_at":"2026-01-30T13:46:43.822979","updated_at":"2026-01-30T13:46:43.822979"}
{"id":"659c6e26-f4be-5dff-91c5-090fb2655fe3","content":"### Initialize the CLI  \n```bash\nshaped init --api-key <YOUR_API_KEY>\n```  \nIf you don't have an API key, see [How to get an API key](\/docs\/support\/getting-an-api-key.md).","document_title":"Game Recommendations (Steam Reviews)","h1":"Game Recommendations (Steam Reviews)","h2":"CLI Setup","h3":"Initialize the CLI","h4":"","file_path":"tutorials\/steam_review.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/steam_review.md","chunk_metadata":"{\"Header 1\": \"Game Recommendations (Steam Reviews)\", \"Header 2\": \"CLI Setup\", \"Header 3\": \"Initialize the CLI\"}","created_at":"2026-01-30T13:46:43.822983","updated_at":"2026-01-30T13:46:43.822983"}
{"id":"b4378488-d466-5eaf-b131-524a33bd085d","content":"## Data Preparation  \n### Download the dataset  \n```bash title=\"CLI\"\nwget https:\/\/mcauleylab.ucsd.edu\/public_datasets\/data\/steam\/australian_user_reviews.json.gz --no-check-certificate\n```","document_title":"Game Recommendations (Steam Reviews)","h1":"Game Recommendations (Steam Reviews)","h2":"Data Preparation","h3":"Download the dataset","h4":"","file_path":"tutorials\/steam_review.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/steam_review.md","chunk_metadata":"{\"Header 1\": \"Game Recommendations (Steam Reviews)\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Download the dataset\"}","created_at":"2026-01-30T13:46:43.822987","updated_at":"2026-01-30T13:46:43.822987"}
{"id":"04d2393a-00c9-56be-ab0d-baa3211c2850","content":"### Parse and prepare the data  \nThe dataset is stored in JSON.gz format with a nested structure. Each record contains a `user_id` and an array of reviews. Transform this into a flattened format where each row represents a single user-game review:  \n```python title=\"Python\"\nfrom datetime import datetime\n\ndef parse(path):\n\"\"\"Parse each line of the compressed JSON file.\"\"\"\ng = gzip.open(path, 'r')\nfor l in g:\nyield eval(l)\n\ndef read_data(path):\n\"\"\"Read all data from the compressed JSON file.\"\"\"\ndata = list(parse(path))\nreturn data\n\n# Read the compressed dataset\nusers_reviews = read_data('australian_user_reviews.json.gz')\n\ndef parse_reviews_data(json_data):\n\"\"\"Extract structured data from the reviews JSON.\"\"\"\ncleaned_reviews = []\n\nfor user_data in json_data:\nuser_id = user_data.get('user_id')\n\n# Process each review for this user\nif 'reviews' in user_data and isinstance(user_data['reviews'], list):\nfor review in user_data['reviews']:\n# Extract needed fields\nitem_id = review.get('item_id')\nrecommend = 1 if review.get('recommend', False) else 0\n\n# Parse the posted date if available\nposted_date = review.get('posted', '')\n# Extract date from string like 'Posted November 5, 2011.'\ndate_match = re.search(r'Posted (\\w+ \\d+, \\d{4})', posted_date)\n\nif date_match:\ntry:\n# Parse the date string to a datetime object\ndate_str = date_match.group(1)\ndate_obj = datetime.strptime(date_str, '%B %d, %Y')\n# Convert to YYYY-MM-DD format\ncreated_at = date_obj.strftime('%Y-%m-%d')\nexcept:\n# Use a default date if parsing fails\ncreated_at = '2000-01-01'\nelse:\ncreated_at = '2000-01-01'\n\n# Create clean review record\nclean_review = {\n'user_id': user_id,\n'item_id': item_id,\n'created_at': created_at,\n'recommend': recommend\n}\n\ncleaned_reviews.append(clean_review)\n\nreturn cleaned_reviews\n\n# Process the reviews data\ncleaned_reviews = parse_reviews_data(users_reviews)\n\n# Convert cleaned reviews to a DataFrame\ndf = pd.DataFrame(cleaned_reviews)\nprint(f\"Table shape: {df.shape}\")\nprint(\"Sample data:\")\nprint(df.head())\n\n# Save as TSV\ncsv_file_path = 'user_reviews.csv'\ndf.to_csv(csv_file_path, sep='\\t', index=False)\n```","document_title":"Game Recommendations (Steam Reviews)","h1":"Game Recommendations (Steam Reviews)","h2":"Data Preparation","h3":"Parse and prepare the data","h4":"","file_path":"tutorials\/steam_review.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/steam_review.md","chunk_metadata":"{\"Header 1\": \"Game Recommendations (Steam Reviews)\", \"Header 2\": \"Data Preparation\", \"Header 3\": \"Parse and prepare the data\"}","created_at":"2026-01-30T13:46:43.822991","updated_at":"2026-01-30T13:46:43.822991"}
{"id":"c52b56c5-ad26-5f37-b611-4943f5e6d55c","content":"## Create the table  \nDefine the table schema:  \n```yaml title=\"steam_review_events_schema.yaml\"\nname: steam_review_events\nschema_type: CUSTOM\ncolumn_schema:\nuser_id: String\nitem_id: String\ncreated_at: DateTime\nrecommend: Int32\n```  \nCreate the table:  \n```bash\nshaped create-table --file steam_review_events_schema.yaml\n```  \nInsert data:  \n```bash\nshaped table-insert --table-name steam_review_events --file user_reviews.csv --type 'tsv'\n```  \nVerify table creation:  \n```bash\nshaped list-tables\n```","document_title":"Game Recommendations (Steam Reviews)","h1":"Game Recommendations (Steam Reviews)","h2":"Create the table","h3":"","h4":"","file_path":"tutorials\/steam_review.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/steam_review.md","chunk_metadata":"{\"Header 1\": \"Game Recommendations (Steam Reviews)\", \"Header 2\": \"Create the table\"}","created_at":"2026-01-30T13:46:43.822995","updated_at":"2026-01-30T13:46:43.822995"}
{"id":"529bf9dd-7201-5cd0-89d3-50445a6f22b2","content":"## Create the engine  \nThis example uses review data to build a collaborative filtering engine. The system automatically selects policy and hyperparameters. The engine uses recommendation status (whether the user recommended the game) as the interaction signal.  \nEngine configuration:  \n```yaml title=\"steam_review_engine_schema.yaml\"\ndata:\ninteraction_table:\ntype: query\nquery: |\nSELECT user_id, item_id, created_at, recommend AS label FROM steam_review_events\ntraining:\nmodels:\n- name: als\npolicy_type: als\n```  \nCreate the engine:  \n```bash\nshaped create-engine --file steam_review_engine_schema.yaml\n```","document_title":"Game Recommendations (Steam Reviews)","h1":"Game Recommendations (Steam Reviews)","h2":"Create the engine","h3":"","h4":"","file_path":"tutorials\/steam_review.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/steam_review.md","chunk_metadata":"{\"Header 1\": \"Game Recommendations (Steam Reviews)\", \"Header 2\": \"Create the engine\"}","created_at":"2026-01-30T13:46:43.822998","updated_at":"2026-01-30T13:46:43.822998"}
{"id":"ed680491-51b0-598a-b4e4-72c7ee8764d5","content":"## Monitor engine status  \nCheck engine status:  \n```bash\nshaped list-engines\n```  \nEngine creation and training can take several hours, depending on data volume and attributes. The engine progresses through these stages:  \n1. `SCHEDULING`\n2. `FETCHING`\n3. `TRAINING`\n4. `DEPLOYING`\n5. `ACTIVE`  \nOnce the status is `ACTIVE`, the engine is ready for queries.","document_title":"Game Recommendations (Steam Reviews)","h1":"Game Recommendations (Steam Reviews)","h2":"Monitor engine status","h3":"","h4":"","file_path":"tutorials\/steam_review.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/steam_review.md","chunk_metadata":"{\"Header 1\": \"Game Recommendations (Steam Reviews)\", \"Header 2\": \"Monitor engine status\"}","created_at":"2026-01-30T13:46:43.823002","updated_at":"2026-01-30T13:46:43.823002"}
{"id":"7da2b734-1b84-55e6-ba0c-8c8a92875518","content":"## Query recommendations  \nQuery recommendations using the [Query endpoint](\/docs\/v2\/query_reference\/shapedql). Provide a `user_id` and the number of results to return.  \nUsing the CLI:  \n```bash\nshaped query --engine-name steam_review_game_recommendations \\\n--query \"SELECT * FROM similarity(embedding_ref='als', limit=50, encoder='precomputed_user', input_user_id='\\$user_id') LIMIT 5\" \\\n--parameters '{\"user_id\": \"76561197970982479\"}'\n```  \nResponse:  \n```json\n{\n\"results\": [\n{\n\"id\": \"219150\",\n\"score\": 0.944791813545478\n},\n{\n\"id\": \"245550\",\n\"score\": 0.9243345560353259\n},\n{\n\"id\": \"620\",\n\"score\": 0.9136819097511378\n},\n{\n\"id\": \"440\",\n\"score\": 0.8999791870543353\n},\n{\n\"id\": \"8930\",\n\"score\": 0.8831670564757734\n}\n]\n}\n```  \nThe response contains an array of result objects with game IDs and scores.  \nUsing the REST API:  \n```bash\ncurl https:\/\/api.shaped.ai\/v2\/engines\/steam_review_game_recommendations\/query \\\n-X POST \\\n-H \"x-api-key: YOUR_API_KEY\" \\\n-H \"Content-Type: application\/json\" \\\n-d '{\n\"query\": \"SELECT * FROM similarity(embedding_ref=''als'', limit=50, encoder=''precomputed_user'', input_user_id=''$user_id'') LIMIT 5\",\n\"parameters\": {\n\"user_id\": \"76561197970982479\"\n}\n}'\n```","document_title":"Game Recommendations (Steam Reviews)","h1":"Game Recommendations (Steam Reviews)","h2":"Query recommendations","h3":"","h4":"","file_path":"tutorials\/steam_review.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/steam_review.md","chunk_metadata":"{\"Header 1\": \"Game Recommendations (Steam Reviews)\", \"Header 2\": \"Query recommendations\"}","created_at":"2026-01-30T13:46:43.823005","updated_at":"2026-01-30T13:46:43.823005"}
{"id":"340ec12c-255a-54b1-9767-624eee5d6d12","content":"## Clean up  \nDelete the engine and table when finished:  \n```bash\nshaped delete-engine --engine-name steam_review_game_recommendations\nshaped delete-table --table-name steam_review_events\n```","document_title":"Game Recommendations (Steam Reviews)","h1":"Game Recommendations (Steam Reviews)","h2":"Clean up","h3":"","h4":"","file_path":"tutorials\/steam_review.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/steam_review.md","chunk_metadata":"{\"Header 1\": \"Game Recommendations (Steam Reviews)\", \"Header 2\": \"Clean up\"}","created_at":"2026-01-30T13:46:43.823009","updated_at":"2026-01-30T13:46:43.823009"}
{"id":"f443dbb1-119c-5087-9957-b7a604a9abab","content":"# Building a Personalized HackerNews \"For You\" Feed  \nThis tutorial demonstrates how to build a personalized \"For You\" feed for HackerNews. It covers:  \n- Building a web client for HackerNews\n- Setting up a backend with Supabase for data caching and authentication\n- Ingesting post and event data into Shaped\n- Defining a ranking algorithm that combines popularity, recency, and content-based personalization\n- Integrating the personalized feed into the web client  \nThe result is a configurable, real-time \"For You\" feed. See [hn.shaped.ai](https:\/\/hn.shaped.ai) for a live example.  \nThis tutorial is divided into two parts: building the client and building the feed.","document_title":"Building a Personalized HackerNews \"For You\" Feed","h1":"Building a Personalized HackerNews \"For You\" Feed","h2":"","h3":"","h4":"","file_path":"tutorials\/hackernews-for-you.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/hackernews-for-you.md","chunk_metadata":"{\"Header 1\": \"Building a Personalized HackerNews \\\"For You\\\" Feed\"}","created_at":"2026-01-30T13:46:43.823547","updated_at":"2026-01-30T13:46:43.823547"}
{"id":"6a91c5a3-4156-51d5-9ae6-2cd2f35951fa","content":"## Part 1: Building the HackerNews Client  \nCreate a functional HackerNews client that can be enhanced with a personalized feed.","document_title":"Building a Personalized HackerNews \"For You\" Feed","h1":"Building a Personalized HackerNews \"For You\" Feed","h2":"Part 1: Building the HackerNews Client","h3":"","h4":"","file_path":"tutorials\/hackernews-for-you.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/hackernews-for-you.md","chunk_metadata":"{\"Header 1\": \"Building a Personalized HackerNews \\\"For You\\\" Feed\", \"Header 2\": \"Part 1: Building the HackerNews Client\"}","created_at":"2026-01-30T13:46:43.823551","updated_at":"2026-01-30T13:46:43.823551"}
{"id":"f78a4459-cca0-560c-9d8b-f95c4c7dfb9d","content":"### Step 1: Generate the base client  \nUse an AI code generation tool such as [lovable.dev](https:\/\/lovable.dev) to generate the initial client:  \n1. Navigate to [lovable.dev](https:\/\/lovable.dev)\n2. Enter: `\"Can you build me a clone of HackerNews with a top and new feed?\"`  \nThe generated client pulls data from the public HackerNews API.  \nThe initial client may be missing:\n- Pagination beyond the first page\n- Full mobile support\n- User authentication for login and upvoting","document_title":"Building a Personalized HackerNews \"For You\" Feed","h1":"Building a Personalized HackerNews \"For You\" Feed","h2":"Part 1: Building the HackerNews Client","h3":"Step 1: Generate the base client","h4":"","file_path":"tutorials\/hackernews-for-you.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/hackernews-for-you.md","chunk_metadata":"{\"Header 1\": \"Building a Personalized HackerNews \\\"For You\\\" Feed\", \"Header 2\": \"Part 1: Building the HackerNews Client\", \"Header 3\": \"Step 1: Generate the base client\"}","created_at":"2026-01-30T13:46:43.823555","updated_at":"2026-01-30T13:46:43.823555"}
{"id":"fe51abc4-49e3-572c-adbd-6de9630b2ed9","content":"### Step 2: Add authentication and user actions  \nThe official HackerNews API is read-only. To handle user actions (login, upvotes), use the unofficial REST API with a backend to handle CORS. This example uses Supabase.  \n1. Add a backend using your AI assistant. It may suggest Supabase edge functions.\n2. Set up Supabase: Create an account and link it to your project. The assistant generates an `hn-proxy` edge function for authentication and POST requests.\n3. Create a database: Set up a serverless Postgres database in Supabase with two tables:\n- `posts`: Cache post data for performance and use as features in the ranking engine\n- `events`: Store user actions (favorites) as the personalization signal  \nThe posts table includes fields such as `url`, `score`, and `published_at`, which are used as features for ranking.","document_title":"Building a Personalized HackerNews \"For You\" Feed","h1":"Building a Personalized HackerNews \"For You\" Feed","h2":"Part 1: Building the HackerNews Client","h3":"Step 2: Add authentication and user actions","h4":"","file_path":"tutorials\/hackernews-for-you.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/hackernews-for-you.md","chunk_metadata":"{\"Header 1\": \"Building a Personalized HackerNews \\\"For You\\\" Feed\", \"Header 2\": \"Part 1: Building the HackerNews Client\", \"Header 3\": \"Step 2: Add authentication and user actions\"}","created_at":"2026-01-30T13:46:43.823558","updated_at":"2026-01-30T13:46:43.823558"}
{"id":"1c504ff3-1d28-5e39-9b7b-872f415af182","content":"### Step 3: Polish the client  \nEnhance the user experience:\n- Ensure upvotes are colored and persist across pages\n- Add skeleton UIs for loading states\n- Prevent duplicate posts from being saved  \nYou should have a functional HackerNews client with authentication ready for the next step.  \n---","document_title":"Building a Personalized HackerNews \"For You\" Feed","h1":"Building a Personalized HackerNews \"For You\" Feed","h2":"Part 1: Building the HackerNews Client","h3":"Step 3: Polish the client","h4":"","file_path":"tutorials\/hackernews-for-you.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/hackernews-for-you.md","chunk_metadata":"{\"Header 1\": \"Building a Personalized HackerNews \\\"For You\\\" Feed\", \"Header 2\": \"Part 1: Building the HackerNews Client\", \"Header 3\": \"Step 3: Polish the client\"}","created_at":"2026-01-30T13:46:43.823562","updated_at":"2026-01-30T13:46:43.823562"}
{"id":"ebe74ee2-40c3-575c-89ac-091bcee421c1","content":"## Part 2: Building the \"For You\" Feed with Shaped  \nReplace the static \"top\" feed with a dynamic, personalized \"For You\" feed.","document_title":"Building a Personalized HackerNews \"For You\" Feed","h1":"Building a Personalized HackerNews \"For You\" Feed","h2":"Part 2: Building the \"For You\" Feed with Shaped","h3":"","h4":"","file_path":"tutorials\/hackernews-for-you.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/hackernews-for-you.md","chunk_metadata":"{\"Header 1\": \"Building a Personalized HackerNews \\\"For You\\\" Feed\", \"Header 2\": \"Part 2: Building the \\\"For You\\\" Feed with Shaped\"}","created_at":"2026-01-30T13:46:43.823565","updated_at":"2026-01-30T13:46:43.823565"}
{"id":"12373370-a6d1-5e34-a255-dcd1d72106e0","content":"### Step 1: Ranking algorithm  \nThe HackerNews algorithm balances two factors:  \n- **Popularity:** `(upvotes - 1)`\n- **Recency:** `(hours_since_post + 2) ^ 1.8`  \nFormula:\n```\nrank = popularity \/ recency_decay\n```  \nTo add personalization, introduce a content-filtering term that boosts items textually similar to items the user has favorited:  \n```\nrank = (popularity * (1 + content_similarity)) \/ recency_decay\n```  \nContent-filtering is effective with minimal data (works for a single user). Collaborative filtering, which finds similar users, requires more data.","document_title":"Building a Personalized HackerNews \"For You\" Feed","h1":"Building a Personalized HackerNews \"For You\" Feed","h2":"Part 2: Building the \"For You\" Feed with Shaped","h3":"Step 1: Ranking algorithm","h4":"","file_path":"tutorials\/hackernews-for-you.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/hackernews-for-you.md","chunk_metadata":"{\"Header 1\": \"Building a Personalized HackerNews \\\"For You\\\" Feed\", \"Header 2\": \"Part 2: Building the \\\"For You\\\" Feed with Shaped\", \"Header 3\": \"Step 1: Ranking algorithm\"}","created_at":"2026-01-30T13:46:43.823568","updated_at":"2026-01-30T13:46:43.823568"}
{"id":"574c0c7e-feb1-58f2-ac32-9b0bf7e862d6","content":"### Step 2: Connect data to Shaped  \nConnect your post and event data:  \n1. Create a Postgres connector in the Shaped dashboard that syncs with your Supabase database every 10 minutes to keep `posts` data current.\n2. Create a Custom API connector for `events` to provide an HTTP endpoint.\n3. Update your client to send a real-time event to this endpoint when a user favorites an item. This enables in-session personalization.","document_title":"Building a Personalized HackerNews \"For You\" Feed","h1":"Building a Personalized HackerNews \"For You\" Feed","h2":"Part 2: Building the \"For You\" Feed with Shaped","h3":"Step 2: Connect data to Shaped","h4":"","file_path":"tutorials\/hackernews-for-you.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/hackernews-for-you.md","chunk_metadata":"{\"Header 1\": \"Building a Personalized HackerNews \\\"For You\\\" Feed\", \"Header 2\": \"Part 2: Building the \\\"For You\\\" Feed with Shaped\", \"Header 3\": \"Step 2: Connect data to Shaped\"}","created_at":"2026-01-30T13:46:43.823572","updated_at":"2026-01-30T13:46:43.823572"}
{"id":"5ae77399-1c95-5a87-b50c-2c5fb3ae6591","content":"### Step 3: Define the engine  \nAn engine is defined by:\n- `data` block: Which tables to use and how to prepare data\n- `index` block: How to create embeddings\n- `queries` block: How to rank results","document_title":"Building a Personalized HackerNews \"For You\" Feed","h1":"Building a Personalized HackerNews \"For You\" Feed","h2":"Part 2: Building the \"For You\" Feed with Shaped","h3":"Step 3: Define the engine","h4":"","file_path":"tutorials\/hackernews-for-you.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/hackernews-for-you.md","chunk_metadata":"{\"Header 1\": \"Building a Personalized HackerNews \\\"For You\\\" Feed\", \"Header 2\": \"Part 2: Building the \\\"For You\\\" Feed with Shaped\", \"Header 3\": \"Step 3: Define the engine\"}","created_at":"2026-01-30T13:46:43.823575","updated_at":"2026-01-30T13:46:43.823575"}
{"id":"34b415ac-86b9-51f3-a73c-9a5af61ed4bc","content":"#### Data configuration  \n```yaml\ndata:\nitem_table:\ntype: query\nquery: |\nSELECT\nid AS item_id, title, url, score, by_author, published_at,\ndescendants, host, updated_at\nFROM (\nSELECT\nid, title, url, score, by_author, published_at,\ndescendants, host, updated_at,\nROW_NUMBER() OVER (PARTITION BY id ORDER BY updated_at DESC) as rn\nFROM shaped_hackernews_posts\n) AS ranked_items\nWHERE rn = 1\ninteraction_table:\ntype: query\nquery: |\nSELECT\nuser_id, item_id, published_at, event_type AS event_value,\n(CASE WHEN event_type = 'FAVORITE' THEN 1 ELSE 0 END) AS label\nFROM (\nSELECT\nuser_id, item_id, published_at, event_type,\nROW_NUMBER() OVER (PARTITION BY user_id, item_id ORDER BY published_at DESC) as rn\nFROM shaped_hackernews_events\nWHERE event_type IN ('FAVORITE', 'UNFAVORITE')\n) AS ranked_events\nWHERE rn = 1 AND event_type = 'FAVORITE'\n```","document_title":"Building a Personalized HackerNews \"For You\" Feed","h1":"Building a Personalized HackerNews \"For You\" Feed","h2":"Part 2: Building the \"For You\" Feed with Shaped","h3":"Step 3: Define the engine","h4":"Data configuration","file_path":"tutorials\/hackernews-for-you.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/hackernews-for-you.md","chunk_metadata":"{\"Header 1\": \"Building a Personalized HackerNews \\\"For You\\\" Feed\", \"Header 2\": \"Part 2: Building the \\\"For You\\\" Feed with Shaped\", \"Header 3\": \"Step 3: Define the engine\", \"Header 4\": \"Data configuration\"}","created_at":"2026-01-30T13:46:43.823578","updated_at":"2026-01-30T13:46:43.823578"}
{"id":"aae6ed6b-c415-5dbc-be9f-00a83ebbab32","content":"#### Index configuration  \nDefine text embeddings for content-based similarity:  \n```yaml\nindex:\nembeddings:\n- name: text_embedding\nencoder:\ntype: hugging_face\nmodel_name: Alibaba-NLP\/gte-modernbert-base\nbatch_size: 256\nitem_fields:\n- title\n- url\n```","document_title":"Building a Personalized HackerNews \"For You\" Feed","h1":"Building a Personalized HackerNews \"For You\" Feed","h2":"Part 2: Building the \"For You\" Feed with Shaped","h3":"Step 3: Define the engine","h4":"Index configuration","file_path":"tutorials\/hackernews-for-you.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/hackernews-for-you.md","chunk_metadata":"{\"Header 1\": \"Building a Personalized HackerNews \\\"For You\\\" Feed\", \"Header 2\": \"Part 2: Building the \\\"For You\\\" Feed with Shaped\", \"Header 3\": \"Step 3: Define the engine\", \"Header 4\": \"Index configuration\"}","created_at":"2026-01-30T13:46:43.823582","updated_at":"2026-01-30T13:46:43.823582"}
{"id":"b58a3f5f-101f-5674-8e6e-c357748fea54","content":"#### Queries configuration  \nDefine saved queries with custom ranking formulas:  \n```yaml\nqueries:\npersonalized_feed:\nparams:\nuser_id:\ntype: string\nrequired: true\nlimit:\ntype: number\ndefault: 30\nquery: |\nSELECT *\nFROM column_order(columns='published_at DESC', limit=300)\nORDER BY score(expression='(item.score - 1) * (1 + cosine_similarity(text_encoding(item, embedding_ref=''text_embedding''), pooled_text_encoding(user.recent_interactions, pool_fn=''mean'', embedding_ref=''text_embedding''))) \/ (((now_seconds() - item.published_at) \/ 3600) + 2) ** 1.8', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT $limit\n```  \nThe `cosine_similarity()` function computes similarity between each candidate item's text embedding and a user's taste profile. The `pooled_text_encoding(user.recent_interactions)` function creates this profile by averaging text embeddings of the last 30 items the user favorited.  \nTest the engine:  \n```bash\ncurl -X POST \"https:\/\/api.shaped.ai\/v2\/engines\/hackernews_for_you\/queries\/personalized_feed\" \\\n-H \"x-api-key: <YOUR-API-KEY>\" \\\n-H \"Content-Type: application\/json\" \\\n--data '{\n\"parameters\": {\n\"user_id\": \"tullie\",\n\"limit\": 30\n},\n\"return_metadata\": true\n}'\n```  \nOr use an ad-hoc query:  \n```bash\ncurl -X POST \"https:\/\/api.shaped.ai\/v2\/engines\/hackernews_for_you\/query\" \\\n-H \"x-api-key: <YOUR-API-KEY>\" \\\n-H \"Content-Type: application\/json\" \\\n--data '{\n\"query\": \"SELECT * FROM column_order(columns=''published_at DESC'', limit=300) ORDER BY score(expression=''(item.score - 1) * (1 + cosine_similarity(text_encoding(item, embedding_ref=''''text_embedding''''), pooled_text_encoding(user.recent_interactions, pool_fn=''''mean'''', embedding_ref=''''text_embedding''''))) \/ (((now_seconds() - item.published_at) \/ 3600) + 2) ** 1.8'', input_user_id=''$user_id'', input_interactions_item_ids=''$interaction_item_ids'') LIMIT 30\",\n\"parameters\": {\n\"user_id\": \"tullie\"\n},\n\"return_metadata\": true\n}'\n```","document_title":"Building a Personalized HackerNews \"For You\" Feed","h1":"Building a Personalized HackerNews \"For You\" Feed","h2":"Part 2: Building the \"For You\" Feed with Shaped","h3":"Step 3: Define the engine","h4":"Queries configuration","file_path":"tutorials\/hackernews-for-you.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/hackernews-for-you.md","chunk_metadata":"{\"Header 1\": \"Building a Personalized HackerNews \\\"For You\\\" Feed\", \"Header 2\": \"Part 2: Building the \\\"For You\\\" Feed with Shaped\", \"Header 3\": \"Step 3: Define the engine\", \"Header 4\": \"Queries configuration\"}","created_at":"2026-01-30T13:46:43.823585","updated_at":"2026-01-30T13:46:43.823585"}
{"id":"49749cfc-9923-5438-8a20-feac76c7ce4e","content":"### Step 4: Integrate the feed  \nAdd a \"For You\" tab to your web client that calls the Shaped Query API endpoint.  \nValue model expressions can be modified in real-time without redeployment. Example variations:  \n**Top Feed (HackerNews Classic):**\n```sql\nSELECT *\nFROM column_order(columns='published_at DESC', limit=300)\nORDER BY score(expression='(item.score - 1) \/ ((((now_seconds() - item.published_at) \/ 3600) + 2) ** 1.8)', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 30\n```  \n**Personalized Feed (Balanced):**\n```sql\nSELECT *\nFROM column_order(columns='published_at DESC', limit=300)\nORDER BY score(expression='((item.score \/ 1000) + cosine_similarity(text_encoding(item, embedding_ref=''text_embedding''), pooled_text_encoding(user.recent_interactions, pool_fn=''mean'', embedding_ref=''text_embedding''))) \/ ((((now_seconds() - item.published_at) \/ 3600) + 2) ** 1.8)', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 30\n```  \nThe `\/ 1000` term normalizes `item.score` values to a similar scale as `cosine_similarity` scores, preventing popularity from dominating the personalization signal.  \nThe top screenshot shows the top feed; the bottom shows the personalized feed. The personalized feed boosts AI-related content higher in the ranking.","document_title":"Building a Personalized HackerNews \"For You\" Feed","h1":"Building a Personalized HackerNews \"For You\" Feed","h2":"Part 2: Building the \"For You\" Feed with Shaped","h3":"Step 4: Integrate the feed","h4":"","file_path":"tutorials\/hackernews-for-you.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/hackernews-for-you.md","chunk_metadata":"{\"Header 1\": \"Building a Personalized HackerNews \\\"For You\\\" Feed\", \"Header 2\": \"Part 2: Building the \\\"For You\\\" Feed with Shaped\", \"Header 3\": \"Step 4: Integrate the feed\"}","created_at":"2026-01-30T13:46:43.823589","updated_at":"2026-01-30T13:46:43.823589"}
{"id":"d39f5642-6fe9-5604-a5b7-548f9ee087b6","content":"## Extensions  \nPossible enhancements:\n- **Collaborative filtering:** Once sufficient user data is available, introduce collaborative filtering to find items popular among similar users\n- **Exploration:** Use multi-armed bandit algorithms for more intelligent content exploration\n- **Semantic search:** Replace keyword search with vector search using Shaped's Query API\n- **User configurability:** Allow users to adjust ranking formulas in the UI","document_title":"Building a Personalized HackerNews \"For You\" Feed","h1":"Building a Personalized HackerNews \"For You\" Feed","h2":"Extensions","h3":"","h4":"","file_path":"tutorials\/hackernews-for-you.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/hackernews-for-you.md","chunk_metadata":"{\"Header 1\": \"Building a Personalized HackerNews \\\"For You\\\" Feed\", \"Header 2\": \"Extensions\"}","created_at":"2026-01-30T13:46:43.823592","updated_at":"2026-01-30T13:46:43.823592"}
{"id":"4d50b78a-5ae9-58bb-9392-3eefb3885aba","content":"# Install an SDK  \nThe Shaped SDK simplifies interactions with Shaped's V2 Query API, making it easier to integrate\nour services into your applications.  \nThis guide will walk you through the installation process for different programming languages.","document_title":"Install an SDK","h1":"Install an SDK","h2":"","h3":"","h4":"","file_path":"overview\/install-sdk.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/install-sdk.md","chunk_metadata":"{\"Header 1\": \"Install an SDK\"}","created_at":"2026-01-30T13:46:43.823862","updated_at":"2026-01-30T13:46:43.823862"}
{"id":"56f15c92-6187-5fa1-9258-b2888aadd358","content":"# Install the SDK  \n### Js\n```bash title=\"Install\"\nnpm install @shaped.ai\/client\n```","document_title":"Install an SDK","h1":"Install the SDK","h2":"","h3":"Js","h4":"","file_path":"overview\/install-sdk.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/install-sdk.md","chunk_metadata":"{\"Header 1\": \"Install the SDK\", \"Header 3\": \"Js\"}","created_at":"2026-01-30T13:46:43.823868","updated_at":"2026-01-30T13:46:43.823868"}
{"id":"cf4e404f-0bae-5257-b5ac-93ad2f813dfe","content":"### Py\n```bash title=\"Install\"\npip install shaped\n```","document_title":"Install an SDK","h1":"Install the SDK","h2":"","h3":"Py","h4":"","file_path":"overview\/install-sdk.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/install-sdk.md","chunk_metadata":"{\"Header 1\": \"Install the SDK\", \"Header 3\": \"Py\"}","created_at":"2026-01-30T13:46:43.823872","updated_at":"2026-01-30T13:46:43.823872"}
{"id":"af0daed9-e252-5850-8f8a-af355db8288b","content":"# Verify Installation  \nUse the following commands to verify the packages have installed correctly.","document_title":"Install an SDK","h1":"Verify Installation","h2":"","h3":"","h4":"","file_path":"overview\/install-sdk.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/install-sdk.md","chunk_metadata":"{\"Header 1\": \"Verify Installation\"}","created_at":"2026-01-30T13:46:43.823876","updated_at":"2026-01-30T13:46:43.823876"}
{"id":"92c7b831-8194-59fd-854b-d61d40b4e336","content":"### Js\n```bash\nnpm list @shaped.ai\/client\n```","document_title":"Install an SDK","h1":"Verify Installation","h2":"","h3":"Js","h4":"","file_path":"overview\/install-sdk.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/install-sdk.md","chunk_metadata":"{\"Header 1\": \"Verify Installation\", \"Header 3\": \"Js\"}","created_at":"2026-01-30T13:46:43.823880","updated_at":"2026-01-30T13:46:43.823880"}
{"id":"e8688eef-d160-506b-b56f-e75b0f7c8521","content":"### Py\n```bash\npip show shaped\n```","document_title":"Install an SDK","h1":"Verify Installation","h2":"","h3":"Py","h4":"","file_path":"overview\/install-sdk.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/install-sdk.md","chunk_metadata":"{\"Header 1\": \"Verify Installation\", \"Header 3\": \"Py\"}","created_at":"2026-01-30T13:46:43.823884","updated_at":"2026-01-30T13:46:43.823884"}
{"id":"f8f0b55c-c5f2-5b5a-b3c8-cb316ac38cc6","content":"# Making Queries  \nThe V2 Query API uses ShapedQL (SQL) to retrieve and rank items. Here's how to make queries using the REST API:","document_title":"Install an SDK","h1":"Making Queries","h2":"","h3":"","h4":"","file_path":"overview\/install-sdk.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/install-sdk.md","chunk_metadata":"{\"Header 1\": \"Making Queries\"}","created_at":"2026-01-30T13:46:43.823888","updated_at":"2026-01-30T13:46:43.823888"}
{"id":"38eb03d6-121c-5dd0-aeb2-5ed3d19cccb7","content":"### Js\n```js\n\/\/ Get personalized recommendations for a user.\nconst response = await fetch(\"https:\/\/api.shaped.ai\/v2\/engines\/your_engine_name\/query\", {\nmethod: \"POST\",\nheaders: {\n\"Content-Type\": \"application\/json\",\n\"x-api-key\": \"your_api_key\"\n},\nbody: JSON.stringify({\nquery: \"SELECT * FROM similarity(embedding_ref='als', limit=100, encoder='interaction_pooling', input_user_id=$user_id) LIMIT 20\",\nparameters: {\nuser_id: \"user123\"\n},\nreturn_metadata: true\n})\n})\nconst recommendations = await response.json()\n```  \n```js\n\/\/ Get items with filtering.\nconst response = await fetch(\"https:\/\/api.shaped.ai\/v2\/engines\/your_engine_name\/query\", {\nmethod: \"POST\",\nheaders: {\n\"Content-Type\": \"application\/json\",\n\"x-api-key\": \"your_api_key\"\n},\nbody: JSON.stringify({\nquery: \"SELECT * FROM similarity(embedding_ref='als', limit=100, encoder='interaction_pooling', input_user_id=$user_id) WHERE category = 'sports' AND price < 100 LIMIT 20\",\nparameters: {\nuser_id: \"user123\"\n},\nreturn_metadata: true\n})\n})\n```  \n```js\n\/\/ Execute a saved query.\nconst response = await fetch(\"https:\/\/api.shaped.ai\/v2\/engines\/your_engine_name\/queries\/get_recommended_items\", {\nmethod: \"POST\",\nheaders: {\n\"Content-Type\": \"application\/json\",\n\"x-api-key\": \"your_api_key\"\n},\nbody: JSON.stringify({\nparameters: {\nuser_id: \"user123\"\n}\n})\n})\nconst recommendations = await response.json()\n```","document_title":"Install an SDK","h1":"Making Queries","h2":"","h3":"Js","h4":"","file_path":"overview\/install-sdk.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/install-sdk.md","chunk_metadata":"{\"Header 1\": \"Making Queries\", \"Header 3\": \"Js\"}","created_at":"2026-01-30T13:46:43.823891","updated_at":"2026-01-30T13:46:43.823891"}
{"id":"665ddc3a-33fb-576e-9392-15d628ad1673","content":"### Py\n```python\n\n# Get personalized recommendations for a user.\nresponse = requests.post(\n\"https:\/\/api.shaped.ai\/v2\/engines\/your_engine_name\/query\",\nheaders={\n\"Content-Type\": \"application\/json\",\n\"x-api-key\": \"your_api_key\"\n},\njson={\n\"query\": \"SELECT * FROM similarity(embedding_ref='als', limit=100, encoder='interaction_pooling', input_user_id=$user_id) LIMIT 20\",\n\"parameters\": {\n\"user_id\": \"user123\"\n},\n\"return_metadata\": True\n}\n)\nrecommendations = response.json()\n```  \n```python\n# Get items with filtering.\nresponse = requests.post(\n\"https:\/\/api.shaped.ai\/v2\/engines\/your_engine_name\/query\",\nheaders={\n\"Content-Type\": \"application\/json\",\n\"x-api-key\": \"your_api_key\"\n},\njson={\n\"query\": \"SELECT * FROM similarity(embedding_ref='als', limit=100, encoder='interaction_pooling', input_user_id=$user_id) WHERE category = 'sports' AND price < 100 LIMIT 20\",\n\"parameters\": {\n\"user_id\": \"user123\"\n},\n\"return_metadata\": True\n}\n)\n```  \n```python\n# Execute a saved query.\nresponse = requests.post(\n\"https:\/\/api.shaped.ai\/v2\/engines\/your_engine_name\/queries\/get_recommended_items\",\nheaders={\n\"Content-Type\": \"application\/json\",\n\"x-api-key\": \"your_api_key\"\n},\njson={\n\"parameters\": {\n\"user_id\": \"user123\"\n}\n}\n)\nrecommendations = response.json()\n```  \nFor more query examples and ShapedQL syntax, see the [Query Reference](\/docs\/v2\/query_reference\/shapedql).","document_title":"Install an SDK","h1":"Making Queries","h2":"","h3":"Py","h4":"","file_path":"overview\/install-sdk.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/install-sdk.md","chunk_metadata":"{\"Header 1\": \"Making Queries\", \"Header 3\": \"Py\"}","created_at":"2026-01-30T13:46:43.823895","updated_at":"2026-01-30T13:46:43.823895"}
{"id":"be01d6bc-8912-5210-b351-37e5bde376df","content":"# Install the CLI  \nThe CLI is the best way to interact with the Shaped API. You can use it to configure datasets, upload new models, and test queries.","document_title":"Install the CLI","h1":"Install the CLI","h2":"","h3":"","h4":"","file_path":"overview\/installing-shaped-cli.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/installing-shaped-cli.md","chunk_metadata":"{\"Header 1\": \"Install the CLI\"}","created_at":"2026-01-30T13:46:43.824020","updated_at":"2026-01-30T13:46:43.824020"}
{"id":"3f51e719-8b50-51b8-8a92-12f49f9d9b53","content":"## Prerequisites  \n- Python 3.11 or below\n- A Shaped account","document_title":"Install the CLI","h1":"Install the CLI","h2":"Prerequisites","h3":"","h4":"","file_path":"overview\/installing-shaped-cli.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/installing-shaped-cli.md","chunk_metadata":"{\"Header 1\": \"Install the CLI\", \"Header 2\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.824025","updated_at":"2026-01-30T13:46:43.824025"}
{"id":"a6d52d52-1e75-56dd-984b-c4201b7bbdb0","content":"## Install with pip  \nFirst install the Shaped CLI from [PyPi](https:\/\/pypi.org\/project\/shaped\/):  \n```bash\npip install shaped\n```  \n**Tip:**\n__Python Version__: Shaped supports Python 3.8 to 3.11.  \nTake a look at the\n[installation\ninstructions](https:\/\/packaging.python.org\/en\/latest\/tutorials\/installing-packages\/) if\nyou need to install pip.  \nIf you are having trouble installing due to package conflicts, check out our guide: [Install errors](..\/guides\/errors)","document_title":"Install the CLI","h1":"Install the CLI","h2":"Install with pip","h3":"","h4":"","file_path":"overview\/installing-shaped-cli.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/installing-shaped-cli.md","chunk_metadata":"{\"Header 1\": \"Install the CLI\", \"Header 2\": \"Install with pip\"}","created_at":"2026-01-30T13:46:43.824029","updated_at":"2026-01-30T13:46:43.824029"}
{"id":"004a827f-b3c9-50a7-8a1f-051f5f702a38","content":"## Initialize the client  \nYou can then initialize the shaped client with your API key. If you don't have an API\nkey yet, check out this [page](getting-an-api-key) to get one.  \n```bash\nshaped init --api-key <YOUR_API_KEY>\n```  \nReplace `YOUR_API_KEY` with your actual API key from the console: [Open console](https:\/\/console.shaped.ai\/settings\/api-keys)","document_title":"Install the CLI","h1":"Install the CLI","h2":"Initialize the client","h3":"","h4":"","file_path":"overview\/installing-shaped-cli.md","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/installing-shaped-cli.md","chunk_metadata":"{\"Header 1\": \"Install the CLI\", \"Header 2\": \"Initialize the client\"}","created_at":"2026-01-30T13:46:43.824033","updated_at":"2026-01-30T13:46:43.824033"}
{"id":"4d3fc680-20c5-535e-84df-63ad8b581a31","content":"# Home  \nOur documentation provides a general overview of how Shaped works, guides for common Shaped workflows, tutorials, integrations and support resources.","document_title":"Home","h1":"Home","h2":"","h3":"","h4":"","file_path":"home.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/home.mdx","chunk_metadata":"{\"Header 1\": \"Home\"}","created_at":"2026-01-30T13:46:43.824331","updated_at":"2026-01-30T13:46:43.824331"}
{"id":"238dfc12-bf88-5afb-9fba-55a02ff04618","content":"## Learn the basics  \nIf you're new, we recommend reviewing our platform architecture and key concepts: [The basics](\/docs\/v2\/basics)","document_title":"Home","h1":"Home","h2":"Learn the basics","h3":"","h4":"","file_path":"home.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/home.mdx","chunk_metadata":"{\"Header 1\": \"Home\", \"Header 2\": \"Learn the basics\"}","created_at":"2026-01-30T13:46:43.824337","updated_at":"2026-01-30T13:46:43.824337"}
{"id":"c26a4c24-48aa-5959-93c1-081459b3f063","content":"## Getting started  \nIf you prefer to learn by doing, create your first table and train your first engine:","document_title":"Home","h1":"Home","h2":"Getting started","h3":"","h4":"","file_path":"home.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/home.mdx","chunk_metadata":"{\"Header 1\": \"Home\", \"Header 2\": \"Getting started\"}","created_at":"2026-01-30T13:46:43.824341","updated_at":"2026-01-30T13:46:43.824341"}
{"id":"c7b61559-ee18-5996-9921-a8738825175f","content":"#### Upload data\nAdd your first data table.","document_title":"Home","h1":"Home","h2":"Getting started","h3":"","h4":"Upload data","file_path":"home.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/home.mdx","chunk_metadata":"{\"Header 1\": \"Home\", \"Header 2\": \"Getting started\", \"Header 4\": \"Upload data\"}","created_at":"2026-01-30T13:46:43.824345","updated_at":"2026-01-30T13:46:43.824345"}
{"id":"8f12b499-e2a0-5ce3-b932-98c66d649897","content":"#### Create an engine\nTrain a basic semantic search engine.","document_title":"Home","h1":"Home","h2":"Getting started","h3":"","h4":"Create an engine","file_path":"home.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/home.mdx","chunk_metadata":"{\"Header 1\": \"Home\", \"Header 2\": \"Getting started\", \"Header 4\": \"Create an engine\"}","created_at":"2026-01-30T13:46:43.824349","updated_at":"2026-01-30T13:46:43.824349"}
{"id":"376f01bb-4798-5c42-a988-3ea4aacff887","content":"#### Quickstart\nLearn how to create a Shaped engine in 5 minutes.","document_title":"Home","h1":"Home","h2":"Getting started","h3":"","h4":"Quickstart","file_path":"home.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/home.mdx","chunk_metadata":"{\"Header 1\": \"Home\", \"Header 2\": \"Getting started\", \"Header 4\": \"Quickstart\"}","created_at":"2026-01-30T13:46:43.824353","updated_at":"2026-01-30T13:46:43.824353"}
{"id":"37116e0c-3fac-52f4-8673-049bcc2bed9e","content":"#### Join the community\nConnect with the Shaped development community on Slack.","document_title":"Home","h1":"Home","h2":"Getting started","h3":"","h4":"Join the community","file_path":"home.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/home.mdx","chunk_metadata":"{\"Header 1\": \"Home\", \"Header 2\": \"Getting started\", \"Header 4\": \"Join the community\"}","created_at":"2026-01-30T13:46:43.824357","updated_at":"2026-01-30T13:46:43.824357"}
{"id":"ec37945c-abd7-5b93-abed-2e2029230f30","content":"## Reference  \n#### Connectors\nSee a list of our native data connectors.","document_title":"Home","h1":"Home","h2":"Reference","h3":"","h4":"Connectors","file_path":"home.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/home.mdx","chunk_metadata":"{\"Header 1\": \"Home\", \"Header 2\": \"Reference\", \"Header 4\": \"Connectors\"}","created_at":"2026-01-30T13:46:43.824360","updated_at":"2026-01-30T13:46:43.824360"}
{"id":"2c28f605-9585-5fd1-a234-2c0768f992c3","content":"#### Models\nSee a list of models we support.","document_title":"Home","h1":"Home","h2":"Reference","h3":"","h4":"Models","file_path":"home.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/home.mdx","chunk_metadata":"{\"Header 1\": \"Home\", \"Header 2\": \"Reference\", \"Header 4\": \"Models\"}","created_at":"2026-01-30T13:46:43.824364","updated_at":"2026-01-30T13:46:43.824364"}
{"id":"bfc8843d-a515-5619-8f66-632671c0453e","content":"#### ShapedQL\nLearn how to query Shaped with SQL.","document_title":"Home","h1":"Home","h2":"Reference","h3":"","h4":"ShapedQL","file_path":"home.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/home.mdx","chunk_metadata":"{\"Header 1\": \"Home\", \"Header 2\": \"Reference\", \"Header 4\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.824368","updated_at":"2026-01-30T13:46:43.824368"}
{"id":"3c71c88d-8b68-5e1f-a3a6-a26c4cbf1f57","content":"#### API Reference\nDetailed descriptions of Shaped","document_title":"Home","h1":"Home","h2":"Reference","h3":"","h4":"API Reference","file_path":"home.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/home.mdx","chunk_metadata":"{\"Header 1\": \"Home\", \"Header 2\": \"Reference\", \"Header 4\": \"API Reference\"}","created_at":"2026-01-30T13:46:43.824372","updated_at":"2026-01-30T13:46:43.824372"}
{"id":"03429d98-c76d-5d61-b798-545d7a31b15c","content":"# Learn the basics","document_title":"Learn the basics","h1":"Learn the basics","h2":"","h3":"","h4":"","file_path":"basics.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/basics.mdx","chunk_metadata":"{\"Header 1\": \"Learn the basics\"}","created_at":"2026-01-30T13:46:43.824755","updated_at":"2026-01-30T13:46:43.824755"}
{"id":"ba55a639-04c3-5e86-afae-fb1bcffb381e","content":"# The basics  \nShaped is a real-time retrieval engine that lets you build state-of-the-art retrieval systems. You can:  \n- Import from 20+ connectors\n- Transform data with SQL or AI into materialized views for training\n- Define retrieval engines, models, and ranking pipelines as YAML files\n- Test different models, ranking strategies, and configurations in parallel\n- Index on new data automatically and in real-time\n- Scale up or down automatically based on usage","document_title":"Learn the basics","h1":"The basics","h2":"","h3":"","h4":"","file_path":"basics.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/basics.mdx","chunk_metadata":"{\"Header 1\": \"The basics\"}","created_at":"2026-01-30T13:46:43.824759","updated_at":"2026-01-30T13:46:43.824759"}
{"id":"60330026-ab49-53b8-8d25-c75330ee9e0d","content":"## Architecture overview  \nShaped's architecture is grouped into three layers: **Data**, **Intelligence**, and **Training**.  \nEach layer serves a specific purpose and builds upon the previous one:  \n1. **Data layer** (Tables and Views) forms the foundation, connecting to your existing data sources via connectors. Tables store raw data with defined schemas, while Views transform and enrich this data through SQL queries or AI-powered enrichment. This layer serves as the data warehouse that feeds into the intelligence layer.  \n2. **Intelligence layer** (Engines) consumes data from tables and views to build retrieval systems. Engines define how data is indexed (through embeddings for vector search or lexical search for BM25), which scoring models are trained (from simple popularity-based models to complex machine learning models), and how the system is deployed and scaled. This layer handles all the model training, embedding generation, and indexing logic.  \n3. **Query layer** executes retrieval operations against your engines through a REST API. Each query follows a four-stage pipeline: retrieve candidates, filter based on business rules, score using trained models, and reorder for diversity. This layer provides the real-time interface for retrieving and ranking results.  \nData flows through Shaped in a pipeline: your production data sources connect to **Tables** via connectors. **Views** transform this raw data into the shape needed for your use case. **Engines** then ingest data from tables and views, train models, and build indexes. Finally, **Queries** execute against engines to retrieve and rank results in real-time.","document_title":"Learn the basics","h1":"The basics","h2":"Architecture overview","h3":"","h4":"","file_path":"basics.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/basics.mdx","chunk_metadata":"{\"Header 1\": \"The basics\", \"Header 2\": \"Architecture overview\"}","created_at":"2026-01-30T13:46:43.824762","updated_at":"2026-01-30T13:46:43.824762"}
{"id":"5d3762b2-320e-5f0e-9fe1-adf8b35e9b74","content":"## Data layer  \nThis is the data warehouse. You can connect production datasets, transform and clean the data into a usable format, join disconnected sources to create unified datasets, and enrich your datasets with LLMs.","document_title":"Learn the basics","h1":"The basics","h2":"Data layer","h3":"","h4":"","file_path":"basics.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/basics.mdx","chunk_metadata":"{\"Header 1\": \"The basics\", \"Header 2\": \"Data layer\"}","created_at":"2026-01-30T13:46:43.824766","updated_at":"2026-01-30T13:46:43.824766"}
{"id":"98216839-9a53-539d-84eb-3daee2827e15","content":"### Connectors  \nYou can import data from an external source using one of our 20+ connectors. If you need a custom table, you can declare a custom table and add rows to it via API.","document_title":"Learn the basics","h1":"The basics","h2":"Data layer","h3":"Connectors","h4":"","file_path":"basics.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/basics.mdx","chunk_metadata":"{\"Header 1\": \"The basics\", \"Header 2\": \"Data layer\", \"Header 3\": \"Connectors\"}","created_at":"2026-01-30T13:46:43.824769","updated_at":"2026-01-30T13:46:43.824769"}
{"id":"8ff23621-23cc-5a60-a5b3-1b2c011aa4ce","content":"### Tables  \nOnce your data is imported, it exists in Shaped as [tables](concepts\/tables-and-views#tables). Depending on the connector you use, new data is updated in real-time (streams) or every 15 minutes (batch).","document_title":"Learn the basics","h1":"The basics","h2":"Data layer","h3":"Tables","h4":"","file_path":"basics.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/basics.mdx","chunk_metadata":"{\"Header 1\": \"The basics\", \"Header 2\": \"Data layer\", \"Header 3\": \"Tables\"}","created_at":"2026-01-30T13:46:43.824773","updated_at":"2026-01-30T13:46:43.824773"}
{"id":"525de7b6-a395-586e-bf92-e6b59f216e6f","content":"### Table views  \nIf your tables are not in the right structure to be trained on, you can use views to fix or enrich them into new [views](concepts\/tables-and-views#views).  \n[SQL views](concepts\/tables-and-views#sql-view) let you:\n- Convert data types, fix null values, or rename columns\n- Join multiple tables into one massive interactions table.\n- Combine multiple sources into one table - eg user events from your product with billing transactions)","document_title":"Learn the basics","h1":"The basics","h2":"Data layer","h3":"Table views","h4":"","file_path":"basics.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/basics.mdx","chunk_metadata":"{\"Header 1\": \"The basics\", \"Header 2\": \"Data layer\", \"Header 3\": \"Table views\"}","created_at":"2026-01-30T13:46:43.824776","updated_at":"2026-01-30T13:46:43.824776"}
{"id":"308abb41-67e7-5cd4-9a66-5938e0aa818d","content":"### AI Enrichments  \n[AI enrichments](concepts\/tables-and-views#ai-view) let you:\n- Add new semantic data from existing columns\n- Create new columns like clothing_color from an image of clothes  \nEach view is materialized, so you can use the outputs to train a model (or transform in a different way).","document_title":"Learn the basics","h1":"The basics","h2":"Data layer","h3":"AI Enrichments","h4":"","file_path":"basics.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/basics.mdx","chunk_metadata":"{\"Header 1\": \"The basics\", \"Header 2\": \"Data layer\", \"Header 3\": \"AI Enrichments\"}","created_at":"2026-01-30T13:46:43.824779","updated_at":"2026-01-30T13:46:43.824779"}
{"id":"9d3115fc-c884-5423-8b4e-8f3f8c96b28f","content":"## Intelligence layer  \nThe intelligence layer is where indexing, embedding generation, and model training happens. You will declare an [engine](concepts\/engines) which contains the scoring and ranking logic for your retrieval system.","document_title":"Learn the basics","h1":"The basics","h2":"Intelligence layer","h3":"","h4":"","file_path":"basics.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/basics.mdx","chunk_metadata":"{\"Header 1\": \"The basics\", \"Header 2\": \"Intelligence layer\"}","created_at":"2026-01-30T13:46:43.824783","updated_at":"2026-01-30T13:46:43.824783"}
{"id":"b84a57e7-6f5f-5b69-91aa-5a4832fa393a","content":"### Engines  \nWhen you configure an engine, you can define multiple retrieval components that will be trained together. You will also describe what data the engine is connected to and deployment configuration (such as number of pods, data tier, etc).  \nYour engine does not have to be limited to a single embedding or scoring model. You can configure multiple models, plus embeddings for semantic search, plus a custom lexical\/bm25 search engine, all in one engine. Each component has an API to fine-tune it accordingly.  \nYou can also run multiple engines in parallel to test the best one.","document_title":"Learn the basics","h1":"The basics","h2":"Intelligence layer","h3":"Engines","h4":"","file_path":"basics.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/basics.mdx","chunk_metadata":"{\"Header 1\": \"The basics\", \"Header 2\": \"Intelligence layer\", \"Header 3\": \"Engines\"}","created_at":"2026-01-30T13:46:43.824786","updated_at":"2026-01-30T13:46:43.824786"}
{"id":"9755beac-364f-5fb2-b5a0-836532b9a6b3","content":"## Query layer  \nThe [query layer](concepts\/queries) is how you retrieve data using your engine. It is a REST API with a simple configuration to handle multiple different retrieval strategies with varying complexity.  \nAt the simple end, you can do standard BM25 lexical search with a text query.  \nAt the more complex end, you can run complex 4-stage ranking pipelines with retrieval, filtering, scoring, and ordering steps.  \nYou can write queries using [ShapedQL](\/docs\/v2\/query_reference\/shapedql), a SQL-like domain-specific language that provides familiar SQL syntax for building recommendation and ranking queries. ShapedQL supports all retrieval strategies, from simple similarity searches to complex multi-stage ranking pipelines with custom scoring expressions.  \n**Tip:** If you want to learn more about the four-stage recommender model, check out our series: [Anatomy of Modern Ranking Architectures](https:\/\/www.shaped.ai\/blog\/the-anatomy-of-modern-ranking-architectures)","document_title":"Learn the basics","h1":"The basics","h2":"Query layer","h3":"","h4":"","file_path":"basics.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/basics.mdx","chunk_metadata":"{\"Header 1\": \"The basics\", \"Header 2\": \"Query layer\"}","created_at":"2026-01-30T13:46:43.824789","updated_at":"2026-01-30T13:46:43.824789"}
{"id":"1f961c04-f785-5003-ab5c-52002c6c0b2b","content":"# Multi-modal enrichment  \nMulti-modal enrichment uses vision-language models to analyze images and generate text descriptions. This is useful when you have product images, user-generated content, or other visual data that needs semantic text representations for search and recommendation.","document_title":"Multi-modal enrichment","h1":"Multi-modal enrichment","h2":"","h3":"","h4":"","file_path":"data_reference\/multimodal-enrichment.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/multimodal-enrichment.mdx","chunk_metadata":"{\"Header 1\": \"Multi-modal enrichment\"}","created_at":"2026-01-30T13:46:43.825046","updated_at":"2026-01-30T13:46:43.825046"}
{"id":"fc1e9ddf-aa70-5dc4-a9f7-0f407c886142","content":"## How it works  \nMulti-modal enrichment processes images through a vision-language model that understands both visual and textual information. The model analyzes image content and generates descriptions based on your prompt instructions.  \nTo enable image processing, include an `image_url` column in your `source_columns`. The column must contain publicly accessible URLs pointing to image files.  \n**Tip:** If your image columns have different names, use an SQL view to rename them to `image_url`.","document_title":"Multi-modal enrichment","h1":"Multi-modal enrichment","h2":"How it works","h3":"","h4":"","file_path":"data_reference\/multimodal-enrichment.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/multimodal-enrichment.mdx","chunk_metadata":"{\"Header 1\": \"Multi-modal enrichment\", \"Header 2\": \"How it works\"}","created_at":"2026-01-30T13:46:43.825051","updated_at":"2026-01-30T13:46:43.825051"}
{"id":"cfa473b3-d6ca-5f14-8dca-78b258103c51","content":"## Configuration  \nCreate an AI enrichment view with `view_type: \"AI_ENRICHMENT\"` and include `image_url` in the `source_columns` array. Write a prompt that specifies what visual information to extract from the images.  \n**Example: Product image analysis**  \n```json\n{\n\"name\": \"products_with_image_descriptions\",\n\"view_type\": \"AI_ENRICHMENT\",\n\"source_table\": \"products\",\n\"source_columns\": [\n\"item_id\",\n\"product_name\",\n\"image_url\"\n],\n\"source_columns_in_output\": [\n\"item_id\",\n\"product_name\"\n],\n\"enriched_output_columns\": [\n\"image_description\"\n],\n\"prompt\": \"Analyze the product image and describe the item's visual characteristics, including color, style, pattern, material texture, and any visible text or branding. Focus on factual details that would help customers understand what the product looks like.\"\n}\n```  \n**Input and output:**  \nGiven an input row:\n- `item_id`: \"12345\"\n- `product_name`: \"Classic Denim Jacket\"\n- `image_url`: \"https:\/\/example.com\/images\/jacket-12345.jpg\"  \nThe model generates this description in the `image_description` column:  \n> Blue denim jacket with a classic fit. Features a button-front closure, two chest pockets, and long sleeves with button cuffs. Light wash finish with subtle fading. Brand logo visible on the left chest pocket.","document_title":"Multi-modal enrichment","h1":"Multi-modal enrichment","h2":"Configuration","h3":"","h4":"","file_path":"data_reference\/multimodal-enrichment.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/multimodal-enrichment.mdx","chunk_metadata":"{\"Header 1\": \"Multi-modal enrichment\", \"Header 2\": \"Configuration\"}","created_at":"2026-01-30T13:46:43.825055","updated_at":"2026-01-30T13:46:43.825055"}
{"id":"5d12e4d7-9ec0-5293-b19b-789866937778","content":"## Prompt guidelines  \nWhen writing prompts for image enrichment, be specific about what visual information to extract. Images contain many visual elements, so clearly state which aspects matter for your use case:  \n- **Product attributes**: Color, style, pattern, material, dimensions\n- **Scene composition**: Layout, background, context\n- **Text content**: Visible text, branding, labels\n- **Visual details**: Texture, finish, condition  \nThe enriched output is materialized as a persistent table that can be used in engines for semantic search and recommendation.","document_title":"Multi-modal enrichment","h1":"Multi-modal enrichment","h2":"Prompt guidelines","h3":"","h4":"","file_path":"data_reference\/multimodal-enrichment.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/multimodal-enrichment.mdx","chunk_metadata":"{\"Header 1\": \"Multi-modal enrichment\", \"Header 2\": \"Prompt guidelines\"}","created_at":"2026-01-30T13:46:43.825058","updated_at":"2026-01-30T13:46:43.825058"}
{"id":"bd3d78a0-bd2f-5601-8420-1af7109b8574","content":"# Real-time vs batch connectors  \nShaped supports two types of data connectors: **real-time (streaming)** and **batch**.\nUnderstanding the difference between these connector types is important for understanding how data flows through Shaped.  \nOf course, you may not have control over what sources your data is in. So it's important to know the characteristics and limitations of the connector you are using.","document_title":"Real-time vs batch connectors","h1":"Real-time vs batch connectors","h2":"","h3":"","h4":"","file_path":"data_reference\/connector-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connector-types.mdx","chunk_metadata":"{\"Header 1\": \"Real-time vs batch connectors\"}","created_at":"2026-01-30T13:46:43.825275","updated_at":"2026-01-30T13:46:43.825275"}
{"id":"4c405077-8c0b-5a19-8be8-adf18367fb0a","content":"## Connector Comparison  \n| | **Real-Time Connectors** | **Batch Connectors** |\n|---|---|---|\n| **Description** | Stream data continuously as events occur. | Sync data on a regular schedule and in batches. |\n| **Ingestion latency** | Ingested within 30 seconds of the event | Synced every 15 minutes |\n| **Processing model** | Continuous: each event is processed individually as it arrives | Scheduled: data is processed in batches for efficiency |\n| **Supported connectors** | Segment, Amplitude, Rudderstack, Kafka, Kinesis, Pub\/Sub, Custom streaming connectors | BigQuery, Snowflake, Redshift, PostgreSQL, MySQL, MongoDB, S3, GCS, [and more](\/docs\/v2\/connectors\/overview) |\n| **Common use cases** | User interaction events (clicks, views, purchases), real-time personalization, live inventory updates, time-sensitive content (news, social feeds) | Item catalog updates, user profile data, historical interaction data, large-scale data backfills |","document_title":"Real-time vs batch connectors","h1":"Real-time vs batch connectors","h2":"Connector Comparison","h3":"","h4":"","file_path":"data_reference\/connector-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connector-types.mdx","chunk_metadata":"{\"Header 1\": \"Real-time vs batch connectors\", \"Header 2\": \"Connector Comparison\"}","created_at":"2026-01-30T13:46:43.825278","updated_at":"2026-01-30T13:46:43.825278"}
{"id":"01e34620-c1df-535e-9330-a65b5ac93211","content":"## How Data is Handled Between Connector Types  \n### Data Flow  \n1. **Real-time connectors**: Events stream directly into Shaped's real-time data store.\nThe data is immediately available for querying and model training.  \n2. **Batch connectors**: Data is synced from the source, transformed if needed, and\nloaded into Shaped's data warehouse. The data becomes available after the sync\ncompletes.","document_title":"Real-time vs batch connectors","h1":"Real-time vs batch connectors","h2":"How Data is Handled Between Connector Types","h3":"Data Flow","h4":"","file_path":"data_reference\/connector-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connector-types.mdx","chunk_metadata":"{\"Header 1\": \"Real-time vs batch connectors\", \"Header 2\": \"How Data is Handled Between Connector Types\", \"Header 3\": \"Data Flow\"}","created_at":"2026-01-30T13:46:43.825282","updated_at":"2026-01-30T13:46:43.825282"}
{"id":"dc1f2bb7-f8a7-514c-8800-f664df0f70e6","content":"### Mixing Connector Types  \nYou can use both real-time and batch connectors in the same engine:  \n- Use **real-time connectors** for interaction events (clicks, purchases) that need\nimmediate processing\n- Use **batch connectors** for item catalogs, user profiles, and other less\ntime-sensitive data  \nThis hybrid approach allows you to optimize for both freshness (real-time events) and\nefficiency (batch catalog updates).","document_title":"Real-time vs batch connectors","h1":"Real-time vs batch connectors","h2":"How Data is Handled Between Connector Types","h3":"Mixing Connector Types","h4":"","file_path":"data_reference\/connector-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connector-types.mdx","chunk_metadata":"{\"Header 1\": \"Real-time vs batch connectors\", \"Header 2\": \"How Data is Handled Between Connector Types\", \"Header 3\": \"Mixing Connector Types\"}","created_at":"2026-01-30T13:46:43.825286","updated_at":"2026-01-30T13:46:43.825286"}
{"id":"989e0456-5be8-5a6a-a8c0-eb0ae20fc7c4","content":"## Important Limitations  \n### Real-Time Connectors and Query Logic  \n**Critical limitation**: Real-time connectors cannot have query logic attached to the\nreal-time stream, either at the data layer or in the engine configuration.  \n**Why**: Queries are not real-time operations. They execute against a snapshot of data at\nquery time, not against a live stream. Real-time connectors stream raw events into\nShaped, and any filtering, transformation, or query logic must be applied:  \n1. **At the source**: Before data reaches Shaped (e.g., filter events in Segment)\n2. **In views**: Use SQL views to transform real-time data after ingestion\n3. **In queries**: Apply filters and transformations at query time using ShapedQL  \n**Example**: You cannot use `QueryTableConfig` or similar query-based configurations on\nreal-time connector tables because queries operate on materialized data, not streams.","document_title":"Real-time vs batch connectors","h1":"Real-time vs batch connectors","h2":"Important Limitations","h3":"Real-Time Connectors and Query Logic","h4":"","file_path":"data_reference\/connector-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connector-types.mdx","chunk_metadata":"{\"Header 1\": \"Real-time vs batch connectors\", \"Header 2\": \"Important Limitations\", \"Header 3\": \"Real-Time Connectors and Query Logic\"}","created_at":"2026-01-30T13:46:43.825289","updated_at":"2026-01-30T13:46:43.825289"}
{"id":"818e5e32-087e-5439-8d35-ec1afcbe97ef","content":"### Best Practices  \n- **Real-time for events**: Use real-time connectors for user interactions and events\nthat need immediate processing\n- **Batch for catalogs**: Use batch connectors for item catalogs, user profiles, and\nreference data\n- **Views for transformation**: Use SQL views to transform and join data from both\nconnector types\n- **Query-time filtering**: Apply business logic and filters in your ShapedQL queries\nrather than in connector configuration","document_title":"Real-time vs batch connectors","h1":"Real-time vs batch connectors","h2":"Important Limitations","h3":"Best Practices","h4":"","file_path":"data_reference\/connector-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connector-types.mdx","chunk_metadata":"{\"Header 1\": \"Real-time vs batch connectors\", \"Header 2\": \"Important Limitations\", \"Header 3\": \"Best Practices\"}","created_at":"2026-01-30T13:46:43.825293","updated_at":"2026-01-30T13:46:43.825293"}
{"id":"ec786f16-6027-5aff-adc3-579f57069d5c","content":"## Choosing the Right Connector Type  \n**Choose real-time connectors when:**\n- You need sub-minute latency for user interactions\n- Events drive immediate personalization decisions\n- You're tracking high-frequency user behavior  \n**Choose batch connectors when:**\n- Data updates are less frequent (hourly, daily)\n- You're syncing large catalogs or reference data\n- Cost efficiency is more important than latency\n- Your source system doesn't support streaming  \nFor more information on specific connectors, see the [Connector Reference](\/docs\/v2\/connectors\/overview).","document_title":"Real-time vs batch connectors","h1":"Real-time vs batch connectors","h2":"Choosing the Right Connector Type","h3":"","h4":"","file_path":"data_reference\/connector-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connector-types.mdx","chunk_metadata":"{\"Header 1\": \"Real-time vs batch connectors\", \"Header 2\": \"Choosing the Right Connector Type\"}","created_at":"2026-01-30T13:46:43.825296","updated_at":"2026-01-30T13:46:43.825296"}
{"id":"24b7fd38-b432-59f3-b9d6-d47a0eab6458","content":"# Data unification and transformation  \nOne of Shaped's core value propositions is the ability to unify heterogeneous data sources\ninto a single, cohesive recommendation system. Even if your data is spread across multiple\nsystems, in different formats, or isn't perfectly cleaned, Shaped can help you bring it\nall together.","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"","h3":"","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\"}","created_at":"2026-01-30T13:46:43.825900","updated_at":"2026-01-30T13:46:43.825900"}
{"id":"c9651a8b-7c8e-5766-8aaf-09a78a88df43","content":"## Rationale  \nMany organizations face data fragmentation: multiple data sources (Segment, PostgreSQL,\nSnowflake, MongoDB), inconsistent schemas, uncleaned data, and different update\nfrequencies. Shaped addresses these challenges through a unified data layer that connects,\ntransforms, and consolidates your data.","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Rationale","h3":"","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Rationale\"}","created_at":"2026-01-30T13:46:43.825904","updated_at":"2026-01-30T13:46:43.825904"}
{"id":"4cc9bd9e-51ba-5029-bb13-7d84cdaebb80","content":"## Step 1: Connect Your Data Sources  \nConnect to your data sources using Shaped connectors. Create each table via `POST \/v2\/tables`:  \n```json\n# Real-time connector (Segment)\nPOST \/v2\/tables\n{\n\"name\": \"user_events\",\n\"schema_type\": \"SEGMENT\"\n}\n\n# Batch connector (PostgreSQL)\nPOST \/v2\/tables\n{\n\"name\": \"products\",\n\"schema_type\": \"POSTGRES\",\n\"host\": \"your-db-host.com\",\n\"port\": 5432,\n\"user\": \"your_user\",\n\"password\": \"your_password\",\n\"database\": \"your_database\",\n\"table\": \"products\",\n\"replication_key\": \"updated_at\"\n}\n```  \nEach connector handles authentication, schema detection, and data synchronization\nautomatically.","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Step 1: Connect Your Data Sources","h3":"","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Step 1: Connect Your Data Sources\"}","created_at":"2026-01-30T13:46:43.825908","updated_at":"2026-01-30T13:46:43.825908"}
{"id":"a822dd43-b520-5cd5-b192-ad9d05a5cc4b","content":"## Step 2: Transform with Views  \nCreate SQL views via `POST \/v2\/views` to transform and unify your data. Views use **ClickHouse SQL** syntax, so all SQL queries must be written in ClickHouse SQL.  \n**Join multiple sources:**  \n```sql\nSELECT p.product_id as item_id, p.name as title, p.description, p.category, p.price,\ni.inventory_count, r.rating_avg\nFROM products p\nLEFT JOIN inventory i ON p.product_id = i.product_id\nLEFT JOIN reviews_summary r ON p.product_id = r.product_id\n```  \n```json\nPOST \/v2\/views\n{\n\"name\": \"unified_items\",\n\"view_type\": \"SQL\",\n\"sql_view_type\": \"MATERIALIZED_VIEW\",\n\"sql_query\": \"SELECT p.product_id as item_id, p.name as title, p.description, p.category, p.price, i.inventory_count, r.rating_avg FROM products p LEFT JOIN inventory i ON p.product_id = i.product_id LEFT JOIN reviews_summary r ON p.product_id = r.product_id\"\n}\n```  \n**Standardize schemas:**  \n```sql\nSELECT user_id, item_id, event_timestamp as created_at,\nCASE\nWHEN event_type = 'purchase' THEN 1\nWHEN event_type = 'view' THEN 0.5\nELSE 0\nEND as label\nFROM user_events\nWHERE event_type IN ('purchase', 'view', 'click')\n```  \n```json\nPOST \/v2\/views\n{\n\"name\": \"normalized_interactions\",\n\"view_type\": \"SQL\",\n\"sql_view_type\": \"MATERIALIZED_VIEW\",\n\"sql_query\": \"SELECT user_id, item_id, event_timestamp as created_at, CASE WHEN event_type = 'purchase' THEN 1 WHEN event_type = 'view' THEN 0.5 ELSE 0 END as label FROM user_events WHERE event_type IN ('purchase', 'view', 'click')\"\n}\n```  \n**Clean and enrich data:**  \n```sql\nSELECT item_id, COALESCE(title, 'Untitled') as title, COALESCE(description, '') as description,\ncategory, price,\nCASE\nWHEN price < 50 THEN 'budget'\nWHEN price < 200 THEN 'mid-range'\nELSE 'premium'\nEND as price_tier,\ntoYear(created_at) as year_created\nFROM products\nWHERE item_id IS NOT NULL\n```  \n```json\nPOST \/v2\/views\n{\n\"name\": \"cleaned_items\",\n\"view_type\": \"SQL\",\n\"sql_view_type\": \"MATERIALIZED_VIEW\",\n\"sql_query\": \"SELECT item_id, COALESCE(title, 'Untitled') as title, COALESCE(description, '') as description, category, price, CASE WHEN price < 50 THEN 'budget' WHEN price < 200 THEN 'mid-range' ELSE 'premium' END as price_tier, toYear(created_at) as year_created FROM products WHERE item_id IS NOT NULL\"\n}\n```  \n**On-demand views:**  \nUse `sql_view_type: \"VIEW\"` for data that changes frequently:  \n```sql\nSELECT user_id, item_id, event_type, timestamp\nFROM user_events\nWHERE timestamp > now() - INTERVAL 1 HOUR\n```  \n```json\nPOST \/v2\/views\n{\n\"name\": \"recent_interactions\",\n\"view_type\": \"SQL\",\n\"sql_view_type\": \"VIEW\",\n\"sql_query\": \"SELECT user_id, item_id, event_type, timestamp FROM user_events WHERE timestamp > now() - INTERVAL 1 HOUR\"\n}\n```","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Step 2: Transform with Views","h3":"","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Step 2: Transform with Views\"}","created_at":"2026-01-30T13:46:43.825912","updated_at":"2026-01-30T13:46:43.825912"}
{"id":"7703d8ec-be0e-5028-b09b-d27a40f391aa","content":"## Step 2b: Enrich with AI  \nEnrich your data with AI views to generate semantic content:  \n**Example: Generate product descriptions**  \n```json\nPOST \/v2\/views\n{\n\"name\": \"items_with_ai_descriptions\",\n\"view_type\": \"AI_ENRICHMENT\",\n\"source_table\": \"cleaned_items\",\n\"source_columns\": [\"title\", \"category\", \"price_tier\"],\n\"source_columns_in_output\": [\"item_id\", \"title\"],\n\"enriched_output_columns\": [\"ai_description\"],\n\"prompt\": \"Generate a concise product description based on the title, category, and price tier. Focus on key features and use cases.\"\n}\n```  \nLearn more about AI enrichments in the [AI Enrichment guide](\/docs\/v2\/data_reference\/ai-enrichment).","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Step 2b: Enrich with AI","h3":"","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Step 2b: Enrich with AI\"}","created_at":"2026-01-30T13:46:43.825915","updated_at":"2026-01-30T13:46:43.825915"}
{"id":"6ea51161-6798-511b-86fb-512cdd20a2f1","content":"## Step 3: Use Unified Data in Engines  \nReference your unified views in engine configurations:  \n```yaml\nversion: v2\nname: unified_recommendations\ndata:\nitem_table:\nname: unified_items  # Uses the view we created\ntype: table\nuser_table:\nname: user_profiles\ntype: table\ninteraction_table:\nname: normalized_interactions  # Uses the normalized view\ntype: table\n```","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Step 3: Use Unified Data in Engines","h3":"","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Step 3: Use Unified Data in Engines\"}","created_at":"2026-01-30T13:46:43.825919","updated_at":"2026-01-30T13:46:43.825919"}
{"id":"57dc82ee-d7a7-5ee4-829e-76ac16524b11","content":"## Best Practices for Data Unification  \n### 1. Start with Raw Tables  \nCreate tables that connect directly to your sources without transformation. This gives\nyou flexibility to experiment with different transformations later.","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Best Practices for Data Unification","h3":"1. Start with Raw Tables","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Best Practices for Data Unification\", \"Header 3\": \"1. Start with Raw Tables\"}","created_at":"2026-01-30T13:46:43.825923","updated_at":"2026-01-30T13:46:43.825923"}
{"id":"b9815dbf-61a6-58ac-aae7-6321b63f7a1f","content":"### 2. Use Views for Transformation  \nViews let you join multiple sources, standardize schemas, clean data, and create derived features. Materialized views are pre-computed for fast training and querying.","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Best Practices for Data Unification","h3":"2. Use Views for Transformation","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Best Practices for Data Unification\", \"Header 3\": \"2. Use Views for Transformation\"}","created_at":"2026-01-30T13:46:43.825927","updated_at":"2026-01-30T13:46:43.825927"}
{"id":"bf78859d-a3af-5d25-b9fb-65015b162953","content":"### 3. Handle Schema Differences  \nStandardize column names and data types across connectors:  \n```sql\n-- Map column names\nSELECT customer_id as user_id, product_sku as item_id FROM transactions\n\n-- Normalize data types\nSELECT CAST(user_id AS STRING) as user_id, CAST(price AS FLOAT) as price FROM raw_data\n```  \n**Handle different data structures:**  \n**JSON data (MongoDB, document stores):**  \n```sql\nSELECT document->>'user_id' as user_id, document->>'item_id' as item_id,\ndocument->>'timestamp'::timestamp as created_at\nFROM user_profiles\nWHERE document->>'status' = 'active'\n```  \n```json\nPOST \/v2\/views\n{\n\"name\": \"normalized_mongodb_data\",\n\"view_type\": \"SQL\",\n\"sql_view_type\": \"MATERIALIZED_VIEW\",\n\"sql_query\": \"SELECT document->>'user_id' as user_id, document->>'item_id' as item_id, document->>'timestamp'::timestamp as created_at FROM user_profiles WHERE document->>'status' = 'active'\"\n}\n```  \n**Nested structures:**\n```sql\nSELECT item_id, attributes->>'brand' as brand, attributes->>'color' as color FROM products\n```","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Best Practices for Data Unification","h3":"3. Handle Schema Differences","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Best Practices for Data Unification\", \"Header 3\": \"3. Handle Schema Differences\"}","created_at":"2026-01-30T13:46:43.825930","updated_at":"2026-01-30T13:46:43.825930"}
{"id":"7f653f5d-45e7-5025-82c2-59046b9cf89b","content":"### 4. Clean Data Incrementally  \nDon't try to clean everything at once. Start with the most important data and iterate:  \n1. **Essential columns first**: Ensure `item_id`, `user_id`, and `label` columns exist\n2. **Handle nulls**: Use `COALESCE` or default values for missing data\n3. **Deduplicate**: Remove duplicate records using `DISTINCT` or window functions\n4. **Validate**: Add `WHERE` clauses to filter invalid data","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Best Practices for Data Unification","h3":"4. Clean Data Incrementally","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Best Practices for Data Unification\", \"Header 3\": \"4. Clean Data Incrementally\"}","created_at":"2026-01-30T13:46:43.825934","updated_at":"2026-01-30T13:46:43.825934"}
{"id":"618fb6bd-1fe0-5f72-b236-7a9e44ff5959","content":"### 5. Combine Real-Time and Batch Data  \nUse real-time connectors for events and batch connectors for catalogs, then join them in a view:  \n```sql\nSELECT i.user_id, i.item_id, i.event_type, i.timestamp, p.category, p.price\nFROM user_interactions i\nLEFT JOIN product_catalog p ON i.item_id = p.item_id\n```  \n```json\nPOST \/v2\/views\n{\n\"name\": \"enriched_interactions\",\n\"view_type\": \"SQL\",\n\"sql_view_type\": \"MATERIALIZED_VIEW\",\n\"sql_query\": \"SELECT i.user_id, i.item_id, i.event_type, i.timestamp, p.category, p.price FROM user_interactions i LEFT JOIN product_catalog p ON i.item_id = p.item_id\"\n}\n```","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Best Practices for Data Unification","h3":"5. Combine Real-Time and Batch Data","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Best Practices for Data Unification\", \"Header 3\": \"5. Combine Real-Time and Batch Data\"}","created_at":"2026-01-30T13:46:43.825938","updated_at":"2026-01-30T13:46:43.825938"}
{"id":"a3d0de1d-5b40-5797-b21c-99603638c4d6","content":"## Common Patterns  \n### Pattern 1: Event Enrichment  \nEnrich real-time events with batch catalog data:  \n```sql\nSELECT e.user_id, e.item_id, e.event_type, e.timestamp, p.title, p.category, p.brand,\nu.segment, u.country\nFROM events e\nLEFT JOIN products p ON e.item_id = p.item_id\nLEFT JOIN users u ON e.user_id = u.user_id\n```  \n```json\nPOST \/v2\/views\n{\n\"name\": \"enriched_events\",\n\"view_type\": \"SQL\",\n\"sql_view_type\": \"MATERIALIZED_VIEW\",\n\"sql_query\": \"SELECT e.user_id, e.item_id, e.event_type, e.timestamp, p.title, p.category, p.brand, u.segment, u.country FROM events e LEFT JOIN products p ON e.item_id = p.item_id LEFT JOIN users u ON e.user_id = u.user_id\"\n}\n```","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Common Patterns","h3":"Pattern 1: Event Enrichment","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Common Patterns\", \"Header 3\": \"Pattern 1: Event Enrichment\"}","created_at":"2026-01-30T13:46:43.825941","updated_at":"2026-01-30T13:46:43.825941"}
{"id":"55f9569b-5213-50ea-b602-8d9fc55c15bf","content":"### Pattern 2: Multi-Source Aggregation  \nAggregate data from multiple sources:  \n```sql\nSELECT user_id, COUNT(*) as total_interactions, COUNT(DISTINCT item_id) as unique_items_viewed,\nSUM(CASE WHEN event_type = 'purchase' THEN 1 ELSE 0 END) as purchases,\nMAX(timestamp) as last_activity\nFROM (\nSELECT user_id, item_id, event_type, timestamp FROM segment_events\nUNION ALL\nSELECT user_id, item_id, 'transaction' as event_type, timestamp FROM transactions\n)\nGROUP BY user_id\n```  \n```json\nPOST \/v2\/views\n{\n\"name\": \"user_activity_summary\",\n\"view_type\": \"SQL\",\n\"sql_view_type\": \"MATERIALIZED_VIEW\",\n\"sql_query\": \"SELECT user_id, COUNT(*) as total_interactions, COUNT(DISTINCT item_id) as unique_items_viewed, SUM(CASE WHEN event_type = 'purchase' THEN 1 ELSE 0 END) as purchases, MAX(timestamp) as last_activity FROM (SELECT user_id, item_id, event_type, timestamp FROM segment_events UNION ALL SELECT user_id, item_id, 'transaction' as event_type, timestamp FROM transactions) GROUP BY user_id\"\n}\n```","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Common Patterns","h3":"Pattern 2: Multi-Source Aggregation","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Common Patterns\", \"Header 3\": \"Pattern 2: Multi-Source Aggregation\"}","created_at":"2026-01-30T13:46:43.825945","updated_at":"2026-01-30T13:46:43.825945"}
{"id":"89efe719-05fe-5a82-a06a-18fb0afdd86e","content":"### Pattern 3: Feature Engineering  \nCreate derived features from raw data:  \n```sql\nSELECT item_id, title, category, price,\nCASE\nWHEN price < 50 THEN 'low'\nWHEN price < 200 THEN 'medium'\nELSE 'high'\nEND as price_segment,\ndateDiff('day', created_at, now()) as days_since_creation,\nCOALESCE(rating_count, 0) as review_count\nFROM products\n```  \n```json\nPOST \/v2\/views\n{\n\"name\": \"items_with_features\",\n\"view_type\": \"SQL\",\n\"sql_view_type\": \"MATERIALIZED_VIEW\",\n\"sql_query\": \"SELECT item_id, title, category, price, CASE WHEN price < 50 THEN 'low' WHEN price < 200 THEN 'medium' ELSE 'high' END as price_segment, dateDiff('day', created_at, now()) as days_since_creation, COALESCE(rating_count, 0) as review_count FROM products\"\n}\n```","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Common Patterns","h3":"Pattern 3: Feature Engineering","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Common Patterns\", \"Header 3\": \"Pattern 3: Feature Engineering\"}","created_at":"2026-01-30T13:46:43.825948","updated_at":"2026-01-30T13:46:43.825948"}
{"id":"aafa5b98-a258-5db7-ac1c-3d7708a378e1","content":"## Data Layer Architecture  \nThe Shaped data layer follows this architecture:  \n```\n???????????????????\n?  Data Sources   ?\n?  (PostgreSQL,   ?\n?   Segment, etc) ?\n???????????????????\n?\n?\n???????????????????\n?    Tables       ?  ? Raw data from connectors\n?  (item_table,   ?\n?   user_table)   ?\n???????????????????\n?\n?\n???????????????????\n?     Views       ?  ? Transformations and joins\n?  (SQL views,    ?\n?   AI views)     ?\n???????????????????\n?\n?\n???????????????????\n?    Engines      ?  ? Training and indexing\n?  (embeddings,   ?\n?   models)       ?\n???????????????????\n```  \nThis layered approach keeps raw data accessible, enables incremental transformations, and lets you reuse views across multiple engines.","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Data Layer Architecture","h3":"","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Data Layer Architecture\"}","created_at":"2026-01-30T13:46:43.825952","updated_at":"2026-01-30T13:46:43.825952"}
{"id":"e8f231d9-d259-54cf-99b0-52f6e91282af","content":"## Next Steps  \n- Learn about [Connector Types](\/docs\/v2\/data_reference\/connector-types) to understand real-time\nvs batch\n- See [Table & View Basics](\/docs\/v2\/concepts\/tables-and-views) for more transformation examples\n- Learn about [AI Enrichments](\/docs\/v2\/data_reference\/ai-enrichment) to add semantic content\n- Check the [Connector Reference](\/docs\/v2\/connectors\/overview) for specific connector\nsetup","document_title":"Unify data from different sources","h1":"Data unification and transformation","h2":"Next Steps","h3":"","h4":"","file_path":"data_reference\/data-unification.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/data-unification.mdx","chunk_metadata":"{\"Header 1\": \"Data unification and transformation\", \"Header 2\": \"Next Steps\"}","created_at":"2026-01-30T13:46:43.825955","updated_at":"2026-01-30T13:46:43.825955"}
{"id":"eaeb004b-9bca-5faa-9e4d-6a1dc115235d","content":"# Enrich data sources with AI  \nAI enrichment uses LLMs to generate new semantic content from your existing data tables. You can pass text columns through an LLM to create descriptions, summaries, or cleaned metadata. You can also analyze images to extract text descriptions.","document_title":"Enrich data with AI","h1":"Enrich data sources with AI","h2":"","h3":"","h4":"","file_path":"data_reference\/ai-enrichment.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/ai-enrichment.mdx","chunk_metadata":"{\"Header 1\": \"Enrich data sources with AI\"}","created_at":"2026-01-30T13:46:43.826209","updated_at":"2026-01-30T13:46:43.826209"}
{"id":"5ef63c68-8893-5848-bcc7-7cd905c716be","content":"## Prerequisites  \n- A data table with text or image columns to enrich\n- Access to the Shaped API","document_title":"Enrich data with AI","h1":"Enrich data sources with AI","h2":"Prerequisites","h3":"","h4":"","file_path":"data_reference\/ai-enrichment.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/ai-enrichment.mdx","chunk_metadata":"{\"Header 1\": \"Enrich data sources with AI\", \"Header 2\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.826213","updated_at":"2026-01-30T13:46:43.826213"}
{"id":"c70f8175-5b15-519f-b69a-5e25a50d7b25","content":"## Text enrichment  \nText enrichment passes multiple columns from your source table through an LLM to generate new semantic content. Common use cases include creating product descriptions, cleaning up metadata, or generating summaries from structured data.  \nTo create a text enrichment view:  \n1. Select the source columns to pass to the LLM\n2. Write a prompt that instructs the LLM how to process these columns\n3. Specify which source columns to include in the output table (`source_columns_in_output`)\n4. Name the output columns that will contain the LLM-generated content (`enriched_output_columns`)  \nThe enriched output is materialized as a persistent table in your Shaped database.  \n**Example: Product descriptions**  \nThis example generates product summaries for clothing items using multiple metadata columns. The prompt:  \n> You are a retail clothing marketing manager. Using the input columns, generate a product description that contains the product name and describes its unique characteristics, including its colour, appearance, pattern, category, and department. Avoid flowery and salesy language, keep your description factual and concise.  \nSend a POST request to `https:\/\/api.shaped.ai\/v2\/views` with the following payload:\n```json\n{\n\"name\": \"hm_items_with_descriptions\",\n\"view_type\": \"AI_ENRICHMENT\",\n\"source_table\": \"hm_articles\",\n\"source_columns\": [\n\"prod_name\",\n\"index_name\",\n\"detail_desc\",\n\"section_name\",\n\"department_name\",\n\"index_group_name\",\n\"colour_group_name\",\n\"product_group_name\",\n\"garment_group_name\",\n\"product_type_name\",\n\"graphical_appearance_name\",\n\"perceived_colour_value_name\",\n\"perceived_colour_master_name\"\n],\n\"source_columns_in_output\": [\n\"item_id\",\n\"prod_name\",\n\"product_code\"\n],\n\"enriched_output_columns\": [\n\"ai_description\"\n],\n\"prompt\": \"You are a retail clothing marketing manager. Using the input columns, generate a product description that contains the product name and describes its unique characteristics, including its colour, appearance, pattern, category, and department. Avoid flowery and salesy language, keep your description factual and concise.\"\n}\n```  \n**Input and output example:**  \nGiven an input row with these values:\n- `prod_name`: \"Regular Fit T-Shirt\"\n- `colour_group_name`: \"Black\"\n- `department_name`: \"Divided\"\n- `product_type_name`: \"T-shirt\"\n- `graphical_appearance_name`: \"Solid\"\n- `garment_group_name`: \"T-shirt\"  \nThe LLM generates this description in the `ai_description` column:  \n> Regular Fit T-Shirt. Black solid t-shirt from Divided department. Basic t-shirt style with regular fit.","document_title":"Enrich data with AI","h1":"Enrich data sources with AI","h2":"Text enrichment","h3":"","h4":"","file_path":"data_reference\/ai-enrichment.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/ai-enrichment.mdx","chunk_metadata":"{\"Header 1\": \"Enrich data sources with AI\", \"Header 2\": \"Text enrichment\"}","created_at":"2026-01-30T13:46:43.826217","updated_at":"2026-01-30T13:46:43.826217"}
{"id":"a72355f9-7b2a-5f94-9848-2afd11660a25","content":"### Image enrichment  \nImage enrichment uses a multimodal LLM to analyze images and generate text descriptions. To enable image processing, include an `image_url` column in your `source_columns`.  \n**Tip:** If your image columns have different names, use an SQL view to rename them to `image_url`.  \nWhen writing prompts for image enrichment, be specific about what information to extract. Images contain many visual elements, so clearly state which aspects matter for your use case. For example, you might focus on product attributes, scene composition, or text content.  \n**Example: Product image descriptions**  \nThis example analyzes product images to extract visual attributes. The prompt:  \n> Analyze the product image and describe the item's visual characteristics, including color, style, pattern, and any visible text or branding. Focus on factual details that would help customers understand what the product looks like.  \n**Input and output example:**  \nGiven an input row with:\n- `item_id`: \"12345\"\n- `product_name`: \"Classic Denim Jacket\"\n- `image_url`: \"https:\/\/example.com\/images\/jacket-12345.jpg\"  \nThe LLM analyzes the image and generates this description in the `ai_description` column:  \n> Blue denim jacket with a classic fit. Features a button-front closure, two chest pockets, and long sleeves with button cuffs. Light wash finish with subtle fading. Brand logo visible on the left chest pocket.","document_title":"Enrich data with AI","h1":"Enrich data sources with AI","h2":"Text enrichment","h3":"Image enrichment","h4":"","file_path":"data_reference\/ai-enrichment.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/ai-enrichment.mdx","chunk_metadata":"{\"Header 1\": \"Enrich data sources with AI\", \"Header 2\": \"Text enrichment\", \"Header 3\": \"Image enrichment\"}","created_at":"2026-01-30T13:46:43.826220","updated_at":"2026-01-30T13:46:43.826220"}
{"id":"88714efd-50fc-51ff-9de4-1b912e536e1d","content":"# Connecting data to engines  \nEngines connect to data through the `data` block in the engine configuration. You can connect tables or views as item, user, or interaction tables.","document_title":"Connecting data to engines","h1":"Connecting data to engines","h2":"","h3":"","h4":"","file_path":"data_reference\/connecting-data-to-engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connecting-data-to-engines.mdx","chunk_metadata":"{\"Header 1\": \"Connecting data to engines\"}","created_at":"2026-01-30T13:46:43.826504","updated_at":"2026-01-30T13:46:43.826504"}
{"id":"e6905be8-021d-5478-b767-aa16db7c2173","content":"## Data unification with views  \nUse views to unify data from multiple sources into a single table for your engine. Views let you join tables, transform schemas, and create derived features before connecting to an engine.  \nViews can be materialized or on-demand:  \n- **Materialized views** (default): Results are stored as a physical table and updated automatically when source tables change. Use for fast query performance and frequently accessed data.\n- **On-demand views**: Results are computed on-the-fly each time the view is accessed. Use when data changes frequently or you need real-time results.  \nFor details, see [Table & View Basics](\/docs\/v2\/concepts\/tables-and-views#materialized-vs-on-demand-views).","document_title":"Connecting data to engines","h1":"Connecting data to engines","h2":"Data unification with views","h3":"","h4":"","file_path":"data_reference\/connecting-data-to-engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connecting-data-to-engines.mdx","chunk_metadata":"{\"Header 1\": \"Connecting data to engines\", \"Header 2\": \"Data unification with views\"}","created_at":"2026-01-30T13:46:43.826508","updated_at":"2026-01-30T13:46:43.826508"}
{"id":"801a304a-f418-5f88-a502-3dc126c3cea5","content":"## Connecting data through the data block  \nThe `data` block defines which tables or views the engine uses. You can connect tables directly or use the `query` option for simple transformations.","document_title":"Connecting data to engines","h1":"Connecting data to engines","h2":"Connecting data through the data block","h3":"","h4":"","file_path":"data_reference\/connecting-data-to-engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connecting-data-to-engines.mdx","chunk_metadata":"{\"Header 1\": \"Connecting data to engines\", \"Header 2\": \"Connecting data through the data block\"}","created_at":"2026-01-30T13:46:43.826512","updated_at":"2026-01-30T13:46:43.826512"}
{"id":"0d28b510-f04b-543b-be23-da876c303e23","content":"### Connect a table or view  \nConnect a table or view by name:  \n```yaml\ndata:\nitem_table:\nname: unified_items\ntype: table\nuser_table:\nname: customers\ntype: table\ninteraction_table:\nname: normalized_interactions\ntype: table\n```","document_title":"Connecting data to engines","h1":"Connecting data to engines","h2":"Connecting data through the data block","h3":"Connect a table or view","h4":"","file_path":"data_reference\/connecting-data-to-engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connecting-data-to-engines.mdx","chunk_metadata":"{\"Header 1\": \"Connecting data to engines\", \"Header 2\": \"Connecting data through the data block\", \"Header 3\": \"Connect a table or view\"}","created_at":"2026-01-30T13:46:43.826516","updated_at":"2026-01-30T13:46:43.826516"}
{"id":"3458cac5-0c45-5250-89b6-c8af401a5c98","content":"### Simple transformations with query  \nFor simple column renaming, you can use the `query` option:  \n```yaml\ndata:\nitem_table:\ntype: query\nquery: |\nSELECT product_id as item_id, name, description, category, price\nFROM products\n```  \nFor anything more complex than a column rename or casting, we recommend creating an SQL view.","document_title":"Connecting data to engines","h1":"Connecting data to engines","h2":"Connecting data through the data block","h3":"Simple transformations with query","h4":"","file_path":"data_reference\/connecting-data-to-engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connecting-data-to-engines.mdx","chunk_metadata":"{\"Header 1\": \"Connecting data to engines\", \"Header 2\": \"Connecting data through the data block\", \"Header 3\": \"Simple transformations with query\"}","created_at":"2026-01-30T13:46:43.826520","updated_at":"2026-01-30T13:46:43.826520"}
{"id":"5f8c0f0b-ea37-56cf-a5e0-153a0790b527","content":"### Use views for complex operations  \nFor complex SQL operations such as joins, aggregations, or multi-table transformations, create a view instead of using the `query` option. Views are more maintainable and can be reused across multiple engines.  \n```yaml\n# unified_items_view.yaml\nname: unified_items\nview_type: SQL\nsql_view_type: MATERIALIZED_VIEW\nsql_query: |\nSELECT\np.product_id as item_id,\np.name as title,\np.description,\np.category,\np.price,\ni.inventory_count,\nr.rating_avg\nFROM products p\nLEFT JOIN inventory i ON p.product_id = i.product_id\nLEFT JOIN reviews_summary r ON p.product_id = r.product_id\n```  \n```bash\nshaped create-view --file unified_items_view.yaml\n```  \nThen connect the view in your engine:  \n```yaml\ndata:\nitem_table:\nname: unified_items\ntype: table\n```","document_title":"Connecting data to engines","h1":"Connecting data to engines","h2":"Connecting data through the data block","h3":"Use views for complex operations","h4":"","file_path":"data_reference\/connecting-data-to-engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connecting-data-to-engines.mdx","chunk_metadata":"{\"Header 1\": \"Connecting data to engines\", \"Header 2\": \"Connecting data through the data block\", \"Header 3\": \"Use views for complex operations\"}","created_at":"2026-01-30T13:46:43.826524","updated_at":"2026-01-30T13:46:43.826524"}
{"id":"303ae71a-b512-5efd-ab10-143727396545","content":"## Real-time vs batch connectors  \nData sources use either real-time (streaming) or batch connectors:  \n- **Real-time connectors**: Stream data continuously as events occur. Data is ingested within 30 seconds. Use for user interaction events (clicks, views, purchases) that need immediate processing.\n- **Batch connectors**: Sync data on a regular schedule (every 15 minutes). Use for item catalogs, user profiles, and historical data.  \nYou can use both connector types in the same engine. Use real-time connectors for interaction events and batch connectors for item catalogs and user profiles.  \nFor details, see [Connector Types](\/docs\/v2\/data_reference\/connector-types).","document_title":"Connecting data to engines","h1":"Connecting data to engines","h2":"Real-time vs batch connectors","h3":"","h4":"","file_path":"data_reference\/connecting-data-to-engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connecting-data-to-engines.mdx","chunk_metadata":"{\"Header 1\": \"Connecting data to engines\", \"Header 2\": \"Real-time vs batch connectors\"}","created_at":"2026-01-30T13:46:43.826528","updated_at":"2026-01-30T13:46:43.826528"}
{"id":"31772b24-0872-5fe4-976e-80695847d7dc","content":"## Schema configuration  \nUse `schema_override` to specify how columns should be interpreted:  \n```yaml\ndata:\nitem_table:\nname: movies\ntype: table\nschema_override:\nitem:\nid: item_id\nfeatures:\n- name: genre\ntype: Sequence[TextCategory]\n- name: poster_url\ntype: Image\n- name: movie_title\ntype: Text\ncreated_at: created_at\n```  \nIf you don't specify a column in `schema_override`, Shaped will infer the type automatically.","document_title":"Connecting data to engines","h1":"Connecting data to engines","h2":"Schema configuration","h3":"","h4":"","file_path":"data_reference\/connecting-data-to-engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/data_reference\/connecting-data-to-engines.mdx","chunk_metadata":"{\"Header 1\": \"Connecting data to engines\", \"Header 2\": \"Schema configuration\"}","created_at":"2026-01-30T13:46:43.826531","updated_at":"2026-01-30T13:46:43.826531"}
{"id":"59800b79-672c-554d-afc3-8f19d1693d3f","content":"# Overview","document_title":"Overview","h1":"Overview","h2":"","h3":"","h4":"","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Overview\"}","created_at":"2026-01-30T13:46:43.827109","updated_at":"2026-01-30T13:46:43.827109"}
{"id":"ba0e07d7-ee4b-58f7-aabd-b2d1219023b2","content":"# Model Reference  \nShaped offers a rich library of model policies that power retrieval, scoring, and\nranking within your recommendation and search systems. These policies range from\nclassic collaborative filtering techniques and rule-based heuristics to\nstate-of-the-art deep learning architectures. Explore the available policies below\nto understand their capabilities and how to configure them for optimal\nperformance.","document_title":"Overview","h1":"Model Reference","h2":"","h3":"","h4":"","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\"}","created_at":"2026-01-30T13:46:43.827114","updated_at":"2026-01-30T13:46:43.827114"}
{"id":"79514496-f060-5213-ba13-198bb56b4445","content":"## Model types in Shaped  \nShaped systems typically use a combination of:  \n- **HuggingFace embedding models (zero-shot)**: Pre-trained encoders used to generate\nembeddings without training on your interaction data. These are commonly used for\nvector search retrieval (semantic text search, similarity, content filtering) and\nas feature inputs to downstream trained models.\n- **Trained embedding models**: Models trained or fine-tuned on your data to learn\nuser and item representations (e.g., matrix factorization, two-tower retrieval,\nsequential models). These are often used for candidate retrieval, similarity, and\nas features for scoring.\n- **Scoring models**: Point-wise models used in the scoring stage to produce a\nrelevance score for a (user, item) pair, typically using rich feature sets.  \nTrained embedding and scoring models are trained on the data in your engine and\nretrained continuously based on your configured training schedule.","document_title":"Overview","h1":"Model Reference","h2":"Model types in Shaped","h3":"","h4":"","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Model types in Shaped\"}","created_at":"2026-01-30T13:46:43.827118","updated_at":"2026-01-30T13:46:43.827118"}
{"id":"060ca21e-2235-5c20-bde1-63c73df896ac","content":"## Embedding models  \nEmbedding models are trained to represent items and users in vector space.  \nFor pre-trained, zero-shot embedding generation, see\n[HuggingFace embedding models](#huggingface-embedding-models-zero-shot).","document_title":"Overview","h1":"Model Reference","h2":"Embedding models","h3":"","h4":"","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Embedding models\"}","created_at":"2026-01-30T13:46:43.827121","updated_at":"2026-01-30T13:46:43.827121"}
{"id":"bd3def99-85b7-54a6-98ef-353b981fb65d","content":"#### ALS","document_title":"Overview","h1":"Model Reference","h2":"Embedding models","h3":"","h4":"ALS","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Embedding models\", \"Header 4\": \"ALS\"}","created_at":"2026-01-30T13:46:43.827125","updated_at":"2026-01-30T13:46:43.827125"}
{"id":"d9b40326-1a52-5dd6-973e-ba7c346a582f","content":"#### SVD","document_title":"Overview","h1":"Model Reference","h2":"Embedding models","h3":"","h4":"SVD","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Embedding models\", \"Header 4\": \"SVD\"}","created_at":"2026-01-30T13:46:43.827129","updated_at":"2026-01-30T13:46:43.827129"}
{"id":"e7d55380-6af2-5c3a-8829-4cd071870e74","content":"#### ELSA","document_title":"Overview","h1":"Model Reference","h2":"Embedding models","h3":"","h4":"ELSA","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Embedding models\", \"Header 4\": \"ELSA\"}","created_at":"2026-01-30T13:46:43.827138","updated_at":"2026-01-30T13:46:43.827138"}
{"id":"991a946c-055f-5483-8af5-d3f6a94357fb","content":"#### EASE","document_title":"Overview","h1":"Model Reference","h2":"Embedding models","h3":"","h4":"EASE","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Embedding models\", \"Header 4\": \"EASE\"}","created_at":"2026-01-30T13:46:43.827142","updated_at":"2026-01-30T13:46:43.827142"}
{"id":"19723d75-b44e-5f34-b211-954358454738","content":"#### Two-Tower","document_title":"Overview","h1":"Model Reference","h2":"Embedding models","h3":"","h4":"Two-Tower","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Embedding models\", \"Header 4\": \"Two-Tower\"}","created_at":"2026-01-30T13:46:43.827145","updated_at":"2026-01-30T13:46:43.827145"}
{"id":"5213ed7f-9258-5eb4-85bd-3bbe0d399898","content":"#### beeFormer","document_title":"Overview","h1":"Model Reference","h2":"Embedding models","h3":"","h4":"beeFormer","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Embedding models\", \"Header 4\": \"beeFormer\"}","created_at":"2026-01-30T13:46:43.827149","updated_at":"2026-01-30T13:46:43.827149"}
{"id":"ec2a68f1-495c-50ed-b723-3c35ae01089b","content":"#### Item2Vec","document_title":"Overview","h1":"Model Reference","h2":"Embedding models","h3":"","h4":"Item2Vec","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Embedding models\", \"Header 4\": \"Item2Vec\"}","created_at":"2026-01-30T13:46:43.827153","updated_at":"2026-01-30T13:46:43.827153"}
{"id":"ab9a4dae-18b7-5a1d-85e4-73cc2a27639a","content":"#### SASRec","document_title":"Overview","h1":"Model Reference","h2":"Embedding models","h3":"","h4":"SASRec","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Embedding models\", \"Header 4\": \"SASRec\"}","created_at":"2026-01-30T13:46:43.827157","updated_at":"2026-01-30T13:46:43.827157"}
{"id":"fc828c5e-cfed-5cfa-b8bb-f263e8660a8b","content":"#### BERT4Rec","document_title":"Overview","h1":"Model Reference","h2":"Embedding models","h3":"","h4":"BERT4Rec","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Embedding models\", \"Header 4\": \"BERT4Rec\"}","created_at":"2026-01-30T13:46:43.827161","updated_at":"2026-01-30T13:46:43.827161"}
{"id":"5caab303-8aa4-52dd-8d3b-28b13f08fe48","content":"#### GSASRec","document_title":"Overview","h1":"Model Reference","h2":"Embedding models","h3":"","h4":"GSASRec","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Embedding models\", \"Header 4\": \"GSASRec\"}","created_at":"2026-01-30T13:46:43.827164","updated_at":"2026-01-30T13:46:43.827164"}
{"id":"a3d0500f-ba62-5a6d-a585-7f546ff27cb3","content":"## HuggingFace embedding models (zero-shot)  \nHuggingFace models are used for generating embeddings in a zero-shot way. They can\nbe used for:  \n- **Vector search retrieval**: Semantic search, similarity lookup, and content\nfiltering using the embedding vector index.\n- **Downstream features**: As feature inputs to trained embedding models (e.g.,\ntwo-tower, beeFormer) and scoring models (e.g., LightGBM, Wide and Deep).  \nIn v2, HuggingFace embeddings are configured in your engine `index.embeddings` via\nthe `hugging_face` encoder. See\n[`Use a pre-trained model`](\/docs\/v2\/engine_reference\/engine-recipes#use-a-pre-trained-model).  \nIf you prefer embeddings trained on your data, you can also encode with trained\nmodels and use them in the same retrieval and scoring flows.","document_title":"Overview","h1":"Model Reference","h2":"HuggingFace embedding models (zero-shot)","h3":"","h4":"","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"HuggingFace embedding models (zero-shot)\"}","created_at":"2026-01-30T13:46:43.827168","updated_at":"2026-01-30T13:46:43.827168"}
{"id":"aceb2eee-91fb-51ba-b30a-aeb2857aa969","content":"#### Sentence Transformers","document_title":"Overview","h1":"Model Reference","h2":"HuggingFace embedding models (zero-shot)","h3":"","h4":"Sentence Transformers","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"HuggingFace embedding models (zero-shot)\", \"Header 4\": \"Sentence Transformers\"}","created_at":"2026-01-30T13:46:43.827171","updated_at":"2026-01-30T13:46:43.827171"}
{"id":"622dc530-7dc6-5aa1-99dc-cfffb1ab5f8c","content":"#### CLIP, OpenCLIP, SigLIP","document_title":"Overview","h1":"Model Reference","h2":"HuggingFace embedding models (zero-shot)","h3":"","h4":"CLIP, OpenCLIP, SigLIP","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"HuggingFace embedding models (zero-shot)\", \"Header 4\": \"CLIP, OpenCLIP, SigLIP\"}","created_at":"2026-01-30T13:46:43.827175","updated_at":"2026-01-30T13:46:43.827175"}
{"id":"123c82e4-59d2-537c-bc8e-3a931c59ef36","content":"#### Jina, Nomic, Marqo","document_title":"Overview","h1":"Model Reference","h2":"HuggingFace embedding models (zero-shot)","h3":"","h4":"Jina, Nomic, Marqo","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"HuggingFace embedding models (zero-shot)\", \"Header 4\": \"Jina, Nomic, Marqo\"}","created_at":"2026-01-30T13:46:43.827179","updated_at":"2026-01-30T13:46:43.827179"}
{"id":"6d5d63de-a766-5cb8-9a58-7b36152d561e","content":"#### E5, BGE, GTE families  \nYou will typically use these embeddings in two places:  \n- **Index configuration**: Create one or more embeddings in `index.embeddings`. See\n[`engine-recipes`](\/docs\/v2\/engine_reference\/engine-recipes) and\n[`Feature types`](\/docs\/v2\/engine_reference\/feature-types).\n- **Queries**: Retrieve with vector search (`text_search(mode='vector', ...)`) or\nsimilarity (`similarity(embedding_ref=..., ...)`). See\n[`Vector search retriever`](\/docs\/v2\/concepts\/queries#vector-search-retriever) and\n[`ShapedQL: text_search()`](\/docs\/v2\/query_reference\/shapedql#text_search).  \nCommon gotchas:  \n- **Modality matters**: Text encoders should be used with text fields, and CLIP-style\nencoders can be used with image URL fields. See\n[`Create embeddings for text and image features`](\/docs\/v2\/engine_reference\/engine-recipes#create-embeddings-for-text-and-image-features).\n- **Private models**: If the model is private, you will need a HuggingFace token at\ntrain time. See\n[`Invalid Huggingface model`](\/docs\/v2\/guides\/errors#invalid-huggingface-model).","document_title":"Overview","h1":"Model Reference","h2":"HuggingFace embedding models (zero-shot)","h3":"","h4":"E5, BGE, GTE families","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"HuggingFace embedding models (zero-shot)\", \"Header 4\": \"E5, BGE, GTE families\"}","created_at":"2026-01-30T13:46:43.827183","updated_at":"2026-01-30T13:46:43.827183"}
{"id":"6a1b350d-6041-5730-9f0d-ed3c18b1e12c","content":"### Supported HuggingFace model collections  \nShaped supports HuggingFace embedding models from:  \n- **Sentence Transformers**: Any compatible model from the HuggingFace\n[Sentence Transformers](https:\/\/huggingface.co\/models?other=sentence-transformers)\ncollection.\n- **CLIP**: Any compatible model from the HuggingFace\n[CLIP](https:\/\/huggingface.co\/models?other=clip) collection.","document_title":"Overview","h1":"Model Reference","h2":"HuggingFace embedding models (zero-shot)","h3":"Supported HuggingFace model collections","h4":"","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"HuggingFace embedding models (zero-shot)\", \"Header 3\": \"Supported HuggingFace model collections\"}","created_at":"2026-01-30T13:46:43.827187","updated_at":"2026-01-30T13:46:43.827187"}
{"id":"86a9defc-3862-5d2c-8188-adf18d3a603b","content":"### Common providers and architectures  \nIn addition to the collections above, users commonly use models from providers and\nfamilies like:  \n- **Jina AI**: Text and multimodal embedding models published on HuggingFace (e.g.,\n`jinaai\/jina-clip-v2`).\n- **Nomic AI**: Text embedding models published on HuggingFace (e.g., `nomic-ai\/*`).\n- **Marqo**: Domain-tuned multimodal retrieval\/embedding models published on\nHuggingFace (e.g., Marqo-published CLIP-style models).\n- **Other common embedding families**: E5, BGE, and GTE models, when published as\ncompatible Sentence Transformers or CLIP-style encoders.\n- **Other common multimodal architectures**: OpenCLIP and SigLIP variants, when\npublished as compatible CLIP-style encoders.","document_title":"Overview","h1":"Model Reference","h2":"HuggingFace embedding models (zero-shot)","h3":"Common providers and architectures","h4":"","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"HuggingFace embedding models (zero-shot)\", \"Header 3\": \"Common providers and architectures\"}","created_at":"2026-01-30T13:46:43.827191","updated_at":"2026-01-30T13:46:43.827191"}
{"id":"3b4a936f-a094-5e4b-a916-a73c369b8c75","content":"### Commonly used models  \nThese are common examples used in our v2 docs:  \n- `sentence-transformers\/all-MiniLM-L6-v2`\n- `sentence-transformers\/modernbert`\n- `Alibaba-NLP\/gte-modernbert-base`\n- `openai\/clip-vit-base-patch32`","document_title":"Overview","h1":"Model Reference","h2":"HuggingFace embedding models (zero-shot)","h3":"Commonly used models","h4":"","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"HuggingFace embedding models (zero-shot)\", \"Header 3\": \"Commonly used models\"}","created_at":"2026-01-30T13:46:43.827194","updated_at":"2026-01-30T13:46:43.827194"}
{"id":"62f3b814-05ff-56b5-a57a-9cf2f5c0cde6","content":"## Scoring models  \nScoring models are used to rank items by relevance or other predicted business\nmetrics (e.g., engagement, predicted click-through-rate, conversion).","document_title":"Overview","h1":"Model Reference","h2":"Scoring models","h3":"","h4":"","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Scoring models\"}","created_at":"2026-01-30T13:46:43.827198","updated_at":"2026-01-30T13:46:43.827198"}
{"id":"74a23c81-5bb1-5bdb-840f-6fcd814c868b","content":"### Zero-shot scoring and reranking  \nFor text-heavy search use cases, Shaped also supports zero-shot rerankers and\nrank fusion methods that work well on a small candidate set.  \nThese are score-stage expressions, so they can be used for both search and\nrecommendations anywhere `score(expression='...')` is supported.","document_title":"Overview","h1":"Model Reference","h2":"Scoring models","h3":"Zero-shot scoring and reranking","h4":"","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Scoring models\", \"Header 3\": \"Zero-shot scoring and reranking\"}","created_at":"2026-01-30T13:46:43.827201","updated_at":"2026-01-30T13:46:43.827201"}
{"id":"cf950991-1a07-5722-9690-b2afe91ce9f9","content":"#### ColBERTv2","document_title":"Overview","h1":"Model Reference","h2":"Scoring models","h3":"Zero-shot scoring and reranking","h4":"ColBERTv2","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Scoring models\", \"Header 3\": \"Zero-shot scoring and reranking\", \"Header 4\": \"ColBERTv2\"}","created_at":"2026-01-30T13:46:43.827205","updated_at":"2026-01-30T13:46:43.827205"}
{"id":"02e31a18-62ff-5565-8e7e-09e96379e9a3","content":"#### Cross-encoders","document_title":"Overview","h1":"Model Reference","h2":"Scoring models","h3":"Zero-shot scoring and reranking","h4":"Cross-encoders","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Scoring models\", \"Header 3\": \"Zero-shot scoring and reranking\", \"Header 4\": \"Cross-encoders\"}","created_at":"2026-01-30T13:46:43.827209","updated_at":"2026-01-30T13:46:43.827209"}
{"id":"1356848a-a24d-5e62-83aa-5008cc3f5371","content":"#### Reciprocal rank fusion (RRF)","document_title":"Overview","h1":"Model Reference","h2":"Scoring models","h3":"Zero-shot scoring and reranking","h4":"Reciprocal rank fusion (RRF)","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Scoring models\", \"Header 3\": \"Zero-shot scoring and reranking\", \"Header 4\": \"Reciprocal rank fusion (RRF)\"}","created_at":"2026-01-30T13:46:43.827213","updated_at":"2026-01-30T13:46:43.827213"}
{"id":"74b35ddf-7018-5c9b-adaa-3fbf12f94805","content":"#### Linear interpolation","document_title":"Overview","h1":"Model Reference","h2":"Scoring models","h3":"Zero-shot scoring and reranking","h4":"Linear interpolation","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Scoring models\", \"Header 3\": \"Zero-shot scoring and reranking\", \"Header 4\": \"Linear interpolation\"}","created_at":"2026-01-30T13:46:43.827217","updated_at":"2026-01-30T13:46:43.827217"}
{"id":"9a0f2c3e-a199-5f3d-9e20-70a662b3527d","content":"#### LightGBM","document_title":"Overview","h1":"Model Reference","h2":"Scoring models","h3":"Zero-shot scoring and reranking","h4":"LightGBM","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Scoring models\", \"Header 3\": \"Zero-shot scoring and reranking\", \"Header 4\": \"LightGBM\"}","created_at":"2026-01-30T13:46:43.827221","updated_at":"2026-01-30T13:46:43.827221"}
{"id":"e2c4fdce-dc0f-59c6-ab6d-0b8c4b99e7a2","content":"#### XGBoost","document_title":"Overview","h1":"Model Reference","h2":"Scoring models","h3":"Zero-shot scoring and reranking","h4":"XGBoost","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Scoring models\", \"Header 3\": \"Zero-shot scoring and reranking\", \"Header 4\": \"XGBoost\"}","created_at":"2026-01-30T13:46:43.827224","updated_at":"2026-01-30T13:46:43.827224"}
{"id":"026c2299-e645-5124-9b64-6b073332c755","content":"#### Wide & Deep","document_title":"Overview","h1":"Model Reference","h2":"Scoring models","h3":"Zero-shot scoring and reranking","h4":"Wide & Deep","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Scoring models\", \"Header 3\": \"Zero-shot scoring and reranking\", \"Header 4\": \"Wide & Deep\"}","created_at":"2026-01-30T13:46:43.827228","updated_at":"2026-01-30T13:46:43.827228"}
{"id":"6f8c2580-7f5a-5a32-a684-3737b7f98dae","content":"#### DeepFM","document_title":"Overview","h1":"Model Reference","h2":"Scoring models","h3":"Zero-shot scoring and reranking","h4":"DeepFM","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Scoring models\", \"Header 3\": \"Zero-shot scoring and reranking\", \"Header 4\": \"DeepFM\"}","created_at":"2026-01-30T13:46:43.827231","updated_at":"2026-01-30T13:46:43.827231"}
{"id":"636f9232-7e49-5293-8159-6e145ec10503","content":"#### Ngram","document_title":"Overview","h1":"Model Reference","h2":"Scoring models","h3":"Zero-shot scoring and reranking","h4":"Ngram","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Scoring models\", \"Header 3\": \"Zero-shot scoring and reranking\", \"Header 4\": \"Ngram\"}","created_at":"2026-01-30T13:46:43.827235","updated_at":"2026-01-30T13:46:43.827235"}
{"id":"22ccc4fb-da33-5a84-a2ae-2a8be7ccb347","content":"#### Rising Popularity","document_title":"Overview","h1":"Model Reference","h2":"Scoring models","h3":"Zero-shot scoring and reranking","h4":"Rising Popularity","file_path":"model_library\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/model_library\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Model Reference\", \"Header 2\": \"Scoring models\", \"Header 3\": \"Zero-shot scoring and reranking\", \"Header 4\": \"Rising Popularity\"}","created_at":"2026-01-30T13:46:43.827239","updated_at":"2026-01-30T13:46:43.827239"}
{"id":"e81760ba-d91e-53f0-b2f3-14cf89a44767","content":"# Connector Reference  \nYou can connect Shaped directly to your:  \n1. **Data warehouse** (e.g. [BigQuery](\/docs\/v2\/connectors\/bigquery), [Snowflake](\/docs\/v2\/connectors\/snowflake), [Redshift](\/docs\/v2\/connectors\/redshift))\n2. **Database** (e.g. [MySQL](\/docs\/v2\/connectors\/mysql), [Postgres](\/docs\/v2\/connectors\/postgresql))\n3. **Blob storage** (e.g. [S3](\/docs\/v2\/connectors\/s3), [GCS](\/docs\/v2\/connectors\/gcs))\n4. **Analytics applications** (e.g. [Segment](\/docs\/v2\/connectors\/segment), [Amplitude](\/docs\/v2\/connectors\/amplitude))  \nBelow is a list of the connectors we support. If you don't see your\ndata source listed, you can still stream data into Shaped by using our custom data\nsource [Shaped API](\/docs\/api), or contact us to request a new connector.","document_title":"Overview","h1":"Connector Reference","h2":"","h3":"","h4":"","file_path":"connectors\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Connector Reference\"}","created_at":"2026-01-30T13:46:43.827579","updated_at":"2026-01-30T13:46:43.827579"}
{"id":"f76d5945-d639-5efb-af8a-00918574f833","content":"## Supported Connectors","document_title":"Overview","h1":"Connector Reference","h2":"Supported Connectors","h3":"","h4":"","file_path":"connectors\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Connector Reference\", \"Header 2\": \"Supported Connectors\"}","created_at":"2026-01-30T13:46:43.827584","updated_at":"2026-01-30T13:46:43.827584"}
{"id":"b6b335c5-e355-52f0-8dd2-5eb7b6b395de","content":"## Connector Types  \nShaped supports both **real-time (streaming)** and **batch** connectors. Understanding\nthe difference is important for designing your data architecture:  \n- **Real-time connectors**: Stream data continuously (e.g., Segment, Kafka, Kinesis).\nData appears in Shaped within 30 seconds.\n- **Batch connectors**: Sync data on a schedule, typically every 15 minutes (e.g.,\nBigQuery, PostgreSQL, Snowflake).  \nFor more details on connector types, their use cases, and limitations, see the\n[Connector Types guide](\/docs\/v2\/data_reference\/connector-types).","document_title":"Overview","h1":"Connector Reference","h2":"Connector Types","h3":"","h4":"","file_path":"connectors\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Connector Reference\", \"Header 2\": \"Connector Types\"}","created_at":"2026-01-30T13:46:43.827588","updated_at":"2026-01-30T13:46:43.827588"}
{"id":"b29fcb39-f18c-5000-b564-9c3245dfb9f3","content":"## SQL Views  \nAfter you've connected your data sources you can write SQL queries to transform and\nselect the exact data you need for your recommendation and search system.  \n<\/img>","document_title":"Overview","h1":"Connector Reference","h2":"SQL Views","h3":"","h4":"","file_path":"connectors\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/connectors\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Connector Reference\", \"Header 2\": \"SQL Views\"}","created_at":"2026-01-30T13:46:43.827592","updated_at":"2026-01-30T13:46:43.827592"}
{"id":"cf37c935-c674-5a5a-bbfd-31911ade3edc","content":"# Search  \nThis page covers search queries for finding items based on text queries. For\nquery fundamentals, see [Query Basics](\/docs\/v2\/concepts\/queries).  \nSearch queries allow you to find items based on a text query. Shaped\nsupports multiple search modes, from simple keyword matching to advanced\npersonalized search.","document_title":"Search","h1":"Search","h2":"","h3":"","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\"}","created_at":"2026-01-30T13:46:43.828456","updated_at":"2026-01-30T13:46:43.828456"}
{"id":"f8c83916-d57c-527b-96fc-ac5c3a8808f3","content":"## Lexical search  \nLexical search finds items that contain the exact keywords from the query,\nwith optional fuzzy matching for typos. This is the simplest form of search\nand works well when users know exactly what they're looking for.","document_title":"Search","h1":"Search","h2":"Lexical search","h3":"","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Lexical search\"}","created_at":"2026-01-30T13:46:43.828460","updated_at":"2026-01-30T13:46:43.828460"}
{"id":"f5a17976-90b1-52aa-a55c-02503427bd3a","content":"### Prerequisites  \n1. Lexical search configured on searchable text fields\n2. A search query text","document_title":"Search","h1":"Search","h2":"Lexical search","h3":"Prerequisites","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Lexical search\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.828464","updated_at":"2026-01-30T13:46:43.828464"}
{"id":"38d48cb5-f750-5915-a8d6-2c5951426150","content":"### Query example","document_title":"Search","h1":"Search","h2":"Lexical search","h3":"Query example","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Lexical search\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.828467","updated_at":"2026-01-30T13:46:43.828467"}
{"id":"34dba5fb-7146-5906-bc4f-0c3c6c55d458","content":"### ShapedQL\n```sql\nSELECT *\nFROM text_search(query='$query_text', mode='lexical', fuzziness=2, limit=20)\n```","document_title":"Search","h1":"Search","h2":"Lexical search","h3":"ShapedQL","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Lexical search\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.828471","updated_at":"2026-01-30T13:46:43.828471"}
{"id":"8fb719d8-93c0-5394-b77a-8a0be3166406","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"lexical\", \"fuzziness_edit_distance\": 2 },\n\"limit\": 20\n}\n]\n},\n\"parameters\": {\n\"query_text\": \"Blue shirt\"\n}\n}\n```","document_title":"Search","h1":"Search","h2":"Lexical search","h3":"JSON","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Lexical search\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.828474","updated_at":"2026-01-30T13:46:43.828474"}
{"id":"947e0bcf-fc2d-5192-b8f4-f9318690765c","content":"## Semantic search  \nSemantic search uses vector embeddings to find items that are semantically\nsimilar to the query text, even if they don't contain the exact keywords.\nThis enables users to find items by meaning rather than exact word matches.","document_title":"Search","h1":"Search","h2":"Semantic search","h3":"","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Semantic search\"}","created_at":"2026-01-30T13:46:43.828477","updated_at":"2026-01-30T13:46:43.828477"}
{"id":"03ea7a9e-a05f-5b2b-ac19-854e0b3e1fe7","content":"### Prerequisites  \n1. An engine with a text embedding configured\n2. A search query text","document_title":"Search","h1":"Search","h2":"Semantic search","h3":"Prerequisites","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Semantic search\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.828480","updated_at":"2026-01-30T13:46:43.828480"}
{"id":"a573247f-9950-5b68-94ef-62004ec59f22","content":"### Query example","document_title":"Search","h1":"Search","h2":"Semantic search","h3":"Query example","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Semantic search\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.828483","updated_at":"2026-01-30T13:46:43.828483"}
{"id":"543c0ecb-7678-5c52-8cb0-f9765db01e53","content":"### ShapedQL\n```sql\nSELECT *\nFROM text_search(\nquery='$query_text',\nmode='vector',\ntext_embedding_ref='text_embedding',\nlimit=20\n)\n```","document_title":"Search","h1":"Search","h2":"Semantic search","h3":"ShapedQL","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Semantic search\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.828487","updated_at":"2026-01-30T13:46:43.828487"}
{"id":"0a65af3e-b196-5e6a-a8cf-b8470a2c2ad1","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"vector\", \"text_embedding_ref\": \"text_embedding\" },\n\"limit\": 20\n}\n]\n},\n\"parameters\": {\n\"query_text\": \"Blue shirt\"\n}\n}\n```","document_title":"Search","h1":"Search","h2":"Semantic search","h3":"JSON","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Semantic search\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.828490","updated_at":"2026-01-30T13:46:43.828490"}
{"id":"59ebaf09-ad82-5b3c-97d3-df041d930867","content":"## Text reranking  \nFor text-heavy search, you can retrieve candidates (lexical, vector, or hybrid),\nthen rerank with a heavier-weight scoring expression.  \nCommon zero-shot rerankers include `colbert_v2()` and `cross_encoder()`. See the\nreference docs in [`ShapedQL`](\/docs\/v2\/query_reference\/shapedql#text-reranking-functions).  \nExample (hybrid retrieval + ColBERTv2 reranking):  \n```sql\nSELECT *\nFROM text_search(\nquery='$params.query',\nmode='vector',\ntext_embedding_ref='text_embedding',\nlimit=50,\nname='vector_search'\n),\ntext_search(\nquery='$params.query',\nmode='lexical',\nfuzziness=2,\nlimit=50,\nname='lexical_search'\n)\nORDER BY score(expression='colbert_v2(item, $params.query)')\nLIMIT 20\n```","document_title":"Search","h1":"Search","h2":"Text reranking","h3":"","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Text reranking\"}","created_at":"2026-01-30T13:46:43.828493","updated_at":"2026-01-30T13:46:43.828493"}
{"id":"b0302ca3-79f8-56e6-b65b-117fe0ac9094","content":"## Hybrid search  \nHybrid search combines semantic and lexical search to return a blended list\nof results. This balances semantic understanding with exact keyword matching,\nproviding better recall than either approach alone.","document_title":"Search","h1":"Search","h2":"Hybrid search","h3":"","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Hybrid search\"}","created_at":"2026-01-30T13:46:43.828496","updated_at":"2026-01-30T13:46:43.828496"}
{"id":"65e6fc48-4bf6-50eb-aaa0-0a4bb3845c91","content":"### Prerequisites  \n1. An engine with a text embedding configured for vector search\n2. Lexical search configured on searchable text fields\n3. A search query text","document_title":"Search","h1":"Search","h2":"Hybrid search","h3":"Prerequisites","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Hybrid search\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.828499","updated_at":"2026-01-30T13:46:43.828499"}
{"id":"ff36574d-5863-5eb5-9c9d-eec6ca38a96a","content":"### Query example  \nThis example retrieves candidates from two sources (vector search and lexical\nsearch), then returns the blended results:","document_title":"Search","h1":"Search","h2":"Hybrid search","h3":"Query example","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Hybrid search\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.828503","updated_at":"2026-01-30T13:46:43.828503"}
{"id":"7d9ecb4a-a64d-52d2-acfc-d355d4d99e45","content":"### ShapedQL\n```sql\nSELECT *\nFROM text_search(\nquery='$query_text',\nmode='vector',\ntext_embedding_ref='text_embedding',\nlimit=50\n),\ntext_search(\nquery='$query_text',\nmode='lexical',\nfuzziness=2,\nlimit=50\n)\nLIMIT 20\n```","document_title":"Search","h1":"Search","h2":"Hybrid search","h3":"ShapedQL","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Hybrid search\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.828506","updated_at":"2026-01-30T13:46:43.828506"}
{"id":"d8e13e00-fb57-536b-a984-7811deb8d8a4","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"vector\", \"text_embedding_ref\": \"text_embedding\" },\n\"limit\": 50\n},\n{\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"lexical\", \"fuzziness_edit_distance\": 2 },\n\"limit\": 50\n}\n],\n\"limit\": 20\n},\n\"parameters\": {\n\"query_text\": \"Blue shirt\"\n}\n}\n```","document_title":"Search","h1":"Search","h2":"Hybrid search","h3":"JSON","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Hybrid search\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.828509","updated_at":"2026-01-30T13:46:43.828509"}
{"id":"ad5510ad-ce2e-50cd-9679-3591670f726e","content":"### Tuning the blend  \nYou can adjust the `limit` on each retriever to control the balance between\nsemantic and lexical results. A higher limit on one retriever will give it\nmore influence on the final results.","document_title":"Search","h1":"Search","h2":"Hybrid search","h3":"Tuning the blend","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Hybrid search\", \"Header 3\": \"Tuning the blend\"}","created_at":"2026-01-30T13:46:43.828512","updated_at":"2026-01-30T13:46:43.828512"}
{"id":"d0999635-5040-5cc8-ad85-b692bbd10f93","content":"## Personalized hybrid search  \nPersonalized hybrid search adds a scoring stage that re-ranks the blended\nsearch results based on user preferences. This is useful when you want search\nresults that are both relevant to the query and personalized to the user's\ntaste.","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\"}","created_at":"2026-01-30T13:46:43.828515","updated_at":"2026-01-30T13:46:43.828515"}
{"id":"d7a87a80-83e9-59d3-8265-4b7e7b2dabe5","content":"### Prerequisites  \n1. An engine with a text embedding configured for vector search\n2. Lexical search configured on searchable text fields\n3. A trained scoring model (e.g., `click_through_rate`, `conversion_rate`)\n4. A user ID to personalize for\n5. A search query text","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"Prerequisites","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.828519","updated_at":"2026-01-30T13:46:43.828519"}
{"id":"1e9c5f5e-e79d-558c-b688-e1a0db92a11f","content":"### Query example  \nThis example retrieves candidates from both vector and lexical search, then\nscores them using a personalization model:","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"Query example","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.828522","updated_at":"2026-01-30T13:46:43.828522"}
{"id":"885882ea-a658-5e21-817d-8adf1a7d9bf6","content":"### ShapedQL\n```sql\nSELECT *\nFROM text_search(query='$query_text', mode='vector',\ntext_embedding_ref='text_embedding', limit=50),\ntext_search(query='$query_text', mode='lexical', fuzziness=2, limit=50)\nORDER BY score(expression='click_through_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"ShapedQL","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.828525","updated_at":"2026-01-30T13:46:43.828525"}
{"id":"69b92f25-bfb1-50a6-8f35-4c2963b2cfcf","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"vector\", \"text_embedding_ref\": \"text_embedding\" },\n\"limit\": 50\n},\n{\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"lexical\", \"fuzziness_edit_distance\": 2 },\n\"limit\": 50\n}\n],\n\"score\": {\n\"value_model\": \"click_through_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"query_text\": \"Blue shirt\",\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"JSON","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.828529","updated_at":"2026-01-30T13:46:43.828529"}
{"id":"d916edc9-1665-570c-bbfc-e47e6a19651a","content":"### Combining multiple scoring models  \nYou can combine multiple scoring models using a weighted expression:","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"Combining multiple scoring models","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"Combining multiple scoring models\"}","created_at":"2026-01-30T13:46:43.828532","updated_at":"2026-01-30T13:46:43.828532"}
{"id":"bd411a46-3651-5661-962a-d527fe860933","content":"### ShapedQL\n```sql\nSELECT *\nFROM text_search(query='$query_text', mode='vector',\ntext_embedding_ref='text_embedding', limit=50),\ntext_search(query='$query_text', mode='lexical', fuzziness=2, limit=50)\nORDER BY score(expression='0.7 * click_through_rate + 0.3 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"ShapedQL","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.828535","updated_at":"2026-01-30T13:46:43.828535"}
{"id":"c49144c4-ad0c-5441-8a29-44ce79b89ba3","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"vector\", \"text_embedding_ref\": \"text_embedding\" },\n\"limit\": 50\n},\n{\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"lexical\", \"fuzziness_edit_distance\": 2 },\n\"limit\": 50\n}\n],\n\"score\": {\n\"value_model\": \"0.7 * click_through_rate + 0.3 * conversion_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"query_text\": \"Blue shirt\",\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"JSON","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.828538","updated_at":"2026-01-30T13:46:43.828538"}
{"id":"20f9311f-6b3d-5dbd-aebe-05b2596c1ea0","content":"### Blending retrieval scores with models  \nCombine retrieval scores from multiple search retrievers with model predictions\nfor more nuanced ranking:","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"Blending retrieval scores with models","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"Blending retrieval scores with models\"}","created_at":"2026-01-30T13:46:43.828541","updated_at":"2026-01-30T13:46:43.828541"}
{"id":"54f05c5a-7832-5383-8d19-1cd9513b661e","content":"### ShapedQL\n```sql\nSELECT *\nFROM text_search(query='$query_text', mode='vector',\ntext_embedding_ref='text_embedding', limit=50,\nname='vector_search'),\ntext_search(query='$query_text', mode='lexical', fuzziness=2, limit=50,\nname='lexical_search')\nORDER BY score(expression='0.5 * retrieval.vector_search + 0.3 * retrieval.lexical_search + 0.2 * click_through_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"ShapedQL","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.828545","updated_at":"2026-01-30T13:46:43.828545"}
{"id":"af575b88-f3cf-5ae1-b342-6e429070ffcb","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"name\": \"vector_search\",\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"vector\", \"text_embedding_ref\": \"text_embedding\" },\n\"limit\": 50\n},\n{\n\"name\": \"lexical_search\",\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"lexical\", \"fuzziness_edit_distance\": 2 },\n\"limit\": 50\n}\n],\n\"score\": {\n\"value_model\": \"0.5 * retrieval.vector_search + 0.3 * retrieval.lexical_search + 0.2 * click_through_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"query_text\": \"Blue shirt\",\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"JSON","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.828548","updated_at":"2026-01-30T13:46:43.828548"}
{"id":"bc9e6100-6e85-52bd-838e-fa1f29b0977e","content":"### Using text encodings for semantic similarity  \nScore search results using semantic similarity between user preferences and\nitem text encodings:","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"Using text encodings for semantic similarity","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"Using text encodings for semantic similarity\"}","created_at":"2026-01-30T13:46:43.828551","updated_at":"2026-01-30T13:46:43.828551"}
{"id":"ca1cc602-e7a7-56e1-b78e-b61c5d08cb22","content":"### ShapedQL\n```sql\nSELECT *\nFROM text_search(query='$query_text', mode='vector',\ntext_embedding_ref='text_embedding', limit=50)\nORDER BY score(expression='0.7 * click_through_rate + 0.3 * cosine_similarity(text_encoding(user, embedding_ref=''text_embedding''), text_encoding(item, embedding_ref=''text_embedding''))', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"ShapedQL","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.828554","updated_at":"2026-01-30T13:46:43.828554"}
{"id":"a66f4893-a42d-553a-a031-262d431cc988","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"vector\", \"text_embedding_ref\": \"text_embedding\" },\n\"limit\": 50\n}\n],\n\"score\": {\n\"value_model\": \"0.7 * click_through_rate + 0.3 * cosine_similarity(text_encoding(user, embedding_ref='text_embedding'), text_encoding(item, embedding_ref='text_embedding'))\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"query_text\": \"Blue shirt\",\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"JSON","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.828557","updated_at":"2026-01-30T13:46:43.828557"}
{"id":"3ea2bf4d-1073-598d-87fc-56b83b9bf7c8","content":"### Incorporating item attributes in search ranking  \nBoost or penalize search results based on item attributes like price, rating,\nor other metadata:","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"Incorporating item attributes in search ranking","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"Incorporating item attributes in search ranking\"}","created_at":"2026-01-30T13:46:43.828560","updated_at":"2026-01-30T13:46:43.828560"}
{"id":"f1dc8914-8b5a-5972-8399-2100387920ac","content":"### ShapedQL\n```sql\nSELECT *\nFROM text_search(query='$query_text', mode='vector',\ntext_embedding_ref='text_embedding', limit=50),\ntext_search(query='$query_text', mode='lexical', fuzziness=2, limit=50)\nORDER BY score(expression='0.6 * click_through_rate - 0.05 * item.price + 0.2 * item.rating + 0.15 * item.review_count', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"ShapedQL","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.828564","updated_at":"2026-01-30T13:46:43.828564"}
{"id":"b9eeb90e-0aab-5f8c-aa99-04dbe53267b5","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"vector\", \"text_embedding_ref\": \"text_embedding\" },\n\"limit\": 50\n},\n{\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"lexical\", \"fuzziness_edit_distance\": 2 },\n\"limit\": 50\n}\n],\n\"score\": {\n\"value_model\": \"0.6 * click_through_rate - 0.05 * item.price + 0.2 * item.rating + 0.15 * item.review_count\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"query_text\": \"Blue shirt\",\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Search","h1":"Search","h2":"Personalized hybrid search","h3":"JSON","h4":"","file_path":"query_reference\/search.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/search.mdx","chunk_metadata":"{\"Header 1\": \"Search\", \"Header 2\": \"Personalized hybrid search\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.828567","updated_at":"2026-01-30T13:46:43.828567"}
{"id":"5eda4412-d60b-584c-9739-5130385071b7","content":"# Similar items  \nThis page covers similar item queries for finding items closest to a given item.\nFor query fundamentals, see [Query Basics](\/docs\/v2\/concepts\/queries).  \nA similar item query returns the items which are closest to a given item. This\nis a retrieval operation that uses similarity search.  \nYou can do item similarity in two ways:  \n1. **Content similarity**, which finds items with similar attributes (e.g., text\ndescriptions, images). The intuition is: \"Items that have similar\nattributes to this item.\"\n2. **Collaborative similarity**, which finds items that are frequently\ninteracted with by the same users. The intuition is: \"People who like this\nalso like\" - items that are co-interacted with by similar users.","document_title":"Similar items","h1":"Similar items","h2":"","h3":"","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\"}","created_at":"2026-01-30T13:46:43.829212","updated_at":"2026-01-30T13:46:43.829212"}
{"id":"13f1a34e-a8e7-5dd2-af38-3e222eaa245c","content":"## Content similarity  \nContent similarity finds items that share similar attributes, such as text\ndescriptions, categories, tags, or other metadata. This is useful when you\nwant to find items that are objectively similar in their characteristics.  \n**Intuition**: \"Items that have similar attributes to this item.\"","document_title":"Similar items","h1":"Similar items","h2":"Content similarity","h3":"","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Content similarity\"}","created_at":"2026-01-30T13:46:43.829216","updated_at":"2026-01-30T13:46:43.829216"}
{"id":"6689f2bd-d7ef-58d1-a660-e30531011a44","content":"### Prerequisites  \n1. An engine with a content-based embedding (e.g., text embedding) configured\n2. An item to find similar items for","document_title":"Similar items","h1":"Similar items","h2":"Content similarity","h3":"Prerequisites","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Content similarity\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.829220","updated_at":"2026-01-30T13:46:43.829220"}
{"id":"330b5beb-5cdd-51c9-be88-2cd4dbfc7fa8","content":"### Query example  \nTo find similar items based on content\/attribute similarity, use the\n`similarity` retrieve type with attribute pooling:","document_title":"Similar items","h1":"Similar items","h2":"Content similarity","h3":"Query example","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Content similarity\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.829223","updated_at":"2026-01-30T13:46:43.829223"}
{"id":"87cd0b82-e523-5777-9024-7082bdb2f8fa","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='text_embedding',\nencoder='item_attribute_pooling',\ninput_item_id='$item_id',\nlimit=20)\n```","document_title":"Similar items","h1":"Similar items","h2":"Content similarity","h3":"ShapedQL","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Content similarity\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.829226","updated_at":"2026-01-30T13:46:43.829226"}
{"id":"4b4b6124-d982-5d20-b58b-775e9c06d5cf","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"similarity\",\n\"embedding_ref\": \"text_embedding\",\n\"query_encoder\": {\n\"type\": \"item_attribute_pooling\",\n\"input_item_id\": \"$parameters.item_id\"\n},\n\"limit\": 20\n}\n]\n},\n\"parameters\": {\n\"item_id\": \"item123\"\n}\n}\n```","document_title":"Similar items","h1":"Similar items","h2":"Content similarity","h3":"JSON","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Content similarity\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.829230","updated_at":"2026-01-30T13:46:43.829230"}
{"id":"57db7e91-d38b-5cfd-960d-0bcd49a64973","content":"### Content similarity with model scoring  \nCombine content similarity with a personalization model and text encoding\nsimilarity for more nuanced ranking:","document_title":"Similar items","h1":"Similar items","h2":"Content similarity","h3":"Content similarity with model scoring","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Content similarity\", \"Header 3\": \"Content similarity with model scoring\"}","created_at":"2026-01-30T13:46:43.829234","updated_at":"2026-01-30T13:46:43.829234"}
{"id":"75b8af2c-9267-50b2-af7e-16167e946b50","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='text_embedding',\nencoder='item_attribute_pooling',\ninput_item_id='$item_id', limit=50)\nORDER BY score(expression='0.7 * click_through_rate + 0.3 * cosine_similarity(text_encoding(item, embedding_ref=''text_embedding''), text_encoding(user, embedding_ref=''text_embedding''))', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Similar items","h1":"Similar items","h2":"Content similarity","h3":"ShapedQL","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Content similarity\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.829238","updated_at":"2026-01-30T13:46:43.829238"}
{"id":"a7334db3-b4bf-57b2-b558-a1e9fdcdd807","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"similarity\",\n\"embedding_ref\": \"text_embedding\",\n\"query_encoder\": {\n\"type\": \"item_attribute_pooling\",\n\"input_item_id\": \"$parameters.item_id\"\n},\n\"limit\": 50\n}\n],\n\"score\": {\n\"value_model\": \"0.7 * click_through_rate + 0.3 * cosine_similarity(text_encoding(item, embedding_ref='text_embedding'), text_encoding(user, embedding_ref='text_embedding'))\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"item_id\": \"item123\",\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Similar items","h1":"Similar items","h2":"Content similarity","h3":"JSON","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Content similarity\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.829241","updated_at":"2026-01-30T13:46:43.829241"}
{"id":"5075432f-ba32-5899-b921-85dde0db30fa","content":"## Collaborative similarity  \nCollaborative similarity finds items that are frequently interacted with by the\nsame users, based on interaction patterns rather than item attributes. This\ncaptures the \"wisdom of the crowd\" - if users who liked item A also liked item\nB, then A and B are similar.  \n**Intuition**: \"People who like this also like\" - items that are\nco-interacted with by similar users.","document_title":"Similar items","h1":"Similar items","h2":"Collaborative similarity","h3":"","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Collaborative similarity\"}","created_at":"2026-01-30T13:46:43.829244","updated_at":"2026-01-30T13:46:43.829244"}
{"id":"a6cc51b8-bdd6-5b47-81ea-3669f5e0e241","content":"### Prerequisites  \n1. An engine with a trained collaborative embedding (e.g., ALS) configured\n2. An item to find similar items for","document_title":"Similar items","h1":"Similar items","h2":"Collaborative similarity","h3":"Prerequisites","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Collaborative similarity\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.829248","updated_at":"2026-01-30T13:46:43.829248"}
{"id":"637ce32c-b4bf-5faf-971b-3a437342d8bd","content":"### Query example  \nTo find similar items based on collaborative filtering (interaction patterns),\nuse the `similarity` retrieve type with a precomputed item embedding:","document_title":"Similar items","h1":"Similar items","h2":"Collaborative similarity","h3":"Query example","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Collaborative similarity\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.829251","updated_at":"2026-01-30T13:46:43.829251"}
{"id":"44b93bb9-30ad-56c6-9723-a774ec5bf5d8","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='als_embedding',\nencoder='precomputed_item',\ninput_item_id='$item_id',\nlimit=20)\n```","document_title":"Similar items","h1":"Similar items","h2":"Collaborative similarity","h3":"ShapedQL","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Collaborative similarity\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.829254","updated_at":"2026-01-30T13:46:43.829254"}
{"id":"4eb3eb99-cb8b-5830-b9b2-10ce3d18ac8a","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"similarity\",\n\"embedding_ref\": \"als_embedding\",\n\"query_encoder\": {\n\"type\": \"precomputed_item\",\n\"input_item_id\": \"$parameters.item_id\"\n},\n\"limit\": 20\n}\n]\n},\n\"parameters\": {\n\"item_id\": \"item123\"\n}\n}\n```","document_title":"Similar items","h1":"Similar items","h2":"Collaborative similarity","h3":"JSON","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Collaborative similarity\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.829257","updated_at":"2026-01-30T13:46:43.829257"}
{"id":"7906d713-4697-5e00-a220-295ae3170d6c","content":"### Collaborative similarity with model scoring  \nCombine collaborative similarity with a personalization model to rank similar\nitems by predicted user engagement:","document_title":"Similar items","h1":"Similar items","h2":"Collaborative similarity","h3":"Collaborative similarity with model scoring","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Collaborative similarity\", \"Header 3\": \"Collaborative similarity with model scoring\"}","created_at":"2026-01-30T13:46:43.829260","updated_at":"2026-01-30T13:46:43.829260"}
{"id":"f7108a4d-115e-50a1-bef5-ba68ed6a9237","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='als_embedding',\nencoder='precomputed_item',\ninput_item_id='$item_id', limit=50)\nORDER BY score(expression='0.6 * click_through_rate + 0.4 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Similar items","h1":"Similar items","h2":"Collaborative similarity","h3":"ShapedQL","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Collaborative similarity\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.829264","updated_at":"2026-01-30T13:46:43.829264"}
{"id":"68e1ea44-a4db-5f98-b09f-f7e4e9305c5b","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"similarity\",\n\"embedding_ref\": \"als_embedding\",\n\"query_encoder\": {\n\"type\": \"precomputed_item\",\n\"input_item_id\": \"$parameters.item_id\"\n},\n\"limit\": 50\n}\n],\n\"score\": {\n\"value_model\": \"0.6 * click_through_rate + 0.4 * conversion_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"item_id\": \"item123\",\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Similar items","h1":"Similar items","h2":"Collaborative similarity","h3":"JSON","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Collaborative similarity\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.829267","updated_at":"2026-01-30T13:46:43.829267"}
{"id":"81c96192-f6be-55d6-a21f-82155999f138","content":"## Similar items with multi-objective scoring  \nCombine multiple similarity signals and scoring models to find items that are\nboth similar and likely to engage the user. This approach balances content\nsimilarity, collaborative similarity, and personalization.","document_title":"Similar items","h1":"Similar items","h2":"Similar items with multi-objective scoring","h3":"","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Similar items with multi-objective scoring\"}","created_at":"2026-01-30T13:46:43.829270","updated_at":"2026-01-30T13:46:43.829270"}
{"id":"b927506c-3bc7-5631-9551-1562d50e7e35","content":"### Prerequisites  \n1. An engine with both content and collaborative embeddings configured\n2. Multiple trained scoring models (e.g., `click_through_rate`, `conversion_rate`)\n3. An item to find similar items for\n4. Optionally, a user ID for personalization","document_title":"Similar items","h1":"Similar items","h2":"Similar items with multi-objective scoring","h3":"Prerequisites","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Similar items with multi-objective scoring\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.829273","updated_at":"2026-01-30T13:46:43.829273"}
{"id":"8b2ee880-0a7f-52d2-a60f-e4f03977349e","content":"### Query example  \nRetrieve candidates from multiple similarity sources and score using an\nensemble:","document_title":"Similar items","h1":"Similar items","h2":"Similar items with multi-objective scoring","h3":"Query example","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Similar items with multi-objective scoring\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.829277","updated_at":"2026-01-30T13:46:43.829277"}
{"id":"8c6349a3-76b7-5344-8de6-c7786ade7e4e","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='text_embedding',\nencoder='item_attribute_pooling',\ninput_item_id='$item_id', limit=50, name='content'),\nsimilarity(embedding_ref='als_embedding',\nencoder='precomputed_item',\ninput_item_id='$item_id', limit=50, name='collab')\nORDER BY score(expression='0.4 * retrieval.content + 0.3 * retrieval.collab + 0.2 * click_through_rate + 0.1 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Similar items","h1":"Similar items","h2":"Similar items with multi-objective scoring","h3":"ShapedQL","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Similar items with multi-objective scoring\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.829280","updated_at":"2026-01-30T13:46:43.829280"}
{"id":"b9c49e21-150e-59e1-b46e-e5aa85d99936","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"name\": \"content\",\n\"type\": \"similarity\",\n\"embedding_ref\": \"text_embedding\",\n\"query_encoder\": {\n\"type\": \"item_attribute_pooling\",\n\"input_item_id\": \"$parameters.item_id\"\n},\n\"limit\": 50\n},\n{\n\"name\": \"collab\",\n\"type\": \"similarity\",\n\"embedding_ref\": \"als_embedding\",\n\"query_encoder\": {\n\"type\": \"precomputed_item\",\n\"input_item_id\": \"$parameters.item_id\"\n},\n\"limit\": 50\n}\n],\n\"score\": {\n\"value_model\": \"0.4 * retrieval.content + 0.3 * retrieval.collab + 0.2 * click_through_rate + 0.1 * conversion_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"item_id\": \"item123\",\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Similar items","h1":"Similar items","h2":"Similar items with multi-objective scoring","h3":"JSON","h4":"","file_path":"query_reference\/similar_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_items.mdx","chunk_metadata":"{\"Header 1\": \"Similar items\", \"Header 2\": \"Similar items with multi-objective scoring\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.829283","updated_at":"2026-01-30T13:46:43.829283"}
{"id":"de856735-f1d7-56ec-a136-cb0801dd6f13","content":"# Faceted filtering and category pages  \nThis page covers faceted filtering queries for ranking items within filtered\nsets, such as category pages or multi-faceted search results. For query\nfundamentals, see [Query Basics](\/docs\/v2\/concepts\/queries).  \nFaceted filtering allows you to filter items by attributes (category, price\nrange, brand, etc.) and then rank the filtered results. This is essential for\nbuilding category pages, filtered product listings, and faceted search\ninterfaces where users can apply multiple filters and still get personalized,\nwell-ranked results.","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"","h3":"","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\"}","created_at":"2026-01-30T13:46:43.830123","updated_at":"2026-01-30T13:46:43.830123"}
{"id":"a6848b4f-db28-5c95-9084-115c7fc39479","content":"## Basic category filtering  \nFilter items by a single category and rank them by popularity or other\nattributes.","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Basic category filtering","h3":"","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Basic category filtering\"}","created_at":"2026-01-30T13:46:43.830128","updated_at":"2026-01-30T13:46:43.830128"}
{"id":"5a9b1aa8-71b3-518e-8d70-67cf16bca678","content":"### Prerequisites  \n1. An engine with item data configured\n2. Item attributes to filter on (e.g., `category`, `brand`, `price`)","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Basic category filtering","h3":"Prerequisites","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Basic category filtering\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.830133","updated_at":"2026-01-30T13:46:43.830133"}
{"id":"aa501297-cbe2-5e69-bdfc-5e0c1e0be6e1","content":"### Query example  \nFilter items by category and rank by popularity:","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Basic category filtering","h3":"Query example","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Basic category filtering\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.830137","updated_at":"2026-01-30T13:46:43.830137"}
{"id":"92179292-129b-5e70-92b3-048c7d8491e2","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_popular_rank ASC', limit=100)\nWHERE category = 'Electronics'\nLIMIT 20\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Basic category filtering","h3":"ShapedQL","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Basic category filtering\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.830141","updated_at":"2026-01-30T13:46:43.830141"}
{"id":"d809d175-c14e-5e01-9386-7e5a807f3e5b","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"_derived_popular_rank\", \"ascending\": true }],\n\"limit\": 100,\n\"where\": \"category = 'Electronics'\"\n}\n],\n\"limit\": 20\n}\n}\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Basic category filtering","h3":"JSON","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Basic category filtering\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.830145","updated_at":"2026-01-30T13:46:43.830145"}
{"id":"1c53aad2-9864-5a47-b48d-e979e8aec060","content":"## Personalized category pages  \nCombine category filtering with personalization models to show users the most\nrelevant items within a category based on their preferences.","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Personalized category pages","h3":"","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Personalized category pages\"}","created_at":"2026-01-30T13:46:43.830149","updated_at":"2026-01-30T13:46:43.830149"}
{"id":"b7f3c405-03f5-575b-a6b5-9e881d78ad79","content":"### Prerequisites  \n1. An engine with item data configured\n2. A trained scoring model (e.g., `click_through_rate`, `conversion_rate`)\n3. A `user_id` to personalize for\n4. Item attributes to filter on","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Personalized category pages","h3":"Prerequisites","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Personalized category pages\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.830152","updated_at":"2026-01-30T13:46:43.830152"}
{"id":"ba992bc6-ac05-5959-9b67-9347100f22ae","content":"### Query example  \nFilter by category and rank using a personalization model:","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Personalized category pages","h3":"Query example","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Personalized category pages\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.830156","updated_at":"2026-01-30T13:46:43.830156"}
{"id":"f293a5da-2e11-5cd3-bb74-2043bdd6dcac","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nWHERE category = '$category'\nORDER BY score(expression='click_through_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Personalized category pages","h3":"ShapedQL","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Personalized category pages\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.830160","updated_at":"2026-01-30T13:46:43.830160"}
{"id":"72fd307c-ccc5-5237-8e71-122691231de8","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"_derived_popular_rank\", \"ascending\": true }],\n\"limit\": 1000,\n\"where\": \"category = '$parameters.category'\"\n}\n],\n\"score\": {\n\"value_model\": \"click_through_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"category\": \"Electronics\",\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Personalized category pages","h3":"JSON","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Personalized category pages\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.830164","updated_at":"2026-01-30T13:46:43.830164"}
{"id":"3d87b17f-df43-55fe-9fd4-e65f15fec124","content":"### Combining multiple models in category pages  \nUse an ensemble of models to balance different signals when ranking within a\ncategory:","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Personalized category pages","h3":"Combining multiple models in category pages","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Personalized category pages\", \"Header 3\": \"Combining multiple models in category pages\"}","created_at":"2026-01-30T13:46:43.830167","updated_at":"2026-01-30T13:46:43.830167"}
{"id":"c16d26a7-493e-5bf0-8df7-e3e862848c31","content":"## Multi-faceted filtering  \nApply multiple filters simultaneously (e.g., category + price range + brand)\nand rank the results. This is useful for building sophisticated filtering\ninterfaces where users can narrow down results with multiple criteria.","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Multi-faceted filtering","h3":"","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Multi-faceted filtering\"}","created_at":"2026-01-30T13:46:43.830171","updated_at":"2026-01-30T13:46:43.830171"}
{"id":"16ec2b3b-d277-5aa4-8d8a-3e3eb7c4547b","content":"### Prerequisites  \n1. An engine with item data configured\n2. Multiple item attributes to filter on\n3. Optionally, a trained scoring model for personalization","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Multi-faceted filtering","h3":"Prerequisites","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Multi-faceted filtering\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.830175","updated_at":"2026-01-30T13:46:43.830175"}
{"id":"3c6b234d-6a30-5fb2-8249-6bdaaa4b47b8","content":"### Query example  \nFilter by multiple attributes and rank by popularity:","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Multi-faceted filtering","h3":"Query example","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Multi-faceted filtering\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.830179","updated_at":"2026-01-30T13:46:43.830179"}
{"id":"22b24b85-86e5-59ad-a8e3-5940fce6888c","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nWHERE category = '$category'\nAND price >= $min_price\nAND price <= $max_price\nAND brand = '$brand'\nLIMIT 20\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Multi-faceted filtering","h3":"ShapedQL","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Multi-faceted filtering\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.830182","updated_at":"2026-01-30T13:46:43.830182"}
{"id":"ff096412-572a-5b31-85f2-2ccd9a6cfceb","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"_derived_popular_rank\", \"ascending\": true }],\n\"limit\": 1000,\n\"where\": \"category = '$parameters.category' AND price >= $parameters.min_price AND price <= $parameters.max_price AND brand = '$parameters.brand'\"\n}\n],\n\"limit\": 20\n},\n\"parameters\": {\n\"category\": \"Electronics\",\n\"min_price\": 50,\n\"max_price\": 200,\n\"brand\": \"Acme\"\n}\n}\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Multi-faceted filtering","h3":"JSON","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Multi-faceted filtering\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.830186","updated_at":"2026-01-30T13:46:43.830186"}
{"id":"7339c3a5-a07b-5c37-8b26-8b752d2fef17","content":"### Personalized multi-faceted filtering  \nCombine multiple filters with personalization to show users the most relevant\nitems matching their filter criteria:","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Multi-faceted filtering","h3":"Personalized multi-faceted filtering","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Multi-faceted filtering\", \"Header 3\": \"Personalized multi-faceted filtering\"}","created_at":"2026-01-30T13:46:43.830190","updated_at":"2026-01-30T13:46:43.830190"}
{"id":"f894e250-0196-514e-878f-8c2d0151b6d2","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nWHERE category = '$category'\nAND price >= $min_price\nAND price <= $max_price\nORDER BY score(expression='click_through_rate + 0.1 * user.age - 0.05 * item.price + 0.2 * item.rating', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Multi-faceted filtering","h3":"ShapedQL","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Multi-faceted filtering\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.830194","updated_at":"2026-01-30T13:46:43.830194"}
{"id":"32bb7fe5-add9-5723-9af1-c8ef024ed592","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"_derived_popular_rank\", \"ascending\": true }],\n\"limit\": 1000,\n\"where\": \"category = '$parameters.category' AND price >= $parameters.min_price AND price <= $parameters.max_price\"\n}\n],\n\"score\": {\n\"value_model\": \"click_through_rate + 0.1 * user.age - 0.05 * item.price + 0.2 * item.rating\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"category\": \"Electronics\",\n\"min_price\": 50,\n\"max_price\": 200,\n\"user_id\": \"user123\"\n}\n}\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Multi-faceted filtering","h3":"JSON","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Multi-faceted filtering\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.830197","updated_at":"2026-01-30T13:46:43.830197"}
{"id":"52b07888-5ed3-5f68-ad74-5e93fb7fc84d","content":"## Combining filters with similarity search  \nRetrieve candidates using similarity search within a filtered set. This is\nuseful for \"more like this\" recommendations within a specific category or\nfiltered context.","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Combining filters with similarity search","h3":"","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Combining filters with similarity search\"}","created_at":"2026-01-30T13:46:43.830201","updated_at":"2026-01-30T13:46:43.830201"}
{"id":"8f71e1c5-91aa-528b-b06d-85d34852d0bb","content":"### Prerequisites  \n1. An engine with a trained embedding (e.g., ALS, content embedding)\n2. Item attributes to filter on\n3. An item or user to find similar items for","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Combining filters with similarity search","h3":"Prerequisites","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Combining filters with similarity search\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.830205","updated_at":"2026-01-30T13:46:43.830205"}
{"id":"ecda0246-3f46-5f96-8df5-d23043e94058","content":"### Query example  \nFind similar items within a specific category using content-based filtering:","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Combining filters with similarity search","h3":"Query example","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Combining filters with similarity search\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.830209","updated_at":"2026-01-30T13:46:43.830209"}
{"id":"0ac41561-b183-5553-bbd7-c91a847980d3","content":"### ShapedQL\n```sql\n-- Find similar items within a specific category\nWITH similar_items AS (\nSELECT *\nFROM similar_items(\nitem_ids=['$reference_item_id'],\nmodel='content',\nlimit=1000\n)\n)\nSELECT *\nFROM similar_items\nWHERE category = '$category'\nORDER BY score(expression='similarity_score', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids') DESC\nLIMIT 20;\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Combining filters with similarity search","h3":"ShapedQL","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Combining filters with similarity search\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.830213","updated_at":"2026-01-30T13:46:43.830213"}
{"id":"6ca28456-4b5e-5ddc-9944-3c20bc305e7d","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"similar_items\",\n\"item_ids\": [\"$parameters.reference_item_id\"],\n\"model\": \"content\",\n\"limit\": 1000\n},\n{\n\"type\": \"filter\",\n\"where\": \"category = '$parameters.category'\"\n}\n],\n\"score\": {\n\"value_model\": \"similarity_score\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"reference_item_id\": \"item123\",\n\"category\": \"Electronics\"\n}\n}\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Combining filters with similarity search","h3":"JSON","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Combining filters with similarity search\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.830221","updated_at":"2026-01-30T13:46:43.830221"}
{"id":"4c1688d9-7110-505f-b3a2-71092ddc1917","content":"### Query example  \nFind similar items within a category:","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Combining filters with similarity search","h3":"Query example","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Combining filters with similarity search\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.830225","updated_at":"2026-01-30T13:46:43.830225"}
{"id":"a2fb7399-c2e7-521d-97e3-3c29612ab373","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='als_embedding',\nencoder='precomputed_item',\ninput_item_id='$item_id', limit=50)\nWHERE category = '$category'\nORDER BY score(expression='click_through_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Combining filters with similarity search","h3":"ShapedQL","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Combining filters with similarity search\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.830228","updated_at":"2026-01-30T13:46:43.830228"}
{"id":"804704fe-634f-5c0d-9761-20e0b49b0dab","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"similarity\",\n\"embedding_ref\": \"als_embedding\",\n\"query_encoder\": {\n\"type\": \"precomputed_item\",\n\"input_item_id\": \"$parameters.item_id\"\n},\n\"limit\": 50,\n\"where\": \"category = '$parameters.category'\"\n}\n],\n\"score\": {\n\"value_model\": \"click_through_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"item_id\": \"item123\",\n\"category\": \"Electronics\",\n\"user_id\": \"user123\"\n}\n}\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Combining filters with similarity search","h3":"JSON","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Combining filters with similarity search\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.830232","updated_at":"2026-01-30T13:46:43.830232"}
{"id":"2bea69cd-6a1e-5b50-a3b9-4c9b24af1ac0","content":"## Advanced: Blending retrieval scores with filters  \nCombine multiple retrieval strategies within a filtered set, then score using\nboth retrieval scores and model predictions:","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Advanced: Blending retrieval scores with filters","h3":"","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Advanced: Blending retrieval scores with filters\"}","created_at":"2026-01-30T13:46:43.830236","updated_at":"2026-01-30T13:46:43.830236"}
{"id":"4b92aab5-8dfd-5b73-ab64-53b6fef080ea","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='als_embedding',\nencoder='precomputed_user',\ninput_user_id='$user_id', limit=50, name='collab'),\ncolumn_order(columns='_derived_popular_rank ASC', limit=50, name='popular')\nWHERE category = '$category'\nORDER BY score(expression='0.5 * retrieval.collab + 0.3 * retrieval.popular + 0.2 * click_through_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Advanced: Blending retrieval scores with filters","h3":"ShapedQL","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Advanced: Blending retrieval scores with filters\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.830239","updated_at":"2026-01-30T13:46:43.830239"}
{"id":"2d94d92d-b4d0-503b-a5e1-25e0c676253a","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"name\": \"collab\",\n\"type\": \"similarity\",\n\"embedding_ref\": \"als_embedding\",\n\"query_encoder\": {\n\"type\": \"precomputed_user\",\n\"input_user_id\": \"$parameters.user_id\"\n},\n\"limit\": 50,\n\"where\": \"category = '$parameters.category'\"\n},\n{\n\"name\": \"popular\",\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"_derived_popular_rank\", \"ascending\": true }],\n\"limit\": 50,\n\"where\": \"category = '$parameters.category'\"\n}\n],\n\"score\": {\n\"value_model\": \"0.5 * retrieval.collab + 0.3 * retrieval.popular + 0.2 * click_through_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"category\": \"Electronics\",\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Advanced: Blending retrieval scores with filters","h3":"JSON","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Advanced: Blending retrieval scores with filters\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.830243","updated_at":"2026-01-30T13:46:43.830243"}
{"id":"e331683c-a354-5f03-9c1a-88542a308cae","content":"## Filtering with text search  \nCombine text search with attribute filtering to build search results that\nrespect both query relevance and filter constraints:","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Filtering with text search","h3":"","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Filtering with text search\"}","created_at":"2026-01-30T13:46:43.830247","updated_at":"2026-01-30T13:46:43.830247"}
{"id":"fa9865fd-23ef-511e-9756-a5adc0fbb10b","content":"### ShapedQL\n```sql\nSELECT *\nFROM text_search(query='$query_text', mode='vector',\ntext_embedding_ref='text_embedding', limit=50,\nname='vector_search'),\ntext_search(query='$query_text', mode='lexical', fuzziness=2, limit=50,\nname='lexical_search')\nWHERE category = '$category' AND price <= $max_price\nORDER BY score(expression='0.5 * retrieval.vector_search + 0.3 * retrieval.lexical_search + 0.2 * click_through_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Filtering with text search","h3":"ShapedQL","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Filtering with text search\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.830251","updated_at":"2026-01-30T13:46:43.830251"}
{"id":"e5966d6c-3919-5094-a3de-3d603317e3b6","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"name\": \"vector_search\",\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"vector\", \"text_embedding_ref\": \"text_embedding\" },\n\"limit\": 50,\n\"where\": \"category = '$parameters.category' AND price <= $parameters.max_price\"\n},\n{\n\"name\": \"lexical_search\",\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"lexical\", \"fuzziness_edit_distance\": 2 },\n\"limit\": 50,\n\"where\": \"category = '$parameters.category' AND price <= $parameters.max_price\"\n}\n],\n\"score\": {\n\"value_model\": \"0.5 * retrieval.vector_search + 0.3 * retrieval.lexical_search + 0.2 * click_through_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"query_text\": \"laptop\",\n\"category\": \"Electronics\",\n\"max_price\": 1000,\n\"user_id\": \"user123\"\n}\n}\n```","document_title":"Faceted filtering and category pages","h1":"Faceted filtering and category pages","h2":"Filtering with text search","h3":"JSON","h4":"","file_path":"query_reference\/faceted_filtering.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/faceted_filtering.mdx","chunk_metadata":"{\"Header 1\": \"Faceted filtering and category pages\", \"Header 2\": \"Filtering with text search\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.830255","updated_at":"2026-01-30T13:46:43.830255"}
{"id":"6b35b190-715f-5f17-a029-33e0782283db","content":"# Complementary items  \nThis page covers complementary items queries for recommending items that go well\nwith a set of items. For query fundamentals, see [Query Basics](\/docs\/v2\/concepts\/queries).  \nA complementary items query recommends items that go well with a set of items,\ntypically items in a shopping cart or a viewing session. Use this for\n\"customers also bought\" or \"goes well with\" recommendations.  \nThe key difference from similar items is that complementary items find items\nthat complete or enhance the set rather than items that are similar.","document_title":"Complementary items","h1":"Complementary items","h2":"","h3":"","h4":"","file_path":"query_reference\/complement_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/complement_items.mdx","chunk_metadata":"{\"Header 1\": \"Complementary items\"}","created_at":"2026-01-30T13:46:43.830516","updated_at":"2026-01-30T13:46:43.830516"}
{"id":"9cafce20-9c7e-50a3-b8be-e829d6456e42","content":"## Implementation approach  \nComplementary items are typically implemented by training a collaborative model\non purchase interactions, where a bag of interactions refers to a user session\nof purchases at a nearby time. You often want to treat the user session as the\nunique user id rather than just persistent user_id (so that bags don't overlap).  \nFor retrieval, use a combination of rules, collaborative similarity, and content\nsimilarity. For scoring, use a model that can score based on an interaction\nsequence input (e.g., item2vec), then pass the cart_ids as interaction_ids\ndirectly into the input of the scoring model. You'll also want to add a filter\nso that anything in the cart is removed from the candidates.","document_title":"Complementary items","h1":"Complementary items","h2":"Implementation approach","h3":"","h4":"","file_path":"query_reference\/complement_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/complement_items.mdx","chunk_metadata":"{\"Header 1\": \"Complementary items\", \"Header 2\": \"Implementation approach\"}","created_at":"2026-01-30T13:46:43.830521","updated_at":"2026-01-30T13:46:43.830521"}
{"id":"01fec875-90d1-5dc0-ae75-1ee5fc0f0091","content":"## Complementary items for a cart  \n### Prerequisites  \n1. An engine with item data configured\n2. A trained collaborative model on purchase interactions (using session-based\nuser IDs)\n3. A trained sequence-based scoring model (e.g., item2vec)\n4. A set of item IDs in the cart","document_title":"Complementary items","h1":"Complementary items","h2":"Complementary items for a cart","h3":"Prerequisites","h4":"","file_path":"query_reference\/complement_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/complement_items.mdx","chunk_metadata":"{\"Header 1\": \"Complementary items\", \"Header 2\": \"Complementary items for a cart\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.830525","updated_at":"2026-01-30T13:46:43.830525"}
{"id":"2046e7bd-af48-547c-87a8-122e21ff44b0","content":"### Query example  \nThis example retrieves candidates using multiple strategies, scores them with a\nsequence-based model, and filters out cart items:","document_title":"Complementary items","h1":"Complementary items","h2":"Complementary items for a cart","h3":"Query example","h4":"","file_path":"query_reference\/complement_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/complement_items.mdx","chunk_metadata":"{\"Header 1\": \"Complementary items\", \"Header 2\": \"Complementary items for a cart\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.830529","updated_at":"2026-01-30T13:46:43.830529"}
{"id":"3cfdf1cb-abcc-560b-9841-bdfaebcf4a0e","content":"### ShapedQL\n```sql\nSELECT *\nFROM (\n-- Get candidates from collaborative filtering\nSELECT * FROM similar_items(\nitem_ids=$cart_ids,\nmodel='collaborative',\nlimit=100\n)\n\nUNION ALL\n\n-- Get candidates from content-based similarity\nSELECT * FROM similar_items(\nitem_ids=$cart_ids,\nmodel='content',\nlimit=100\n)\n\nUNION ALL\n\n-- Get candidates from category-based rules\nSELECT * FROM items\nWHERE category = $category\nLIMIT 100\n)\n-- Remove items already in cart\nWHERE item_id NOT IN $cart_ids\n-- Score with sequence model\nORDER BY score(expression='sequence_model_score($cart_ids, item_id)',\ninput_user_id='$user_id', input_interactions_item_ids='$cart_ids') DESC\nLIMIT 10;\n```","document_title":"Complementary items","h1":"Complementary items","h2":"Complementary items for a cart","h3":"ShapedQL","h4":"","file_path":"query_reference\/complement_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/complement_items.mdx","chunk_metadata":"{\"Header 1\": \"Complementary items\", \"Header 2\": \"Complementary items for a cart\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.830532","updated_at":"2026-01-30T13:46:43.830532"}
{"id":"0548b0d3-9993-5e03-91ed-e084d5e55cec","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"similar_items\",\n\"item_ids\": [\"item1\", \"item2\", \"item3\"],\n\"model\": \"collaborative\",\n\"limit\": 100\n},\n{\n\"type\": \"similar_items\",\n\"item_ids\": [\"item1\", \"item2\", \"item3\"],\n\"model\": \"content\",\n\"limit\": 100\n},\n{\n\"type\": \"filter\",\n\"where\": \"category = $parameters.category\",\n\"limit\": 100\n}\n],\n\"where\": \"item_id NOT IN $parameters.cart_ids\",\n\"score\": {\n\"value_model\": \"sequence_model_score($parameters.cart_ids, item_id)\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.cart_ids\"\n},\n\"limit\": 10\n},\n\"parameters\": {\n\"cart_ids\": [\"item123\", \"item456\", \"item789\"],\n\"user_id\": \"user123\"\n}\n}\n```  \nThis query:\n1. **Retrieves** candidates from three sources:\n- Collaborative similarity (items frequently bought together)\n- Content similarity (items with similar attributes)\n- Popular items (fallback for coverage)\n2. **Filters** out items already in the cart\n3. **Scores** candidates using item2vec with the cart items as the interaction\nsequence\n4. **Returns** the top 10 complementary items","document_title":"Complementary items","h1":"Complementary items","h2":"Complementary items for a cart","h3":"JSON","h4":"","file_path":"query_reference\/complement_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/complement_items.mdx","chunk_metadata":"{\"Header 1\": \"Complementary items\", \"Header 2\": \"Complementary items for a cart\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.830536","updated_at":"2026-01-30T13:46:43.830536"}
{"id":"6f0689a5-8ae9-5932-ac33-a0c815d9f2fc","content":"### Training considerations  \nWhen training the collaborative model for complementary items:\n- Use purchase interactions (not views or clicks)\n- Group interactions by user session (not persistent user_id)\n- A session represents a bag of interactions (purchases at nearby times)\n- This ensures bags don't overlap and the model learns true complementarity","document_title":"Complementary items","h1":"Complementary items","h2":"Complementary items for a cart","h3":"Training considerations","h4":"","file_path":"query_reference\/complement_items.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/complement_items.mdx","chunk_metadata":"{\"Header 1\": \"Complementary items\", \"Header 2\": \"Complementary items for a cart\", \"Header 3\": \"Training considerations\"}","created_at":"2026-01-30T13:46:43.830539","updated_at":"2026-01-30T13:46:43.830539"}
{"id":"069a30c6-831f-53f8-a47d-814a2cdb58dc","content":"# Similar users  \nThis page covers similar user queries for finding users similar to a given user.\nFor query fundamentals, see [Query Basics](\/docs\/v2\/concepts\/queries).  \nA similar user query returns users who are most similar to a given user.\nCommon applications include finding users with similar preferences, building\nuser segments, and enabling social features.  \nYou can do user similarity in two ways:  \n1. **Collaborative similarity**, which finds users with similar interaction\npatterns - which users interact with the same items? The intuition is:\n\"People who like this also like\" - users who have similar interaction\npatterns.\n2. **Content similarity**, which finds users with similar profile attributes\n(e.g., interests, demographics). The intuition is: \"Users that have similar\nattributes to this user.\"","document_title":"Similar users","h1":"Similar users","h2":"","h3":"","h4":"","file_path":"query_reference\/similar_users.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_users.mdx","chunk_metadata":"{\"Header 1\": \"Similar users\"}","created_at":"2026-01-30T13:46:43.830780","updated_at":"2026-01-30T13:46:43.830780"}
{"id":"0c097a0a-eedc-58e3-80e0-e732840d4d62","content":"## Collaborative similarity  \nCollaborative similarity finds users who interact with similar items, based on\ninteraction patterns rather than profile attributes. This captures users who\nhave similar tastes and preferences as evidenced by their behavior.  \n**Intuition**: \"People who like this also like\" - users who have similar\ninteraction patterns.","document_title":"Similar users","h1":"Similar users","h2":"Collaborative similarity","h3":"","h4":"","file_path":"query_reference\/similar_users.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_users.mdx","chunk_metadata":"{\"Header 1\": \"Similar users\", \"Header 2\": \"Collaborative similarity\"}","created_at":"2026-01-30T13:46:43.830785","updated_at":"2026-01-30T13:46:43.830785"}
{"id":"ebb2c097-5620-5381-a4ef-4fbab2562b15","content":"### Prerequisites  \n1. An engine with a trained collaborative embedding (e.g., ALS) configured for\nusers\n2. A user to find similar users for","document_title":"Similar users","h1":"Similar users","h2":"Collaborative similarity","h3":"Prerequisites","h4":"","file_path":"query_reference\/similar_users.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_users.mdx","chunk_metadata":"{\"Header 1\": \"Similar users\", \"Header 2\": \"Collaborative similarity\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.830788","updated_at":"2026-01-30T13:46:43.830788"}
{"id":"4da444c8-fad3-5a67-a20d-9f5c30ddbab0","content":"### Query example  \nTo find similar users based on collaborative filtering (interaction patterns),\nuse the `similarity` retrieve type with a precomputed user embedding:","document_title":"Similar users","h1":"Similar users","h2":"Collaborative similarity","h3":"Query example","h4":"","file_path":"query_reference\/similar_users.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_users.mdx","chunk_metadata":"{\"Header 1\": \"Similar users\", \"Header 2\": \"Collaborative similarity\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.830792","updated_at":"2026-01-30T13:46:43.830792"}
{"id":"fde258d3-3108-5bb2-b079-b2bc628d8453","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='als_user_embedding',\nencoder='precomputed_user',\ninput_user_id='$user_id',\nentity_type='users',\nlimit=20)\n```","document_title":"Similar users","h1":"Similar users","h2":"Collaborative similarity","h3":"ShapedQL","h4":"","file_path":"query_reference\/similar_users.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_users.mdx","chunk_metadata":"{\"Header 1\": \"Similar users\", \"Header 2\": \"Collaborative similarity\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.830795","updated_at":"2026-01-30T13:46:43.830795"}
{"id":"c7fcdf7f-407c-561e-816b-95c34fa6e901","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"user\",\n\"retrieve\": [\n{\n\"type\": \"similarity\",\n\"embedding_ref\": \"als_user_embedding\",\n\"query_encoder\": {\n\"type\": \"precomputed_user\",\n\"input_user_id\": \"$parameters.user_id\"\n},\n\"limit\": 20\n}\n]\n},\n\"parameters\": {\n\"user_id\": \"user123\"\n}\n}\n```","document_title":"Similar users","h1":"Similar users","h2":"Collaborative similarity","h3":"JSON","h4":"","file_path":"query_reference\/similar_users.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_users.mdx","chunk_metadata":"{\"Header 1\": \"Similar users\", \"Header 2\": \"Collaborative similarity\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.830798","updated_at":"2026-01-30T13:46:43.830798"}
{"id":"f7c3a710-90e0-5007-8b34-0129193ce9e1","content":"## Content similarity  \nContent similarity finds users who share similar profile attributes, such as\ninterests, demographics, bio text, or other metadata. This is useful when you\nwant to find users that are objectively similar in their characteristics.  \n**Intuition**: \"Users that have similar attributes to this user.\"","document_title":"Similar users","h1":"Similar users","h2":"Content similarity","h3":"","h4":"","file_path":"query_reference\/similar_users.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_users.mdx","chunk_metadata":"{\"Header 1\": \"Similar users\", \"Header 2\": \"Content similarity\"}","created_at":"2026-01-30T13:46:43.830802","updated_at":"2026-01-30T13:46:43.830802"}
{"id":"c2bee755-5b21-5d5b-83fb-bfd94859e3da","content":"### Prerequisites  \n1. An engine with a content-based user embedding (e.g., text embedding from\nuser profiles) configured\n2. A user to find similar users for","document_title":"Similar users","h1":"Similar users","h2":"Content similarity","h3":"Prerequisites","h4":"","file_path":"query_reference\/similar_users.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_users.mdx","chunk_metadata":"{\"Header 1\": \"Similar users\", \"Header 2\": \"Content similarity\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.830805","updated_at":"2026-01-30T13:46:43.830805"}
{"id":"380e1cc4-a9b0-5941-ac7c-bb311b9c84a7","content":"### Query example  \nTo find similar users based on profile attributes (e.g., interests, bio text),\nuse the `similarity` retrieve type with attribute pooling:","document_title":"Similar users","h1":"Similar users","h2":"Content similarity","h3":"Query example","h4":"","file_path":"query_reference\/similar_users.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_users.mdx","chunk_metadata":"{\"Header 1\": \"Similar users\", \"Header 2\": \"Content similarity\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.830808","updated_at":"2026-01-30T13:46:43.830808"}
{"id":"b94ab2e3-76d3-5bb6-9955-efc5fd1f2703","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='text_user_embedding',\nencoder='user_attribute_pooling',\ninput_user_id='$user_id',\nentity_type='users',\nlimit=20)\n```","document_title":"Similar users","h1":"Similar users","h2":"Content similarity","h3":"ShapedQL","h4":"","file_path":"query_reference\/similar_users.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_users.mdx","chunk_metadata":"{\"Header 1\": \"Similar users\", \"Header 2\": \"Content similarity\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.830811","updated_at":"2026-01-30T13:46:43.830811"}
{"id":"d03d5b44-2e5b-5c6b-b5a3-3b44e7991351","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"user\",\n\"retrieve\": [\n{\n\"type\": \"similarity\",\n\"embedding_ref\": \"text_user_embedding\",\n\"query_encoder\": {\n\"type\": \"user_attribute_pooling\",\n\"input_user_id\": \"$parameters.user_id\"\n},\n\"limit\": 20\n}\n]\n},\n\"parameters\": {\n\"user_id\": \"user123\"\n}\n}\n```","document_title":"Similar users","h1":"Similar users","h2":"Content similarity","h3":"JSON","h4":"","file_path":"query_reference\/similar_users.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/similar_users.mdx","chunk_metadata":"{\"Header 1\": \"Similar users\", \"Header 2\": \"Content similarity\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.830814","updated_at":"2026-01-30T13:46:43.830814"}
{"id":"6239a3ea-ad26-5e7d-9303-b8465dbae912","content":"# Feeds  \nThis page covers feed queries for returning ranked lists of recommended items.\nFor query fundamentals, see [Query Basics](\/docs\/v2\/concepts\/queries).  \nA feed query returns a ranked list of recommended items. Feeds can be\nchronological, trending, or personalized to a specific user. Common\napplications include homepages, \"For You\" carousels, and discovery experiences.  \nPersonalized feeds use a rank pipeline that:\n1. Retrieves candidate items\n2. Optionally filters out unwanted items (e.g., already seen)\n3. Scores candidates using a model\n4. Reorders results with diversity and exploration\n5. Returns ranked results","document_title":"Feeds","h1":"Feeds","h2":"","h3":"","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\"}","created_at":"2026-01-30T13:46:43.831776","updated_at":"2026-01-30T13:46:43.831776"}
{"id":"ff0bb618-baa1-5f1d-a420-4a2232010434","content":"## Chronological feeds  \nChronological feeds return items ordered by creation time, showing the most\nrecent items first. This is useful for news feeds, social media timelines, or\nany feed where recency is important.","document_title":"Feeds","h1":"Feeds","h2":"Chronological feeds","h3":"","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Chronological feeds\"}","created_at":"2026-01-30T13:46:43.831781","updated_at":"2026-01-30T13:46:43.831781"}
{"id":"0f6f96af-7211-5936-a06c-311db5023710","content":"### Prerequisites  \n1. An engine with item data configured\n2. A timestamp column (e.g., `created_at`) on items","document_title":"Feeds","h1":"Feeds","h2":"Chronological feeds","h3":"Prerequisites","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Chronological feeds\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.831785","updated_at":"2026-01-30T13:46:43.831785"}
{"id":"8ca6dd84-c3b5-5383-bbfa-db1dda58d7b7","content":"### Query example","document_title":"Feeds","h1":"Feeds","h2":"Chronological feeds","h3":"Query example","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Chronological feeds\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.831789","updated_at":"2026-01-30T13:46:43.831789"}
{"id":"c45f27fa-8255-5b8d-80fa-2c4bce34d8c5","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='created_at DESC', limit=100)\nLIMIT 20\n```","document_title":"Feeds","h1":"Feeds","h2":"Chronological feeds","h3":"ShapedQL","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Chronological feeds\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.831793","updated_at":"2026-01-30T13:46:43.831793"}
{"id":"bec63190-e768-5518-9230-9ff3c48fc4d7","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"created_at\", \"ascending\": false }],\n\"limit\": 100\n}\n],\n\"limit\": 20\n}\n}\n```  \nYou can also use the derived chronological rank column if you have an\ninteraction table:","document_title":"Feeds","h1":"Feeds","h2":"Chronological feeds","h3":"JSON","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Chronological feeds\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.831796","updated_at":"2026-01-30T13:46:43.831796"}
{"id":"da6f70fd-a5b0-582e-90a1-e3d39750ac40","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_chronological_rank ASC', limit=100)\nLIMIT 20\n```","document_title":"Feeds","h1":"Feeds","h2":"Chronological feeds","h3":"ShapedQL","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Chronological feeds\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.831801","updated_at":"2026-01-30T13:46:43.831801"}
{"id":"056a7df0-ed93-59f9-917f-035f211e5512","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"_derived_chronological_rank\", \"ascending\": true }],\n\"limit\": 100\n}\n],\n\"limit\": 20\n}\n}\n```","document_title":"Feeds","h1":"Feeds","h2":"Chronological feeds","h3":"JSON","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Chronological feeds\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.831805","updated_at":"2026-01-30T13:46:43.831805"}
{"id":"7c518e75-0a21-5dc8-a341-63f37541ecda","content":"## Trending feeds  \nTrending feeds return items ordered by popularity metrics, showing items that\nare currently popular or gaining traction. This is useful for discovery pages\nor \"trending now\" sections.","document_title":"Feeds","h1":"Feeds","h2":"Trending feeds","h3":"","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Trending feeds\"}","created_at":"2026-01-30T13:46:43.831809","updated_at":"2026-01-30T13:46:43.831809"}
{"id":"97ca1cf3-e3c5-5025-a131-cc559ed9b537","content":"### Prerequisites  \n1. An engine with item data configured\n2. Popularity metrics (e.g., views, likes, engagement scores)","document_title":"Feeds","h1":"Feeds","h2":"Trending feeds","h3":"Prerequisites","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Trending feeds\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.831813","updated_at":"2026-01-30T13:46:43.831813"}
{"id":"f6f04ac2-2566-57ff-98b5-f01bd4a8d028","content":"### Query example","document_title":"Feeds","h1":"Feeds","h2":"Trending feeds","h3":"Query example","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Trending feeds\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.831817","updated_at":"2026-01-30T13:46:43.831817"}
{"id":"479f599a-c268-51bd-8658-50323c0c5d50","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='views DESC, likes DESC, created_at DESC', limit=100)\nLIMIT 20\n```","document_title":"Feeds","h1":"Feeds","h2":"Trending feeds","h3":"ShapedQL","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Trending feeds\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.831821","updated_at":"2026-01-30T13:46:43.831821"}
{"id":"10a96777-930a-5cb1-bded-76f81158bb07","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"column_order\",\n\"columns\": [\n{ \"name\": \"views\", \"ascending\": false },\n{ \"name\": \"likes\", \"ascending\": false },\n{ \"name\": \"created_at\", \"ascending\": false }\n],\n\"limit\": 100\n}\n],\n\"limit\": 20\n}\n}\n```  \nYou can also use the derived popular rank column if you have an interaction\ntable:","document_title":"Feeds","h1":"Feeds","h2":"Trending feeds","h3":"JSON","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Trending feeds\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.831824","updated_at":"2026-01-30T13:46:43.831824"}
{"id":"2656849e-c92f-573f-a2c9-3451e858ab55","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_popular_rank ASC', limit=100)\nLIMIT 20\n```","document_title":"Feeds","h1":"Feeds","h2":"Trending feeds","h3":"ShapedQL","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Trending feeds\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.831828","updated_at":"2026-01-30T13:46:43.831828"}
{"id":"91b2d47e-984b-520e-9297-10ccac832319","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"_derived_popular_rank\", \"ascending\": true }],\n\"limit\": 100\n}\n],\n\"limit\": 20\n}\n}\n```","document_title":"Feeds","h1":"Feeds","h2":"Trending feeds","h3":"JSON","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Trending feeds\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.831832","updated_at":"2026-01-30T13:46:43.831832"}
{"id":"174790a0-cc97-5d72-b335-39ba375f8b11","content":"### Trending with time decay  \nUse a time decay formula to surface items that are both popular and recent,\ngiving more weight to recent engagement:","document_title":"Feeds","h1":"Feeds","h2":"Trending feeds","h3":"Trending with time decay","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Trending feeds\", \"Header 3\": \"Trending with time decay\"}","created_at":"2026-01-30T13:46:43.831835","updated_at":"2026-01-30T13:46:43.831835"}
{"id":"b90543c5-41fe-5c97-a99c-337277ca4bf7","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nORDER BY score(expression='(item.score - 1) \/ ((((now_seconds() - item.published_at) \/ 3600) + 2) ** 1.8)', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Feeds","h1":"Feeds","h2":"Trending feeds","h3":"ShapedQL","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Trending feeds\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.831839","updated_at":"2026-01-30T13:46:43.831839"}
{"id":"7a7fdc17-be4b-50cf-b821-3181fb728b52","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"_derived_popular_rank\", \"ascending\": true }],\n\"limit\": 1000\n}\n],\n\"score\": {\n\"value_model\": \"(item.score - 1) \/ ((((now_seconds() - item.published_at) \/ 3600) + 2) ** 1.8)\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n}\n}\n```","document_title":"Feeds","h1":"Feeds","h2":"Trending feeds","h3":"JSON","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Trending feeds\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.831843","updated_at":"2026-01-30T13:46:43.831843"}
{"id":"732aa006-a8ff-57b1-930d-ab4318b520bb","content":"## Personalized feed with multiple retrievers  \nA comprehensive personalized feed combines multiple retrieval strategies,\nscoring models, diversity reordering, and exploration. A good baseline\nincludes:\n- A content-based retriever (finds items similar to user's past interactions)\n- A collaborative retriever (finds items liked by similar users)\n- A trending list (ensures fresh, popular content)\n- A click_through_rate scoring model (ranks candidates by predicted engagement)","document_title":"Feeds","h1":"Feeds","h2":"Personalized feed with multiple retrievers","h3":"","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Personalized feed with multiple retrievers\"}","created_at":"2026-01-30T13:46:43.831846","updated_at":"2026-01-30T13:46:43.831846"}
{"id":"0e5ed5a0-6864-5f06-97c2-a1696c25a63a","content":"### Prerequisites  \n1. An engine with item data configured\n2. A trained collaborative embedding (e.g., ALS)\n3. A trained content embedding (e.g., text embedding)\n4. A trained scoring model (e.g., `click_through_rate`)\n5. A `user_id` to personalize for","document_title":"Feeds","h1":"Feeds","h2":"Personalized feed with multiple retrievers","h3":"Prerequisites","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Personalized feed with multiple retrievers\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.831850","updated_at":"2026-01-30T13:46:43.831850"}
{"id":"0f194513-f993-540b-8686-1819f01074ce","content":"### Query example","document_title":"Feeds","h1":"Feeds","h2":"Personalized feed with multiple retrievers","h3":"Query example","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Personalized feed with multiple retrievers\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.831854","updated_at":"2026-01-30T13:46:43.831854"}
{"id":"41b3efcc-ad96-52ec-bb19-c043015e8fe4","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='item_content_embedding',\nencoder='interaction_round_robin',\ninput_user_id='$user_id', limit=50),\nsimilarity(embedding_ref='als_embedding',\nencoder='precomputed_user',\ninput_user_id='$user_id', limit=50),\ncolumn_order(columns='_derived_popular_rank ASC', limit=50)\nWHERE prebuilt('exclude_seen', input_user_id='$user_id')\nORDER BY score(expression='click_through_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nREORDER BY diversity(0.3), exploration(0.2)\nLIMIT 20\n```","document_title":"Feeds","h1":"Feeds","h2":"Personalized feed with multiple retrievers","h3":"ShapedQL","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Personalized feed with multiple retrievers\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.831857","updated_at":"2026-01-30T13:46:43.831857"}
{"id":"2fba868e-0348-5fee-957a-d9a961d12b8c","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"similarity\",\n\"embedding_ref\": \"item_content_embedding\",\n\"query_encoder\": {\n\"type\": \"interaction_round_robin\",\n\"input_user_id\": \"$parameters.user_id\"\n},\n\"limit\": 50\n},\n{\n\"type\": \"similarity\",\n\"embedding_ref\": \"als_embedding\",\n\"query_encoder\": {\n\"type\": \"precomputed_user\",\n\"input_user_id\": \"$parameters.user_id\"\n},\n\"limit\": 50\n},\n{\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"_derived_popular_rank\", \"ascending\": true }],\n\"limit\": 50\n}\n],\n\"filter\": {\n\"predicate\": \"prebuilt('exclude_seen', input_user_id='$parameters.user_id')\"\n},\n\"score\": {\n\"value_model\": \"click_through_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"reorder\": {\n\"diversity\": 0.3,\n\"exploration\": 0.2\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```  \nThis query:\n1. **Retrieves** candidates from three sources:\n- Content-based similarity (items similar to what the user has interacted with)\n- Collaborative similarity (items liked by similar users)\n- Trending items (popular items for freshness)\n2. **Filters** out items the user has already interacted with\n3. **Scores** candidates using a click_through_rate model to predict engagement\n4. **Reorders** with diversity (30%) to ensure variety and exploration (20%)\nto surface new items\n5. **Returns** the top 20 personalized items","document_title":"Feeds","h1":"Feeds","h2":"Personalized feed with multiple retrievers","h3":"JSON","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Personalized feed with multiple retrievers\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.831861","updated_at":"2026-01-30T13:46:43.831861"}
{"id":"0e9c7fa8-b9d4-51dc-b33a-185c62f3a571","content":"### Combining multiple models in personalized feeds  \nUse an ensemble of models to balance different signals when ranking feed items:","document_title":"Feeds","h1":"Feeds","h2":"Personalized feed with multiple retrievers","h3":"Combining multiple models in personalized feeds","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Personalized feed with multiple retrievers\", \"Header 3\": \"Combining multiple models in personalized feeds\"}","created_at":"2026-01-30T13:46:43.831864","updated_at":"2026-01-30T13:46:43.831864"}
{"id":"aff83e3b-0467-51bf-a89a-c30d1ef963a8","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='item_content_embedding',\nencoder='interaction_round_robin',\ninput_user_id='$user_id', limit=50),\nsimilarity(embedding_ref='als_embedding',\nencoder='precomputed_user',\ninput_user_id='$user_id', limit=50),\ncolumn_order(columns='_derived_popular_rank ASC', limit=50)\nWHERE prebuilt('exclude_seen', input_user_id='$user_id')\nORDER BY score(expression='0.6 * click_through_rate + 0.4 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nREORDER BY diversity(0.3), exploration(0.2)\nLIMIT 20\n```","document_title":"Feeds","h1":"Feeds","h2":"Personalized feed with multiple retrievers","h3":"ShapedQL","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Personalized feed with multiple retrievers\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.831868","updated_at":"2026-01-30T13:46:43.831868"}
{"id":"02150988-7242-58a6-ab7a-695246293302","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"similarity\",\n\"embedding_ref\": \"item_content_embedding\",\n\"query_encoder\": {\n\"type\": \"interaction_round_robin\",\n\"input_user_id\": \"$parameters.user_id\"\n},\n\"limit\": 50\n},\n{\n\"type\": \"similarity\",\n\"embedding_ref\": \"als_embedding\",\n\"query_encoder\": {\n\"type\": \"precomputed_user\",\n\"input_user_id\": \"$parameters.user_id\"\n},\n\"limit\": 50\n},\n{\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"_derived_popular_rank\", \"ascending\": true }],\n\"limit\": 50\n}\n],\n\"filter\": {\n\"predicate\": \"prebuilt('exclude_seen', input_user_id='$parameters.user_id')\"\n},\n\"score\": {\n\"value_model\": \"0.6 * click_through_rate + 0.4 * conversion_rate\",\n\"input_user_id\": \"$parameters.user_id\"\n},\n\"reorder\": {\n\"diversity\": 0.3,\n\"exploration\": 0.2\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Feeds","h1":"Feeds","h2":"Personalized feed with multiple retrievers","h3":"JSON","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Personalized feed with multiple retrievers\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.831872","updated_at":"2026-01-30T13:46:43.831872"}
{"id":"16788839-51a7-5a26-a2f1-d1a17fa8da6e","content":"### Personalized trendy feed  \nCombine popularity, personalization, and time decay to create a feed that\nsurfaces items that are both trending and relevant to the user:","document_title":"Feeds","h1":"Feeds","h2":"Personalized feed with multiple retrievers","h3":"Personalized trendy feed","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Personalized feed with multiple retrievers\", \"Header 3\": \"Personalized trendy feed\"}","created_at":"2026-01-30T13:46:43.831875","updated_at":"2026-01-30T13:46:43.831875"}
{"id":"c0624c51-44e9-5418-a8c0-c373c673f7af","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nWHERE prebuilt('exclude_seen', input_user_id='$user_id')\nORDER BY score(expression='((item.score \/ 1000) + cosine_similarity(text_encoding(item, embedding_ref=''text_embedding''), pooled_text_encoding(user.recent_interactions, embedding_ref=''text_embedding''))) \/ ((((now_seconds() - item.published_at) \/ 3600) + 2) ** 1.8)', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Feeds","h1":"Feeds","h2":"Personalized feed with multiple retrievers","h3":"ShapedQL","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Personalized feed with multiple retrievers\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.831879","updated_at":"2026-01-30T13:46:43.831879"}
{"id":"ff369865-7689-5e72-8168-5131cfdec5f2","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"_derived_popular_rank\", \"ascending\": true }],\n\"limit\": 1000\n}\n],\n\"filter\": {\n\"predicate\": \"prebuilt('exclude_seen', input_user_id='$parameters.user_id')\"\n},\n\"score\": {\n\"value_model\": \"((item.score \/ 1000) + cosine_similarity(text_encoding(item, embedding_ref='text_embedding'), pooled_text_encoding(user.recent_interactions, embedding_ref='text_embedding'))) \/ ((((now_seconds() - item.published_at) \/ 3600) + 2) ** 1.8)\",\n\"input_user_id\": \"$parameters.user_id\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Feeds","h1":"Feeds","h2":"Personalized feed with multiple retrievers","h3":"JSON","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Personalized feed with multiple retrievers\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.831883","updated_at":"2026-01-30T13:46:43.831883"}
{"id":"278ad6dc-92b4-5372-bad4-f376ebb3b460","content":"### Using user attributes in feed scoring  \nIncorporate user attributes (age, location, membership tier) into feed scoring\nto personalize results based on user profile:","document_title":"Feeds","h1":"Feeds","h2":"Personalized feed with multiple retrievers","h3":"Using user attributes in feed scoring","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Personalized feed with multiple retrievers\", \"Header 3\": \"Using user attributes in feed scoring\"}","created_at":"2026-01-30T13:46:43.831886","updated_at":"2026-01-30T13:46:43.831886"}
{"id":"3e6073b6-adef-5ae3-9f96-d5be45f16b09","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='als_embedding',\nencoder='precomputed_user',\ninput_user_id='$user_id', limit=50),\ncolumn_order(columns='_derived_popular_rank ASC', limit=50)\nWHERE prebuilt('exclude_seen', input_user_id='$user_id')\nORDER BY score(expression='click_through_rate + 0.1 * user.age - 0.05 * item.price + 0.2 * item.rating + 0.15 * user.membership_tier', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Feeds","h1":"Feeds","h2":"Personalized feed with multiple retrievers","h3":"ShapedQL","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Personalized feed with multiple retrievers\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.831890","updated_at":"2026-01-30T13:46:43.831890"}
{"id":"3883f248-de45-5e1a-9780-70049c2a3466","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"similarity\",\n\"embedding_ref\": \"als_embedding\",\n\"query_encoder\": {\n\"type\": \"precomputed_user\",\n\"input_user_id\": \"$parameters.user_id\"\n},\n\"limit\": 50\n},\n{\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"_derived_popular_rank\", \"ascending\": true }],\n\"limit\": 50\n}\n],\n\"filter\": {\n\"predicate\": \"prebuilt('exclude_seen', input_user_id='$parameters.user_id')\"\n},\n\"score\": {\n\"value_model\": \"click_through_rate + 0.1 * user.age - 0.05 * item.price + 0.2 * item.rating + 0.15 * user.membership_tier\",\n\"input_user_id\": \"$parameters.user_id\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Feeds","h1":"Feeds","h2":"Personalized feed with multiple retrievers","h3":"JSON","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Personalized feed with multiple retrievers\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.831894","updated_at":"2026-01-30T13:46:43.831894"}
{"id":"576ac927-43f3-5cf6-bcbf-83ce00644021","content":"## Anonymous feed  \nFor users without stored history, you can return popular items. This is useful\nfor new users or anonymous visitors:","document_title":"Feeds","h1":"Feeds","h2":"Anonymous feed","h3":"","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Anonymous feed\"}","created_at":"2026-01-30T13:46:43.831897","updated_at":"2026-01-30T13:46:43.831897"}
{"id":"be614e2e-343c-5815-b161-e48178b444c4","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_popular_rank ASC', limit=100)\nLIMIT 20\n```","document_title":"Feeds","h1":"Feeds","h2":"Anonymous feed","h3":"ShapedQL","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Anonymous feed\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.831901","updated_at":"2026-01-30T13:46:43.831901"}
{"id":"99e0a168-b977-5c5c-bf18-3626371be373","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"_derived_popular_rank\", \"ascending\": true }],\n\"limit\": 100\n}\n],\n\"limit\": 20\n}\n}\n```","document_title":"Feeds","h1":"Feeds","h2":"Anonymous feed","h3":"JSON","h4":"","file_path":"query_reference\/feeds.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/feeds.mdx","chunk_metadata":"{\"Header 1\": \"Feeds\", \"Header 2\": \"Anonymous feed\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.831905","updated_at":"2026-01-30T13:46:43.831905"}
{"id":"27578798-ee24-5273-95d1-168dea7cafea","content":"# Attribute ranking  \nThis page covers attribute ranking queries for ranking attribute values instead\nof items. For query fundamentals, see [Query Basics](\/docs\/v2\/concepts\/queries).  \nAn attribute ranking query returns the best attribute values for a given user.\nInstead of ranking items, this ranks attribute values like categories, genres,\nbrands, or tags.  \nCommon applications include:\n- Personalized category carousels (\"Top categories for you\")\n- Navigation that adapts to user preferences\n- Surfacing relevant filters or facets  \nAttribute ranking is particularly useful for building category pages and\nfaceted filtering interfaces. Once you've identified the best categories for a\nuser, you can use those categories in filtered queries to show personalized\nitems within each category. See [Faceted filtering and category\npages](\/docs\/v2\/query_reference\/faceted_filtering) for examples of combining\nattribute ranking with item ranking.","document_title":"Attribute ranking","h1":"Attribute ranking","h2":"","h3":"","h4":"","file_path":"query_reference\/attribute_ranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/attribute_ranking.mdx","chunk_metadata":"{\"Header 1\": \"Attribute ranking\"}","created_at":"2026-01-30T13:46:43.832202","updated_at":"2026-01-30T13:46:43.832202"}
{"id":"9f366bb0-5765-5307-aa99-848d5f69350e","content":"## Rank attributes for user  \n### Prerequisites  \n1. An engine with item data containing the attribute you want to rank\n2. A `user_id` to personalize for","document_title":"Attribute ranking","h1":"Attribute ranking","h2":"Rank attributes for user","h3":"Prerequisites","h4":"","file_path":"query_reference\/attribute_ranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/attribute_ranking.mdx","chunk_metadata":"{\"Header 1\": \"Attribute ranking\", \"Header 2\": \"Rank attributes for user\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.832206","updated_at":"2026-01-30T13:46:43.832206"}
{"id":"3fc39621-610c-5e84-8d3d-d69a56cf0a22","content":"### Query example  \nUse the `rank_attributes` query type to find the best attribute values for a\nuser. Note: ShapedQL support for attribute ranking is not currently available,\nso JSON format is required.","document_title":"Attribute ranking","h1":"Attribute ranking","h2":"Rank attributes for user","h3":"Query example","h4":"","file_path":"query_reference\/attribute_ranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/attribute_ranking.mdx","chunk_metadata":"{\"Header 1\": \"Attribute ranking\", \"Header 2\": \"Rank attributes for user\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.832210","updated_at":"2026-01-30T13:46:43.832210"}
{"id":"c04c1d95-eb59-560e-91a9-3f75f7f98df7","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank_attributes\",\n\"input_attribute\": \"category\",\n\"input_user_id\" : \"$user_id\",\n\"embeddings\": \"content_embedding\",\n\"limit\": 5\n},\n\"parameters\": {\n\"user_id\": \"12345\"\n}\n}\n```","document_title":"Attribute ranking","h1":"Attribute ranking","h2":"Rank attributes for user","h3":"JSON","h4":"","file_path":"query_reference\/attribute_ranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/attribute_ranking.mdx","chunk_metadata":"{\"Header 1\": \"Attribute ranking\", \"Header 2\": \"Rank attributes for user\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.832214","updated_at":"2026-01-30T13:46:43.832214"}
{"id":"d3023427-0bda-5853-b925-37b14b776887","content":"### ShapedQL\n```sql\n-- Note: rank_attributes is currently only available via JSON format.\n-- ShapedQL support for attribute ranking is coming soon.\n```","document_title":"Attribute ranking","h1":"Attribute ranking","h2":"Rank attributes for user","h3":"ShapedQL","h4":"","file_path":"query_reference\/attribute_ranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/attribute_ranking.mdx","chunk_metadata":"{\"Header 1\": \"Attribute ranking\", \"Header 2\": \"Rank attributes for user\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.832218","updated_at":"2026-01-30T13:46:43.832218"}
{"id":"6f3b9c94-71de-5b1c-85a5-8c046794e9c4","content":"## Using attribute ranking with category pages  \nAfter ranking attributes (e.g., categories) for a user, you can use those\nranked attributes to build personalized category pages. The attribute ranking\ntells you which categories are most relevant to the user, and then you can\nquery items within those categories using value models for fine-grained\nranking.  \nFor example, if attribute ranking returns \"Electronics\" as the top category for\na user, you can then query items in that category with personalized scoring:","document_title":"Attribute ranking","h1":"Attribute ranking","h2":"Using attribute ranking with category pages","h3":"","h4":"","file_path":"query_reference\/attribute_ranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/attribute_ranking.mdx","chunk_metadata":"{\"Header 1\": \"Attribute ranking\", \"Header 2\": \"Using attribute ranking with category pages\"}","created_at":"2026-01-30T13:46:43.832222","updated_at":"2026-01-30T13:46:43.832222"}
{"id":"1267b468-b8a7-5ad0-aa34-44d078b74045","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nWHERE category = '$top_category'\nORDER BY score(expression='0.6 * click_through_rate + 0.4 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Attribute ranking","h1":"Attribute ranking","h2":"Using attribute ranking with category pages","h3":"ShapedQL","h4":"","file_path":"query_reference\/attribute_ranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/attribute_ranking.mdx","chunk_metadata":"{\"Header 1\": \"Attribute ranking\", \"Header 2\": \"Using attribute ranking with category pages\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.832226","updated_at":"2026-01-30T13:46:43.832226"}
{"id":"70301a3d-6e57-5ea8-8985-bbdd3602a470","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"column_order\",\n\"columns\": [{ \"name\": \"_derived_popular_rank\", \"ascending\": true }],\n\"limit\": 1000,\n\"where\": \"category = '$parameters.top_category'\"\n}\n],\n\"score\": {\n\"value_model\": \"0.6 * click_through_rate + 0.4 * conversion_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 20\n},\n\"parameters\": {\n\"top_category\": \"Electronics\",\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```  \nThis two-step approach (attribute ranking \u2192 filtered item ranking) enables you\nto build personalized navigation and category pages that adapt to each user's\npreferences. Value models allow you to fine-tune the ranking within each\ncategory using ensembles, item attributes, and other signals.","document_title":"Attribute ranking","h1":"Attribute ranking","h2":"Using attribute ranking with category pages","h3":"JSON","h4":"","file_path":"query_reference\/attribute_ranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/attribute_ranking.mdx","chunk_metadata":"{\"Header 1\": \"Attribute ranking\", \"Header 2\": \"Using attribute ranking with category pages\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.832229","updated_at":"2026-01-30T13:46:43.832229"}
{"id":"639ce6a6-2164-59cd-be73-09b2b8f3009a","content":"# Reranking  \nThis page covers reranking queries for re-sorting lists of candidate items. For\nquery fundamentals, see [Query Basics](\/docs\/v2\/concepts\/queries).  \nA reranking query takes a list of candidate items and re-sorts them. Use\nreranking when you have candidates from an external source (e.g., a search\nengine, a catalog filter, or business logic) and want to reorder them.  \nReranking is different from a full rank query - it only scores and reorders\nthe provided candidates rather than retrieving new ones.  \nFor reranking, you typically want to use a more heavy-weight scoring model\nlike `click_through_rate` or similar models that can accurately\npredict user engagement on a smaller set of candidates.","document_title":"Reranking","h1":"Reranking","h2":"","h3":"","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\"}","created_at":"2026-01-30T13:46:43.832902","updated_at":"2026-01-30T13:46:43.832902"}
{"id":"2d164905-b7f3-552c-908e-4c9e633397f1","content":"## Text reranking strategies  \nReranking commonly uses:  \n- **Trained scoring models** like `click_through_rate`.\n- **Zero-shot text rerankers** like `colbert_v2()` and `cross_encoder()`.\n- **Rank fusion** patterns like RRF and linear interpolation.  \nThe reference documentation for these scoring expressions lives in ShapedQL:  \n- [`Text reranking functions`](\/docs\/v2\/query_reference\/shapedql#text-reranking-functions)\n- [`Rank fusion (RRF)`](\/docs\/v2\/query_reference\/shapedql#rank-fusion-rrf)  \nExample:  \n```sql\nSELECT *\nFROM ids($candidate_item_ids)\nORDER BY score(expression='colbert_v2(item, $params.query)')\nLIMIT 20\n```","document_title":"Reranking","h1":"Reranking","h2":"Text reranking strategies","h3":"","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Text reranking strategies\"}","created_at":"2026-01-30T13:46:43.832908","updated_at":"2026-01-30T13:46:43.832908"}
{"id":"2d203601-2d70-5658-bc60-34990963fda0","content":"## Rerank by item IDs  \n### Prerequisites  \n1. An engine configured with item data\n2. A trained scoring model (e.g., `click_through_rate`)\n3. A list of candidate item IDs to rerank\n4. Optionally, a user ID for personalized reranking","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item IDs","h3":"Prerequisites","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item IDs\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.832911","updated_at":"2026-01-30T13:46:43.832911"}
{"id":"9a46fab1-2874-57a2-bf0e-8376a2e7e98e","content":"### Query example  \nUse the `ids` retriever to rerank a list of known items with a scoring model:","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item IDs","h3":"Query example","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item IDs\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.832915","updated_at":"2026-01-30T13:46:43.832915"}
{"id":"784df810-d2cb-56ce-a697-1f797da7acd4","content":"### ShapedQL\n```sql\nSELECT *\nFROM ids($candidate_item_ids)\nORDER BY score(expression='click_through_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 10\n```","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item IDs","h3":"ShapedQL","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item IDs\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.832918","updated_at":"2026-01-30T13:46:43.832918"}
{"id":"9a4f162e-cea2-5575-af1f-c060f9fd3b53","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"candidate_ids\",\n\"item_ids\": \"$parameters.candidate_item_ids\"\n}\n],\n\"score\": {\n\"value_model\": \"click_through_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 10\n},\n\"parameters\": {\n\"candidate_item_ids\": [\"item_1\", \"item_2\", \"item_3\", \"item_4\", \"item_5\"],\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item IDs","h3":"JSON","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item IDs\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.832922","updated_at":"2026-01-30T13:46:43.832922"}
{"id":"a6bbc7f4-a4e4-5fee-a95f-0307afe85b90","content":"### Reranking with model ensembles  \nCombine multiple scoring models when reranking to balance different signals:","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item IDs","h3":"Reranking with model ensembles","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item IDs\", \"Header 3\": \"Reranking with model ensembles\"}","created_at":"2026-01-30T13:46:43.832925","updated_at":"2026-01-30T13:46:43.832925"}
{"id":"687a5acb-02d5-5800-bacf-ba63781f1ed6","content":"### ShapedQL\n```sql\nSELECT *\nFROM ids($candidate_item_ids)\nORDER BY score(expression='0.6 * click_through_rate + 0.4 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 10\n```","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item IDs","h3":"ShapedQL","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item IDs\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.832928","updated_at":"2026-01-30T13:46:43.832928"}
{"id":"42c5e23a-a26a-5645-91ea-fda4d444b283","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"candidate_ids\",\n\"item_ids\": \"$parameters.candidate_item_ids\"\n}\n],\n\"score\": {\n\"value_model\": \"0.6 * click_through_rate + 0.4 * conversion_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 10\n},\n\"parameters\": {\n\"candidate_item_ids\": [\"item_1\", \"item_2\", \"item_3\", \"item_4\", \"item_5\"],\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item IDs","h3":"JSON","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item IDs\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.832931","updated_at":"2026-01-30T13:46:43.832931"}
{"id":"80c282d6-2615-56ad-953a-1526e06469af","content":"### Reranking with diversity  \nYou can also add diversity reordering to ensure variety in the results:","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item IDs","h3":"Reranking with diversity","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item IDs\", \"Header 3\": \"Reranking with diversity\"}","created_at":"2026-01-30T13:46:43.832935","updated_at":"2026-01-30T13:46:43.832935"}
{"id":"013f27dc-fa01-51f5-8c4f-85ceb3139ff6","content":"### ShapedQL\n```sql\nSELECT *\nFROM ids($candidate_item_ids)\nORDER BY score(expression='click_through_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nREORDER BY diversity(0.3)\nLIMIT 10\n```","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item IDs","h3":"ShapedQL","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item IDs\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.832938","updated_at":"2026-01-30T13:46:43.832938"}
{"id":"faaf350e-3ea8-55dc-b57c-c1269425e07f","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"candidate_ids\",\n\"item_ids\": \"$parameters.candidate_item_ids\"\n}\n],\n\"score\": {\n\"value_model\": \"click_through_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"reorder\": {\n\"diversity\": 0.3\n},\n\"limit\": 10\n},\n\"parameters\": {\n\"candidate_item_ids\": [\"item_1\", \"item_2\", \"item_3\", \"item_4\", \"item_5\"],\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item IDs","h3":"JSON","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item IDs\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.832942","updated_at":"2026-01-30T13:46:43.832942"}
{"id":"1587920f-e5fb-57ab-8600-ae04dd3c7ff9","content":"### Using item attributes in reranking  \nIncorporate item attributes like price, rating, or review count into reranking\nto boost or penalize items based on business logic:","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item IDs","h3":"Using item attributes in reranking","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item IDs\", \"Header 3\": \"Using item attributes in reranking\"}","created_at":"2026-01-30T13:46:43.832945","updated_at":"2026-01-30T13:46:43.832945"}
{"id":"da8cbd18-1a09-56ab-a614-dac492b91ca9","content":"### ShapedQL\n```sql\nSELECT *\nFROM ids($candidate_item_ids)\nORDER BY score(expression='click_through_rate - 0.05 * item.price + 0.2 * item.rating + 0.15 * item.review_count', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 10\n```","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item IDs","h3":"ShapedQL","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item IDs\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.832948","updated_at":"2026-01-30T13:46:43.832948"}
{"id":"0921f2ef-07de-5d05-bd52-146c516d0d70","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"candidate_ids\",\n\"item_ids\": \"$parameters.candidate_item_ids\"\n}\n],\n\"score\": {\n\"value_model\": \"click_through_rate - 0.05 * item.price + 0.2 * item.rating + 0.15 * item.review_count\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 10\n},\n\"parameters\": {\n\"candidate_item_ids\": [\"item_1\", \"item_2\", \"item_3\", \"item_4\", \"item_5\"],\n\"user_id\": \"user123\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n}\n}\n```","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item IDs","h3":"JSON","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item IDs\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.832951","updated_at":"2026-01-30T13:46:43.832951"}
{"id":"bc94c2f3-6e2d-5a1d-994b-8581cb4c35a7","content":"## Rerank by item attributes  \n### Prerequisites  \n1. An engine configured with item data\n2. A trained scoring model (e.g., `click_through_rate`)\n3. A list of candidate item attribute dictionaries\n4. Optionally, a user ID for personalized reranking","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item attributes","h3":"Prerequisites","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item attributes\", \"Header 3\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.832955","updated_at":"2026-01-30T13:46:43.832955"}
{"id":"fa577e1c-7d08-51c4-bd99-caaf9cd729a0","content":"### Query example  \nUse the `candidate_attributes` retriever when you need to rerank items that\naren't in your catalog - for example, items from an external API or newly\ncreated items:","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item attributes","h3":"Query example","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item attributes\", \"Header 3\": \"Query example\"}","created_at":"2026-01-30T13:46:43.832958","updated_at":"2026-01-30T13:46:43.832958"}
{"id":"b5bc0ea0-0e91-5780-9690-c3dfe26ba246","content":"### ShapedQL\n```sql\nSELECT *\nFROM candidate_attributes($item_attributes)\nORDER BY score(expression='click_through_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 10\n```","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item attributes","h3":"ShapedQL","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item attributes\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.832961","updated_at":"2026-01-30T13:46:43.832961"}
{"id":"7debfd03-f54b-5533-bae0-c6c96d5d7378","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"type\": \"candidate_attributes\",\n\"item_attributes\": [\n{ \"title\": \"Product A\", \"category\": \"electronics\" },\n{ \"title\": \"Product B\", \"category\": \"clothing\" }\n]\n}\n],\n\"score\": {\n\"value_model\": \"click_through_rate\",\n\"input_user_id\": \"$parameters.user_id\",\n\"input_interactions_item_ids\": \"$parameters.interaction_item_ids\"\n},\n\"limit\": 10\n},\n\"parameters\": {\n\"user_id\": \"user123\"\n}\n}\n```","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item attributes","h3":"JSON","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item attributes\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.832964","updated_at":"2026-01-30T13:46:43.832964"}
{"id":"2af49d94-43d4-5767-8110-7b30ac995bfb","content":"### Combining reranking with retrieval scores  \nIf your candidates come from a retrieval step (e.g., search or similarity),\nyou can blend retrieval scores with model predictions:","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item attributes","h3":"Combining reranking with retrieval scores","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item attributes\", \"Header 3\": \"Combining reranking with retrieval scores\"}","created_at":"2026-01-30T13:46:43.832968","updated_at":"2026-01-30T13:46:43.832968"}
{"id":"3372cc0e-fe64-5389-ac97-742b147dfeed","content":"### ShapedQL\n```sql\nSELECT *\nFROM text_search(query='$query_text', mode='vector',\ntext_embedding_ref='text_embedding', limit=50,\nname='search')\nWHERE item_id IN ($candidate_item_ids)\nORDER BY score(expression='0.5 * retrieval.search + 0.5 * click_through_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 10\n```","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item attributes","h3":"ShapedQL","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item attributes\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.832971","updated_at":"2026-01-30T13:46:43.832971"}
{"id":"2757fc5f-ca0e-5cff-85b0-70d9be43eeec","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"from\": \"item\",\n\"retrieve\": [\n{\n\"name\": \"search\",\n\"type\": \"text_search\",\n\"input_text_query\": \"$parameters.query_text\",\n\"mode\": { \"type\": \"vector\", \"text_embedding_ref\": \"text_embedding\" },\n\"limit\": 50,\n\"where\": \"item_id IN ($parameters.candidate_item_ids)\"\n}\n],\n\"score\": {\n\"value_model\": \"0.5 * retrieval.search + 0.5 * click_through_rate\",\n\"input_user_id\": \"$parameters.user_id\"\n},\n\"limit\": 10\n},\n\"parameters\": {\n\"query_text\": \"laptop\",\n\"candidate_item_ids\": [\"item_1\", \"item_2\", \"item_3\", \"item_4\", \"item_5\"],\n\"user_id\": \"user123\"\n}\n}\n```","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item attributes","h3":"JSON","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item attributes\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.832974","updated_at":"2026-01-30T13:46:43.832974"}
{"id":"a8c618f4-3108-5028-836b-f9f9d64556ab","content":"### When to use each approach  \n| Approach | Use when |\n|----------|----------|\n| **Rerank by IDs** | Items exist in your catalog and have stored features |\n| **Rerank by attributes** | Items are external, temporary, or newly created without catalog entries |","document_title":"Reranking","h1":"Reranking","h2":"Rerank by item attributes","h3":"When to use each approach","h4":"","file_path":"query_reference\/reranking.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/query_reference\/reranking.mdx","chunk_metadata":"{\"Header 1\": \"Reranking\", \"Header 2\": \"Rerank by item attributes\", \"Header 3\": \"When to use each approach\"}","created_at":"2026-01-30T13:46:43.832977","updated_at":"2026-01-30T13:46:43.832977"}
{"id":"b260a80d-e8e0-540b-80d6-093e9ee3cbc2","content":"# Feature types  \nShaped supports a wide range of feature types for training and scoring models. Feature types determine how data is processed, encoded, and used in model training. You can specify feature types explicitly using `schema_override` in your engine configuration, or let Shaped infer types automatically.","document_title":"Feature types","h1":"Feature types","h2":"","h3":"","h4":"","file_path":"engine_reference\/feature-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/feature-types.mdx","chunk_metadata":"{\"Header 1\": \"Feature types\"}","created_at":"2026-01-30T13:46:43.833276","updated_at":"2026-01-30T13:46:43.833276"}
{"id":"e1fe05c8-7d8c-547b-9f52-58f9ddf51a0a","content":"## Specifying feature types  \nUse `schema_override` in the `data` block to specify how columns should be interpreted:  \n```yaml\ndata:\nitem_table:\nname: movies\ntype: table\nschema_override:\nitem:\nid: item_id\nfeatures:\n- name: genre\ntype: Sequence[TextCategory]\n- name: poster_url\ntype: Image\n- name: movie_title\ntype: Text\n- name: movie_age\ntype: Numerical\n- name: primary_genre\ntype: TextCategory\ncreated_at: created_at\n```  \nIf you don't specify a column in `schema_override`, Shaped will infer the type automatically based on the column data.","document_title":"Feature types","h1":"Feature types","h2":"Specifying feature types","h3":"","h4":"","file_path":"engine_reference\/feature-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/feature-types.mdx","chunk_metadata":"{\"Header 1\": \"Feature types\", \"Header 2\": \"Specifying feature types\"}","created_at":"2026-01-30T13:46:43.833280","updated_at":"2026-01-30T13:46:43.833280"}
{"id":"1e15f311-e215-5845-b373-84b84bbfceb5","content":"## Supported feature types  \n### Basic types  \n**Category**: Discrete categorical values (e.g., product categories, event types). Use for low-cardinality categorical data.  \n**TextCategory**: Text-based categorical values (e.g., product names, user segments). Similar to Category but optimized for text strings.  \n**LowCardinalityCategory**: High-cardinality categorical values that are still treated as categories (e.g., user IDs, item IDs when used as features).  \n**Numerical**: Continuous numeric values (e.g., price, rating, count).  \n**Boolean**: Binary true\/false values.  \n**Binary**: Binary numeric values (0 or 1).  \n**Timestamp**: Temporal data such as timestamps and dates (e.g., `created_at`, `last_signin`).  \n**Text**: Unstructured text data (e.g., descriptions, bios, reviews). Text features can be used to create embeddings for semantic search.  \n**Url**: URL strings. Often used for image or media URLs.","document_title":"Feature types","h1":"Feature types","h2":"Supported feature types","h3":"Basic types","h4":"","file_path":"engine_reference\/feature-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/feature-types.mdx","chunk_metadata":"{\"Header 1\": \"Feature types\", \"Header 2\": \"Supported feature types\", \"Header 3\": \"Basic types\"}","created_at":"2026-01-30T13:46:43.833284","updated_at":"2026-01-30T13:46:43.833284"}
{"id":"560d989f-6155-512d-94c2-b2946a6ce7b2","content":"### Sequence types  \nSequence types represent ordered lists of values:  \n**Sequence[Category]**: Ordered list of categorical values (e.g., `['action', 'drama', 'thriller']`).  \n**Sequence[TextCategory]**: Ordered list of text-based categories.  \n**Sequence[Text]**: Ordered list of text strings (e.g., tags, keywords).  \n**Sequence[Numerical]**: Ordered list of numeric values.  \n**Sequence[Binary]**: Ordered list of binary values.","document_title":"Feature types","h1":"Feature types","h2":"Supported feature types","h3":"Sequence types","h4":"","file_path":"engine_reference\/feature-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/feature-types.mdx","chunk_metadata":"{\"Header 1\": \"Feature types\", \"Header 2\": \"Supported feature types\", \"Header 3\": \"Sequence types\"}","created_at":"2026-01-30T13:46:43.833287","updated_at":"2026-01-30T13:46:43.833287"}
{"id":"170d46e0-c581-5a15-bfa6-ceb2553ef34d","content":"### Set types  \nSet types represent unordered collections of unique values:  \n**Set[Category]**: Unordered set of categorical values.  \n**Set[TextCategory]**: Unordered set of text-based categories.  \n**Set[Text]**: Unordered set of text strings.  \n**Set[Numerical]**: Unordered set of numeric values.  \n**Set[Binary]**: Unordered set of binary values.","document_title":"Feature types","h1":"Feature types","h2":"Supported feature types","h3":"Set types","h4":"","file_path":"engine_reference\/feature-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/feature-types.mdx","chunk_metadata":"{\"Header 1\": \"Feature types\", \"Header 2\": \"Supported feature types\", \"Header 3\": \"Set types\"}","created_at":"2026-01-30T13:46:43.833291","updated_at":"2026-01-30T13:46:43.833291"}
{"id":"b004ecc9-054b-5c5f-8b7c-c0d321e17d0f","content":"### Media types  \nMedia types are processed into embeddings using pre-trained models:  \n**Image**: Image data (e.g., product images, content thumbnails). Can be specified as URLs or base64-encoded strings. Processed using vision models like CLIP.  \n**Audio**: Audio data. Processed using audio understanding models.  \n**Video**: Video data. Processed using video understanding models.","document_title":"Feature types","h1":"Feature types","h2":"Supported feature types","h3":"Media types","h4":"","file_path":"engine_reference\/feature-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/feature-types.mdx","chunk_metadata":"{\"Header 1\": \"Feature types\", \"Header 2\": \"Supported feature types\", \"Header 3\": \"Media types\"}","created_at":"2026-01-30T13:46:43.833294","updated_at":"2026-01-30T13:46:43.833294"}
{"id":"68f8b2b9-6114-544a-98fe-201e863b64df","content":"### Other types  \n**Vector**: Pre-computed vector embeddings. Use when you have existing embeddings you want to use directly.  \n**Id**: Entity identifier columns (e.g., `item_id`, `user_id`). Specified separately in the `id` field of `schema_override`.","document_title":"Feature types","h1":"Feature types","h2":"Supported feature types","h3":"Other types","h4":"","file_path":"engine_reference\/feature-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/feature-types.mdx","chunk_metadata":"{\"Header 1\": \"Feature types\", \"Header 2\": \"Supported feature types\", \"Header 3\": \"Other types\"}","created_at":"2026-01-30T13:46:43.833298","updated_at":"2026-01-30T13:46:43.833298"}
{"id":"6bedd420-1533-5488-9394-0037164e09b8","content":"## Feature type inference  \nIf you don't specify feature types in `schema_override`, Shaped automatically infers types based on:  \n- Column data types from your source tables\n- Data patterns and cardinality\n- Column names (e.g., columns named `created_at` are inferred as Timestamp)  \nExplicitly specifying types in `schema_override` is recommended when:\n- You want to override automatic inference\n- You need to specify sequence or set types\n- You want to ensure media types (Image, Audio, Video) are processed correctly\n- You're working with complex data structures","document_title":"Feature types","h1":"Feature types","h2":"Feature type inference","h3":"","h4":"","file_path":"engine_reference\/feature-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/feature-types.mdx","chunk_metadata":"{\"Header 1\": \"Feature types\", \"Header 2\": \"Feature type inference\"}","created_at":"2026-01-30T13:46:43.833301","updated_at":"2026-01-30T13:46:43.833301"}
{"id":"0bd170cf-551e-5c43-a518-fc833c40739f","content":"## Using feature types in embeddings  \nText and media features can be used to create embeddings in the `index` block:  \n```yaml\nindex:\nembeddings:\n- name: text_embedding\nencoder:\ntype: hugging_face\nmodel_name: sentence-transformers\/modernbert\nbatch_size: 256\nitem_fields:\n- title\n- description\n- name: image_embedding\nencoder:\ntype: hugging_face\nmodel_name: openai\/clip-vit-base-patch32\nbatch_size: 32\nitem_fields:\n- image_url\n```  \nText features specified as `Text` type can be used with text embedding models. Image features specified as `Image` type can be used with vision models like CLIP.  \nThe `batch_size` parameter controls how many items are processed in each batch during embedding generation. It's recommended to use larger batch sizes (e.g., 256) for text embeddings and smaller batch sizes (e.g., 32) for image embeddings.","document_title":"Feature types","h1":"Feature types","h2":"Using feature types in embeddings","h3":"","h4":"","file_path":"engine_reference\/feature-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/feature-types.mdx","chunk_metadata":"{\"Header 1\": \"Feature types\", \"Header 2\": \"Using feature types in embeddings\"}","created_at":"2026-01-30T13:46:43.833304","updated_at":"2026-01-30T13:46:43.833304"}
{"id":"560370d9-f1dc-57e4-9765-a0e2e61dae19","content":"## Example: Complete schema override  \n```yaml\ndata:\nitem_table:\nname: products\ntype: table\nschema_override:\nitem:\nid: item_id\nfeatures:\n- name: title\ntype: Text\n- name: description\ntype: Text\n- name: category\ntype: TextCategory\n- name: tags\ntype: Set[TextCategory]\n- name: price\ntype: Numerical\n- name: image_url\ntype: Image\n- name: in_stock\ntype: Boolean\n- name: rating\ntype: Numerical\ncreated_at: created_at\nuser:\nid: user_id\nfeatures:\n- name: age\ntype: Numerical\n- name: location\ntype: TextCategory\n- name: preferences\ntype: Set[TextCategory]\ninteraction:\nfeatures:\n- name: event_type\ntype: Category\n```","document_title":"Feature types","h1":"Feature types","h2":"Example: Complete schema override","h3":"","h4":"","file_path":"engine_reference\/feature-types.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/feature-types.mdx","chunk_metadata":"{\"Header 1\": \"Feature types\", \"Header 2\": \"Example: Complete schema override\"}","created_at":"2026-01-30T13:46:43.833308","updated_at":"2026-01-30T13:46:43.833308"}
{"id":"88501ae6-c18d-525b-b3d5-063b3c463b2d","content":"# Engine examples  \nThis article goes through some common use cases for Shaped engines and how to set up your engine to achieve them. Use these as reference to build your first engine config or get more out of the ones you have.  \nEvery engine config splits into five blocks: data, index, training, deployment, queries.  \nIn most cases, these blocks can be configured independently of each other. The sections below go through each block and some common ways to configure them.","document_title":"Engine examples","h1":"Engine examples","h2":"","h3":"","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\"}","created_at":"2026-01-30T13:46:43.833929","updated_at":"2026-01-30T13:46:43.833929"}
{"id":"42632afb-b215-53e4-a40c-93ae9c7cf18c","content":"## Data block  \nThe `data` block defines what tables and connectors the engine will use.","document_title":"Engine examples","h1":"Engine examples","h2":"Data block","h3":"","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Data block\"}","created_at":"2026-01-30T13:46:43.833934","updated_at":"2026-01-30T13:46:43.833934"}
{"id":"001f0f4f-86de-520c-812a-f270e96bee88","content":"### Basic table connection  \nYou can connect your engine to tables in your Shaped account by its name. The following example connects to\nthree tables with no additional options.  \n```yaml\ndata:\nitem_table:\nname: apparel_catalog\ntype: table\nuser_table:\nname: customers\ntype: table\ninteraction_table:\nname: transactions\ntype: table\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Data block","h3":"Basic table connection","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Data block\", \"Header 3\": \"Basic table connection\"}","created_at":"2026-01-30T13:46:43.833938","updated_at":"2026-01-30T13:46:43.833938"}
{"id":"ed8d0ccf-a71d-575f-a0ce-bbe5b395e72d","content":"### Change ID columns to `item_id` and `user_id`  \nYou can use the `query` option to run an SQL query when fetching items.\nYou can use this to change column names, add a rating column and more.\nFor more complex SQL operations such as joins, use an SQL view.  \n```yaml\ndata:\nitem_table:\ntype: query\nquery: |\nselect product_id as item_id, color, name, department, tags, updated_at, created_at\nfrom apparel_catalog\nuser_table:\ntype: query\nquery: |\nselect customer_id as user_id, name, gender, most_recent_interaction, joined_at\nfrom customers\ninteraction_table:\ntype: query\nquery: |\nselect article_id as item_id, customer_id as user_id, transaction_type, price as label\nfrom transactions\nwhere created_at < NOW() - INTERVAL '6 months'\n```  \n**Note:** Shaped looks up items and users by the `item_id` and `user_id` columns, respectively.\nYour engine will weigh interactions using the `label` column.\nUse the `query` option or an SQL view to include these columns.","document_title":"Engine examples","h1":"Engine examples","h2":"Data block","h3":"Change ID columns to `item_id` and `user_id`","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Data block\", \"Header 3\": \"Change ID columns to `item_id` and `user_id`\"}","created_at":"2026-01-30T13:46:43.833941","updated_at":"2026-01-30T13:46:43.833941"}
{"id":"5ac602aa-0f7c-59b1-b668-f96ce1c0ce09","content":"### Specify how column features should be handled  \nThe `schema_override` option allows you to specify how specific features in your tables should be handled.\nFor example, you can specify that movie genres should be interpreted as a sequence of categories rather than a string literal. If you don't include a column in the schema override, it will be inferred.  \n```yaml\ndata:\nitem_table:\nname: movies\ntype: table\nschema_override:\nitem:\nid: item_id\nfeatures: # list of columns to use as features\n- name: genre\ntype: Sequence[TextCategory]\n- name: poster_url\ntype: Image\n- name: movie_title\ntype: Text\n- name: movie_age\ntype: Numerical\n- name: primary_genre\ntype: TextCategory\ncreated_at: created_at # which column to use as the created_at feature\/deduplication\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Data block","h3":"Specify how column features should be handled","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Data block\", \"Header 3\": \"Specify how column features should be handled\"}","created_at":"2026-01-30T13:46:43.833945","updated_at":"2026-01-30T13:46:43.833945"}
{"id":"fca085f7-6ff4-538d-9667-ef3d61e429a6","content":"## Index block  \nThe `index` block defines how the engine will use search and embeddings. You can use a pre-trained embedding model from huggingface, or train your own embedding model.","document_title":"Engine examples","h1":"Engine examples","h2":"Index block","h3":"","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Index block\"}","created_at":"2026-01-30T13:46:43.833948","updated_at":"2026-01-30T13:46:43.833948"}
{"id":"e60cfe52-1f54-5750-9e72-6da0f6e84d1a","content":"### Create embeddings for text and image features  \n`embeddings` is a list and can take multiple options. Each embedding can be specified in\nthe same way as shown in the example above. You can create multiple embeddings for\ndifferent purposes, such as separate embeddings for text and images.  \nThe `batch_size` parameter controls how many items are processed in each batch during embedding generation. It's recommended to use larger batch sizes (e.g., 256) for text embeddings and smaller batch sizes (e.g., 32) for image embeddings.  \n```yaml\nindex:\nembeddings:\n- name: name_embedding\nencoder:\ntype: hugging_face\nmodel_name: sentence-transformers\/modernbert\nbatch_size: 256\nitem_fields:\n- title\n- url_captions\n- name: image_embedding\nencoder:\ntype: hugging_face\nmodel_name: openai\/clip-vit-base-patch32\nbatch_size: 32\nitem_fields:\n- image_url\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Index block","h3":"Create embeddings for text and image features","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Index block\", \"Header 3\": \"Create embeddings for text and image features\"}","created_at":"2026-01-30T13:46:43.833951","updated_at":"2026-01-30T13:46:43.833951"}
{"id":"cdb2757a-26e6-59ce-9148-42191b25ff5b","content":"### Use a pre-trained model  \nThe `hugging_face` encoder type supports any pre-trained encoder from Huggingface's [Sentence Transformers](https:\/\/huggingface.co\/models?other=sentence-transformers) or [CLIP](https:\/\/huggingface.co\/models?other=clip) model library. The following example uses a sentence transformer embedding model.  \n```yaml\nindex:\nembeddings:\n- name: text_embedding\nencoder:\ntype: hugging_face\nmodel_name: sentence-transformers\/all-MiniLM-L6-v2\nbatch_size: 256\nitem_fields:\n- title\n- url_captions\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Index block","h3":"Use a pre-trained model","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Index block\", \"Header 3\": \"Use a pre-trained model\"}","created_at":"2026-01-30T13:46:43.833955","updated_at":"2026-01-30T13:46:43.833955"}
{"id":"5563efae-e58d-5265-9764-3281926369fb","content":"### Use a trained model as an encoder  \nIf you have trained an embedding model in the `training` block (e.g., ALS, Two-Tower,\nbeeFormer), you can reference it as an encoder in `index.embeddings`. This produces\nembeddings that are trained or fine-tuned on your data, and retrained based on your\ntraining schedule.  \n```yaml\nindex:\nembeddings:\n- name: trained_embedding\nencoder:\ntype: trained_model\nmodel_ref: als_score\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Index block","h3":"Use a trained model as an encoder","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Index block\", \"Header 3\": \"Use a trained model as an encoder\"}","created_at":"2026-01-30T13:46:43.833958","updated_at":"2026-01-30T13:46:43.833958"}
{"id":"d8289aa8-e658-5500-941f-c75a9bde3842","content":"### Run BM25 lexical search  \nThe `lexical_search` field configures BM25 keyword search. Use `lexical_search` for exact\nterm matching, such as looking up product names, SKUs, or IDs.  \n```yaml\nindex:\nlexical_search:\nitem_fields:\n- product_name\n- product_department\n- product_id\n- sku_id\n- alternate_sku\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Index block","h3":"Run BM25 lexical search","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Index block\", \"Header 3\": \"Run BM25 lexical search\"}","created_at":"2026-01-30T13:46:43.833961","updated_at":"2026-01-30T13:46:43.833961"}
{"id":"e68e3259-9663-58b7-9265-a8d08413d840","content":"## Training block  \nThe `training` block defines how to train scoring models on your data.  \nEngines can have a single model to base scoring on, or run multiple model policies at the same time. You can combine scores from multiple models using a value model expression.  \nEach scoring policy trains on your data on a given `schedule`.","document_title":"Engine examples","h1":"Engine examples","h2":"Training block","h3":"","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Training block\"}","created_at":"2026-01-30T13:46:43.833965","updated_at":"2026-01-30T13:46:43.833965"}
{"id":"63859560-69c8-528e-a0cb-89ca67e70781","content":"### Train a model to score item similarity  \n```yaml\ntraining:\nmodels:\n- name: my_elsa_score_model\npolicy_type: elsa\nstrategy: early_stopping\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Training block","h3":"Train a model to score item similarity","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Training block\", \"Header 3\": \"Train a model to score item similarity\"}","created_at":"2026-01-30T13:46:43.833968","updated_at":"2026-01-30T13:46:43.833968"}
{"id":"1b8c2d6a-fbd3-5129-a485-8fa538316a2e","content":"### Train multiple models  \nYou can train multiple models in a single engine. Each model will be trained independently and can be used in queries.  \n```yaml\ntraining:\nmodels:\n- name: elsa_score\npolicy_type: elsa\nstrategy: early_stopping\n- name: lgbm_score\npolicy_type: lightgbm\n```  \nTo combine scores from multiple models, you can use value model expressions in your queries.","document_title":"Engine examples","h1":"Engine examples","h2":"Training block","h3":"Train multiple models","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Training block\", \"Header 3\": \"Train multiple models\"}","created_at":"2026-01-30T13:46:43.833971","updated_at":"2026-01-30T13:46:43.833971"}
{"id":"38f2b98f-ad40-502d-a3af-5148620792cf","content":"## Deployment block  \nThe `deployment` block allows you to configure how the engine is deployed and served.\nThis includes settings for compute resources, scaling, and runtime parameters.","document_title":"Engine examples","h1":"Engine examples","h2":"Deployment block","h3":"","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Deployment block\"}","created_at":"2026-01-30T13:46:43.833974","updated_at":"2026-01-30T13:46:43.833974"}
{"id":"d5cfdcb6-0bb0-5a44-a872-ad011b17f360","content":"### Basic deployment  \nMinimal configuration using default settings (cold_tier storage, no autoscaling):  \n```yaml\ndeployment:\ndata_tier: cold_tier\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Deployment block","h3":"Basic deployment","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Deployment block\", \"Header 3\": \"Basic deployment\"}","created_at":"2026-01-30T13:46:43.833979","updated_at":"2026-01-30T13:46:43.833979"}
{"id":"bfea65f0-3e92-599e-951a-91838cfe0b51","content":"### Deployment with autoscaling  \nEnable autoscaling to handle variable traffic loads. This example scales based on requests per second:  \n```yaml\ndeployment:\ndata_tier: cold_tier\nautoscaling:\nmin_replicas: 2\nmax_replicas: 10\npolicy:\ntype: requests_per_second\ntarget_requests: 15.0\n```  \nYou can also scale based on latency:  \n```yaml\ndeployment:\ndata_tier: cold_tier\nautoscaling:\nmin_replicas: 1\nmax_replicas: 20\npolicy:\ntype: latency\ntarget_seconds: 0.5\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Deployment block","h3":"Deployment with autoscaling","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Deployment block\", \"Header 3\": \"Deployment with autoscaling\"}","created_at":"2026-01-30T13:46:43.833982","updated_at":"2026-01-30T13:46:43.833982"}
{"id":"83ae6c8d-76bf-598d-ad4c-45fdec38b7e2","content":"### High-performance deployment  \nUse `fast_tier` for Redis-based storage and configure online store caching for low-latency requirements:  \n```yaml\ndeployment:\ndata_tier: fast_tier\nserver:\nworker_count: 4\nonline_store:\ninteraction_max_per_user: 50\ninteraction_expiration_days: 30\npagination:\npage_expiration_in_seconds: 300\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Deployment block","h3":"High-performance deployment","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Deployment block\", \"Header 3\": \"High-performance deployment\"}","created_at":"2026-01-30T13:46:43.833986","updated_at":"2026-01-30T13:46:43.833986"}
{"id":"b9c92ce3-0369-52bf-bf5a-00aed4f98a4c","content":"### Deployment with canary rollout  \nUse canary rollout strategy for safe, gradual deployments with automatic evaluation:  \n```yaml\ndeployment:\ndata_tier: cold_tier\nrollout:\nstrategy:\ntype: canary\nevaluation_period_minutes: 15\n```  \nFor immediate deployments without canary evaluation, use recreate strategy:  \n```yaml\ndeployment:\ndata_tier: cold_tier\nrollout:\nstrategy:\ntype: recreate\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Deployment block","h3":"Deployment with canary rollout","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Deployment block\", \"Header 3\": \"Deployment with canary rollout\"}","created_at":"2026-01-30T13:46:43.833989","updated_at":"2026-01-30T13:46:43.833989"}
{"id":"bfc57d10-c47e-5667-b1ed-e5931d3ac3da","content":"## Queries block  \nThe `queries` block contains a list of saved queries. See the [Query Reference](..\/concepts\/queries) to learn how to make queries.","document_title":"Engine examples","h1":"Engine examples","h2":"Queries block","h3":"","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Queries block\"}","created_at":"2026-01-30T13:46:43.833992","updated_at":"2026-01-30T13:46:43.833992"}
{"id":"eb5c84b9-7950-5981-a30b-406a27105a24","content":"### Similar items query  \nFind items similar to a given item using collaborative filtering:  \n```yaml\nqueries:\nget_similar_items:\nquery:\ntype: rank\nfrom: item\nretrieve:\n- type: similarity\nembedding_ref: als_embedding\nquery_encoder:\ntype: precomputed_item\ninput_item_id: $parameters.item_id\nlimit: 20\nparameters:\nitem_id:\ndefault: null\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Queries block","h3":"Similar items query","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Queries block\", \"Header 3\": \"Similar items query\"}","created_at":"2026-01-30T13:46:43.833995","updated_at":"2026-01-30T13:46:43.833995"}
{"id":"b87afc49-0216-57cd-b189-ae03188c1448","content":"### Search query  \nSearch for items using semantic vector search:  \n```yaml\nqueries:\nsearch_products:\nquery:\ntype: rank\nfrom: item\nretrieve:\n- type: text_search\ninput_text_query: $parameters.query_text\nmode:\ntype: vector\ntext_embedding_ref: text_embedding\nlimit: 20\nparameters:\nquery_text:\ndefault: \"\"\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Queries block","h3":"Search query","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Queries block\", \"Header 3\": \"Search query\"}","created_at":"2026-01-30T13:46:43.833999","updated_at":"2026-01-30T13:46:43.833999"}
{"id":"5775ace5-57f9-5f60-944b-d373e6bca2e1","content":"### Personalized feed query  \nGenerate a personalized feed combining multiple retrieval strategies and scoring:  \n```yaml\nqueries:\npersonalized_feed:\nquery:\ntype: rank\nfrom: item\nretrieve:\n- type: similarity\nembedding_ref: item_content_embedding\nquery_encoder:\ntype: interaction_round_robin\ninput_user_id: $parameters.user_id\nlimit: 50\n- type: similarity\nembedding_ref: als_embedding\nquery_encoder:\ntype: precomputed_user\ninput_user_id: $parameters.user_id\nlimit: 50\n- type: column_order\ncolumns:\n- name: _derived_popular_rank\nascending: true\nlimit: 50\nfilter:\npredicate: prebuilt('exclude_seen', input_user_id='$parameters.user_id')\nscore:\ntype: score_ensemble\nvalue_model: click_through_rate\ninput_user_id: $parameters.user_id\ninput_interactions_item_ids: $parameters.interaction_item_ids\nreorder:\ndiversity: 0.3\nexploration: 0.2\nlimit: 20\nparameters:\nuser_id:\ndefault: null\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Queries block","h3":"Personalized feed query","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Queries block\", \"Header 3\": \"Personalized feed query\"}","created_at":"2026-01-30T13:46:43.834002","updated_at":"2026-01-30T13:46:43.834002"}
{"id":"d7c2d934-c942-5005-af58-588653823792","content":"### Reranking query  \nRerank a list of candidate items using a scoring model:  \n```yaml\nqueries:\nrerank_candidates:\nquery:\ntype: rank\nfrom: item\nretrieve:\n- type: candidate_ids\nitem_ids: $parameters.candidate_item_ids\nscore:\ntype: score_ensemble\nvalue_model: click_through_rate\ninput_user_id: $parameters.user_id\ninput_interactions_item_ids: $parameters.interaction_item_ids\nlimit: 10\nparameters:\ncandidate_item_ids:\ndefault: []\nuser_id:\ndefault: null\n```","document_title":"Engine examples","h1":"Engine examples","h2":"Queries block","h3":"Reranking query","h4":"","file_path":"engine_reference\/engine-recipes.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/engine-recipes.mdx","chunk_metadata":"{\"Header 1\": \"Engine examples\", \"Header 2\": \"Queries block\", \"Header 3\": \"Reranking query\"}","created_at":"2026-01-30T13:46:43.834005","updated_at":"2026-01-30T13:46:43.834005"}
{"id":"48a89618-4d60-58ec-b858-46bc59d61ac3","content":"# GitOps flow and patching  \nShaped engines work with version control and CI\/CD pipelines. Updates are applied\nincrementally with zero-downtime deployments.","document_title":"GitOps flow and patching","h1":"GitOps flow and patching","h2":"","h3":"","h4":"","file_path":"engine_reference\/gitops-and-patching.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/gitops-and-patching.mdx","chunk_metadata":"{\"Header 1\": \"GitOps flow and patching\"}","created_at":"2026-01-30T13:46:43.834133","updated_at":"2026-01-30T13:46:43.834133"}
{"id":"2da3de9d-c09f-50ac-8663-4c552cc425ad","content":"## How patching works  \nWhen you run `shaped update-engine --file engine.yaml` (or use the API), Shaped:  \n1. Compares configurations to identify differences\n2. Only retrains or reindexes components that changed\n3. Deploys updates without interrupting query serving\n4. Creates a new engine version while maintaining backward compatibility","document_title":"GitOps flow and patching","h1":"GitOps flow and patching","h2":"How patching works","h3":"","h4":"","file_path":"engine_reference\/gitops-and-patching.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/gitops-and-patching.mdx","chunk_metadata":"{\"Header 1\": \"GitOps flow and patching\", \"Header 2\": \"How patching works\"}","created_at":"2026-01-30T13:46:43.834137","updated_at":"2026-01-30T13:46:43.834137"}
{"id":"aaf02b24-60ca-5899-877c-0d525ce08187","content":"## What triggers updates  \n**Retraining:**\n- Changes to `training` block (model types, hyperparameters)\n- Changes to `data` block affecting training data\n- Changes to interaction data  \n**Reindexing:**\n- Changes to `index` block (embeddings, lexical search fields)\n- Changes to item data affecting embeddings  \n**No retraining\/reindexing:**\n- Changes to `deployment` block (scaling, resources)\n- Changes to `queries` block (saved query definitions)\n- Metadata-only changes","document_title":"GitOps flow and patching","h1":"GitOps flow and patching","h2":"What triggers updates","h3":"","h4":"","file_path":"engine_reference\/gitops-and-patching.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/gitops-and-patching.mdx","chunk_metadata":"{\"Header 1\": \"GitOps flow and patching\", \"Header 2\": \"What triggers updates\"}","created_at":"2026-01-30T13:46:43.834141","updated_at":"2026-01-30T13:46:43.834141"}
{"id":"e31bfba2-dcc0-5436-92cc-acafadc52142","content":"## Best practices  \n- Store engine configurations in git alongside your application code\n- Make small, focused changes to minimize retraining time\n- Test changes in a development environment before production\n- Monitor training metrics after updates  \nFor more details, see [Train a basic engine](..\/overview\/train_engine).","document_title":"GitOps flow and patching","h1":"GitOps flow and patching","h2":"Best practices","h3":"","h4":"","file_path":"engine_reference\/gitops-and-patching.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/gitops-and-patching.mdx","chunk_metadata":"{\"Header 1\": \"GitOps flow and patching\", \"Header 2\": \"Best practices\"}","created_at":"2026-01-30T13:46:43.834145","updated_at":"2026-01-30T13:46:43.834145"}
{"id":"02b9c507-0b5c-575f-ab78-32a26c79c35a","content":"# Choosing a model policy  \nThis guide provides an overview of embedding models available for training in Shaped, helping you choose the right model for vector search and item similarity tasks.  \nThese models can be configured in the `training` block of your config, under `models`:\n```yaml\ntraining:\nmodels:\n- name: my_elsa_score_model\npolicy_type: elsa\nstrategy: early_stopping\n```","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"","h3":"","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\"}","created_at":"2026-01-30T13:46:43.834895","updated_at":"2026-01-30T13:46:43.834895"}
{"id":"920c611a-0334-5e54-846e-2a99abcc61c1","content":"## You don't _need_ a model policy!  \nYou can get a lot of functionality out of an engine with no trained embedding or scoring models.  \n**Add an interaction table:** Any engine with an `interaction_table` will rank items by popularity, trending, and so on. The items table will have columns that expose the rank of these items compared to other items: [Derived columns](..\/concepts\/engines#derived-columns)  \n**Add embeddings for similarity search:** If you create an embedding in the `index` config, you can use that to find items that are similar to a single item, or items that are complementary to a set of items: [Complement items](..\/query_reference\/complement_items)  \n**Use value modeling:** All engines support value modeling by default, so you can begin by scoring items with expressions. Here's an example that uses popular rank with a time decay: `ORDER BY score(expression='(1000 - item._derived_popular_rank) \/ ((((now_seconds() - item.published_at) \/ 3600) + 2) ** 1.8)', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')`  \n---","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"You don't _need_ a model policy!","h3":"","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"You don't _need_ a model policy!\"}","created_at":"2026-01-30T13:46:43.834902","updated_at":"2026-01-30T13:46:43.834902"}
{"id":"523a4b4b-3b6f-5b34-af47-8d542c714c11","content":"## Embedding models  \n### SVD (Singular Value Decomposition)  \n#### Model Summary\nSVD implements matrix factorization using iterative algorithms inspired by singular value decomposition (like Funk SVD or SVD++). It can incorporate user\/item biases and is typically trained using Stochastic Gradient Descent (SGD).","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"Embedding models","h3":"SVD (Singular Value Decomposition)","h4":"Model Summary","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"Embedding models\", \"Header 3\": \"SVD (Singular Value Decomposition)\", \"Header 4\": \"Model Summary\"}","created_at":"2026-01-30T13:46:43.834905","updated_at":"2026-01-30T13:46:43.834905"}
{"id":"ef6d91b5-1d99-5bf0-a439-b1743663e9f5","content":"#### When to Use This Model\n- You have explicit feedback data (ratings, reviews with scores)\n- You want to model user and item biases (mean-centering tendencies)\n- You prefer SGD-based optimization over ALS\n- You need a straightforward matrix factorization approach\n- You're working with medium-sized datasets","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"Embedding models","h3":"SVD (Singular Value Decomposition)","h4":"When to Use This Model","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"Embedding models\", \"Header 3\": \"SVD (Singular Value Decomposition)\", \"Header 4\": \"When to Use This Model\"}","created_at":"2026-01-30T13:46:43.834910","updated_at":"2026-01-30T13:46:43.834910"}
{"id":"1c522fb2-30d1-58ef-a577-5fb8ef72dff4","content":"### When to Not Use This Model\n- You have only implicit feedback (ALS is typically better for this)\n- You need to leverage item content features (use Two-Tower or BeeFormer)\n- You want the most scalable solution (ELSA may be better)\n- You need to model sequential patterns (use sequential models)","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"Embedding models","h3":"When to Not Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"Embedding models\", \"Header 3\": \"When to Not Use This Model\"}","created_at":"2026-01-30T13:46:43.834914","updated_at":"2026-01-30T13:46:43.834914"}
{"id":"ab382b87-f32d-55f5-8829-58118bb2a4e5","content":"### Sample Use Cases \/ Item Types\n- Movie recommendations with explicit ratings (e.g., MovieLens)\n- Product recommendations with review scores\n- Restaurant or service recommendations with ratings\n- Any domain with explicit user feedback  \n---","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"Embedding models","h3":"Sample Use Cases \/ Item Types","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"Embedding models\", \"Header 3\": \"Sample Use Cases \/ Item Types\"}","created_at":"2026-01-30T13:46:43.834917","updated_at":"2026-01-30T13:46:43.834917"}
{"id":"285824e2-33b0-53b1-a76a-d28a4b650aff","content":"## ELSA (Efficient Latent Sparse Autoencoder)  \n### Model Summary\nELSA is a scalable shallow linear autoencoder for implicit feedback collaborative filtering that learns item-item relationships by reconstructing user interaction vectors. Unlike EASE, it uses a factorized hidden layer structure (low-rank plus sparse) to improve scalability.","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"ELSA (Efficient Latent Sparse Autoencoder)","h3":"Model Summary","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"ELSA (Efficient Latent Sparse Autoencoder)\", \"Header 3\": \"Model Summary\"}","created_at":"2026-01-30T13:46:43.834921","updated_at":"2026-01-30T13:46:43.834921"}
{"id":"19ec92a5-6e46-518e-bcd7-31aff71f823e","content":"### When to Use This Model\n- You have large-scale datasets and need scalability\n- You're working with implicit feedback data\n- You want better scalability than EASE while maintaining similar performance\n- You need efficient item-item similarity computation\n- You want a modern autoencoder approach for collaborative filtering","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"ELSA (Efficient Latent Sparse Autoencoder)","h3":"When to Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"ELSA (Efficient Latent Sparse Autoencoder)\", \"Header 3\": \"When to Use This Model\"}","created_at":"2026-01-30T13:46:43.834925","updated_at":"2026-01-30T13:46:43.834925"}
{"id":"5de6c847-882f-5132-88cc-a8306c70d11a","content":"### When to Not Use This Model\n- You have very small datasets (EASE might be simpler)\n- You need to incorporate item content features (use Two-Tower or BeeFormer)\n- You want to model sequential patterns (use sequential models)\n- You have explicit feedback only (SVD might be more appropriate)","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"ELSA (Efficient Latent Sparse Autoencoder)","h3":"When to Not Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"ELSA (Efficient Latent Sparse Autoencoder)\", \"Header 3\": \"When to Not Use This Model\"}","created_at":"2026-01-30T13:46:43.834929","updated_at":"2026-01-30T13:46:43.834929"}
{"id":"8119bbcd-79fe-5a4d-bcc8-e520f43472a3","content":"### Sample Use Cases \/ Item Types\n- Large e-commerce platforms with millions of products\n- Content streaming services with extensive catalogs\n- Social media feed recommendations\n- Any large-scale implicit feedback recommendation system  \n---","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"ELSA (Efficient Latent Sparse Autoencoder)","h3":"Sample Use Cases \/ Item Types","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"ELSA (Efficient Latent Sparse Autoencoder)\", \"Header 3\": \"Sample Use Cases \/ Item Types\"}","created_at":"2026-01-30T13:46:43.834933","updated_at":"2026-01-30T13:46:43.834933"}
{"id":"17442a3f-9517-5648-a655-db71ef92faab","content":"## EASE (Embarrassingly Shallow Autoencoder)  \n### Model Summary\nEASE is a simple linear autoencoder for item-based collaborative filtering that uses a closed-form solution, avoiding iterative optimization for computational efficiency.","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"EASE (Embarrassingly Shallow Autoencoder)","h3":"Model Summary","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"EASE (Embarrassingly Shallow Autoencoder)\", \"Header 3\": \"Model Summary\"}","created_at":"2026-01-30T13:46:43.834936","updated_at":"2026-01-30T13:46:43.834936"}
{"id":"1ca310e0-fe23-54a6-ad2d-ea39133d9b01","content":"### When to Use This Model\n- You want the simplest possible autoencoder approach\n- You need fast training with a closed-form solution\n- You have implicit feedback data\n- You're working with medium-sized datasets\n- You want a quick baseline or prototype","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"EASE (Embarrassingly Shallow Autoencoder)","h3":"When to Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"EASE (Embarrassingly Shallow Autoencoder)\", \"Header 3\": \"When to Use This Model\"}","created_at":"2026-01-30T13:46:43.834940","updated_at":"2026-01-30T13:46:43.834940"}
{"id":"76cd57e4-72b2-595d-9428-f30477e197cb","content":"### When to Not Use This Model\n- You have very large-scale datasets (ELSA scales better)\n- You need to leverage item content features (use Two-Tower or BeeFormer)\n- You want to model sequential patterns (use sequential models)\n- You need the highest accuracy (more complex models may perform better)","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"EASE (Embarrassingly Shallow Autoencoder)","h3":"When to Not Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"EASE (Embarrassingly Shallow Autoencoder)\", \"Header 3\": \"When to Not Use This Model\"}","created_at":"2026-01-30T13:46:43.834944","updated_at":"2026-01-30T13:46:43.834944"}
{"id":"10326509-371e-5737-aee8-23652386f8f2","content":"### Sample Use Cases \/ Item Types\n- Medium-sized e-commerce sites\n- Content recommendation systems\n- Product similarity for \"customers who bought this also bought\"\n- Quick prototypes and baselines  \n---","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"EASE (Embarrassingly Shallow Autoencoder)","h3":"Sample Use Cases \/ Item Types","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"EASE (Embarrassingly Shallow Autoencoder)\", \"Header 3\": \"Sample Use Cases \/ Item Types\"}","created_at":"2026-01-30T13:46:43.834948","updated_at":"2026-01-30T13:46:43.834948"}
{"id":"561f17ea-675a-5677-82b5-6618c3f1a6af","content":"## Two-Tower  \n### Model Summary\nThe Two-Tower architecture separates user and item computation into two distinct neural networks that output embeddings in the same vector space. Item embeddings can be pre-computed offline, enabling efficient Approximate Nearest Neighbor (ANN) search at inference time.","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"Two-Tower","h3":"Model Summary","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"Two-Tower\", \"Header 3\": \"Model Summary\"}","created_at":"2026-01-30T13:46:43.834951","updated_at":"2026-01-30T13:46:43.834951"}
{"id":"4c1d63ab-f48a-561d-b563-6fe57cbdb347","content":"### When to Use This Model\n- You have rich item metadata (text descriptions, categories, images)\n- You need efficient large-scale vector search and retrieval\n- You want to leverage both collaborative and content signals\n- You need production-ready embeddings for real-time recommendations\n- You want the best performance for general item similarity tasks","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"Two-Tower","h3":"When to Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"Two-Tower\", \"Header 3\": \"When to Use This Model\"}","created_at":"2026-01-30T13:46:43.834955","updated_at":"2026-01-30T13:46:43.834955"}
{"id":"60bbbd06-f3ca-59b5-ba80-98ab774cb431","content":"### When to Not Use This Model\n- You have only interaction data without item features (use ALS\/ELSA)\n- You need to model strict sequential patterns (use SASRec\/BERT4Rec)\n- You have very limited compute resources\n- You need a simple baseline model","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"Two-Tower","h3":"When to Not Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"Two-Tower\", \"Header 3\": \"When to Not Use This Model\"}","created_at":"2026-01-30T13:46:43.834958","updated_at":"2026-01-30T13:46:43.834958"}
{"id":"e6753f1c-72e3-533c-a1d6-d5fc9bec2fed","content":"### Sample Use Cases \/ Item Types\n- E-commerce with product descriptions, categories, images (e.g., clothing, electronics)\n- Content platforms with rich metadata (articles, videos with descriptions)\n- Job recommendations with job descriptions and requirements\n- Real estate with property descriptions and features\n- Any domain where items have rich textual or categorical attributes  \n---","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"Two-Tower","h3":"Sample Use Cases \/ Item Types","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"Two-Tower\", \"Header 3\": \"Sample Use Cases \/ Item Types\"}","created_at":"2026-01-30T13:46:43.834962","updated_at":"2026-01-30T13:46:43.834962"}
{"id":"c8b1fc41-4eef-53e5-bcc0-b6dd19224a65","content":"## BeeFormer  \n### Model Summary\nBeeFormer fine-tunes pre-trained sentence Transformers using user-item interaction data to bridge semantic similarity (from language models) and interaction-based similarity (from collaborative patterns).","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"BeeFormer","h3":"Model Summary","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"BeeFormer\", \"Header 3\": \"Model Summary\"}","created_at":"2026-01-30T13:46:43.834966","updated_at":"2026-01-30T13:46:43.834966"}
{"id":"54a22575-f523-5010-9731-de05053253ce","content":"### When to Use This Model\n- You have rich text content (product descriptions, titles, reviews)\n- You want to combine semantic understanding with behavioral signals\n- You need good cold-start performance for new items\n- You want to leverage pre-trained language model knowledge\n- You have items with detailed textual descriptions","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"BeeFormer","h3":"When to Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"BeeFormer\", \"Header 3\": \"When to Use This Model\"}","created_at":"2026-01-30T13:46:43.834970","updated_at":"2026-01-30T13:46:43.834970"}
{"id":"2d73b351-6270-5845-8b65-6aad51755d9a","content":"### When to Not Use This Model\n- You have minimal or no text content for items\n- You only have interaction data without item descriptions\n- You need the fastest training possible\n- You have very limited text data quality\n- You want a pure collaborative filtering approach","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"BeeFormer","h3":"When to Not Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"BeeFormer\", \"Header 3\": \"When to Not Use This Model\"}","created_at":"2026-01-30T13:46:43.834973","updated_at":"2026-01-30T13:46:43.834973"}
{"id":"51db4b42-2440-56bf-a5f1-9d0a3dccff37","content":"### Sample Use Cases \/ Item Types\n- E-commerce with detailed product descriptions (fashion, furniture, electronics)\n- Content platforms (articles, blog posts, research papers)\n- Job boards with detailed job descriptions\n- Real estate with property descriptions\n- Books, movies, or media with synopses and reviews\n- Any domain where semantic understanding of text content matters  \n---","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"BeeFormer","h3":"Sample Use Cases \/ Item Types","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"BeeFormer\", \"Header 3\": \"Sample Use Cases \/ Item Types\"}","created_at":"2026-01-30T13:46:43.834977","updated_at":"2026-01-30T13:46:43.834977"}
{"id":"c5b4b57c-42bb-5dc7-afad-297b55b98fa5","content":"## Item2Vec  \n### Model Summary\nItem2Vec adapts the Word2Vec algorithm (CBOW or Skip-gram) to learn item embeddings from user interaction sequences, capturing co-occurrence patterns within a context window.","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"Item2Vec","h3":"Model Summary","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"Item2Vec\", \"Header 3\": \"Model Summary\"}","created_at":"2026-01-30T13:46:43.834983","updated_at":"2026-01-30T13:46:43.834983"}
{"id":"4d227a65-635c-575e-b231-ba1983ba46e6","content":"### When to Use This Model\n- You have sequential interaction data (user sessions, browsing history)\n- You want to capture item co-occurrence patterns\n- You need a simple, efficient sequential embedding approach\n- You're working with session-based recommendations\n- You want to model \"items frequently viewed together\"","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"Item2Vec","h3":"When to Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"Item2Vec\", \"Header 3\": \"When to Use This Model\"}","created_at":"2026-01-30T13:46:43.834987","updated_at":"2026-01-30T13:46:43.834987"}
{"id":"d5a84929-947e-5003-b374-5607b63682be","content":"### When to Not Use This Model\n- You need to model strict temporal order and dependencies (use SASRec\/BERT4Rec)\n- You want to leverage item content features (use Two-Tower or BeeFormer)\n- You only have non-sequential interaction data\n- You need the highest accuracy for sequential recommendations","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"Item2Vec","h3":"When to Not Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"Item2Vec\", \"Header 3\": \"When to Not Use This Model\"}","created_at":"2026-01-30T13:46:43.834990","updated_at":"2026-01-30T13:46:43.834990"}
{"id":"7d9e66fc-00ca-5aae-a87d-94e8258efa20","content":"### Sample Use Cases \/ Item Types\n- E-commerce browsing sessions (items viewed in same session)\n- Music playlists and song sequences\n- Video watching sequences\n- Shopping cart co-occurrence patterns\n- Session-based web recommendations  \n---","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"Item2Vec","h3":"Sample Use Cases \/ Item Types","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"Item2Vec\", \"Header 3\": \"Sample Use Cases \/ Item Types\"}","created_at":"2026-01-30T13:46:43.834994","updated_at":"2026-01-30T13:46:43.834994"}
{"id":"4a169c0f-38ec-51b1-9929-d114edb69aca","content":"## SASRec (Self-Attentive Sequential Recommendation)  \n### Model Summary\nSASRec utilizes the Transformer architecture's self-attention mechanism to model user interaction sequences, capturing both short-term and long-range dependencies to predict the next item. It's unidirectional, processing sequences from past to future.","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"SASRec (Self-Attentive Sequential Recommendation)","h3":"Model Summary","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"SASRec (Self-Attentive Sequential Recommendation)\", \"Header 3\": \"Model Summary\"}","created_at":"2026-01-30T13:46:43.834998","updated_at":"2026-01-30T13:46:43.834998"}
{"id":"303c8134-72e1-51d4-968b-b590bbba2bc6","content":"### When to Use This Model\n- You have sequential interaction data with clear temporal order\n- You need to predict the \"next item\" in a sequence\n- You want to capture both short-term and long-term patterns\n- You need state-of-the-art sequential recommendation performance\n- You're building session-based or sequential recommendation systems","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"SASRec (Self-Attentive Sequential Recommendation)","h3":"When to Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"SASRec (Self-Attentive Sequential Recommendation)\", \"Header 3\": \"When to Use This Model\"}","created_at":"2026-01-30T13:46:43.835002","updated_at":"2026-01-30T13:46:43.835002"}
{"id":"abb9904e-7d2b-55f4-afbc-f0dc1bec490f","content":"### When to Not Use This Model\n- You don't have sequential or temporal data\n- You want general item similarity rather than next-item prediction\n- You need bidirectional context understanding (use BERT4Rec)\n- You have very short sequences (Item2Vec might be simpler)\n- You want to leverage item content features primarily (use Two-Tower)","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"SASRec (Self-Attentive Sequential Recommendation)","h3":"When to Not Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"SASRec (Self-Attentive Sequential Recommendation)\", \"Header 3\": \"When to Not Use This Model\"}","created_at":"2026-01-30T13:46:43.835005","updated_at":"2026-01-30T13:46:43.835005"}
{"id":"48bffdeb-423b-5b8e-8edb-341a24f91786","content":"### Sample Use Cases \/ Item Types\n- E-commerce next-item prediction (what to buy next)\n- Video streaming next-video recommendations\n- Music playlist continuation\n- News feed article sequences\n- Gaming item progression recommendations\n- Any domain with clear sequential user behavior  \n---","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"SASRec (Self-Attentive Sequential Recommendation)","h3":"Sample Use Cases \/ Item Types","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"SASRec (Self-Attentive Sequential Recommendation)\", \"Header 3\": \"Sample Use Cases \/ Item Types\"}","created_at":"2026-01-30T13:46:43.835009","updated_at":"2026-01-30T13:46:43.835009"}
{"id":"9045e3a5-e228-5276-a958-7d4d458a818e","content":"## BERT4Rec  \n### Model Summary\nBERT4Rec adapts the bidirectional Transformer architecture (BERT) for sequential recommendation, using bidirectional self-attention to learn context-aware item representations by considering both past and future context.","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"BERT4Rec","h3":"Model Summary","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"BERT4Rec\", \"Header 3\": \"Model Summary\"}","created_at":"2026-01-30T13:46:43.835013","updated_at":"2026-01-30T13:46:43.835013"}
{"id":"528191fd-04a0-5235-ae52-7d4417172f22","content":"### When to Use This Model\n- You have sequential data and want bidirectional context understanding\n- You need richer item representations than unidirectional models\n- You want to leverage both past and future context in sequences\n- You're working with sequences where context matters in both directions\n- You need state-of-the-art sequential recommendation with bidirectional attention","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"BERT4Rec","h3":"When to Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"BERT4Rec\", \"Header 3\": \"When to Use This Model\"}","created_at":"2026-01-30T13:46:43.835017","updated_at":"2026-01-30T13:46:43.835017"}
{"id":"c353d854-9bbd-5db2-a4fd-becb7450f1c8","content":"### When to Not Use This Model\n- You need real-time next-item prediction (unidirectional is more natural)\n- You have very long sequences (computational complexity)\n- You want the simplest sequential model (Item2Vec or SASRec)\n- You don't have sequential data\n- You primarily need general item similarity (use Two-Tower or ALS)","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"BERT4Rec","h3":"When to Not Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"BERT4Rec\", \"Header 3\": \"When to Not Use This Model\"}","created_at":"2026-01-30T13:46:43.835020","updated_at":"2026-01-30T13:46:43.835020"}
{"id":"fe7474e6-7321-532f-bced-dc6cab22704c","content":"### Sample Use Cases \/ Item Types\n- Context-aware sequential recommendations\n- Playlist generation with full context\n- Reading sequences where future context matters\n- Educational content sequences\n- Any sequential recommendation where bidirectional understanding helps  \n---","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"BERT4Rec","h3":"Sample Use Cases \/ Item Types","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"BERT4Rec\", \"Header 3\": \"Sample Use Cases \/ Item Types\"}","created_at":"2026-01-30T13:46:43.835024","updated_at":"2026-01-30T13:46:43.835024"}
{"id":"7a07dcf4-6cd0-56c5-b482-876e01595e66","content":"## GSASRec (Generalized Self-Attentive Sequential Recommendation)  \n### Model Summary\nGSASRec is an enhancement of SASRec designed to mitigate overconfidence issues from negative sampling by improving prediction calibration while retaining the core self-attention mechanism.","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"GSASRec (Generalized Self-Attentive Sequential Recommendation)","h3":"Model Summary","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"GSASRec (Generalized Self-Attentive Sequential Recommendation)\", \"Header 3\": \"Model Summary\"}","created_at":"2026-01-30T13:46:43.835028","updated_at":"2026-01-30T13:46:43.835028"}
{"id":"36efc674-f2b2-537d-a4b2-d965eb25dd98","content":"### When to Use This Model\n- You're experiencing overconfidence issues with SASRec\n- You need better calibrated predictions for sequential recommendations\n- You want improved negative sampling strategies\n- You need the benefits of SASRec with better training stability\n- You're working on production systems where calibration matters","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"GSASRec (Generalized Self-Attentive Sequential Recommendation)","h3":"When to Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"GSASRec (Generalized Self-Attentive Sequential Recommendation)\", \"Header 3\": \"When to Use This Model\"}","created_at":"2026-01-30T13:46:43.835032","updated_at":"2026-01-30T13:46:43.835032"}
{"id":"cd8c7eb9-4a34-54a5-9738-b624e17b1841","content":"### When to Not Use This Model\n- You don't have sequential data\n- You want the simplest sequential model (use SASRec or Item2Vec)\n- You need general item similarity (use Two-Tower or ALS)\n- You're just starting with sequential recommendations (SASRec is simpler)\n- You want to leverage item content primarily (use Two-Tower or BeeFormer)","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"GSASRec (Generalized Self-Attentive Sequential Recommendation)","h3":"When to Not Use This Model","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"GSASRec (Generalized Self-Attentive Sequential Recommendation)\", \"Header 3\": \"When to Not Use This Model\"}","created_at":"2026-01-30T13:46:43.835036","updated_at":"2026-01-30T13:46:43.835036"}
{"id":"1eb7090d-0d4a-5af6-a423-295ee3caa11f","content":"### Sample Use Cases \/ Item Types\n- Production sequential recommendation systems\n- E-commerce next-item prediction with calibrated scores\n- Video streaming with improved prediction confidence\n- Any sequential recommendation where prediction calibration is critical  \n---","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"GSASRec (Generalized Self-Attentive Sequential Recommendation)","h3":"Sample Use Cases \/ Item Types","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"GSASRec (Generalized Self-Attentive Sequential Recommendation)\", \"Header 3\": \"Sample Use Cases \/ Item Types\"}","created_at":"2026-01-30T13:46:43.835039","updated_at":"2026-01-30T13:46:43.835039"}
{"id":"99c401c5-fad5-56d5-8a37-fcb08b262626","content":"## Quick Decision Guide  \n**For general item similarity and vector search:**\n- **Best choice:** Two-Tower (if you have item features) or ALS\/ELSA (if you only have interactions)  \n**For text-rich items:**\n- **Best choice:** BeeFormer (combines semantic + behavioral) or Two-Tower (if you have other features too)  \n**For sequential recommendations:**\n- **Best choice:** SASRec (unidirectional) or BERT4Rec (bidirectional), or Item2Vec (simpler co-occurrence)  \n**For large-scale implicit feedback:**\n- **Best choice:** ELSA (scalable) or ALS (simple and effective)  \n**For explicit feedback:**\n- **Best choice:** SVD (with biases) or ALS (can work with explicit too)","document_title":"Choosing a model policy","h1":"Choosing a model policy","h2":"Quick Decision Guide","h3":"","h4":"","file_path":"engine_reference\/choose-a-model.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/choose-a-model.mdx","chunk_metadata":"{\"Header 1\": \"Choosing a model policy\", \"Header 2\": \"Quick Decision Guide\"}","created_at":"2026-01-30T13:46:43.835043","updated_at":"2026-01-30T13:46:43.835043"}
{"id":"1f11d2ff-fa4b-519e-bc72-6b56d93153b5","content":"# Hyperparameter tuning  \nShaped automatically tunes model hyperparameters to optimize performance. You can configure hyperparameter tuning by specifying exact values, setting min\/max ranges for partial tuning, or letting Shaped handle all tuning automatically.","document_title":"Hyperparameter tuning","h1":"Hyperparameter tuning","h2":"","h3":"","h4":"","file_path":"engine_reference\/hyperparameter-tuning.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/hyperparameter-tuning.mdx","chunk_metadata":"{\"Header 1\": \"Hyperparameter tuning\"}","created_at":"2026-01-30T13:46:43.835345","updated_at":"2026-01-30T13:46:43.835345"}
{"id":"aceea0b9-9cf2-5205-8373-c83a9dd1cfa5","content":"## Autotuning by default  \nIf you don't specify hyperparameters in your model configuration, Shaped automatically tunes all tunable hyperparameters. This applies to all model policies.  \n```yaml\ntraining:\nmodels:\n- name: my_model\npolicy_type: lightgbm\n# No hyperparameters specified - all will be autotuned\n```","document_title":"Hyperparameter tuning","h1":"Hyperparameter tuning","h2":"Autotuning by default","h3":"","h4":"","file_path":"engine_reference\/hyperparameter-tuning.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/hyperparameter-tuning.mdx","chunk_metadata":"{\"Header 1\": \"Hyperparameter tuning\", \"Header 2\": \"Autotuning by default\"}","created_at":"2026-01-30T13:46:43.835350","updated_at":"2026-01-30T13:46:43.835350"}
{"id":"532ced64-d8d9-57bd-a385-2e0303bcc09f","content":"## Event values filtering  \nAt minimum, you can specify `event_values` to filter which interaction events are used for training. This is useful when your interaction table contains multiple event types and you want to train on specific events.  \n```yaml\ntraining:\nmodels:\n- name: purchase_model\npolicy_type: lightgbm\nevent_values:\n- purchase\n- checkout_complete\n```","document_title":"Hyperparameter tuning","h1":"Hyperparameter tuning","h2":"Event values filtering","h3":"","h4":"","file_path":"engine_reference\/hyperparameter-tuning.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/hyperparameter-tuning.mdx","chunk_metadata":"{\"Header 1\": \"Hyperparameter tuning\", \"Header 2\": \"Event values filtering\"}","created_at":"2026-01-30T13:46:43.835354","updated_at":"2026-01-30T13:46:43.835354"}
{"id":"cf24e299-0eaf-5aae-bd0c-ecf38200e9fa","content":"## Partial tuning  \nMany hyperparameters support partial tuning by specifying min and max values. Shaped will tune the parameter within the specified range.","document_title":"Hyperparameter tuning","h1":"Hyperparameter tuning","h2":"Partial tuning","h3":"","h4":"","file_path":"engine_reference\/hyperparameter-tuning.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/hyperparameter-tuning.mdx","chunk_metadata":"{\"Header 1\": \"Hyperparameter tuning\", \"Header 2\": \"Partial tuning\"}","created_at":"2026-01-30T13:46:43.835357","updated_at":"2026-01-30T13:46:43.835357"}
{"id":"64edac4f-eccc-5780-b213-1e08a7e7db73","content":"### LightGBM example  \n```yaml\ntraining:\nmodels:\n- name: click_through_rate\npolicy_type: lightgbm\nmax_depth:\ntype: tunable_int\nmin: -1\nmax: 10\nnum_leaves:\ntype: tunable_int\nmin: 20\nmax: 40\nlearning_rate:\ntype: tunable_float\nmin: 0.001\nmax: 0.1\n```","document_title":"Hyperparameter tuning","h1":"Hyperparameter tuning","h2":"Partial tuning","h3":"LightGBM example","h4":"","file_path":"engine_reference\/hyperparameter-tuning.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/hyperparameter-tuning.mdx","chunk_metadata":"{\"Header 1\": \"Hyperparameter tuning\", \"Header 2\": \"Partial tuning\", \"Header 3\": \"LightGBM example\"}","created_at":"2026-01-30T13:46:43.835361","updated_at":"2026-01-30T13:46:43.835361"}
{"id":"b7204fd7-c632-58e4-8778-d4fb66e7d9a3","content":"### ELSA example  \n```yaml\ntraining:\nmodels:\n- name: conversion_rate\npolicy_type: elsa\nfactors:\ntype: tunable_int\nmin: 10\nmax: 200\nlr:\ntype: tunable_float\nmin: 0.01\nmax: 0.1\n```","document_title":"Hyperparameter tuning","h1":"Hyperparameter tuning","h2":"Partial tuning","h3":"ELSA example","h4":"","file_path":"engine_reference\/hyperparameter-tuning.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/hyperparameter-tuning.mdx","chunk_metadata":"{\"Header 1\": \"Hyperparameter tuning\", \"Header 2\": \"Partial tuning\", \"Header 3\": \"ELSA example\"}","created_at":"2026-01-30T13:46:43.835365","updated_at":"2026-01-30T13:46:43.835365"}
{"id":"21f7fae1-4515-5e46-a6ae-04149e2b0877","content":"### BERT4Rec example  \n```yaml\ntraining:\nmodels:\n- name: sequence_model_score\npolicy_type: bert4rec\nbatch_size:\ntype: tunable_int\nmin: 32\nmax: 2048\nlearning_rate:\ntype: tunable_float\nmin: 0.0001\nmax: 0.1\nattn_dropout_prob:\ntype: tunable_float\nmin: 0.0\nmax: 0.5\nhidden_dropout_prob:\ntype: tunable_float\nmin: 0.0\nmax: 0.5\n```","document_title":"Hyperparameter tuning","h1":"Hyperparameter tuning","h2":"Partial tuning","h3":"BERT4Rec example","h4":"","file_path":"engine_reference\/hyperparameter-tuning.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/hyperparameter-tuning.mdx","chunk_metadata":"{\"Header 1\": \"Hyperparameter tuning\", \"Header 2\": \"Partial tuning\", \"Header 3\": \"BERT4Rec example\"}","created_at":"2026-01-30T13:46:43.835369","updated_at":"2026-01-30T13:46:43.835369"}
{"id":"44f25159-31a9-57b8-844a-008796c7fce1","content":"## Combining approaches  \nYou can combine exact values, partial tuning, and autotuning in the same model configuration. Any hyperparameters not specified will be autotuned.  \n```yaml\ntraining:\nmodels:\n- name: tuned_model\npolicy_type: lightgbm\nevent_values:\n- click\n- view\nmax_depth:\ntype: tunable_int\nmin: 5\nmax: 8\n# learning_rate, num_leaves, and other hyperparameters will be autotuned\n```","document_title":"Hyperparameter tuning","h1":"Hyperparameter tuning","h2":"Combining approaches","h3":"","h4":"","file_path":"engine_reference\/hyperparameter-tuning.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/hyperparameter-tuning.mdx","chunk_metadata":"{\"Header 1\": \"Hyperparameter tuning\", \"Header 2\": \"Combining approaches\"}","created_at":"2026-01-30T13:46:43.835372","updated_at":"2026-01-30T13:46:43.835372"}
{"id":"00bbb19d-f0a1-5a15-994e-49278a17c36d","content":"## End-to-end example  \nThis example shows how to train an ELSA and click_through_rate model with hyperparameter tuning, then combine their scores in a query.","document_title":"Hyperparameter tuning","h1":"Hyperparameter tuning","h2":"End-to-end example","h3":"","h4":"","file_path":"engine_reference\/hyperparameter-tuning.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/hyperparameter-tuning.mdx","chunk_metadata":"{\"Header 1\": \"Hyperparameter tuning\", \"Header 2\": \"End-to-end example\"}","created_at":"2026-01-30T13:46:43.835376","updated_at":"2026-01-30T13:46:43.835376"}
{"id":"3e02cb27-a97c-5032-bcfa-85fd3c6fce6d","content":"### Engine configuration  \n```yaml\ndata:\nitem_table:\nname: products\ntype: table\nuser_table:\nname: users\ntype: table\ninteraction_table:\nname: interactions\ntype: table\n\ntraining:\nmodels:\n- name: conversion_rate\npolicy_type: elsa\nfactors:\ntype: tunable_int\nmin: 10\nmax: 200\nlr:\ntype: tunable_float\nmin: 0.01\nmax: 0.1\n- name: click_through_rate\npolicy_type: lightgbm\nevent_values:\n- click\n- purchase\nmax_depth:\ntype: tunable_int\nmin: 5\nmax: 10\nnum_leaves:\ntype: tunable_int\nmin: 20\nmax: 40\nlearning_rate:\ntype: tunable_float\nmin: 0.001\nmax: 0.1\n```","document_title":"Hyperparameter tuning","h1":"Hyperparameter tuning","h2":"End-to-end example","h3":"Engine configuration","h4":"","file_path":"engine_reference\/hyperparameter-tuning.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/hyperparameter-tuning.mdx","chunk_metadata":"{\"Header 1\": \"Hyperparameter tuning\", \"Header 2\": \"End-to-end example\", \"Header 3\": \"Engine configuration\"}","created_at":"2026-01-30T13:46:43.835380","updated_at":"2026-01-30T13:46:43.835380"}
{"id":"98b34509-a6b1-57c4-8782-048094eccf1c","content":"### Query with combined scoring  \nUse a value model expression in the score stage to combine outputs from both models:  \n```yaml\nqueries:\npersonalized_feed:\nquery:\ntype: rank\nfrom: item\nretrieve:\n- type: column_order\ncolumns:\n- name: _derived_popular_rank\nascending: true\nlimit: 1000\nscore:\ntype: score_ensemble\nvalue_model: 0.6 * conversion_rate + 0.4 * click_through_rate\ninput_user_id: $parameters.user_id\ninput_interactions_item_ids: $parameters.interaction_item_ids\nlimit: 20\nparameters:\nuser_id:\ndefault: null\n```  \nThe value model expression `0.6 * conversion_rate + 0.4 * click_through_rate` weights the conversion_rate model at 60% and the click_through_rate model at 40%. Adjust these weights based on your performance requirements.","document_title":"Hyperparameter tuning","h1":"Hyperparameter tuning","h2":"End-to-end example","h3":"Query with combined scoring","h4":"","file_path":"engine_reference\/hyperparameter-tuning.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/engine_reference\/hyperparameter-tuning.mdx","chunk_metadata":"{\"Header 1\": \"Hyperparameter tuning\", \"Header 2\": \"End-to-end example\", \"Header 3\": \"Query with combined scoring\"}","created_at":"2026-01-30T13:46:43.835384","updated_at":"2026-01-30T13:46:43.835384"}
{"id":"c8cde0e0-bf37-5226-93da-430ba10164e5","content":"# Security & Compliance  \nShaped is SOC 2 Type 2 compliant. An independent, third-party audit, conducted by Prescient Assurance, LLC,\nhas confirmed that our information security practices, policies, procedures, and operations meet the rigorous\nSOC 2 standards for security as developed by the American Institute of Certified Public Accountants (AICPA).  \nThe audit and attestation confirm our commitment to the highest standards of security and data protection.\nThe successful completion of the SOC 2 Type 2 examination, which covers the period from February 1, 2025,\nto May 1, 2025, provides our customers with the assurance that their data is being handled securely.  \nFor a copy of our SOC 2 Type 2 report, please contact us.","document_title":"Security & Compliance","h1":"Security & Compliance","h2":"","h3":"","h4":"","file_path":"support\/security.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/security.mdx","chunk_metadata":"{\"Header 1\": \"Security & Compliance\"}","created_at":"2026-01-30T13:46:43.835557","updated_at":"2026-01-30T13:46:43.835557"}
{"id":"ea2fe1a0-9f9c-5335-9f9e-fac834ed4beb","content":"## Security  \nShaped was built from the ground-up with security as a top priority. We operate as a\ncloud software-as-a-service (SaaS) platform, and will discard any unused data when requested.\nShaped performs well without Personally Identifiable Information (PII) and, for an added\nlayer of security, works on encrypted data if needed.  \nShaped uses best physical, virtual, network and operational security practices. We\nrely on role-based authentication for all data access and records audit logs for every\naction. We avoid data replication and have clear multi-tenant isolation policies to\nensure sensitive and critical systems are separated. Shaped uses isolated VPCs for all\nproduction deployments. Data is encrypted at rest using AES-256 encryption or higher\nand all ingress and egress traffic is encrypted via TLS 1.2+.","document_title":"Security & Compliance","h1":"Security & Compliance","h2":"Security","h3":"","h4":"","file_path":"support\/security.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/security.mdx","chunk_metadata":"{\"Header 1\": \"Security & Compliance\", \"Header 2\": \"Security\"}","created_at":"2026-01-30T13:46:43.835561","updated_at":"2026-01-30T13:46:43.835561"}
{"id":"1628d819-8e86-5664-b741-46a1e2cdb548","content":"## Compliance  \nShaped is also GDPR compliant. We follow best security and governance practices,\nincluding using Vanta for real-time security and compliance monitoring, employee\nsecurity training, device management, penetration testing, vulnerability scanning,\nand secure software development practices. We have a data processing addendum\navailable on request if you require more information.  \n<p float=\"left\" style={{marginTop: 50}}>\n<VantaSVG viewBox=\"0 0 150 150\" height=\"200px\" width=\"200px\" style={{marginLeft: 100}}\/>  \n<\/p>","document_title":"Security & Compliance","h1":"Security & Compliance","h2":"Compliance","h3":"","h4":"","file_path":"support\/security.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/security.mdx","chunk_metadata":"{\"Header 1\": \"Security & Compliance\", \"Header 2\": \"Compliance\"}","created_at":"2026-01-30T13:46:43.835565","updated_at":"2026-01-30T13:46:43.835565"}
{"id":"48fd5040-3a38-5050-987e-e5a44141ae29","content":"## Subprocessor List  \n| Third Party Entity     | Location                  | Service Provided   |\n| ---------------------------|---------------------------|--------------------|\n| Amazon Web Services Inc.   | United States (us-east-2) | Cloud hosting      |\n| ClickHouse, Inc.         | United States             | Database Hosting   |  \nFor the most up-to-date list of subprocessors, please contact us at security@shaped.ai.","document_title":"Security & Compliance","h1":"Security & Compliance","h2":"Subprocessor List","h3":"","h4":"","file_path":"support\/security.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/support\/security.mdx","chunk_metadata":"{\"Header 1\": \"Security & Compliance\", \"Header 2\": \"Subprocessor List\"}","created_at":"2026-01-30T13:46:43.835568","updated_at":"2026-01-30T13:46:43.835568"}
{"id":"f3bb5428-f4f8-5fcf-b47b-8548f1d5a74e","content":"# Common errors  \nA list of common errors and how to solve them.","document_title":"Common errors","h1":"Common errors","h2":"","h3":"","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\"}","created_at":"2026-01-30T13:46:43.836234","updated_at":"2026-01-30T13:46:43.836234"}
{"id":"161e4265-7b58-568f-ac5d-809115d99746","content":"## CLI errors  \n### Cannot install CLI  \nThe Shaped CLI support Python version 3.8 - 3.11. If you try to install it using an unsupported version, it will fail in the build process.  \n**Sample error message:**  \n> ```\n> ERROR: Failed building wheel for pyarrow\n> Failed to build pyarrow\n> ERROR: Failed to build installable wheels for some pyproject.toml based projects (pyarrow)\n> ```  \n**Solutions:**  \nRun `pip install` in a virtual environment that uses Python 3.11:\n- Using `venv`:\n1. Create a venv with Python 3.11: `python3.11 -m venv .venv`\n2. Activate your environment: `source .\/.venv\/bin\/activate`\n3. Install Shaped: `pip install shaped`\n- Using `conda`:\n1. Create an environment: `conda create --name myenv python=3.11`\n2. Activate your environment: `conda activate myenv`\n3. Install Shaped: `pip install shaped`","document_title":"Common errors","h1":"Common errors","h2":"CLI errors","h3":"Cannot install CLI","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"CLI errors\", \"Header 3\": \"Cannot install CLI\"}","created_at":"2026-01-30T13:46:43.836238","updated_at":"2026-01-30T13:46:43.836238"}
{"id":"50be3797-3d73-57cc-8eb6-2eb6324c9a70","content":"### Shaped command not found  \nThis error occurs when you try to use the Shaped CLI but it is not installed in your environment. Install the CLI or activate an environment where it is installed.  \n**Sample error message:**  \n> ```\n> command not found: shaped\n> ```  \n**Solution:**  \n- Install the Shaped CLI: `pip install shaped`\n- Activate an environment where the CLI is installed: `source .\/path\/to\/env\/bin\/activate`","document_title":"Common errors","h1":"Common errors","h2":"CLI errors","h3":"Shaped command not found","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"CLI errors\", \"Header 3\": \"Shaped command not found\"}","created_at":"2026-01-30T13:46:43.836241","updated_at":"2026-01-30T13:46:43.836241"}
{"id":"505928ad-8696-57c7-b832-ec47595d163e","content":"## API errors  \nThe following errors are returned by the API.","document_title":"Common errors","h1":"Common errors","h2":"API errors","h3":"","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"API errors\"}","created_at":"2026-01-30T13:46:43.836245","updated_at":"2026-01-30T13:46:43.836245"}
{"id":"b2b420aa-5fe0-5ea9-8707-39e51820d319","content":"### 422 Value Error  \nA 422 Value Error occurs when your API request contains fields that don't match the expected schema (e.g., extra or invalid fields).  \n**Sample error message:**\n> `'Value error, Failed to parse V2 config: Validation error at ''data.item_tables'': Extra inputs are not permitted'`  \n**Solution:**\n- Your API request had the wrong JSON structure.\n- Check that your request shape matches the [API reference for that query](\/docs\/api\/v2)","document_title":"Common errors","h1":"Common errors","h2":"API errors","h3":"422 Value Error","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"API errors\", \"Header 3\": \"422 Value Error\"}","created_at":"2026-01-30T13:46:43.836248","updated_at":"2026-01-30T13:46:43.836248"}
{"id":"fd461175-fee1-5002-bb57-19a96cb827fe","content":"### 403 Forbidden  \nA 403 Forbidden error occurs when your API request does not have the correct authentication for the endpoint you are calling.  \n**Sample error message:**\n> A 403 error from the API with \"Forbidden\" in the response  \n**Solution:**\n- Ensure your API key is correct\n- Use a write API key if writing to the system (eg creating models, creating datasets)\n- Ensure the endpoint is correct \u2013 verify base URL, model or table name, path","document_title":"Common errors","h1":"Common errors","h2":"API errors","h3":"403 Forbidden","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"API errors\", \"Header 3\": \"403 Forbidden\"}","created_at":"2026-01-30T13:46:43.836251","updated_at":"2026-01-30T13:46:43.836251"}
{"id":"5953970b-42c8-5f07-ac14-ea22dd734783","content":"## Engine deployment errors  \nThis section explains some common errors that happen during engine deployment, and how to solve them.","document_title":"Common errors","h1":"Common errors","h2":"Engine deployment errors","h3":"","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"Engine deployment errors\"}","created_at":"2026-01-30T13:46:43.836255","updated_at":"2026-01-30T13:46:43.836255"}
{"id":"4ceed45d-162d-50cd-a617-b8bbe597bada","content":"### 'item_id' missing from item source  \n**Sample error message:**\n> There was an error when fetching: Feature store version 40639 failed with: There was an error when fetching: Internal error, \\{'status': 422, 'title': 'The fetch config is invalid.', 'detail': \"'item_id' missing from item source, found: ['name', 'description', 'category', 'price', 'created_at'].\"} and status: FeatureStoreStatusType.ERROR  \n**Solution:**\n- Ensure your item_table contains an `item_id` column\n- You can set item_ids from a unique identifier column in your data. Use an SQL view to create a new table with the `item_id` column and fill it with the values for each item.\n- Set the labels with an SQL query in your engine config. This is the quickest approach but is fragile, as you'll get the error again if you don't remember to add it to every engine.  \n```yaml\ndata:\ninteraction_table:\ntype: query\nquery: select *, '5' as label from hm_transactions order by created_at, registered\n# ... remaining engine config\n```","document_title":"Common errors","h1":"Common errors","h2":"Engine deployment errors","h3":"'item_id' missing from item source","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"Engine deployment errors\", \"Header 3\": \"'item_id' missing from item source\"}","created_at":"2026-01-30T13:46:43.836259","updated_at":"2026-01-30T13:46:43.836259"}
{"id":"0e10f66d-b293-5d4f-b46a-d5ad9c8f13d4","content":"### 'user_id' missing from item source  \n**Sample error message:**\n> There was an error when fetching: Feature store version 40639 failed with: There was an error when fetching: Internal error, \\{'status': 422, 'title': 'The fetch config is invalid.', 'detail': \"'user_id' missing from user source, found: ['item_id', 'timestamp', 'label', 'created_at'].\"} and status: FeatureStoreStatusType.ERROR  \n**Solution:**\n- Ensure your interaction_table and\/or user_table contains a `user_id` column.\n- You can set item_ids from a unique identifier column in your data. Use an SQL view to create a new table with the `item_id` column and fill it with the values for each item.\n- Set the labels with an SQL query in your engine config. This is the quickest approach but is fragile, as you'll get the error again if you don't remember to add it to every engine.  \n```yaml\ndata:\ninteraction_table:\ntype: query\nquery: select *, '5' as label from hm_transactions order by created_at, registered\n# ... remaining engine config\n```","document_title":"Common errors","h1":"Common errors","h2":"Engine deployment errors","h3":"'user_id' missing from item source","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"Engine deployment errors\", \"Header 3\": \"'user_id' missing from item source\"}","created_at":"2026-01-30T13:46:43.836266","updated_at":"2026-01-30T13:46:43.836266"}
{"id":"b56154ca-d278-5eb2-9816-1a64c6847472","content":"### 'label' missing from interaction_table  \nThis error occurs when the `label` column is missing. This column defines categories or weights for each interaction.  \n**Sample error message:**\n> There was an error when fetching: Feature store version 40639 failed with: There was an error when fetching: Internal error, \\{'status': 422, 'title': 'The fetch config is invalid.', 'detail': \"'label' missing from interaction source, found: ['user_id', 'item_id', 'timestamp', 'created_at', 'event_type'].\"} and status: FeatureStoreStatusType.ERROR  \n**Solution:**\n- Ensure your interaction_table contains `item_id`, `user_id` and `label` columns\n- You can set labels based on the event types in your interaction data. Use an SQL view to create a new table with the `label` column and fill it with the values for each interaction events.\n- Set the labels with an SQL query in your engine config. This is the quickest approach but is fragile, as you'll get the error again if you don't remember to add it to every engine.  \n```yaml\ndata:\ninteraction_table:\ntype: query\nquery: select *, '5' as label from hm_transactions order by created_at, registered\n# ... remaining engine config\n```","document_title":"Common errors","h1":"Common errors","h2":"Engine deployment errors","h3":"'label' missing from interaction_table","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"Engine deployment errors\", \"Header 3\": \"'label' missing from interaction_table\"}","created_at":"2026-01-30T13:46:43.836271","updated_at":"2026-01-30T13:46:43.836271"}
{"id":"7ed407e3-854f-559a-baf7-57a69d31cf3a","content":"### 'created_at' missing from interaction_table  \nThis error occurs when the feature store expects a `created_at` column in your source table, but it is not present.  \n**Sample error message:**\n> There was an error when fetching: Feature store version 40639 failed with: There was an error when fetching: Internal error, \\{'status': 422, 'title': 'The fetch config is invalid.', 'detail': \"{'created_at'} missing from events source, found: ['user_id', 'timestamp', 'artist_id', 'artist_name', 'item_id', 'track_name', 'label'].\"} and status: FeatureStoreStatusType.ERROR  \n**Solutions:**\n- Add the `created_at` column to your source table if it doesn't exist.\n- If the column exists with a different name (e.g., `timestamp`), use an SQL view to create a new table with the `created_at` column by aliasing the existing column.\n- Add the `created_at` column with an SQL query in your engine config. This is the quickest approach but is fragile, as you'll get the error again if you don't remember to add it to every engine.","document_title":"Common errors","h1":"Common errors","h2":"Engine deployment errors","h3":"'created_at' missing from interaction_table","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"Engine deployment errors\", \"Header 3\": \"'created_at' missing from interaction_table\"}","created_at":"2026-01-30T13:46:43.836275","updated_at":"2026-01-30T13:46:43.836275"}
{"id":"9cfc29ec-7a3f-563d-9715-f709145a6f77","content":"### Invalid datetime format  \n**Sample error message:**\n> Exception: Cannot parse DateTime: Cannot parse DateTime from String: while converting column `release_date` from type String to type DateTime  \n**Solution:**\n- Ensure datetimes are formatted in YYYY-MM-DDZ00:00:00 format.\n- Cast any datetimes with an SQL query like: `select toDateTimeOrNull(release_date) as release_date_casted from movies`","document_title":"Common errors","h1":"Common errors","h2":"Engine deployment errors","h3":"Invalid datetime format","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"Engine deployment errors\", \"Header 3\": \"Invalid datetime format\"}","created_at":"2026-01-30T13:46:43.836280","updated_at":"2026-01-30T13:46:43.836280"}
{"id":"42350e1f-e460-5004-877c-43bf2faa2053","content":"### Cyclic aliases  \nA cyclic aliases error occurs when two columns in the input and output tables are ambiguous. For example, you may be trying to transform a column into another column with the same alias.  \n**Sample error message:**\n> Exception: ClickHouse error code 174 Code: 174. DB::Exception: Cyclic aliases. (CYCLIC_ALIASES)  \n**Solution:**\n- Clear the ambiguous column name from your `data` config. For example, replace `toDateTimeOrNull(release_date) AS release_date` with `toDateTimeOrNull(release_date) AS release_date_casted`","document_title":"Common errors","h1":"Common errors","h2":"Engine deployment errors","h3":"Cyclic aliases","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"Engine deployment errors\", \"Header 3\": \"Cyclic aliases\"}","created_at":"2026-01-30T13:46:43.836284","updated_at":"2026-01-30T13:46:43.836284"}
{"id":"f8dc5e07-261b-555f-91a5-839db547d644","content":"### Cannot parse DateTime from String  \nThis error occurs when the SQL parser cannot accurately cast a DateTime column from a String column.  \n**Sample error message:**\n> Cannot parse DateTime: Cannot parse DateTime from String  \n**Solutions:**\n- Cast columns with string dates using the `toDateTimeOrNull()` function. For example: `select toDateTimeOrNull(created_at) as created_as_casted, * from events`\n- Alternatively, use `schema_override` in `data` block to specify how Shaped should convert each column into a feature.","document_title":"Common errors","h1":"Common errors","h2":"Engine deployment errors","h3":"Cannot parse DateTime from String","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"Engine deployment errors\", \"Header 3\": \"Cannot parse DateTime from String\"}","created_at":"2026-01-30T13:46:43.836288","updated_at":"2026-01-30T13:46:43.836288"}
{"id":"40034b9b-699e-5ebf-a4d2-ac5926de74ec","content":"### Column not sorted in ascending order  \nThis error occurs when a column in your input table is not sorted in ascending order, which is required by the feature store.  \n**Sample error message:**\n> Error: There was an error when fetching: Feature store version 40642 failed with: There was an error when fetching: Column 'registered' in table users is not sorted in ascending order. and status: FeatureStoreStatusType.ERROR  \n**Solutions:**\n- Use an SQL view to sort the data. This is the recommended approach if your input data is not clean or sortable.\n- Sort the input table at train time. Set your table type to `query` and add an `ORDER BY` clause to it:\n```yaml\nname: hm_demo\ndata:\nitem_table:\ntype: query\nquery: select * from hm_articles order by created_at\ninteraction_table:\ntype: query\nquery: select *, '5' as label from hm_transactions order by created_at, registered\n# ... remaining engine config\n```","document_title":"Common errors","h1":"Common errors","h2":"Engine deployment errors","h3":"Column not sorted in ascending order","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"Engine deployment errors\", \"Header 3\": \"Column not sorted in ascending order\"}","created_at":"2026-01-30T13:46:43.836292","updated_at":"2026-01-30T13:46:43.836292"}
{"id":"3bf6f4ff-a0c0-519a-9518-2e3db21f493a","content":"### Invalid Huggingface model  \n**Sample error message:**\n> Error: There was an error when training: sentence-transformers\/modernbert is not a\n> local folder and is not a valid model identifier listed on\n> 'https:\/\/huggingface.co\/models'. If this is a private repository, make sure to\n> pass a token having permission to this repo either by logging in with\n> `huggingface-cli login` or by passing `token=<your_token>`  \n**Solution:**\n- Ensure the HuggingFace model name is valid and from one of the supported\ncollections:\n[Use a pre-trained model](\/docs\/v2\/engine_reference\/engine-recipes#use-a-pre-trained-model)","document_title":"Common errors","h1":"Common errors","h2":"Engine deployment errors","h3":"Invalid Huggingface model","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"Engine deployment errors\", \"Header 3\": \"Invalid Huggingface model\"}","created_at":"2026-01-30T13:46:43.836295","updated_at":"2026-01-30T13:46:43.836295"}
{"id":"8cacb1ab-8b6a-5e7e-9959-a3caedbed62f","content":"### No overlap between provided items and events in train-test split  \nThis error occurs because there is no detected common overlap between provided items and events in the training data split.  \n**Sample error message:**\n> FetchError: There was an error when fetching:\n> There is no overlap between the provided items and events in the train split  \n**Solution:**\n- Ensure that your items, users, and interactions have overlapping entities (ie, the interactions in your data correspond to valid items and users)","document_title":"Common errors","h1":"Common errors","h2":"Engine deployment errors","h3":"No overlap between provided items and events in train-test split","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"Engine deployment errors\", \"Header 3\": \"No overlap between provided items and events in train-test split\"}","created_at":"2026-01-30T13:46:43.836299","updated_at":"2026-01-30T13:46:43.836299"}
{"id":"c7d134db-e8bb-5fd9-89fd-bc383f8a096b","content":"### Out of memory errors  \nOut of memory errors can occur on large datasets at various stages of the training pipeline. These errors indicate that the current compute resources are insufficient for processing your data.  \n**Sample error message:**\n> `ray.exceptions.OutOfMemoryError`  \n**Solutions:**  \nFirst, identify which stage of the pipeline is failing (fetch, training, or another stage). Then increase the appropriate compute resources:  \n- **If the error occurs in the fetch stage**: Increase CPU memory in `data.compute` by setting `cpu_memory_gb` to a higher value (e.g., 32 or 64 GB).  \n- **If the error occurs in the training stage**: Increase resources in `training.compute`. Consider:\n- Increasing `cpu_memory_gb` (default: 16 GB)\n- Increasing `gpu_count` if using GPU training\n- Upgrading `gpu_type` to a more powerful GPU (e.g., A100 instead of T4)\n- Increasing `disk_size_gb` if disk space is also a concern","document_title":"Common errors","h1":"Common errors","h2":"Engine deployment errors","h3":"Out of memory errors","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"Engine deployment errors\", \"Header 3\": \"Out of memory errors\"}","created_at":"2026-01-30T13:46:43.836303","updated_at":"2026-01-30T13:46:43.836303"}
{"id":"cb2612be-c942-5567-bc02-00d15940d035","content":"## Get help  \nIf you're still struggling, join our Slack community to connect with other developers who can help!  \n[Join the Shaped Slack Community](https:\/\/join.slack.com\/t\/shapedhq\/shared_invite\/zt-3n8hg069h-t2Lej0bKrdx6c~yeww167w)","document_title":"Common errors","h1":"Common errors","h2":"Get help","h3":"","h4":"","file_path":"guides\/errors.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/guides\/errors.mdx","chunk_metadata":"{\"Header 1\": \"Common errors\", \"Header 2\": \"Get help\"}","created_at":"2026-01-30T13:46:43.836307","updated_at":"2026-01-30T13:46:43.836307"}
{"id":"1b91fa3e-b32d-55f5-ac82-6ed40cbd32c6","content":"# Engine basics  \nAn engine controls the indexing logic of your retrieval systems.","document_title":"Engine basics","h1":"Engine basics","h2":"","h3":"","h4":"","file_path":"concepts\/engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/engines.mdx","chunk_metadata":"{\"Header 1\": \"Engine basics\"}","created_at":"2026-01-30T13:46:43.836705","updated_at":"2026-01-30T13:46:43.836705"}
{"id":"f52753b6-6b52-529d-ba23-a4ad74f227b3","content":"## Creating an engine  \nYou can create an engine in two ways:\n1. Uploading a YAML file via CLI or the Shaped console (recommended)\n2. Making a POST request to the `\/engines` endpoint with your engine config  \nWe recommend starting with a simple engine - with only data and index config - and then build up complexity from there.","document_title":"Engine basics","h1":"Engine basics","h2":"Creating an engine","h3":"","h4":"","file_path":"concepts\/engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/engines.mdx","chunk_metadata":"{\"Header 1\": \"Engine basics\", \"Header 2\": \"Creating an engine\"}","created_at":"2026-01-30T13:46:43.836716","updated_at":"2026-01-30T13:46:43.836716"}
{"id":"6353cb1a-5dea-57fe-9d3d-18408cff32b5","content":"## Configuration  \nShaped provides an interface to declare your retrieval engines. There are five components to each engine:\n- `data` - Defines what data the engine should ingest and how it is indexed\n- `index` - Defines how to create indexes on your data - which columns to use and what embeddings\n- `training` - Defines additional model training and evaluation\n- `deployment` - Configures additional parameters for how the engine is deployed and served\n- `queries` - Defines a set of 'saved queries' that can be used at runtime","document_title":"Engine basics","h1":"Engine basics","h2":"Configuration","h3":"","h4":"","file_path":"concepts\/engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/engines.mdx","chunk_metadata":"{\"Header 1\": \"Engine basics\", \"Header 2\": \"Configuration\"}","created_at":"2026-01-30T13:46:43.836722","updated_at":"2026-01-30T13:46:43.836722"}
{"id":"a6ddca01-f8df-5485-9edb-f56f21c953d1","content":"## Required tables and columns  \nEvery engine must have either an `item_table` or `user_table` to index on.  \n**Required tables:**\n- **`item_table`**: Required. Holds candidate items to be looked up (search and retrieval).\nMust include an `item_id` column.  \n**Optional tables:**\n- **`user_table`**: Contains user attributes and profiles. Must include a `user_id` column\nif provided. Used for personalization based on user features.\n- **`interaction_table`**: Contains clicks, transactions, or other user-item interactions.\nMust include `item_id`, `user_id`, and `label` columns. Used for training collaborative\nfiltering models and computing popularity signals.  \nYour engine can use these profiles and interaction history to do personalized retrieval.","document_title":"Engine basics","h1":"Engine basics","h2":"Required tables and columns","h3":"","h4":"","file_path":"concepts\/engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/engines.mdx","chunk_metadata":"{\"Header 1\": \"Engine basics\", \"Header 2\": \"Required tables and columns\"}","created_at":"2026-01-30T13:46:43.836727","updated_at":"2026-01-30T13:46:43.836727"}
{"id":"b15bf1d4-310f-53e8-94a9-76139635713c","content":"## Patching models and CI\/CD  \nShaped engines are designed to work with version control and CI\/CD pipelines. Updates are applied\nincrementally with zero-downtime deployment. For detailed information on how patching works and what triggers updates, see [GitOps flow and patching](..\/engine_reference\/gitops-and-patching).","document_title":"Engine basics","h1":"Engine basics","h2":"Patching models and CI\/CD","h3":"","h4":"","file_path":"concepts\/engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/engines.mdx","chunk_metadata":"{\"Header 1\": \"Engine basics\", \"Header 2\": \"Patching models and CI\/CD\"}","created_at":"2026-01-30T13:46:43.836731","updated_at":"2026-01-30T13:46:43.836731"}
{"id":"c0fa6327-cbac-54a4-90ae-be721db84f02","content":"## Vector index configuration and performance  \nThe `index` block configured what vector indexes will be created for your engine, for fast similarity search. Vector indexes use approximate nearest neighbor (ANN) algorithms for fast query performance. Indexes update automatically when items change.  \nYou can create multiple embeddings and query them independently or together. Each embedding has a `name`, which serves as the unique ID and can be passed as the `embedding_ref` parameter at query time.","document_title":"Engine basics","h1":"Engine basics","h2":"Vector index configuration and performance","h3":"","h4":"","file_path":"concepts\/engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/engines.mdx","chunk_metadata":"{\"Header 1\": \"Engine basics\", \"Header 2\": \"Vector index configuration and performance\"}","created_at":"2026-01-30T13:46:43.836735","updated_at":"2026-01-30T13:46:43.836735"}
{"id":"273d35d8-6843-54de-a258-fb7bd97dddc6","content":"## Derived columns  \nWhen you provide an `interaction_table`, Shaped automatically generates two convenience\ncolumns:  \n- **`_derived_popular_rank`**: Popularity score from interaction frequency and recency\n- **`_derived_chronological_rank`**: Chronological ranking based on item timestamps  \nUse these in `column_order()` for retrieval, `ORDER BY score()` expressions for scoring, or\n`WHERE` clauses for filtering. See [Retrieve popular items](\/docs\/v2\/concepts\/queries#retrieve-popular-items)\nfor examples.","document_title":"Engine basics","h1":"Engine basics","h2":"Derived columns","h3":"","h4":"","file_path":"concepts\/engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/engines.mdx","chunk_metadata":"{\"Header 1\": \"Engine basics\", \"Header 2\": \"Derived columns\"}","created_at":"2026-01-30T13:46:43.836739","updated_at":"2026-01-30T13:46:43.836739"}
{"id":"55ee180f-d037-55bf-b1eb-1e3df25a9206","content":"## Evaluation metrics  \nAfter training completes, the following metrics are available. These are calculated on a held-out test set:  \n* **Recall@k:** Measures the proportion of relevant items that appear within the top `k`\nrecommendations. A higher recall indicates the model's ability to retrieve a larger\nproportion of relevant items.\n* **Precision@k:**  Measures the proportion of recommendations within the top `k` that\nare actually relevant. A higher precision indicates the model's ability to surface\nrelevant items early in the ranking.\n* **MAP@k (Mean Average Precision@k):** Calculates the average precision across multiple\nqueries, considering the order of relevant items within the top `k`. MAP@k provides\na more comprehensive view of ranking quality than precision alone.\n* **NDCG@k (Normalized Discounted Cumulative Gain@k):**  Similar to MAP@k, NDCG@k\naccounts for the position of relevant items but also considers the relevance scores\nthemselves, giving higher weight to more relevant items appearing at the top.\n* **Hit Ratio@k:** Represents the percentage of users for whom at least one relevant\nitem is present within the top `k` recommendations. A high hit ratio signifies the\nmodel's effectiveness in satisfying a broad range of user preferences.\n* **Coverage@k:** Measures the diversity of recommendations by calculating the\npercentage of unique items recommended across all users within the top `k`. Higher\ncoverage indicates a wider exploration of your item catalog.\n* **Personalization@k:**  Quantifies the degree of personalization by measuring the\ndissimilarity of recommendations across different users.  Higher personalization\nsuggests that the model tailors recommendations to individual user preferences\nrather than providing generic results.\n* **Average Popularity@k:**  Provides insights into the model's tendency to recommend\npopular items by averaging the popularity scores of items within the top `k`\nrecommendations.  \n**Info:** **What is `k`?**\nThe `k` parameter is the number of recommendations considered (e.g., the top 10, 20, etc.). We calculate these metrics across various values of `k` to assess model performance across different recommendation list sizes.  \nWe calculate these metrics for various user and items segments, including:  \n* **New users:**  Evaluates how effectively the model recommends to users with limited interaction history.\n* **New items:**  Assesses the model's ability to surface new or less popular items.\n* **Power users:**   Examines performance for users who engage heavily with your platform.\n* **Power items:**   Analyzes how well the model handles highly popular or trending items.  \nSegmented analysis reveals model strengths and weaknesses across different user groups and item types.  \nFor information on updating engines with version control and CI\/CD, see [GitOps flow and patching](..\/engine_reference\/gitops-and-patching).","document_title":"Engine basics","h1":"Engine basics","h2":"Evaluation metrics","h3":"","h4":"","file_path":"concepts\/engines.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/engines.mdx","chunk_metadata":"{\"Header 1\": \"Engine basics\", \"Header 2\": \"Evaluation metrics\"}","created_at":"2026-01-30T13:46:43.836742","updated_at":"2026-01-30T13:46:43.836742"}
{"id":"6d8554a8-b20a-5432-b874-7bd5228e4020","content":"# Query basics  \n# Query basics  \nTo retrieve data from a Shaped engine, you use a **query**.  \nEvery query is a POST to the `\/query` endpoint. The request body can be JSON or a [ShapedQL query](..\/query_reference\/shapedql).  \nThe Shaped query interface maps onto the four-stage recommender architecture:\n1. **Retrieve**: Fetches a set of candidates based on a filter expression, similarity search, or a ranked column (eg `_derived_popular_rank`).\n2. **Filter**: Removes candidates from the result set based on rules you set. For example, remove items that a user has viewed.\n3. **Score**: Assign a score to each candidate based on a **value model** expression. For example, you can use expressions for distance between embedding vectors (eg cosine similarity) or combine the output of two scoring models. Learn more about value modeling in the [Value modeling section](#value-modeling) below.\n4. **Reorder**: Diversify the final result set so that all queries don't return the exact same results.  \nThis framework is shared across **text search** and **user recommendations**:\nthe retrieve stage can use `text_search(...)`, `similarity(...)`, `ids(...)`, and\nother retrievers, and the score stage applies the same expression language in all\ncases.  \nMany standard text reranking patterns map directly to the score stage:  \n- **Text rerankers** (e.g., `colbert_v2(...)`, `cross_encoder(...)`).\n- **Rank fusion** (e.g., reciprocal rank fusion using `retrieval.get_rank(...)`).\n- **Linear interpolation** (e.g., combining retrieval scores with weights).  \nSee the reference documentation in\n[`ShapedQL`](\/docs\/v2\/query_reference\/shapedql#text-reranking-functions).","document_title":"Query basics","h1":"Query basics","h2":"","h3":"","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\"}","created_at":"2026-01-30T13:46:43.837606","updated_at":"2026-01-30T13:46:43.837606"}
{"id":"15b84c55-74ea-50ad-81a4-62359d435512","content":"## Make a query  \nEvery query should be a POST request to the `\/v2\/engines\/{engine_name}\/query` endpoint.  \nThe following query retreives similar items using an ALS embedding model.","document_title":"Query basics","h1":"Query basics","h2":"Make a query","h3":"","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Make a query\"}","created_at":"2026-01-30T13:46:43.837611","updated_at":"2026-01-30T13:46:43.837611"}
{"id":"6594e4d9-b2e7-5e1b-8577-c6061679dde4","content":"### JavaScript\n```javascript\nfetch(\"https:\/\/api.shaped.ai\/v2\/engines\/movie_engine\/query\", {\nmethod: \"POST\",\nheaders: {\n\"Content-Type\": \"application\/json\",\n\"x-api-key\": \"YOUR_API_KEY\"\n},\nbody: JSON.stringify({\nquery: \"SELECT * FROM similarity(embedding_ref='als', limit=50, encoder='item_attribute_pooling', input_item_id=$item_id) LIMIT 20\",\nparameters: {\nitem_id: \"db1234\"\n}\n})\n})\n```","document_title":"Query basics","h1":"Query basics","h2":"Make a query","h3":"JavaScript","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Make a query\", \"Header 3\": \"JavaScript\"}","created_at":"2026-01-30T13:46:43.837615","updated_at":"2026-01-30T13:46:43.837615"}
{"id":"b6eabe12-fafd-50d3-8e8a-c0be49a36a65","content":"### Python\n```python\n\nresponse = requests.post(\n\"https:\/\/api.shaped.ai\/v2\/engines\/movie_engine\/query\",\nheaders={\n\"Content-Type\": \"application\/json\",\n\"x-api-key\": \"YOUR_API_KEY\"\n},\njson={\n\"query\": \"SELECT * FROM similarity(embedding_ref='als', limit=50, encoder='item_attribute_pooling', input_item_id=$item_id) LIMIT 20\",\n\"parameters\": {\n\"item_id\": \"db1234\"\n}\n}\n)\nprint(response.json())\n```","document_title":"Query basics","h1":"Query basics","h2":"Make a query","h3":"Python","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Make a query\", \"Header 3\": \"Python\"}","created_at":"2026-01-30T13:46:43.837619","updated_at":"2026-01-30T13:46:43.837619"}
{"id":"ef546872-a328-5c63-b2e9-11e9a5646826","content":"## Query examples  \nThe `\/query` endpoint accepts ad-hoc queries that you define at runtime. You can use it to test different retrieval strategies without modifying your engine configuration.  \nThe following section provides quick examples of common query strategies. For more comprehensive guides with prerequisites, use cases, and advanced patterns, see the dedicated use-case pages in the Querying Data section.","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\"}","created_at":"2026-01-30T13:46:43.837622","updated_at":"2026-01-30T13:46:43.837622"}
{"id":"21947177-d276-5ff2-b7de-64622eb36ed5","content":"### Lexical search  \nFor lexical search, use the `text_search` function with `mode='lexical'`:","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"Lexical search","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"Lexical search\"}","created_at":"2026-01-30T13:46:43.837626","updated_at":"2026-01-30T13:46:43.837626"}
{"id":"d6324e4d-912f-5e76-ab09-11220133091a","content":"### ShapedQL\n```sql\nSELECT *\nFROM text_search(mode='lexical', input_text_query='Blue shirt', limit=50)\nLIMIT 20\n```","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"ShapedQL","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.837629","updated_at":"2026-01-30T13:46:43.837629"}
{"id":"ff5e124e-2bd8-567c-aafb-720646016980","content":"### JSON\n```json\n{\n\"query\": {\n\"retrieve\": [\n{\n\"type\": \"text_search\",\n\"mode\": {\n\"type\": \"lexical\"\n},\n\"input_text_query\": \"Blue shirt\"\n}\n],\n\"from\": \"item\"\n}\n}\n```  \nFor more details on lexical search, including prerequisites and advanced patterns, see the [Search guide](\/docs\/v2\/query_reference\/search#lexical-search).","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"JSON","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.837633","updated_at":"2026-01-30T13:46:43.837633"}
{"id":"8112cc51-781f-55ac-ade1-dfdd22612b67","content":"### Vector search retriever  \nVector search also uses `text_search`, but with `mode='vector'`. Use this for semantic search or RAG.  \nThese queries require an engine with an embedding policy in the `index` block.","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"Vector search retriever","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"Vector search retriever\"}","created_at":"2026-01-30T13:46:43.837636","updated_at":"2026-01-30T13:46:43.837636"}
{"id":"53f7c36e-244d-5201-9859-d8a3c12b4c8f","content":"### ShapedQL\n```sql\nSELECT *\nFROM text_search(mode='vector', text_embedding_ref='name_embedding', input_text_query='Blue shirt', limit=50)\nLIMIT 20\n```","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"ShapedQL","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.837640","updated_at":"2026-01-30T13:46:43.837640"}
{"id":"2046caa3-e184-5214-85df-93589c661612","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"retrieve\": [\n{\n\"type\": \"text_search\",\n\"mode\": {\n\"type\": \"vector\",\n\"text_embedding_ref\" : \"name_embedding\"\n},\n\"input_text_query\": \"Blue shirt\"\n}\n],\n\"from\": \"item\"\n}\n}\n```  \nFor more details on semantic\/vector search, including prerequisites and hybrid search patterns, see the [Search guide](\/docs\/v2\/query_reference\/search#semantic-search).","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"JSON","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.837643","updated_at":"2026-01-30T13:46:43.837643"}
{"id":"e8d2209c-dd2a-5dbc-a08b-955c24a4006f","content":"### Similarity - Retrieve similar items to a user's recent interactions  \nThis retriever is like vector search, but more wide ranging: it retrieves the items most similar to the user's recent interaction set.","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"Similarity - Retrieve similar items to a user's recent interactions","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"Similarity - Retrieve similar items to a user's recent interactions\"}","created_at":"2026-01-30T13:46:43.837646","updated_at":"2026-01-30T13:46:43.837646"}
{"id":"6a282007-b1a2-5f1d-90e8-e633d9e752c1","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='item_content_embedding', encoder='interaction_round_robin', input_user_id=$user_id, limit=50)\nLIMIT 20\n```","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"ShapedQL","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.837650","updated_at":"2026-01-30T13:46:43.837650"}
{"id":"d325959b-6507-5397-80c6-cf21a945d39c","content":"### JSON\n```json\n{\n\"query\": \"SELECT * FROM similarity(embedding_ref='item_content_embedding', encoder='interaction_round_robin', input_user_id=$user_id, limit=50) LIMIT 20\",\n\"parameters\": {\n\"user_id\": \"429\"\n},\n\"return_metadata\": true\n}\n```  \nFor more details on finding similar items, including content-based and collaborative similarity, see the [Similar Items guide](\/docs\/v2\/query_reference\/similar_items).","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"JSON","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.837653","updated_at":"2026-01-30T13:46:43.837653"}
{"id":"ad266251-7943-5f53-b574-47bc25ab247b","content":"### Retrieve popular items  \nUse `column_order()` with `_derived_popular_rank` to retrieve popular items, or\n`_derived_chronological_rank` for chronological ordering. These columns are automatically\ngenerated when you have an `interaction_table`. See [Derived columns](\/docs\/v2\/concepts\/engines#derived-columns)\nfor details.","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"Retrieve popular items","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"Retrieve popular items\"}","created_at":"2026-01-30T13:46:43.837656","updated_at":"2026-01-30T13:46:43.837656"}
{"id":"81c97f15-aa88-5fc0-ad7a-39086f5a0d2f","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_popular_rank ASC', limit=50)\nLIMIT 20\n```","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"ShapedQL","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.837660","updated_at":"2026-01-30T13:46:43.837660"}
{"id":"adda4229-de48-50ba-bbc9-44f5fbe29153","content":"### JSON\n```json\n{\n\"query\": {\n\"retrieve\": [\n{\n\"type\": \"column_order\",\n\"columns\": [\n{\n\"name\": \"_derived_popular_rank\",\n\"ascending\" : \"true\"\n}\n]\n}\n],\n\"from\": \"item\"\n},\n\"return_metadata\": \"true\"\n}\n```  \nFor more details on retrieving popular and trending items, see the [Feeds guide](\/docs\/v2\/query_reference\/feeds#trending-feeds).","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"JSON","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.837663","updated_at":"2026-01-30T13:46:43.837663"}
{"id":"adbcd821-5f06-5157-990c-110c93dc9ccd","content":"### Get popular items, filtered to a specific category  \nSimilarly, this query returns popular items but in a specific category (by index_group_name).","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"Get popular items, filtered to a specific category","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"Get popular items, filtered to a specific category\"}","created_at":"2026-01-30T13:46:43.837666","updated_at":"2026-01-30T13:46:43.837666"}
{"id":"b5f2fe76-69de-51df-9e91-686252b355c7","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_popular_rank ASC', limit=50)\nWHERE index_group_name = 'Baby\/Children'\nLIMIT 20\n```","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"ShapedQL","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.837670","updated_at":"2026-01-30T13:46:43.837670"}
{"id":"2bcd83ae-145e-5b53-9259-340b17653676","content":"### JSON\n```json\n{\n\"query\": {\n\"type\": \"rank\",\n\"retrieve\": [\n{\n\"type\": \"column_order\",\n\"columns\": [\n{\n\"name\": \"_derived_popular_rank\",\n\"ascending\" : \"true\"\n}\n],\n\"where\" : \"index_group_name = 'Baby\/Children'\"\n}\n],\n\"from\": \"item\"\n},\n\"return_metadata\": \"true\"\n}\n```","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"JSON","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.837674","updated_at":"2026-01-30T13:46:43.837674"}
{"id":"62a8ff53-ad81-5623-892c-42e0d846b5ca","content":"### Retrieve and score - Get popular items, ranked based on my recent interactions  \nThe previous examples only included a retrieval step. This example has a retrieval and scoring step. It gets 1000 most popular items and then scores them based on the click_through_rate and conversion_rate score for a given user.","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"Retrieve and score - Get popular items, ranked based on my recent interactions","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"Retrieve and score - Get popular items, ranked based on my recent interactions\"}","created_at":"2026-01-30T13:46:43.837677","updated_at":"2026-01-30T13:46:43.837677"}
{"id":"240a61b1-9b14-5352-aee8-c95e946c4f59","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nORDER BY score(expression='0.3 * click_through_rate + 0.7 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nLIMIT 20\n```","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"ShapedQL","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.837681","updated_at":"2026-01-30T13:46:43.837681"}
{"id":"aaa0332b-c047-5e03-876a-5d3ed972a6fc","content":"### JSON\n```json\n{\n\"query\": \"SELECT * FROM column_order(columns='_derived_popular_rank ASC', limit=1000) ORDER BY score(expression='0.3 * click_through_rate + 0.7 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids') LIMIT 20\",\n\"parameters\": {\n\"user_id\": \"bartholomew.simpson\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n},\n\"return_metadata\": true\n}\n```","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"JSON","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.837684","updated_at":"2026-01-30T13:46:43.837684"}
{"id":"fa940213-ca43-5f83-aebf-fb116c5108ac","content":"### Reordering with diversity - making recommendations feel more natural  \nA diversity reorder step still returns items from the candidate set, but may return items that would otherwise be lower in the result set because of their score.","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"Reordering with diversity - making recommendations feel more natural","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"Reordering with diversity - making recommendations feel more natural\"}","created_at":"2026-01-30T13:46:43.837687","updated_at":"2026-01-30T13:46:43.837687"}
{"id":"acff6b4f-04e8-596f-9bf4-315ec46ad016","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nORDER BY score(expression='0.3 * click_through_rate + 0.7 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nREORDER BY diversity(diversity_lookback_window=50)\nLIMIT 20\n```","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"ShapedQL","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.837691","updated_at":"2026-01-30T13:46:43.837691"}
{"id":"2079cccf-4010-50ab-a283-1cc3229f7ae5","content":"### JSON\n```json\n{\n\"query\": \"SELECT * FROM column_order(columns='_derived_popular_rank ASC', limit=1000) ORDER BY score(expression='0.3 * click_through_rate + 0.7 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids') REORDER BY diversity(diversity_lookback_window=50) LIMIT 20\",\n\"parameters\": {\n\"user_id\": \"bartholomew.simpson\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n},\n\"return_metadata\": true\n}\n```","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"JSON","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.837694","updated_at":"2026-01-30T13:46:43.837694"}
{"id":"e897df45-3438-5d0d-9cfe-0c528e1e5a71","content":"### Reordering - adding exploration and breaking filter bubbles  \nIf you rely only on derived features like popularity, your result set may become repetitive or result in a filter bubble. To avoid this, you can add exploration to your query. It runs another retrieve step at the end of the rank pipeline to add variety from outside the candidate set.  \nExploration is also the primary way to **boost content**. By including a retriever that contains items you want to boost (e.g., a specific collection or list of IDs) alongside your main retrievers, you can use `REORDER BY exploration()` to inject those items into the final results.","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"Reordering - adding exploration and breaking filter bubbles","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"Reordering - adding exploration and breaking filter bubbles\"}","created_at":"2026-01-30T13:46:43.837697","updated_at":"2026-01-30T13:46:43.837697"}
{"id":"a1cf3fa5-d775-563e-8ff5-4d74fc87226c","content":"### ShapedQL\n```sql\nSELECT *\nFROM column_order(columns='_derived_popular_rank ASC', limit=1000)\nORDER BY score(expression='0.3 * click_through_rate + 0.7 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids')\nREORDER BY exploration(diversity_lookback_window=50)\nLIMIT 20\n```","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"ShapedQL","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.837701","updated_at":"2026-01-30T13:46:43.837701"}
{"id":"5c398bb7-6c91-5936-9735-2cadfccf8a7a","content":"### JSON\n```json\n{\n\"query\": \"SELECT * FROM column_order(columns='_derived_popular_rank ASC', limit=1000) ORDER BY score(expression='0.3 * click_through_rate + 0.7 * conversion_rate', input_user_id='$user_id', input_interactions_item_ids='$interaction_item_ids') REORDER BY exploration(diversity_lookback_window=50) LIMIT 20\",\n\"parameters\": {\n\"user_id\": \"bartholomew.simpson\",\n\"interaction_item_ids\": [\"item789\", \"item012\"]\n},\n\"return_metadata\": true\n}\n```  \nFor more comprehensive examples and use cases, see the dedicated pages in the Querying Data section: [Search](\/docs\/v2\/query_reference\/search), [Feeds](\/docs\/v2\/query_reference\/feeds), [Similar Items](\/docs\/v2\/query_reference\/similar_items), [Reranking](\/docs\/v2\/query_reference\/reranking), and more.","document_title":"Query basics","h1":"Query basics","h2":"Query examples","h3":"JSON","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Query examples\", \"Header 3\": \"JSON\"}","created_at":"2026-01-30T13:46:43.837704","updated_at":"2026-01-30T13:46:43.837704"}
{"id":"50838ec4-642b-51e0-9196-0f38570bdb32","content":"## Use a saved query  \nSaved queries are declared in your engine configuration, enabling multiple clients (e.g.,\nmobile app and website) to execute the same queries for consistency across your\napplication.","document_title":"Query basics","h1":"Query basics","h2":"Use a saved query","h3":"","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Use a saved query\"}","created_at":"2026-01-30T13:46:43.837707","updated_at":"2026-01-30T13:46:43.837707"}
{"id":"9b9dc1dd-ce72-5f0e-82bf-d44e2fb3203a","content":"### Defining saved queries  \nSaved queries are defined in the `queries` section of your engine configuration using ShapedQL:  \n```yaml\nversion: v2\nname: my_engine\n\ndata:\nitem_table:\nname: movies\ntype: table\n# ...your other config here\nqueries:\nget_recommended_items:\nparams:\nitem_id:\ntype: string\nrequired: true\nquery: |\nSELECT *\nFROM similarity(embedding_ref='als', limit=50, encoder='item_attribute_pooling', input_item_id=$item_id)\nLIMIT 20\n```","document_title":"Query basics","h1":"Query basics","h2":"Use a saved query","h3":"Defining saved queries","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Use a saved query\", \"Header 3\": \"Defining saved queries\"}","created_at":"2026-01-30T13:46:43.837710","updated_at":"2026-01-30T13:46:43.837710"}
{"id":"742e871e-7442-5d69-b46c-5c54166f728e","content":"### Executing saved queries  \nCall the query endpoint with the query name and pass input parameters in the request body.","document_title":"Query basics","h1":"Query basics","h2":"Use a saved query","h3":"Executing saved queries","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Use a saved query\", \"Header 3\": \"Executing saved queries\"}","created_at":"2026-01-30T13:46:43.837714","updated_at":"2026-01-30T13:46:43.837714"}
{"id":"15208f5a-1b5f-5a9b-a179-48797d616a07","content":"### JavaScript\n```javascript\nfetch(\"https:\/\/api.shaped.ai\/v2\/engines\/movie_engine\/queries\/get_recommended_items\", {\nmethod: \"POST\",\nheaders: {\n\"Content-Type\": \"application\/json\",\n\"x-api-key\": \"YOUR_API_KEY\"\n},\nbody: JSON.stringify({\nparameters: {\nitem_id: \"db1234\"\n}\n})\n})\n```","document_title":"Query basics","h1":"Query basics","h2":"Use a saved query","h3":"JavaScript","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Use a saved query\", \"Header 3\": \"JavaScript\"}","created_at":"2026-01-30T13:46:43.837717","updated_at":"2026-01-30T13:46:43.837717"}
{"id":"be7c8761-706e-5dc7-8277-57baa61ef586","content":"### Python\n```python\n\nresponse = requests.post(\n\"https:\/\/api.shaped.ai\/v2\/engines\/movie_engine\/queries\/get_recommended_items\",\nheaders={\n\"Content-Type\": \"application\/json\",\n\"x-api-key\": \"YOUR_API_KEY\"\n},\njson={\n\"parameters\": {\n\"item_id\": \"db1234\"\n}\n}\n)\nprint(response.json())\n```","document_title":"Query basics","h1":"Query basics","h2":"Use a saved query","h3":"Python","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Use a saved query\", \"Header 3\": \"Python\"}","created_at":"2026-01-30T13:46:43.837721","updated_at":"2026-01-30T13:46:43.837721"}
{"id":"00e2baba-6db1-51ff-b33f-b829245a0d09","content":"## Value modeling  \nValue models are Python-like mathematical expressions that compute a score for\neach user-item pair. They enable you to combine outputs from multiple trained\nmodels, incorporate user and item attributes into scoring, use text encodings\nfor semantic similarity, access retrieval scores from named retrievers, and\napply custom business logic.  \n**How it works:**  \nValue models are evaluated **pair-wise** (one score per user-item\ncombination), enabling personalized scoring. Text encodings are pre-computed\nand cached; retrieval scores are only materialized when referenced.  \n**Use value models when:**\n- Combining multiple trained models (ensembles)\n- Incorporating user\/item attributes into scoring\n- Blending retrieval scores with model predictions\n- Applying custom business logic (e.g., boost by price, location, etc.)  \n**Use default scoring when:**\n- Retriever scores are sufficient\n- You don't need personalization\n- Performance is critical and you want minimal overhead  \nThe score stage can use either:\n- **PassthroughScore** (default): Uses the retriever's default score without\nadditional computation\n- **ScoreEnsemble**: Uses a value model expression to compute scores (e.g.,\n`0.6 * click_through_rate + 0.4 * conversion_rate`)  \nFor detailed syntax and available functions, see the [Value Model Expressions\nsection](\/docs\/v2\/query_reference\/shapedql#value-model-expressions) in the\nShapedQL reference. You'll also find value modeling examples throughout the\nuse-case pages below.","document_title":"Query basics","h1":"Query basics","h2":"Value modeling","h3":"","h4":"","file_path":"concepts\/queries.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/queries.mdx","chunk_metadata":"{\"Header 1\": \"Query basics\", \"Header 2\": \"Value modeling\"}","created_at":"2026-01-30T13:46:43.837724","updated_at":"2026-01-30T13:46:43.837724"}
{"id":"c2ad4adf-9b71-5c3e-ae74-307b26b53ae4","content":"# Key concepts  \nShaped is a retrieval database that enables you to build search and recommendation systems. Any Shaped retrieval database consists of four interconnected layers:  \n- [Tables & Views](\/docs\/v2\/concepts\/tables-and-views): Act as a data warehouse and connect to your production data sources, then transform and consolidate your tables into materialized views\n- [Engines](\/docs\/v2\/concepts\/engines): Train retrieval and ranking models on your data using a declarative interface\n- [Queries](\/docs\/v2\/concepts\/queries): Retrieve records using your ranking models through a REST API","document_title":"Overview","h1":"Key concepts","h2":"","h3":"","h4":"","file_path":"concepts\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Key concepts\"}","created_at":"2026-01-30T13:46:43.837917","updated_at":"2026-01-30T13:46:43.837917"}
{"id":"cbb967bf-2a1e-5646-b8f9-21b563cf247c","content":"## Entity overview  \nShaped consists of four main entities that work together to build retrieval systems:  \n1. **Tables** are the data warehouse entities that connect to your existing data sources (databases, data warehouses, blob storage, or analytics platforms) via connectors. Each table stores raw data with a defined schema and can be populated through built-in connectors or custom connectors using the API.  \n2. **Views** are transformed, materialized representations of one or more tables. *SQL views* allow you to join, filter, and aggregate data from multiple tables using SQL queries. *AI views* use LLM prompts to enrich data by adding new columns or semantic information, which is particularly useful for semantic search applications.  \n3. **Engines** defines how data is indexed and ranked. An engine configuration specifies:\n- **Data**: Which tables to use (item tables for candidates, user tables for personalization, interaction tables for training signals)\n- **Index**: How to create search indexes (embeddings for vector search, lexical search for BM25)\n- **Training**: Which scoring models to train (popularity-based, chronological, or machine learning models like ELSA, LightGBM, BERT4Rec)\n- **Deployment**: How the engine is deployed and scaled\n- **Queries**: Saved query templates for consistent retrieval  \n4. **Queries** are database queries run via a REST API. Queries can be written in SQL or with a JSON query interface.\n- **Retrieve**: Fetch candidates using similarity search, lexical search, or ranking columns\n- **Filter**: Remove candidates based on business rules\n- **Score**: Rank the candidates using trained models or embedding similarity\n- **Reorder**: Apply diversity or exploration to improve result quality","document_title":"Overview","h1":"Key concepts","h2":"Entity overview","h3":"","h4":"","file_path":"concepts\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Key concepts\", \"Header 2\": \"Entity overview\"}","created_at":"2026-01-30T13:46:43.837922","updated_at":"2026-01-30T13:46:43.837922"}
{"id":"13640877-a9a8-52cd-8819-b4c565806d73","content":"## How the layers work together  \nShaped operates as a retrieval database where each layer builds upon the stored data: **Tables** store your data from production sources via connectors, acting as the foundational data warehouse. **Views** provide queryable, materialized representations of your tables that you can query and transform. **Engines** create indexes and ranking models on the data stored in your tables and views, similar to how a traditional database creates indexes for efficient retrieval. **Queries** then retrieve and rank records from your engines in real-time, just as you would query a database.  \nFor example, you might store a product catalog in a **Table**, create a **View** that joins product data with enriched descriptions, configure an **Engine** that builds indexes and trains a recommendation model on user interactions stored in your tables, and then use **Queries** to retrieve personalized product recommendations for each user.","document_title":"Overview","h1":"Key concepts","h2":"How the layers work together","h3":"","h4":"","file_path":"concepts\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Key concepts\", \"Header 2\": \"How the layers work together\"}","created_at":"2026-01-30T13:46:43.837926","updated_at":"2026-01-30T13:46:43.837926"}
{"id":"e65f687b-a6b6-5bee-b109-56b395054ce9","content":"# Table & View basics","document_title":"Table & View basics","h1":"Table & View basics","h2":"","h3":"","h4":"","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View basics\"}","created_at":"2026-01-30T13:46:43.838360","updated_at":"2026-01-30T13:46:43.838360"}
{"id":"b4fe17d6-19a4-5459-9693-6cd0ff7a4e2e","content":"# Table & View Basics  \nTables and views form the foundation of the data layer in Shaped. **Tables** are\nthe foundation\u2014they store your raw data from production sources via connectors.\n**Views** build on tables by transforming and enriching that data through SQL\nqueries or AI-powered enrichment.  \nA typical workflow: connect your data source \u2192 create a **table** \u2192 optionally\ncreate **views** to transform, join, or enrich the data \u2192 use tables and views\nin engines for training and retrieval.","document_title":"Table & View basics","h1":"Table & View Basics","h2":"","h3":"","h4":"","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\"}","created_at":"2026-01-30T13:46:43.838365","updated_at":"2026-01-30T13:46:43.838365"}
{"id":"bec2e893-7ae6-5d8d-b657-eae1047b2291","content":"## Tables  \nTables are the core component of the data layer in Shaped.  \nEach table is populated via a **connector** to a source, such as a MySQL\ndatabase or Amplitude account.","document_title":"Table & View basics","h1":"Table & View Basics","h2":"Tables","h3":"","h4":"","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\", \"Header 2\": \"Tables\"}","created_at":"2026-01-30T13:46:43.838369","updated_at":"2026-01-30T13:46:43.838369"}
{"id":"a9fec117-9ec8-5510-b3bc-7a28bdad481d","content":"### Connectors  \nConnectors establish a connection to where your data already lives. You can use\na custom connector to stream data directly into Shaped using the [Shaped\nAPI](\/docs\/api\/v2) or [Shaped CLI](\/docs\/v2\/connectors\/custom).","document_title":"Table & View basics","h1":"Table & View Basics","h2":"Tables","h3":"Connectors","h4":"","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\", \"Header 2\": \"Tables\", \"Header 3\": \"Connectors\"}","created_at":"2026-01-30T13:46:43.838372","updated_at":"2026-01-30T13:46:43.838372"}
{"id":"1035c2cc-606c-57ea-a849-62d6de199b43","content":"#### Built-in Connectors  \nShaped supports out-of-the-box connectors to a range of systems, including:\n- Data Warehouses: Such as BigQuery, Snowflake, and Redshift.\n- Databases: Such as PostgreSQL and MySQL.\n- Blob Storage: Such as S3 and Google Cloud Storage (GCS).\n- Analytics Applications: Such as Segment and Amplitude.","document_title":"Table & View basics","h1":"Table & View Basics","h2":"Tables","h3":"Connectors","h4":"Built-in Connectors","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\", \"Header 2\": \"Tables\", \"Header 3\": \"Connectors\", \"Header 4\": \"Built-in Connectors\"}","created_at":"2026-01-30T13:46:43.838376","updated_at":"2026-01-30T13:46:43.838376"}
{"id":"a7f1af24-46e0-5ca7-aca0-42aaf5493c7e","content":"#### Custom connectors  \nIf your datasource is not supported, you can declare a custom table.  \nUse the \"Create table\" endpoint to declare a new table and its schema.  \nThen use a `\/table\/insert` endpoint to add records to the table.","document_title":"Table & View basics","h1":"Table & View Basics","h2":"Tables","h3":"Connectors","h4":"Custom connectors","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\", \"Header 2\": \"Tables\", \"Header 3\": \"Connectors\", \"Header 4\": \"Custom connectors\"}","created_at":"2026-01-30T13:46:43.838380","updated_at":"2026-01-30T13:46:43.838380"}
{"id":"10501750-b367-5aec-b5c8-d12cc2201742","content":"### Connector Types  \nShaped supports both **real-time (streaming)** and **batch** connectors.\nDesign your data architecture with the difference in mind:  \n- **Real-time connectors**: Stream data continuously (e.g., Segment, Kafka,\nKinesis). Data appears in Shaped within 30 seconds.\n- **Batch connectors**: Sync data on a schedule, typically every 15 minutes\n(e.g., BigQuery, PostgreSQL, Snowflake).  \nFor more details on connector types, their use cases, and limitations, see\nthe [Connector Types guide](\/docs\/v2\/data_reference\/connector-types).","document_title":"Table & View basics","h1":"Table & View Basics","h2":"Tables","h3":"Connector Types","h4":"","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\", \"Header 2\": \"Tables\", \"Header 3\": \"Connector Types\"}","created_at":"2026-01-30T13:46:43.838383","updated_at":"2026-01-30T13:46:43.838383"}
{"id":"1d63ba97-ed0c-5f17-95b0-c7c644d10ba8","content":"### Table schemas  \nEvery table has a schema that describes the structure of your data.  \nBuilt-in connectors infer the column structure from the datasource you connect.  \nCustom tables require you to upload a schema. It should include:\n- `columns`: The names of the fields in your data.\n- `unique_keys`: A list of columns that uniquely identify each row in the table\n(e.g., [\"id\"]).","document_title":"Table & View basics","h1":"Table & View Basics","h2":"Tables","h3":"Table schemas","h4":"","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\", \"Header 2\": \"Tables\", \"Header 3\": \"Table schemas\"}","created_at":"2026-01-30T13:46:43.838387","updated_at":"2026-01-30T13:46:43.838387"}
{"id":"92b39255-768a-5832-ba35-e0809c9e4183","content":"### Append-only tables  \nSome tables are created from event streams and are append-only. When you add\nrows to such tables, they are added to the bottom.  \nTo ensure deduplication happens correctly, make sure that each record contains\nthe primary_key and replication_key columns defined in your schema.","document_title":"Table & View basics","h1":"Table & View Basics","h2":"Tables","h3":"Append-only tables","h4":"","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\", \"Header 2\": \"Tables\", \"Header 3\": \"Append-only tables\"}","created_at":"2026-01-30T13:46:43.838390","updated_at":"2026-01-30T13:46:43.838390"}
{"id":"58ee6a15-d0bc-54e2-a5fa-645ea5b707bf","content":"## Views  \nA view is a **transformed view of one or more tables**. Views are created by\nSQL queries or LLM prompts.","document_title":"Table & View basics","h1":"Table & View Basics","h2":"Views","h3":"","h4":"","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\", \"Header 2\": \"Views\"}","created_at":"2026-01-30T13:46:43.838394","updated_at":"2026-01-30T13:46:43.838394"}
{"id":"2f58b724-942f-5085-b438-7ebe5188bf5c","content":"### SQL view  \nAn SQL view is created by running an SQL query against one or more tables.  \n**SQL Dialect**: Views use **ClickHouse SQL** syntax. All SQL queries in views\nare executed using ClickHouse SQL, so ClickHouse functions, operators, and\nsyntax are supported. For example:\n- Use `now()` (lowercase) instead of `NOW()`\n- Use `toYear()`, `toMonth()`, etc. instead of `EXTRACT(YEAR FROM ...)`\n- Use `quantile()` for percentile calculations\n- Use `INTERVAL 1 HOUR` (no quotes, uppercase unit) instead of `INTERVAL '1\nhour'`  \nSee the [ClickHouse SQL\ndocumentation](https:\/\/clickhouse.com\/docs\/en\/sql-reference\/) for full\nfunction reference.  \nYou can use them to:\n- Filter or aggregate source tables\n- Join multiple tables\n- Create derived features from existing columns\n- Reshape data structures such as JSON","document_title":"Table & View basics","h1":"Table & View Basics","h2":"Views","h3":"SQL view","h4":"","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\", \"Header 2\": \"Views\", \"Header 3\": \"SQL view\"}","created_at":"2026-01-30T13:46:43.838397","updated_at":"2026-01-30T13:46:43.838397"}
{"id":"94e04990-f365-5d79-ab13-14cbddd8037f","content":"#### Materialized vs On-Demand Views  \nShaped supports two types of SQL views:  \n**Materialized views** (default): The view query is executed and the results\nare stored as a physical table. Materialized views are updated automatically\nwhen source tables change.  \n- **Pros**: Fast query performance, pre-computed results\n- **Cons**: Takes storage space, slight delay in updates\n- **Use when**: You need fast queries, the view is used frequently, or you're\njoining large tables  \n**On-demand views**: The view query is executed each time the view is accessed.\nResults are computed on-the-fly.  \n- **Pros**: Always up-to-date, no storage overhead\n- **Cons**: Slower query performance, recomputes on every access\n- **Use when**: Data changes frequently, you need real-time results, or storage\nis a concern  \nTo create an on-demand view, set `sql_view_type: \"VIEW\"`:  \n```sql\nSELECT *\nFROM items\nWHERE updated_at > now() - INTERVAL 1 HOUR\n```  \n```json\nPOST \/v2\/views\n{\n\"name\": \"realtime_items\",\n\"view_type\": \"SQL\",\n\"sql_view_type\": \"VIEW\",\n\"sql_query\": \"SELECT * FROM items WHERE updated_at > now() - INTERVAL 1 HOUR\"\n}\n```  \nBy default, views use `sql_view_type: \"MATERIALIZED_VIEW\"` for optimal\nperformance.","document_title":"Table & View basics","h1":"Table & View Basics","h2":"Views","h3":"SQL view","h4":"Materialized vs On-Demand Views","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\", \"Header 2\": \"Views\", \"Header 3\": \"SQL view\", \"Header 4\": \"Materialized vs On-Demand Views\"}","created_at":"2026-01-30T13:46:43.838401","updated_at":"2026-01-30T13:46:43.838401"}
{"id":"271f4f20-5be7-5b3e-8c6e-6d82edd602b6","content":"#### Example: Join two tables","document_title":"Table & View basics","h1":"Table & View Basics","h2":"Views","h3":"SQL view","h4":"Example: Join two tables","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\", \"Header 2\": \"Views\", \"Header 3\": \"SQL view\", \"Header 4\": \"Example: Join two tables\"}","created_at":"2026-01-30T13:46:43.838404","updated_at":"2026-01-30T13:46:43.838404"}
{"id":"90f1de2e-e1c1-54ba-bc9b-41615c2a4518","content":"### Python\n```python\n\nurl = \"https:\/\/api.shaped.ai\/v2\/views\"\n\npayload = json.dumps({\n\"name\": \"hm_items_with_descriptions\",\n\"view_type\": \"SQL\",\n\"sql_query\": \"select * from hm_items items left join hm_items_with_descriptions ai_items on ai_items.item_id = items.item_id\"\n})\nheaders = {\n'Content-Type': 'application\/json',\n'x-api-key': 'LmBjMxgOtV1js4Zf3jiqw1VhnWfa7I1u9jBLSJeg'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n```","document_title":"Table & View basics","h1":"Table & View Basics","h2":"Views","h3":"Python","h4":"","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\", \"Header 2\": \"Views\", \"Header 3\": \"Python\"}","created_at":"2026-01-30T13:46:43.838408","updated_at":"2026-01-30T13:46:43.838408"}
{"id":"f1a93b60-9080-5e35-a107-3e503a11986c","content":"### HTTP\n```http\nPOST \/v2\/views HTTP\/1.1\nHost: api.shaped.ai\nContent-Type: application\/json\nx-api-key: LmBjMxgOtV1js4Zf3jiqw1VhnWfa7I1u9jBLSJeg\nContent-Length: 236\n\n{\n\"name\": \"hm_items_all_columns\",\n\"view_type\": \"SQL\",\n\"sql_query\" : \"select * from hm_articles items left join hm_items_with_descriptions ai_items on ai_items.item_id = items.item_id\"\n}\n```","document_title":"Table & View basics","h1":"Table & View Basics","h2":"Views","h3":"HTTP","h4":"","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\", \"Header 2\": \"Views\", \"Header 3\": \"HTTP\"}","created_at":"2026-01-30T13:46:43.838411","updated_at":"2026-01-30T13:46:43.838411"}
{"id":"04e60705-d52b-5814-b2c9-7637501f4e9d","content":"### AI view  \nAn AI view is created by running an LLM prompt against the records in a table.\nThey take columns from a source table, apply an LLM with a prompt, and output\nnew columns with enriched information.  \nUse them specifically to enrich data that will power semantic search.  \nLearn more in our AI enrichment guide - [Enrich your tables with\nAI](..\/data_reference\/ai-enrichment)","document_title":"Table & View basics","h1":"Table & View Basics","h2":"Views","h3":"AI view","h4":"","file_path":"concepts\/tables-and-views.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/concepts\/tables-and-views.mdx","chunk_metadata":"{\"Header 1\": \"Table & View Basics\", \"Header 2\": \"Views\", \"Header 3\": \"AI view\"}","created_at":"2026-01-30T13:46:43.838415","updated_at":"2026-01-30T13:46:43.838415"}
{"id":"64bd6b37-ef9f-5a20-a724-7f0b64e059d4","content":"# Overview  \nTutorials demonstrating how to configure recommendation and search engines using Shaped. Each tutorial covers a specific use case and dataset.","document_title":"Overview","h1":"Overview","h2":"","h3":"","h4":"","file_path":"tutorials\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Overview\"}","created_at":"2026-01-30T13:46:43.838575","updated_at":"2026-01-30T13:46:43.838575"}
{"id":"fab96e3c-6316-5f0e-8598-cdca43ddfaf3","content":"#### HackerNews\nConfigure a personalized feed for HackerNews using a custom ranking algorithm with text encoding.","document_title":"Overview","h1":"Overview","h2":"","h3":"","h4":"HackerNews","file_path":"tutorials\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Overview\", \"Header 4\": \"HackerNews\"}","created_at":"2026-01-30T13:46:43.838580","updated_at":"2026-01-30T13:46:43.838580"}
{"id":"242a2265-e942-57f7-9a73-d84b5979fddf","content":"#### Product Recommendations\nConfigure a product recommendation engine using the Amazon Product dataset with the Postgres connector.","document_title":"Overview","h1":"Overview","h2":"","h3":"","h4":"Product Recommendations","file_path":"tutorials\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Overview\", \"Header 4\": \"Product Recommendations\"}","created_at":"2026-01-30T13:46:43.838584","updated_at":"2026-01-30T13:46:43.838584"}
{"id":"73e685ab-9ddc-5ec6-8914-c1da1a74a2d8","content":"#### Movie Recommendations\nConfigure a movie recommendation engine using the MovieLens dataset.","document_title":"Overview","h1":"Overview","h2":"","h3":"","h4":"Movie Recommendations","file_path":"tutorials\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Overview\", \"Header 4\": \"Movie Recommendations\"}","created_at":"2026-01-30T13:46:43.838587","updated_at":"2026-01-30T13:46:43.838587"}
{"id":"68f828eb-0bc0-5d42-b414-37b7e5d6afd4","content":"#### Book Recommendations\nConfigure a book recommendation engine using the GoodBooks dataset and MongoDB connector.","document_title":"Overview","h1":"Overview","h2":"","h3":"","h4":"Book Recommendations","file_path":"tutorials\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Overview\", \"Header 4\": \"Book Recommendations\"}","created_at":"2026-01-30T13:46:43.838591","updated_at":"2026-01-30T13:46:43.838591"}
{"id":"f19d8a99-2355-50ba-8c49-833856257487","content":"#### Marketplace Recommendations\nConfigure a marketplace recommendation engine using the RentTheRunway dataset.","document_title":"Overview","h1":"Overview","h2":"","h3":"","h4":"Marketplace Recommendations","file_path":"tutorials\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Overview\", \"Header 4\": \"Marketplace Recommendations\"}","created_at":"2026-01-30T13:46:43.838594","updated_at":"2026-01-30T13:46:43.838594"}
{"id":"b84d7e17-ee3f-594d-9945-74b51ed33f02","content":"#### Artist Recommendations\nConfigure a music artist recommendation engine using the LastFM dataset.","document_title":"Overview","h1":"Overview","h2":"","h3":"","h4":"Artist Recommendations","file_path":"tutorials\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Overview\", \"Header 4\": \"Artist Recommendations\"}","created_at":"2026-01-30T13:46:43.838597","updated_at":"2026-01-30T13:46:43.838597"}
{"id":"34950dbf-0385-59e7-958e-154c1aff9ce5","content":"#### Game Recommendations\nConfigure a game recommendation engine using the Steam Reviews dataset.","document_title":"Overview","h1":"Overview","h2":"","h3":"","h4":"Game Recommendations","file_path":"tutorials\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Overview\", \"Header 4\": \"Game Recommendations\"}","created_at":"2026-01-30T13:46:43.838604","updated_at":"2026-01-30T13:46:43.838604"}
{"id":"e922c6e4-e626-559e-9459-24d8c80882cf","content":"#### Content Enrichment with LLMs\nUse views and an LLM to enrich a movie table with generated descriptions.","document_title":"Overview","h1":"Overview","h2":"","h3":"","h4":"Content Enrichment with LLMs","file_path":"tutorials\/overview.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/tutorials\/overview.mdx","chunk_metadata":"{\"Header 1\": \"Overview\", \"Header 4\": \"Content Enrichment with LLMs\"}","created_at":"2026-01-30T13:46:43.838608","updated_at":"2026-01-30T13:46:43.838608"}
{"id":"5da14921-1558-5905-8ad0-17b9f90a8da9","content":"# Train a basic engine  \nEngines are used for all retrieval and ranking in Shaped.\nSimple engines can be used for semantic search,\nwhile complex engines may do behavior-based retrieval.  \nEngines are configured declaratively with YAML or JSON. This guide\nwill show you how to configure a basic engine and create it in your account.","document_title":"Train a basic engine","h1":"Train a basic engine","h2":"","h3":"","h4":"","file_path":"overview\/train_engine.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/train_engine.mdx","chunk_metadata":"{\"Header 1\": \"Train a basic engine\"}","created_at":"2026-01-30T13:46:43.838737","updated_at":"2026-01-30T13:46:43.838737"}
{"id":"c5c97bcb-9b4d-5699-85cb-40814dccb38c","content":"## Prerequisites\n- A Shaped account and API key - [Get your API key](getting-an-api-key)\n- At least 1 table in your account - [Upload a table](upload_table)","document_title":"Train a basic engine","h1":"Train a basic engine","h2":"Prerequisites","h3":"","h4":"","file_path":"overview\/train_engine.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/train_engine.mdx","chunk_metadata":"{\"Header 1\": \"Train a basic engine\", \"Header 2\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.838741","updated_at":"2026-01-30T13:46:43.838741"}
{"id":"700ae4ed-c7a4-5492-a5a5-29d3cc56a644","content":"## Write your engine config  \nHere is an example of a minimal semantic search engine:  \n```yaml\n# engine.yaml\nversion: v2\nname: basic_engine\ndata:\nitem_table:\nname: movielens_items # change this to your table name\ntype: table\nindex:\nembeddings:\n- name: content_embedding # enables vector search\nencoder:\ntype: hugging_face\nmodel_name: sentence-transformers\/all-MiniLM-L6-v2\nbatch_size: 256\nitem_fields: # update these to your table's text columns\n- movie_title\n- description\n```","document_title":"Train a basic engine","h1":"Train a basic engine","h2":"Write your engine config","h3":"","h4":"","file_path":"overview\/train_engine.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/train_engine.mdx","chunk_metadata":"{\"Header 1\": \"Train a basic engine\", \"Header 2\": \"Write your engine config\"}","created_at":"2026-01-30T13:46:43.838745","updated_at":"2026-01-30T13:46:43.838745"}
{"id":"83aa868a-2a6e-5a94-9eac-fa61e2767abc","content":"## Create your engine via CLI  \nUpload the config file via CLI:\n```bash\nshaped create-engine --file engine.yaml\n```","document_title":"Train a basic engine","h1":"Train a basic engine","h2":"Create your engine via CLI","h3":"","h4":"","file_path":"overview\/train_engine.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/train_engine.mdx","chunk_metadata":"{\"Header 1\": \"Train a basic engine\", \"Header 2\": \"Create your engine via CLI\"}","created_at":"2026-01-30T13:46:43.838748","updated_at":"2026-01-30T13:46:43.838748"}
{"id":"7fdab388-5dbc-5509-a07a-cc880e0fdff3","content":"## Patch your engine  \nIf you make changes to your config and want to re-train your engine, use the\n`update-engine` command:\n```bash\nshaped update-engine --file engine.yaml\n```  \nShaped will automatically detect what has changed and only retrain or reindex the affected\ncomponents. For more details on how patching works, see the [Engines documentation](..\/concepts\/engines#gitops-flow-and-patching).","document_title":"Train a basic engine","h1":"Train a basic engine","h2":"Patch your engine","h3":"","h4":"","file_path":"overview\/train_engine.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/train_engine.mdx","chunk_metadata":"{\"Header 1\": \"Train a basic engine\", \"Header 2\": \"Patch your engine\"}","created_at":"2026-01-30T13:46:43.838751","updated_at":"2026-01-30T13:46:43.838751"}
{"id":"68563600-ec6a-5888-9e57-3745266297c7","content":"# Add a data table  \nShaped stores data in tables, which are imported via a data connector.\nShaped supports import from over [20 different sources](\/docs\/v2\/connectors\/overview).","document_title":"Add a data table","h1":"Add a data table","h2":"","h3":"","h4":"","file_path":"overview\/upload_table.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/upload_table.mdx","chunk_metadata":"{\"Header 1\": \"Add a data table\"}","created_at":"2026-01-30T13:46:43.838891","updated_at":"2026-01-30T13:46:43.838891"}
{"id":"23d959b6-7218-5068-b768-448ca081cc5b","content":"## Prerequisites\n- A Shaped API key - [Get your API key](getting-an-api-key)","document_title":"Add a data table","h1":"Add a data table","h2":"Prerequisites","h3":"","h4":"","file_path":"overview\/upload_table.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/upload_table.mdx","chunk_metadata":"{\"Header 1\": \"Add a data table\", \"Header 2\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.838895","updated_at":"2026-01-30T13:46:43.838895"}
{"id":"56490aa3-1508-52e1-a5e6-60e93aed743e","content":"## Upload a local table  \nThe easiest way to get started is to upload a sample table, like movielens.\nYou can upload your data via the Shaped UI or via the command line interface.  \n```bash\nshaped create-table-from-uri --name movielens_items --path movielens_items.jsonl --type jsonl\n```  \n**Info:**","document_title":"Add a data table","h1":"Add a data table","h2":"Upload a local table","h3":"","h4":"","file_path":"overview\/upload_table.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/upload_table.mdx","chunk_metadata":"{\"Header 1\": \"Add a data table\", \"Header 2\": \"Upload a local table\"}","created_at":"2026-01-30T13:46:43.838898","updated_at":"2026-01-30T13:46:43.838898"}
{"id":"eede2393-dfb5-5f88-8493-5c9099585add","content":"### Don't have a table?\nWe've prepared a sample table to start with. Download it from S3:\n```bash\ncurl -L -O \"https:\/\/shaped-onboarding-demo-datasets.s3.us-east-2.amazonaws.com\/movielens\/movielens_items.jsonl\"\n```","document_title":"Add a data table","h1":"Add a data table","h2":"Upload a local table","h3":"Don't have a table?","h4":"","file_path":"overview\/upload_table.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/upload_table.mdx","chunk_metadata":"{\"Header 1\": \"Add a data table\", \"Header 2\": \"Upload a local table\", \"Header 3\": \"Don't have a table?\"}","created_at":"2026-01-30T13:46:43.838902","updated_at":"2026-01-30T13:46:43.838902"}
{"id":"7dae42b8-30d3-5f73-a3bd-7ffa8fe8c287","content":"## Use a data connector  \nYou can also connect Shaped to a production data source, such as a MySQL database or a Kafka cluster.  \n```bash\nshaped create-table --file connector_config.yaml\n```  \nYour connector config should contain the login details and schema for your data source. The following example shows connecting Shaped to a Clickhouse database:  \n```yaml\nname: customer_click_events\ndescription: Customer click events table for analytics and recommendations\nschema_type: CLICKHOUSE\nhost: clickhouse.example.com\nport: 9000\nuser: clickhouse_user\npassword: your_secure_password\ndatabase: analytics\ntable: customer_clicks\nreplication_key: created_at\ncolumns:\n- user_id\n- item_id\n- click_timestamp\n- page_url\n- session_id\n- device_type\n- created_at\nunique_keys:\n- user_id\n- item_id\n- click_timestamp\n```  \nLearn more about the data connectors we support: [Data connector reference](\/docs\/v2\/connectors\/overview)","document_title":"Add a data table","h1":"Add a data table","h2":"Use a data connector","h3":"","h4":"","file_path":"overview\/upload_table.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/upload_table.mdx","chunk_metadata":"{\"Header 1\": \"Add a data table\", \"Header 2\": \"Use a data connector\"}","created_at":"2026-01-30T13:46:43.838905","updated_at":"2026-01-30T13:46:43.838905"}
{"id":"5f3a3043-99b4-5a72-ae57-b0ee9f657ca1","content":"# Make a query  \nQueries retrieve data from a Shaped engine. You can write ad-hoc queries to try different retrieval strategies at runtime, or run saved queries to standardize retrieval across your codebase.\nA query can do a single filter operation or run multiple retrievers in sequence.","document_title":"Make a query","h1":"Make a query","h2":"","h3":"","h4":"","file_path":"overview\/query_api.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/query_api.mdx","chunk_metadata":"{\"Header 1\": \"Make a query\"}","created_at":"2026-01-30T13:46:43.839118","updated_at":"2026-01-30T13:46:43.839118"}
{"id":"a8a6c9d2-80ad-509c-9624-d611a1f236db","content":"## Prerequisites  \nYou need to set up the following before you can make a query:  \n1. Have a Shaped account with an API key - [Get your API key](getting-an-api-key)\n2. Have at least 1 table uploaded to Shaped - [Upload a table](upload_table)\n3. Have at least 1 engine trained - [Train an engine](train_engine)","document_title":"Make a query","h1":"Make a query","h2":"Prerequisites","h3":"","h4":"","file_path":"overview\/query_api.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/query_api.mdx","chunk_metadata":"{\"Header 1\": \"Make a query\", \"Header 2\": \"Prerequisites\"}","created_at":"2026-01-30T13:46:43.839123","updated_at":"2026-01-30T13:46:43.839123"}
{"id":"34f36bd3-4067-5052-ab63-ea1c893cb6e9","content":"## Make an ad-hoc query  \nAd-hoc queries are defined at runtime by the client using ShapedQL (SQL).","document_title":"Make a query","h1":"Make a query","h2":"Make an ad-hoc query","h3":"","h4":"","file_path":"overview\/query_api.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/query_api.mdx","chunk_metadata":"{\"Header 1\": \"Make a query\", \"Header 2\": \"Make an ad-hoc query\"}","created_at":"2026-01-30T13:46:43.839127","updated_at":"2026-01-30T13:46:43.839127"}
{"id":"caf8b376-de41-579e-b02d-981889f8285d","content":"### ShapedQL\n```sql\nSELECT *\nFROM similarity(embedding_ref='als',\nencoder='item_attribute_pooling',\ninput_item_id=$item_id,\nlimit=50)\nLIMIT 20\n```","document_title":"Make a query","h1":"Make a query","h2":"Make an ad-hoc query","h3":"ShapedQL","h4":"","file_path":"overview\/query_api.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/query_api.mdx","chunk_metadata":"{\"Header 1\": \"Make a query\", \"Header 2\": \"Make an ad-hoc query\", \"Header 3\": \"ShapedQL\"}","created_at":"2026-01-30T13:46:43.839130","updated_at":"2026-01-30T13:46:43.839130"}
{"id":"d44303ae-88c6-51be-99b5-e0728567abfe","content":"### JavaScript\n```javascript\nfetch(\"https:\/\/api.shaped.ai\/v2\/engines\/movies\/query\", {\nmethod: \"POST\",\nheaders: {\n\"Content-Type\": \"application\/json\",\n\"x-api-key\": \"YOUR_API_KEY\"\n},\nbody: JSON.stringify({\nquery: \"SELECT * FROM similarity(embedding_ref='als', limit=50, encoder='item_attribute_pooling', input_item_id=$item_id) LIMIT 20\",\nparameters: {\nitem_id: \"db1234\"\n}\n})\n})\n```","document_title":"Make a query","h1":"Make a query","h2":"Make an ad-hoc query","h3":"JavaScript","h4":"","file_path":"overview\/query_api.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/query_api.mdx","chunk_metadata":"{\"Header 1\": \"Make a query\", \"Header 2\": \"Make an ad-hoc query\", \"Header 3\": \"JavaScript\"}","created_at":"2026-01-30T13:46:43.839133","updated_at":"2026-01-30T13:46:43.839133"}
{"id":"41d6c693-bb11-59e4-bdd6-1f5631e51a50","content":"### Python\n```python\n\nresponse = requests.post(\n\"https:\/\/api.shaped.ai\/v2\/engines\/movies\/query\",\nheaders={\n\"Content-Type\": \"application\/json\",\n\"x-api-key\": \"YOUR_API_KEY\"\n},\njson={\n\"query\": \"SELECT * FROM similarity(embedding_ref='als', limit=50, encoder='item_attribute_pooling', input_item_id=$item_id) LIMIT 20\",\n\"parameters\": {\n\"item_id\": \"db1234\"\n}\n}\n)\nprint(response.json())\n```","document_title":"Make a query","h1":"Make a query","h2":"Make an ad-hoc query","h3":"Python","h4":"","file_path":"overview\/query_api.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/query_api.mdx","chunk_metadata":"{\"Header 1\": \"Make a query\", \"Header 2\": \"Make an ad-hoc query\", \"Header 3\": \"Python\"}","created_at":"2026-01-30T13:46:43.839137","updated_at":"2026-01-30T13:46:43.839137"}
{"id":"5eb40377-dc61-5e59-9e11-0e8bdb2abffe","content":"## Execute a saved query  \nSaved queries are declared on the engine level. They allow multiple clients (eg a mobile app and website) to execute the same queries against an engine.","document_title":"Make a query","h1":"Make a query","h2":"Execute a saved query","h3":"","h4":"","file_path":"overview\/query_api.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/query_api.mdx","chunk_metadata":"{\"Header 1\": \"Make a query\", \"Header 2\": \"Execute a saved query\"}","created_at":"2026-01-30T13:46:43.839140","updated_at":"2026-01-30T13:46:43.839140"}
{"id":"8ec2e84c-3d99-516f-872d-ad9a954bc5fb","content":"### Save a query  \nIn your engine config, set saved queries in the `queries` block. You can replace any runtime config like user ID or text query with parameters, with the syntax `$params.parameter_name`.","document_title":"Make a query","h1":"Make a query","h2":"Execute a saved query","h3":"Save a query","h4":"","file_path":"overview\/query_api.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/query_api.mdx","chunk_metadata":"{\"Header 1\": \"Make a query\", \"Header 2\": \"Execute a saved query\", \"Header 3\": \"Save a query\"}","created_at":"2026-01-30T13:46:43.839144","updated_at":"2026-01-30T13:46:43.839144"}
{"id":"387e048d-88f1-55ca-aa94-22b9bdf7d515","content":"### Run a query  \nAt runtime, call the endpoint `POST \/v2\/engines\/{engine_name}\/queries\/{query_name}`:","document_title":"Make a query","h1":"Make a query","h2":"Execute a saved query","h3":"Run a query","h4":"","file_path":"overview\/query_api.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/query_api.mdx","chunk_metadata":"{\"Header 1\": \"Make a query\", \"Header 2\": \"Execute a saved query\", \"Header 3\": \"Run a query\"}","created_at":"2026-01-30T13:46:43.839147","updated_at":"2026-01-30T13:46:43.839147"}
{"id":"4acfe8c8-87f2-52cf-b93c-b0cd56ae25b0","content":"### JavaScript\n```javascript\nfetch(\"https:\/\/api.shaped.ai\/v2\/engines\/movies\/queries\/get_recommended_items\", {\nmethod: \"POST\",\nheaders: {\n\"Content-Type\": \"application\/json\",\n\"x-api-key\": \"YOUR_API_KEY\"\n},\nbody: JSON.stringify({\nparameters: {\nuser_id: \"db1234\"\n}\n})\n})\n```","document_title":"Make a query","h1":"Make a query","h2":"Execute a saved query","h3":"JavaScript","h4":"","file_path":"overview\/query_api.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/query_api.mdx","chunk_metadata":"{\"Header 1\": \"Make a query\", \"Header 2\": \"Execute a saved query\", \"Header 3\": \"JavaScript\"}","created_at":"2026-01-30T13:46:43.839151","updated_at":"2026-01-30T13:46:43.839151"}
{"id":"741270b3-04f1-5e46-9318-40f44cd68812","content":"### Python\n```python\n\nresponse = requests.post(\n\"https:\/\/api.shaped.ai\/v2\/engines\/movies\/queries\/get_recommended_items\",\nheaders={\n\"Content-Type\": \"application\/json\",\n\"x-api-key\": \"YOUR_API_KEY\"\n},\njson={\n\"parameters\": {\n\"user_id\": \"db1234\"\n}\n}\n)\nprint(response.json())\n```","document_title":"Make a query","h1":"Make a query","h2":"Execute a saved query","h3":"Python","h4":"","file_path":"overview\/query_api.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/query_api.mdx","chunk_metadata":"{\"Header 1\": \"Make a query\", \"Header 2\": \"Execute a saved query\", \"Header 3\": \"Python\"}","created_at":"2026-01-30T13:46:43.839154","updated_at":"2026-01-30T13:46:43.839154"}
{"id":"b9a5fbe9-eb3a-5eb6-aafb-2fcd7786dc51","content":"# Getting an API key  \nYou can access your API keys from the Shaped dashboard.  \n**Tip:** There are two types of API key: read-only and read-write. Your applications should default to using a read-only API key, and only use a read-write key if you absolutely need to.","document_title":"Get your API key","h1":"Getting an API key","h2":"","h3":"","h4":"","file_path":"overview\/getting-an-api-key.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/getting-an-api-key.mdx","chunk_metadata":"{\"Header 1\": \"Getting an API key\"}","created_at":"2026-01-30T13:46:43.839247","updated_at":"2026-01-30T13:46:43.839247"}
{"id":"a053aabe-01b6-5ae8-9be7-303431088e84","content":"### Get your key from the Home screen  \nYou can access your API key directly from the home page:","document_title":"Get your API key","h1":"Getting an API key","h2":"","h3":"Get your key from the Home screen","h4":"","file_path":"overview\/getting-an-api-key.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/getting-an-api-key.mdx","chunk_metadata":"{\"Header 1\": \"Getting an API key\", \"Header 3\": \"Get your key from the Home screen\"}","created_at":"2026-01-30T13:46:43.839250","updated_at":"2026-01-30T13:46:43.839250"}
{"id":"da82b1ec-57eb-5b90-9373-e9520cfddc0f","content":"### Get your key from account settings  \nYou can also get your API keys from your account settings:  \n---","document_title":"Get your API key","h1":"Getting an API key","h2":"","h3":"Get your key from account settings","h4":"","file_path":"overview\/getting-an-api-key.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/getting-an-api-key.mdx","chunk_metadata":"{\"Header 1\": \"Getting an API key\", \"Header 3\": \"Get your key from account settings\"}","created_at":"2026-01-30T13:46:43.839254","updated_at":"2026-01-30T13:46:43.839254"}
{"id":"d7917c05-6fc9-52ea-93d9-002b3d7401c1","content":"## Need more help?  \nJoin our [Slack community](https:\/\/join.slack.com\/t\/shapedhq\/shared_invite\/zt-3kq01h8c2-uL5HB3j8wT7S6JxAjKMNcg) or [schedule a demo with our team.](https:\/\/www.shaped.ai\/contact)","document_title":"Get your API key","h1":"Getting an API key","h2":"Need more help?","h3":"","h4":"","file_path":"overview\/getting-an-api-key.mdx","absolute_path":"\/Users\/dipro\/Documents\/Development\/shaped-agent\/scripts\/data\/raw\/docs\/overview\/getting-an-api-key.mdx","chunk_metadata":"{\"Header 1\": \"Getting an API key\", \"Header 2\": \"Need more help?\"}","created_at":"2026-01-30T13:46:43.839257","updated_at":"2026-01-30T13:46:43.839257"}
